<!doctype html><html lang=zh-TW class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This is my technical blog. For taking learning notes and sharing my experience."><meta name=author content="Hans Tsai"><link href=https://hans-tsai.github.io/hans_blog/networking/networking/ rel=canonical><link href=../../cloud/k8s/cka/ rel=prev><link href=../../version_control/git/ rel=next><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.33"><title>Networking - Hans' blog</title><link rel=stylesheet href=../../assets/stylesheets/main.3cba04c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Poppins";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/custom.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../assets/stylesheets/custom.f7ec4df2.min.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#networking class=md-skip> 跳轉到 </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label=不再顯示此訊息> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> For updates follow <strong>@squidfunk</strong> on <a rel=me href=https://fosstodon.org/@squidfunk> <span class="twemoji mastodon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg> </span> <strong>Fosstodon</strong> </a> and <a href=https://twitter.com/squidfunk> <span class="twemoji twitter"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </span> <strong>Twitter</strong> </a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=頁首> <a href=../.. title="Hans' blog" class="md-header__button md-logo" aria-label="Hans' blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Hans' blog </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Networking </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=cyan data-md-color-accent=cyan aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=cyan data-md-color-accent=cyan aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=搜尋 placeholder=搜尋 autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=搜尋> <a href=javascript:void(0) class="md-search__icon md-icon" title=分享 aria-label=分享 data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=清除 aria-label=清除 tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> 正在初始化搜尋引擎 </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Hans-Tsai/hans_blog title=前往倉庫 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> hans-tsai/hans_blog </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=導覽列 data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Hans' blog" class="md-nav__button md-logo" aria-label="Hans' blog" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> Hans' blog </label> <div class=md-nav__source> <a href=https://github.com/Hans-Tsai/hans_blog title=前往倉庫 class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> hans-tsai/hans_blog </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Programming language </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Programming language </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../programming_language/nodejs/ class=md-nav__link> <span class=md-ellipsis> Node.js </span> </a> </li> <li class=md-nav__item> <a href=../../programming_language/java/ class=md-nav__link> <span class=md-ellipsis> Java </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Backend </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Backend </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Framework </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Framework </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../backend/framework/spring_boot/ class=md-nav__link> <span class=md-ellipsis> Spring Boot </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> System Design </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> System Design </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../backend/system_design/ddd/ class=md-nav__link> <span class=md-ellipsis> DDD </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Cloud </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Cloud </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> AWS </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cloud/aws/saa/ class=md-nav__link> <span class=md-ellipsis> SAA </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../cloud/k8s/cka/ class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Networking </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Networking </span> </a> <nav class="md-nav md-nav--secondary" aria-label=目錄> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目錄 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#osi-model class=md-nav__link> <span class=md-ellipsis> OSI Model </span> </a> </li> <li class=md-nav__item> <a href=#networking-protocol-ports class=md-nav__link> <span class=md-ellipsis> Networking Protocol &amp; Ports </span> </a> </li> <li class=md-nav__item> <a href=#latencythroughputperformance class=md-nav__link> <span class=md-ellipsis> Latency/Throughput/Performance </span> </a> <nav class=md-nav aria-label=Latency/Throughput/Performance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4-types-of-packet-delay class=md-nav__link> <span class=md-ellipsis> 4 types of packet delay </span> </a> </li> <li class=md-nav__item> <a href=#notes class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cdn class=md-nav__link> <span class=md-ellipsis> CDN </span> </a> </li> <li class=md-nav__item> <a href=#protocol class=md-nav__link> <span class=md-ellipsis> Protocol </span> </a> <nav class=md-nav aria-label=Protocol> <ul class=md-nav__list> <li class=md-nav__item> <a href=#layer-7-application-layer class=md-nav__link> <span class=md-ellipsis> Layer 7: Application Layer </span> </a> <nav class=md-nav aria-label="Layer 7: Application Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dns-domain-name-system class=md-nav__link> <span class=md-ellipsis> DNS (Domain Name System) </span> </a> </li> <li class=md-nav__item> <a href=#http-hypertext-transfer-protocol class=md-nav__link> <span class=md-ellipsis> HTTP (HyperText Transfer Protocol) </span> </a> </li> <li class=md-nav__item> <a href=#telnet-protocol class=md-nav__link> <span class=md-ellipsis> Telnet protocol </span> </a> </li> <li class=md-nav__item> <a href=#ftp-file-transfer-protocol class=md-nav__link> <span class=md-ellipsis> FTP (File Transfer Protocol) </span> </a> </li> <li class=md-nav__item> <a href=#ssh-secure-shell class=md-nav__link> <span class=md-ellipsis> SSH (Secure Shell) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-6-presentation-layer class=md-nav__link> <span class=md-ellipsis> Layer 6: Presentation Layer </span> </a> <nav class=md-nav aria-label="Layer 6: Presentation Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ssltls class=md-nav__link> <span class=md-ellipsis> SSL/TLS </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-4-transport-layer class=md-nav__link> <span class=md-ellipsis> Layer 4: Transport Layer </span> </a> <nav class=md-nav aria-label="Layer 4: Transport Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tcp-transmission-control-protocol class=md-nav__link> <span class=md-ellipsis> TCP (Transmission Control Protocol) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-3-network-layer class=md-nav__link> <span class=md-ellipsis> Layer 3: Network Layer </span> </a> <nav class=md-nav aria-label="Layer 3: Network Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#subnet class=md-nav__link> <span class=md-ellipsis> subnet </span> </a> </li> <li class=md-nav__item> <a href=#cidr-classless-inter-domain-routing class=md-nav__link> <span class=md-ellipsis> CIDR (Classless Inter-Domain Routing) </span> </a> </li> <li class=md-nav__item> <a href=#ip-internet-protocol class=md-nav__link> <span class=md-ellipsis> IP (Internet Protocol) </span> </a> </li> <li class=md-nav__item> <a href=#icmp-internet-control-message-protocol class=md-nav__link> <span class=md-ellipsis> ICMP (Internet Control Message Protocol) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tools class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> <nav class=md-nav aria-label=Tools> <ul class=md-nav__list> <li class=md-nav__item> <a href=#netcat-nc class=md-nav__link> <span class=md-ellipsis> netcat (nc) </span> </a> </li> <li class=md-nav__item> <a href=#ping class=md-nav__link> <span class=md-ellipsis> ping </span> </a> </li> <li class=md-nav__item> <a href=#traceroute class=md-nav__link> <span class=md-ellipsis> traceroute </span> </a> </li> <li class=md-nav__item> <a href=#mtr class=md-nav__link> <span class=md-ellipsis> mtr </span> </a> </li> <li class=md-nav__item> <a href=#tcpdumpwireshark class=md-nav__link> <span class=md-ellipsis> tcpdump/wireshark </span> </a> <nav class=md-nav aria-label=tcpdump/wireshark> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tcpdump class=md-nav__link> <span class=md-ellipsis> tcpdump </span> </a> </li> <li class=md-nav__item> <a href=#wireshark class=md-nav__link> <span class=md-ellipsis> WireShark </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#iperf class=md-nav__link> <span class=md-ellipsis> iperf </span> </a> </li> <li class=md-nav__item> <a href=#curl class=md-nav__link> <span class=md-ellipsis> curl </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 其他學習資源 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Version Control </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Version Control </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../version_control/git/ class=md-nav__link> <span class=md-ellipsis> Git </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Coding Interview </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Coding Interview </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> Geeks for Geeks </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> Geeks for Geeks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding_interview/geeks_for_geeks/dsa_tutorial/ class=md-nav__link> <span class=md-ellipsis> DSA Tutorial </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> Tech interview handbook </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> Tech interview handbook </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../coding_interview/tech_interview_handbook/coding_interview_prepararion/ class=md-nav__link> <span class=md-ellipsis> Coding interview preparation </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex> <span class=md-ellipsis> Others </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Others </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../others/others/ class=md-nav__link> <span class=md-ellipsis> Others </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex> <span class=md-ellipsis> MkDocs Info </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> MkDocs Info </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mkdocs_info/mkdocs/ class=md-nav__link> <span class=md-ellipsis> MkDocs </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=目錄> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> 目錄 </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#osi-model class=md-nav__link> <span class=md-ellipsis> OSI Model </span> </a> </li> <li class=md-nav__item> <a href=#networking-protocol-ports class=md-nav__link> <span class=md-ellipsis> Networking Protocol &amp; Ports </span> </a> </li> <li class=md-nav__item> <a href=#latencythroughputperformance class=md-nav__link> <span class=md-ellipsis> Latency/Throughput/Performance </span> </a> <nav class=md-nav aria-label=Latency/Throughput/Performance> <ul class=md-nav__list> <li class=md-nav__item> <a href=#4-types-of-packet-delay class=md-nav__link> <span class=md-ellipsis> 4 types of packet delay </span> </a> </li> <li class=md-nav__item> <a href=#notes class=md-nav__link> <span class=md-ellipsis> Notes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#cdn class=md-nav__link> <span class=md-ellipsis> CDN </span> </a> </li> <li class=md-nav__item> <a href=#protocol class=md-nav__link> <span class=md-ellipsis> Protocol </span> </a> <nav class=md-nav aria-label=Protocol> <ul class=md-nav__list> <li class=md-nav__item> <a href=#layer-7-application-layer class=md-nav__link> <span class=md-ellipsis> Layer 7: Application Layer </span> </a> <nav class=md-nav aria-label="Layer 7: Application Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dns-domain-name-system class=md-nav__link> <span class=md-ellipsis> DNS (Domain Name System) </span> </a> </li> <li class=md-nav__item> <a href=#http-hypertext-transfer-protocol class=md-nav__link> <span class=md-ellipsis> HTTP (HyperText Transfer Protocol) </span> </a> </li> <li class=md-nav__item> <a href=#telnet-protocol class=md-nav__link> <span class=md-ellipsis> Telnet protocol </span> </a> </li> <li class=md-nav__item> <a href=#ftp-file-transfer-protocol class=md-nav__link> <span class=md-ellipsis> FTP (File Transfer Protocol) </span> </a> </li> <li class=md-nav__item> <a href=#ssh-secure-shell class=md-nav__link> <span class=md-ellipsis> SSH (Secure Shell) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-6-presentation-layer class=md-nav__link> <span class=md-ellipsis> Layer 6: Presentation Layer </span> </a> <nav class=md-nav aria-label="Layer 6: Presentation Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ssltls class=md-nav__link> <span class=md-ellipsis> SSL/TLS </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-4-transport-layer class=md-nav__link> <span class=md-ellipsis> Layer 4: Transport Layer </span> </a> <nav class=md-nav aria-label="Layer 4: Transport Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tcp-transmission-control-protocol class=md-nav__link> <span class=md-ellipsis> TCP (Transmission Control Protocol) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#layer-3-network-layer class=md-nav__link> <span class=md-ellipsis> Layer 3: Network Layer </span> </a> <nav class=md-nav aria-label="Layer 3: Network Layer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#subnet class=md-nav__link> <span class=md-ellipsis> subnet </span> </a> </li> <li class=md-nav__item> <a href=#cidr-classless-inter-domain-routing class=md-nav__link> <span class=md-ellipsis> CIDR (Classless Inter-Domain Routing) </span> </a> </li> <li class=md-nav__item> <a href=#ip-internet-protocol class=md-nav__link> <span class=md-ellipsis> IP (Internet Protocol) </span> </a> </li> <li class=md-nav__item> <a href=#icmp-internet-control-message-protocol class=md-nav__link> <span class=md-ellipsis> ICMP (Internet Control Message Protocol) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tools class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> <nav class=md-nav aria-label=Tools> <ul class=md-nav__list> <li class=md-nav__item> <a href=#netcat-nc class=md-nav__link> <span class=md-ellipsis> netcat (nc) </span> </a> </li> <li class=md-nav__item> <a href=#ping class=md-nav__link> <span class=md-ellipsis> ping </span> </a> </li> <li class=md-nav__item> <a href=#traceroute class=md-nav__link> <span class=md-ellipsis> traceroute </span> </a> </li> <li class=md-nav__item> <a href=#mtr class=md-nav__link> <span class=md-ellipsis> mtr </span> </a> </li> <li class=md-nav__item> <a href=#tcpdumpwireshark class=md-nav__link> <span class=md-ellipsis> tcpdump/wireshark </span> </a> <nav class=md-nav aria-label=tcpdump/wireshark> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tcpdump class=md-nav__link> <span class=md-ellipsis> tcpdump </span> </a> </li> <li class=md-nav__item> <a href=#wireshark class=md-nav__link> <span class=md-ellipsis> WireShark </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#iperf class=md-nav__link> <span class=md-ellipsis> iperf </span> </a> </li> <li class=md-nav__item> <a href=#curl class=md-nav__link> <span class=md-ellipsis> curl </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 其他學習資源 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=networking>Networking<a class=headerlink href=#networking title="Permanent link">&para;</a></h1> <p>重點整理</p> <div class=toc><span class=toctitle>目錄</span><ul> <li><a href=#networking>Networking</a><ul> <li><a href=#osi-model>OSI Model</a></li> <li><a href=#networking-protocol-ports>Networking Protocol &amp; Ports</a></li> <li><a href=#latencythroughputperformance>Latency/Throughput/Performance</a><ul> <li><a href=#4-types-of-packet-delay>4 types of packet delay</a></li> <li><a href=#notes>Notes</a></li> </ul> </li> <li><a href=#cdn>CDN</a></li> <li><a href=#protocol>Protocol</a><ul> <li><a href=#layer-7-application-layer>Layer 7: Application Layer</a><ul> <li><a href=#dns-domain-name-system>DNS (Domain Name System)</a></li> <li><a href=#http-hypertext-transfer-protocol>HTTP (HyperText Transfer Protocol)</a></li> <li><a href=#telnet-protocol>Telnet protocol</a></li> <li><a href=#ftp-file-transfer-protocol>FTP (File Transfer Protocol)</a></li> <li><a href=#ssh-secure-shell>SSH (Secure Shell)</a></li> </ul> </li> <li><a href=#layer-6-presentation-layer>Layer 6: Presentation Layer</a><ul> <li><a href=#ssltls>SSL/TLS</a></li> </ul> </li> <li><a href=#layer-4-transport-layer>Layer 4: Transport Layer</a><ul> <li><a href=#tcp-transmission-control-protocol>TCP (Transmission Control Protocol)</a></li> </ul> </li> <li><a href=#layer-3-network-layer>Layer 3: Network Layer</a><ul> <li><a href=#subnet>subnet</a></li> <li><a href=#cidr-classless-inter-domain-routing>CIDR (Classless Inter-Domain Routing)</a></li> <li><a href=#ip-internet-protocol>IP (Internet Protocol)</a></li> <li><a href=#icmp-internet-control-message-protocol>ICMP (Internet Control Message Protocol)</a></li> </ul> </li> </ul> </li> <li><a href=#tools>Tools</a><ul> <li><a href=#netcat-nc>netcat (nc)</a></li> <li><a href=#ping>ping</a></li> <li><a href=#traceroute>traceroute</a></li> <li><a href=#mtr>mtr</a></li> <li><a href=#tcpdumpwireshark>tcpdump/wireshark</a><ul> <li><a href=#tcpdump>tcpdump</a></li> <li><a href=#wireshark>WireShark</a></li> </ul> </li> <li><a href=#iperf>iperf</a></li> <li><a href=#curl>curl</a></li> </ul> </li> <li><a href=#_1>其他學習資源</a></li> </ul> </li> </ul> </div> <h2 id=osi-model>OSI Model<a class=headerlink href=#osi-model title="Permanent link">&para;</a></h2> <ul> <li> <p>OSI model vs. TCP/IP model</p> <ul> <li>OSI model: 七層</li> <li>TCP/IP model: 四層</li> </ul> <p><img alt src=../../assets/pics/networking/osi_model_and_data_type.png> <br> <a href=https://www.auvik.com/franklyit/blog/osi-model-explained/ >圖片出處</a></p> </li> <li> <p>OSI model &amp; Networking Protocol</p> <p><img alt src=../../assets/pics/networking/osi_model_networking_protocol.png> <br> <a href=https://www.bmc.com/blogs/osi-model-7-layers/ >圖片出處</a></p> <ul> <li><strong>socket</strong>: 屬於<strong>表現層（Layer 6）</strong>。socket 是一個抽象的概念，用於描述通訊的一端，通常由 IP address + port number 所組成</li> <li><strong>port</strong>: 屬於<strong>傳輸層（Layer 4）</strong>。只有 TCP, UDP 協定才能指示封包應去往哪個 port，因為 TCP, UDP 標頭會有一個用於指示 port number 的區段</li> </ul> </li> </ul> <h2 id=networking-protocol-ports>Networking Protocol &amp; Ports<a class=headerlink href=#networking-protocol-ports title="Permanent link">&para;</a></h2> <ul> <li>常見的網路協定與相對應的 port <img alt src=../../assets/pics/networking/networking_port_summary.png></li> </ul> <h2 id=latencythroughputperformance>Latency/Throughput/Performance<a class=headerlink href=#latencythroughputperformance title="Permanent link">&para;</a></h2> <ul> <li> <p><strong>延遲 (Latency)</strong>: 將封包從一端傳輸到另一端所需的時間 <img alt src=../../assets/pics/networking/compare_latency_and_iops.png> <a href="https://youtu.be/fPV0-J4DgOE?si=ut34f--Zk4faMAlv">圖片連結</a></p> </li> <li> <p><strong>吞吐量 (Throughput)</strong>: 在一段時間內進入/傳出硬碟的資料量 <img alt src=../../assets/pics/networking/compare_throughput_and_latency.png></p> </li> <li> <p><strong>頻寬 (Bandwidth)</strong>: 在一條邏輯 or 實體通訊路徑中的最大吞吐量 <img alt src=../../assets/pics/networking/compare_latency_and_bandwidth.png> <a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch01.html>圖片連結</a></p> </li> <li> <p><strong>往返時間 (Round-Trip Time, RTT)</strong>: 從發送封包 ～ 接收到回應封包所需的時間</p> <ul> <li>包括 Processing delay, Queuing delay, Transmission delay, Propagation delay</li> <li>是衡量網路效能的重要指標之一，數值越小表示網路傳輸效率越高 <img alt src=../../assets/pics/networking/rtt_definition.png></li> </ul> </li> </ul> <h3 id=4-types-of-packet-delay>4 types of packet delay<a class=headerlink href=#4-types-of-packet-delay title="Permanent link">&para;</a></h3> <p><img alt src=../../assets/pics/networking/packet_delay_processing_and_queue.png> <img alt src=../../assets/pics/networking/packet_delay_transmission_and_propagation.png></p> <ul> <li><strong>Processing delay</strong>: 處理封包標頭、bit-level 錯誤檢查、決定封包的目的地，所需花費的時間<ul> <li>通常是微秒級 (10<sup>-6</sup> 秒)</li> </ul> </li> <li><strong>Queuing delay</strong>: 封包在 router 的 queue 中等待被處理的時間<ul> <li>取決於 router 的 traffic load</li> </ul> </li> <li><strong>Transmission delay</strong>: 封包從 router 的 output port 輸出到 link 上所需花費的時間<ul> <li>取決於封包長度、link 的頻寬</li> </ul> </li> <li><strong>Propagation delay</strong>: 封包在 link 上傳播所需花費的時間<ul> <li>取決於 link 的長度、傳播速度</li> <li>Propagation delay 是由傳輸 link 的可用資料速率所決定的，與客戶端, 伺服器之間的距離無關</li> </ul> </li> </ul> <h3 id=notes>Notes<a class=headerlink href=#notes title="Permanent link">&para;</a></h3> <ul> <li><strong>網路資料速率</strong>通常以 bits per second (<strong>bps</strong>) 表示; 而<strong>非網路設備的資料速率</strong>通常以 bytes per second (<strong>Bps</strong>) 表示</li> <li>內容交付網路 (CDN): 在全球範圍內分發內容並從附近位置向客戶端提供內容，使我們能夠顯著減少所有資料封包的傳播時間<ul> <li>雖然我們無法使資料封包傳輸得更快，但我們可以透過策略性地<strong>將伺服器放置在更靠近使用者的位置來縮短距離</strong>，從而減少傳播延遲</li> </ul> </li> <li>最後一哩延遲 (Last-Mile Latency): 事實上，網路延遲主要發生在 家戶、辦公室 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> ISP <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> 網際網路 這段上，而非跨越海洋 or 大陸的海底電纜傳輸過程上<ul> <li>根據連接類型、路由方法、部署的技術，僅前幾跳（最後一哩延遲）就可能需要數十毫秒<ul> <li>光纖: 10-20 毫秒 (平均性能最佳)</li> <li>電纜: 15-40 毫秒</li> <li>數位用戶線路 (Digital Subscriber Line, DSL): 30-65 毫秒</li> </ul> </li> <li>可運用 <code>traceroute</code> 指令，來追蹤資料封包傳輸時，每一跳的路徑 <img alt src=../../assets/pics/networking/traceroute_check_latency.png> <a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch01.html>圖片出處</a></li> </ul> </li> <li>對於大多數網站來說，<strong>延遲才是效能能瓶頸</strong>，而不是頻寬！ <img alt src=../../assets/pics/networking/latency_affect_performance.png> <a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch10.html#SPEED_PERFORMANCE_HUMAN_PERCEPTION>圖片出處</a></li> <li>實務上，作為一個參考依據，收看一個 HD 串流影片約需 2 ~ 10 Mbps 的頻寬，而 4K 影片則需要 25 Mbps 以上的頻寬，具體取決於影片解析度、編/解碼器</li> <li>參考連結: <a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch01.html>O'Reilly: High Performance Browser Networking</a></li> </ul> <h2 id=cdn>CDN<a class=headerlink href=#cdn title="Permanent link">&para;</a></h2> <ul> <li> <p>說明: 內容交付網路（Content Delivery Network, CDN）是一種互連伺服器網路，可加快資料密集型應用程式的網頁載入速度。存放在 CDN 伺服器上的網站內容在地理位置上靠近使用者，便能更快地傳送到他們的電腦 <img alt src=../../assets/pics/networking/cdn.png> <a href=https://en.wikipedia.org/wiki/Content_delivery_network>圖片出處</a></p> </li> <li> <p>主要目的: <strong>減少由網路設計造成的通訊延遲</strong></p> </li> <li>CDN 優點<ul> <li><strong>縮短頁面載入時間</strong></li> <li><strong>降低頻寬成本</strong>: 透過快取和其他最佳化，CDN 可以減少原始伺服器必須提供的資料量，從而降低網站擁有者的託管成本</li> <li><strong>提高內容的全球可用性</strong>: 一次太多訪客或網路硬體故障可能導致網站當機。CDN 服務可以處理更多的 Web 流量並減少 Web 伺服器的負載。此外，如果一台或多台 CDN 伺服器離線，其他營運伺服器可予以取代，以確保服務不中斷</li> </ul> </li> <li>應用情境<ul> <li><strong>高速內容交付</strong>: e.g. 路透社透過 CDN 及時向全球客戶提供新聞內容</li> <li><strong>即時串流</strong>: e.g. Netflix 透過 CDN 提供高品質的串流影片</li> <li><strong>支援多用戶同時使用</strong>: e.g. 線上遊戲公司可以透過 AWS CloudFront 來支援多用戶同時遊玩</li> </ul> </li> <li>CDN 重要功能<ul> <li><strong>CDN Geo-location</strong>: <strong>使用者根據其地理位置，自動連接到最近的 CDN 伺服器節點</strong>，從而減少延遲、提高資料傳輸速度、優化使用者體驗<ul> <li>例如: 若使用者位於亞洲，則 CDN 會自動將其連接到亞洲的伺服器，而不是位於北美的伺服器</li> </ul> </li> <li><strong>CDN Geo-restriction</strong>: <strong>根據使用者的地理位置限制其對某些內容的訪問</strong>。這種機制通常用於遵守版權或法律規範，限制某些國家、地區的使用者存取特定內容<ul> <li>例如: Geo-restriction 可以透過在 CDN 設定中限制 IP 位址範圍, 地區來實現</li> </ul> </li> </ul> </li> <li> <p>AWS CloudFront 服務</p> <ul> <li>是一種 <strong>CDN 服務</strong>，透過在<strong>邊緣位置 (edge locations)上快取內容，以提升讀取效能</strong><ul> <li>若所需的內容未在邊緣位置上快取，則必須向原始伺服器端取得</li> </ul> </li> <li> <p>支援 signed URL, signed cookie 它們可讓您控制誰可以存取 AWS CloudFront 的內容 <img alt src=../../assets/pics/networking/aws_cloudfront_signed_url_and_signed_cookie.png> <a href="Udemy: Tutorials Dojo">圖片出處</a></p> <ul> <li><strong>signed URL</strong>: 用於限制特定的 URL，以便只有擁有 signed URL 的人才能存取<ul> <li>使用情境: <ul> <li>限制對單一檔案的存取權限，例如: 應用程式的安裝下載</li> <li>使用者正在使用不支援 cookie 的客戶端（例如: 自訂 HTTP 客戶端）</li> </ul> </li> </ul> </li> <li><strong>signed cookie</strong>: 用於限制特定的 cookie，以便只有擁有 signed cookie 的人才能存取<ul> <li>使用情境: <ul> <li>限制對多個檔案的存取權限，例如: 訂閱者能存取的所有限制內容</li> <li>不想改變現有的 URL</li> </ul> </li> </ul> </li> </ul> <blockquote> <p><strong>若同時使用，signed URL 會優先於 signed cookie</strong>，AWS CloudFront 會僅根據檢查 signed URL，來決定是否允許存取</p> </blockquote> </li> <li> <p>特色</p> <ul> <li><strong>Origin Access Control (OAC) - 較新的選項</strong><ul> <li>支援更細粒度的控制，並且支援多種 AWS 服務作為原點（例如: S3, ALB, EC2 等），不僅限於 S3</li> <li>提供了更強的安全控制，例如: 強制 HTTPS、增強的使用者認證機制</li> </ul> </li> <li><strong>Origin Access Identity (OAI)</strong><ul> <li>限制僅能透過 AWS CloudFront 存取 S3 檔案。<strong>防止使用者僅使用檔案的 URL 直接查看您的 S3 檔案</strong><ul> <li>若不想使用 OAI，則 S3 存儲桶必須允許公開存取權限</li> </ul> </li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/aws_cloudfront_oai.png> <a href="Udemy: Tutorials Dojo">圖片出處</a></p> </li> </ul> </li> <li> <p>參考連結: </p> <ul> <li><a href=https://aws.amazon.com/what-is/cdn>AWS: What is a CDN (Content Delivery Network)?</a></li> <li><a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-choosing-signed-urls-cookies.html>AWS: Decide to use signed URLs or signed cookies</a></li> </ul> </li> </ul> <h2 id=protocol>Protocol<a class=headerlink href=#protocol title="Permanent link">&para;</a></h2> <p><img alt src=../../assets/pics/networking/osi_model_7_layers_illustration.png> <a href=https://www.cloudflare.com/zh-tw/learning/ddos/glossary/open-systems-interconnection-model-osi/ >圖片出處</a></p> <p><img alt src=../../assets/pics/networking/osi_model_bytebytego.png> <a href=https://x.com/bytebytego/status/1609083351700475905/photo/1>圖片出處</a></p> <p><img alt src=../../assets/pics/networking/compare_osi_model_and_tcp_ip_model.png> <br> <a href=https://blog.bytebytego.com/p/network-protocols-run-the-internet>圖片出處</a></p> <h3 id=layer-7-application-layer>Layer 7: Application Layer<a class=headerlink href=#layer-7-application-layer title="Permanent link">&para;</a></h3> <h4 id=dns-domain-name-system>DNS (Domain Name System)<a class=headerlink href=#dns-domain-name-system title="Permanent link">&para;</a></h4> <ul> <li>說明: 是一種能將網域名稱轉換成 IP 位址（domain name <img alt=↔ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2194.svg title=:left_right_arrow:> IP address）的索引查詢服務。DNS 算是一個集合名詞，為各地、各機構的名稱伺服器（name server）所構成的綜合統稱</li> <li> <p>DNS 服務的功能:</p> <ul> <li>轉換 網域名稱 <img alt=↔ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2194.svg title=:left_right_arrow:> IP 位址</li> <li>支援 網域名稱的別名服務（alias）</li> <li>支援網頁伺服器的負載平衡: 讓多個 IP 位址都對應到同一個網域名稱，以實現負載平衡 <img alt src=../../assets/pics/networking/dns_feature.png></li> </ul> </li> <li> <p>DNS 的分散式、階層式架構</p> <ul> <li> <p>Local DNS Server: <strong>位於 ISP 內部</strong>，會先查看其快取內容（cache）中是否有匹配的 DNS entry; 若沒有，就會將查詢導向 Root DNS Server，繼續進一步的查詢</p> <ul> <li>Local DNS Server 不隸屬於任何一個 DNS 階層式架構的層級，而是一個獨立的 DNS 伺服器，其功能類似於 <code>/etc/hosts</code> 檔案<ul> <li>Local DNS Server 的快取是一個<strong>動態的、隨時間更新</strong>的資料庫，用於<strong>加速多次查詢相同域名的過程</strong></li> <li><code>/etc/hosts</code> 檔案則是一個<strong>靜態的、手動設定</strong>的快取檔案，<strong>優先級高於 DNS 伺服器查詢</strong></li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/dns_local_server.png></p> </li> <li> <p>Root DNS Server: 負責管理全球 DNS 名稱空間的最高層級，並<strong>將查詢導向下一層的 TLD DNS Server</strong></p> </li> <li>Top Level Domain DNS Server: 負責管理特定頂級域名（TLD）的 DNS 記錄，並將查詢導向下一層的 Authoritative DNS Server</li> <li>Authoritative DNS Server: 負責管理特定網域名稱的 DNS 記錄，並回答 DNS 查詢 <img alt src=../../assets/pics/networking/dns_hierarchical_architecture.png> <img alt src=../../assets/pics/networking/dns_tld_and_authorative_server.png></li> </ul> </li> <li> <p>DNS 查詢的兩種方式</p> <ul> <li> <p>Recursive Query: 客戶端會先對 Resolver Server 發送 DNS 查詢請求後，DNS 伺服器會<strong>將查詢導向下一層的 DNS 伺服器，直到找到匹配的 DNS 記錄，並將結果返回給客戶端</strong></p> <ul> <li><strong>預設採用這個 DNS 查詢方式，因為對客戶端較為簡單，只需等待最終答案即可</strong> <img alt src=../../assets/pics/networking/dns_recursive_query.png></li> </ul> </li> <li> <p>Iterative Query: 客戶端會先對 Resolver Server 發送 DNS 查詢請求後，DNS 伺服器會將查詢導向下一層的 DNS 伺服器，但<strong>不會等待結果，而是將查詢結果返回給客戶端，讓客戶端自行處理</strong></p> <ul> <li>減少對 DNS Server 的負擔，但對客戶端較為複雜，因為它必須處理多個查詢請求，直到獲得最終答案，故查詢過程可能較慢 <img alt src=../../assets/pics/networking/dns_iterative_query.png></li> </ul> </li> </ul> </li> <li> <p>DNS 查詢流程</p> <ul> <li>當客戶端發送 DNS 查詢時，Local DNS Server 會先查看其快取內容中是否有匹配的 DNS entry; 若沒有，就會將查詢導向 Root DNS Server，繼續進一步的查詢</li> <li>Root DNS Server 會將查詢導向下一層的 TLD DNS Server</li> <li>再將查詢導向下一層的 Authoritative DNS Server，最終回答 DNS 查詢</li> </ul> </li> <li> <p>DNS 紀錄的類型 <img alt src=../../assets/pics/networking/dns_records.png></p> <ul> <li> <p><strong>A (Address) Record</strong>: 將網域名稱 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> IPv4 位址</p> <ul> <li>使用情境: IP 位址查詢，這樣可以讓使用者的裝置連接並載入網站，而<strong>使用者無需記住並輸入實際 IP 位址</strong> <img alt src=../../assets/pics/networking/dns_a_record.png></li> </ul> </li> <li> <p><strong>AAAA (IPv6 Address) Record</strong>: 將網域名稱 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> IPv6 位址</p> <ul> <li>使用情境: <strong>僅當網域同時擁有 IPv4、IPv6 位址，且相關的用戶端裝置被設定為使用 IPv6 時，才會使用 AAAA 記錄</strong></li> <li>雖然所有網域都有一個或多個 IPv4 位址以及相對應的 A 記錄，但因為<strong>並非所有網域都有 IPv6 位址，也並非所有的使用者裝置都被設定為使用 IPv6</strong> <img alt src=../../assets/pics/networking/dns_aaaa_record.png></li> </ul> </li> <li> <p><strong>CNAME (Canonical Name) Record</strong>: 將網域名稱 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> 另一個網域名稱</p> <ul> <li>使用情境: 通常，<strong>當網站具有子網域（例如: blog.example.com 或 shop.example.com）時，這些子網域將具有指向根網域 (example.com) 的 CNAME 記錄</strong>。這樣，<strong>如果主機的 IP 發生變更，則僅需要更新根網域的 DNS A 記錄</strong>，這樣所有 CNAME 記錄都會跟隨對根所做的任何變更 <img alt src=../../assets/pics/networking/dns_cname_record.png></li> </ul> </li> <li> <p><strong>MX (Mail Exchange) Record</strong>: 將網域名稱 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> SMTP 郵件伺服器的 IP 位址</p> <blockquote> <p>MX 紀錄必須直接指向 A 紀錄 or AAAA 紀錄，而不能指向 CNAME 紀錄</p> </blockquote> <ul> <li>使用情境: <ul> <li>假設在一個大型企業中，有多個 SMTP 郵件伺服器，可提供備援方案。若主郵件伺服器無法存取，電子郵件會自動轉向備用伺服器，這樣可以提高郵件服務的穩定性、可靠性</li> <li>假設在一個大型企業中，有多個 SMTP 郵件伺服器，可提供負載平衡。這樣可以分散郵件流量，減少單一伺服器的負載</li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/dns_mx_record.png></p> </li> <li> <p><strong>NS (Name Server) Record</strong>: 將網域名稱 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> DNS 伺服器的 IP 位址</p> <blockquote> <p><strong>NS 紀錄不能指向 CNAME 紀錄</strong>，因為 CNAME 紀錄是用來指向另一個網域名稱的，而 <strong>NS 紀錄是用來指向 DNS 伺服器的 IP 位址的</strong></p> </blockquote> <ul> <li> <p><strong>更新 NS 記錄時，可能需要過幾個小時才能將變更複製到整個 DNS 中</strong>，這是因為 DNS 記錄有一個 TTL（Time to Live）值，這個值決定了 DNS 記錄在 DNS 伺服器上保留的時間</p> </li> <li> <p>使用情境: <strong>告訴網際網路要去哪一個 Authorative DNS Server 才能找到</strong>欲查詢的網域的 IP 位址。若沒有正確設定的 NS 記錄，使用者將無法載入網站或應用程式 <img alt src=../../assets/pics/networking/dns_ns_record.png></p> </li> </ul> </li> <li> <p><strong>PTR (Pointer) Record</strong>: 反向查詢 IP 位址 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> 網域名稱</p> <ul> <li>使用情境:<ul> <li><strong>反垃圾郵件</strong>: 有些電子郵件反垃圾郵件篩選器會使用反向 DNS 查詢來檢查電子郵件地址的網域名稱，並查看其所關聯的 IP 位址是否可能被合法電子郵件伺服器使用</li> <li><strong>日誌記錄</strong>: 系統記錄檔通常只會記錄 IP 位址; 而反向 DNS 查詢可以將這些 IP 位址轉換為網域名稱，以取得更易於閱讀的記錄檔</li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/dns_ptr_record.png> <br> <a href="https://www.google.com/url?sa=i&url=https%3A%2F%2Fmailtrap.io%2Fblog%2Fptr-records%2F&psig=AOvVaw2KzlX4G-5-pnjQ0tv-L7zu&ust=1723278085915000&source=images&cd=vfe&opi=89978449&ved=0CBEQjRxqFwoTCJj9saa954cDFQAAAAAdAAAAABAK">圖片出處</a></p> </li> <li> <p><strong>SOA (Start of Authority) Record</strong>: 是每個 DNS 區域的核心部分，包含了與該網域或區域相關的重要資訊 <img alt src=../../assets/pics/networking/dns_soa_record.png></p> </li> <li> <p><strong>SRV (Service) Record</strong>: <strong>為特定的服務（例如: VoIP、即時訊息）指定主機、port</strong>。大多數其他 DNS 記錄只指定一個伺服器或一個 IP 位址，但 SRV 記錄還包括該 IP 位址的一個連接埠。<strong>一些網際網路通訊協定需要使用 SRV 記錄才能運作</strong></p> <blockquote> <p><strong>SRV 紀錄的伺服器名稱欄位必須指向 A 紀錄 or AAAA 紀錄</strong>，而不能指向 CNAME 紀錄</p> </blockquote> <p><img alt src=../../assets/pics/networking/dns_srv_record.png></p> </li> <li> <p><strong>TXT (Text) Record</strong>: 用於存儲任意文本資訊</p> <ul> <li> <p>使用情境: </p> <ul> <li> <p>垃圾郵件防護</p> <ul> <li> <p>SPF（Sender Policy Framework）: TXT 記錄常用於定義 SPF 規則，這些規則<strong>指定哪些郵件伺服器被允許代表你的網域發送電子郵件，這有助於防止垃圾郵件、釣魚攻擊</strong> <div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>v=spf1 include:_spf.example.com ~all
</span></code></pre></div></p> </li> <li> <p>DKIM（DomainKeys Identified Mail）: TXT 記錄也用於<strong>存儲 DKIM 公鑰，這些公鑰用於驗證電子郵件的來源，確保郵件未被篡改</strong> <div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>v=DKIM1; k=rsa; p=公鑰
</span></code></pre></div></p> </li> </ul> </li> <li> <p>網域擁有權驗證</p> <ul> <li>SSL/TLS 證書驗證: 一些憑證頒發機構（CA）會要求你添加一個特定的 TXT 記錄，以<strong>驗證你對網域的控制權，從而頒發 SSL/TLS 證書</strong></li> </ul> </li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/dns_txt_record.png></p> </li> </ul> </li> <li> <p>參考連結:</p> <ul> <li><a href=https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/ResourceRecordTypes.html>AWS: Supported DNS record types</a></li> <li><a href="https://learn.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/cc961401(v=technet.10)?redirectedfrom=MSDN">Microsoft: Recursive and Iterative Queries</a></li> <li><a href=https://www.cloudflare.com/zh-tw/learning/dns/dns-records/ >Cloudflare: 什麼是 DNS 記錄？</a></li> </ul> </li> </ul> <h4 id=http-hypertext-transfer-protocol>HTTP (HyperText Transfer Protocol)<a class=headerlink href=#http-hypertext-transfer-protocol title="Permanent link">&para;</a></h4> <ul> <li>說明: 在 WWW 上，Client :left_arrow_right: Server 之間的傳輸通訊協定。採用 Request/Response 機制、連結導向服務的主從式架構</li> <li> <p>特色:</p> <ul> <li>HTTP 為<strong>無狀態協定（stateless protocol）</strong> ➞ 亦即，server 不必保留先前的請求 or 連線</li> <li>支援已存取過的網頁內容 =&gt; <strong>快取（caching）</strong> 能力</li> <li>允許代理伺服器（proxy server）負責處理網路快取 <img alt src=../../assets/pics/networking/http_proxy_server_caching.png></li> </ul> </li> <li> <p>HTTP 協定的版本演進</p> <ul> <li><strong>HTTP/1.0</strong>: 最初在 1989 年所發起制定，採用<strong>單一連線方式，每次只能處理一個請求</strong></li> <li><strong>HTTP/1.1: 解決重複 TCP 連線的問題</strong><ul> <li>HTTP/1.1 採用 pipelining 的機制</li> <li><strong>持久連接 (keep-alive)</strong></li> <li>更多的快取緩存策略（<code>Etag</code>, <code>If-Unmodified-Since</code>, <code>If-Match</code>, <code>If-None-Match</code>）</li> <li>Host 字段來區分同一台實體主機中的多台虛擬主機</li> <li>新增更多的 HTTP 方法（<code>PUT</code>, <code>PATCH</code>, <code>DELETE</code>, <code>CONNECT</code>, <code>TRACE</code>, <code>OPTIONS</code>）</li> </ul> </li> <li> <p><strong>HTTP/2: 解決頭部阻塞（head-of-line blocking）問題</strong></p> <ul> <li> <p><strong>多路複用 (request multiplexing)</strong>: 在同一個 TCP 連線中，同時發送、接受多個請求，並且不用等到前一個請求收到回應，透過這個機制，解決了過往在 HTTP/1.1 的頭部阻塞問題</p> <blockquote> <p>頭部阻塞問題（head-of-line blocking, HOL）: 如果有任一個請求要操作很久或傳輸包流失，那就會阻塞整個 pipeline 的工作</p> </blockquote> </li> <li> <p><strong>優先請求順序</strong>: HTTP/2 版本中，每個請求或回應的所有數據包，稱之為一個數據流，並且，每個數據流擁有一個唯一編號 ID (stream ID)。每個數據包在發送的時候就會戴上對應的數據流編號 ID，<strong>客戶端還能指定數據流的優先級，優先級越高服務器也會越快做出回應</strong></p> </li> <li><strong>標頭 (header) 訊息壓縮</strong>: HTTP/2 使用 HPACK 壓縮算法，<strong>將 HTTP 標頭壓縮，減少傳輸的大小</strong></li> <li><strong>伺服器主動推送</strong>(server push): <strong>HTTP/2 允許伺服器端主動向客戶端推送數據，這能協助減少客戶端的請求次數</strong><ul> <li>例如: 瀏覽器在過去要請求 index.html 與 style.css 來渲染完整的畫面；透過 server Push，可以在瀏覽器請求 index.html 時，也由伺服器主動發送 style.css，這樣只需要一輪 HTTP 的請求，就可以拿到所需的所有資源</li> </ul> </li> </ul> </li> <li> <p><strong>HTTP/3: 使用 QUIC 協定，並且在 UDP 上運行</strong>，以提升效能</p> <ul> <li>QUIC 通訊協定由 Google 於 2012 年開發，QUIC 專為行動密集型網際網路使用而設計，在這種環境中，人們攜帶的智慧型手機會在一天中不斷地從一個網路切換到另一個網路。開發第一個網際網路通訊協定時情況並非如此</li> <li><strong>採用 QUIC 協定代表 HTTP/3 將依賴於 UDP 協定</strong>，而不是 TCP 協定。<strong>切換到 UDP 將使線上瀏覽時的連線速度、使用者體驗更快</strong></li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/http_version_progression.png> <br> <a href="https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.researchgate.net%2Ffigure%2FComparison-of-HTTP-versions_fig1_312560536&psig=AOvVaw1tjew0NSmcpt1V9hpauvbp&ust=1723305811412000&source=images&cd=vfe&opi=89978449&ved=0CBEQjRxqFwoTCOCgrsek6IcDFQAAAAAdAAAAABAE">圖片出處</a></p> </li> <li> <p>HTTP 方法</p> <ul> <li>說明:<ul> <li>GET: 取得資源</li> <li>HEAD: 與 GET 類似，但只回傳表頭資訊，不回傳實際資源（body）。常用於<strong>檢查資源是否存在，以及獲取資源的 metadata</strong></li> <li>POST: 新增資源，通常會導致狀態變更，或對伺服器產生副作用。常用於<strong>提交表單 or 上傳文件</strong></li> <li>PUT: 更新資源，會將 request payload <strong>取代目標資源當前所有的內容。若資源不存在，會建立新的資源</strong></li> <li>DELETE: 刪除資源</li> <li>CONNECT: 建立客戶端 :left_arrow_right: 伺服器的隧道（tunnel），通常用於<strong>加密通訊，例如: HTTPS</strong></li> <li>OPTIONS: 用於描述伺服器支援的方法，並回傳相關的 HTTP 表頭資訊。常用於<strong>檢查跨域資源共享（CORS）政策</strong></li> <li>TRACE: 執行一個 loop-back 測試，用於<strong>追蹤 request 的路徑，主要用於除錯、測試</strong></li> <li>PATCH: 對資源進行<strong>局部更新，只修改資源的部分內容</strong>，而不是替換整個資源</li> </ul> </li> <li><strong>安全方法</strong>（Safe Methods）: 不會對資源進行修改的方法<ul> <li>GET, HEAD, OPTIONS, TRACE</li> </ul> </li> <li><strong>冪等方法</strong>（Idempotent Methods）: 無論對資源進行多少次操作，結果都是一樣的<ul> <li>GET, HEAD, <strong>PUT, DELETE</strong>, OPTIONS, TRACE</li> </ul> </li> </ul> </li> <li> <p>HTTP 訊息</p> <ul> <li> <p>HTTP 是一個 text-based 的傳輸協定，分成 <strong>request</strong> 和 <strong>response</strong> 兩種訊息 <div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>&lt;method&gt; &lt;URL&gt; &lt;version&gt;
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>&lt;header&gt;
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>...
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>...
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>&lt;header&gt;
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>&lt;body&gt; 
</span></code></pre></div></p> <p><img alt src=../../assets/pics/networking/http_request_message.png></p> <div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>&lt;version&gt; &lt;status code&gt; &lt;status message&gt;
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>&lt;header&gt;
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>...
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>...
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>&lt;header&gt;
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>&lt;body&gt; 
</span></code></pre></div> <p><img alt src=../../assets/pics/networking/http_response_message.png></p> </li> </ul> </li> <li> <p>HTTP 表頭（header）</p> <ul> <li>說明: 用於傳遞關於 <strong>request 或 response 的附加資訊</strong></li> <li>格式: <strong>key: value</strong></li> <li> <p>常見的 HTTP header <img alt src=../../assets/pics/networking/http_header.png></p> <ul> <li>Conditionals 類別: Client可能在之前已經取得過相關的資源，並且保有一份備份，如果此資源沒有更新時，可以不需要透過網路在傳輸一次，以節省時間及頻寬<ul> <li><strong>ETag</strong>: Response中，對於回傳的資料加的一個 tag，有點像是以資料為輸入的 hash 值，讓 client 可以後續使用，會在 <code>If-Match</code>及 <code>If-None-Match</code>，以下說明<ul> <li>Server 端接收請求，檢查是否與目前表示的 <strong>ETag 值相同</strong>，若相同則表示<strong>資源並未被更動</strong></li> </ul> </li> <li><strong>If-Match</strong>: Server 只有在 match 時，才會動作，通常在 PUT 操作時用於避免 lost update 的問題，例如: 你想編輯一頁 Wiki 的內容，你先要求了本來的頁面，server 回傳了 <code>Etag: A</code>，當你編輯完送出時，帶上 <code>If-Match: A</code> 的 header，表示只有當內容還是 A 版本時才會更新成功，如果在你編輯的時候有人已經先更新了頁面內容，則會回傳 412: Precondition Failed，如此一來，避免你的更新會蓋掉別人的更新</li> <li><strong>If-None-Match</strong>: Server 只會在沒有 match 時，才會回傳資料，因為如果 match 就代表 client 擁有的資料的 copy 還是最新的，就回傳 304: Not Modified，而不會再傳一次資料，這樣可以節省頻寬</li> <li><strong>Last-Modified</strong>: Response 中使用，用來說明回傳的資料最近修改的時間，好讓 client 可以 cache 起來並搭配<code>If-Modified_Since</code> 來更新，詳情見下面</li> <li><strong>If-Modified-Since</strong>: Request 使用此 header 來決定 cache 有沒有過期了，比如說上次拿取資源時 server response 了Last-Modified: Sun, 05 Sep 2021 01:40:14 GMT，這次再 request 相同資源時，就可以帶上 <code>If-Modified-Since</code>: Sun, 05 Sep 2021 01:40:14 GMT，表示若在 2021-09-05 這個時間點之後，資料並沒有更新，則 server 可以回傳 304: Not Modified，client 就能直接使用 cache， 而不需要再透過網路下載資料，反之，資料有更改的話，就回傳新的資料並帶上新的 <code>Last-Modified</code></li> </ul> </li> <li>Connection management 類別: 用於管理連線<ul> <li><strong>Connection</strong>: 用來告訴 server 這個連線是要<strong>持續使用 or 一次性的</strong>，如果是 keep-alive，則 server 會保持連線，直到 client 關閉連線，這樣可以節省建立連線的時間，提高效能</li> <li><strong>Keep-Alive</strong>: 用來告訴 server 這個連線要<strong>保持多久，通常是一個時間，如果超過這個時間，server 會主動關閉連線</strong>，這樣可以避免 server 一直保持連線，浪費資源</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>HTTP 狀態碼</p> <ul> <li> <p><strong>HTTP 狀態碼共分為五大類，第一個數字代表伺服器回應的大類</strong>，第二、三個數字再分為中類、小類</p> <ul> <li>1xx (Informational) — 資訊</li> <li>2xx (Successful) — 成功</li> <li>3xx (Redirection) — 重新導向</li> <li>4xx (Client Error) — 客戶端 錯誤</li> <li>5xx (Server Error) — 伺服端 錯誤 <img alt src=../../assets/pics/networking/http_status_code_summary.webp> <br> <a href=https://javaconceptoftheday.com/http-status-codes-cheat-sheet/ >圖片出處</a></li> </ul> </li> <li> <p>觀念釐清</p> <ul> <li> <p>301 vs. 302</p> <p><img alt src=../../assets/pics/networking/http_status_code_compare_301_and_302.png></p> </li> <li> <p>401 vs. 403 <img alt src=../../assets/pics/networking/http_status_code_compare_401_and_403.png></p> </li> </ul> </li> </ul> </li> <li> <p>參考連結:</p> <ul> <li><a href=https://www.explainthis.io/zh-hant/swe/http1.0-http1.1-http2.0-difference>HTTP/1、HTTP/1.1 和 HTTP/2 的區別</a></li> <li><a href=https://www.cloudflare.com/zh-tw/learning/performance/what-is-http3/ >Cloudflare: 什麽是 HTTP/3？</a></li> <li><a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods>MDN: HTTP request methods</a></li> <li><a href=https://homuchen.com/posts/http-headers/ >HTTP headers 簡介: 一些常用的 headers</a></li> <li><a href=https://notfalse.net/48/http-status-codes>HTTP 狀態碼 (Status Codes)</a></li> </ul> </li> </ul> <h4 id=telnet-protocol>Telnet protocol<a class=headerlink href=#telnet-protocol title="Permanent link">&para;</a></h4> <ul> <li>說明: 是一個應用層的協定，也是一個簡易網路診斷的工具。<strong>允許使用者透過 TCP 連線進入遠端伺服器</strong><ul> <li>使用 <strong>TCP port 23</strong></li> </ul> </li> <li> <p>功能: 執行程式、啟動/停止服務、瀏覽資料夾/檔案、<strong>測試 TCP 連線、檢查遠端伺服器的指定 port 是否開放</strong> <img alt src=../../assets/pics/networking/telnet_illustration.png></p> </li> <li> <p>基本指令 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>telnet<span class=w> </span>&lt;host&gt;<span class=w> </span>&lt;port&gt;
</span></code></pre></div></p> </li> <li>特色<ul> <li>優點: telnet 使用純文字介面，傳輸效率快</li> <li>缺點: 資安問題 ➞ <strong>由於 telnet 缺乏加密，並且使用明文傳輸數據，在現代環境中多數情況下已被 SSH 所取代</strong>。SSH 提供了加密通訊，適用於大多數需要安全傳輸的場景</li> </ul> </li> </ul> <h4 id=ftp-file-transfer-protocol>FTP (File Transfer Protocol)<a class=headerlink href=#ftp-file-transfer-protocol title="Permanent link">&para;</a></h4> <ul> <li>說明: 是一個應用層的檔案傳輸協定，是在<strong>網際網路上進行檔案傳輸的一種標準協定，可將檔案從一個電腦傳輸到另一個電腦</strong><ul> <li>使用 <strong>TCP port 21</strong></li> </ul> </li> <li> <p>特色: </p> <ul> <li> <p>FTP 是一種<strong>主從式協定（客戶端要求檔案，伺服器端負責提供檔案）</strong></p> <ul> <li><strong>FTP 客戶端軟體: FileZilla、WinSCP</strong> <img alt src=../../assets/pics/networking/ftp_server_client_architecture.png> <a href=https://www.tsg.com.tw/blog-detail4-164-0-ftp.htm>圖片來源</a></li> </ul> </li> <li> <p>FTP 建立連線時需要兩種基本通道</p> <ul> <li><strong>命令通道</strong>: 負責啟動指令並攜帶基本資訊（要存取哪些檔案）<ul> <li>使用 <strong>TCP port 21</strong></li> </ul> </li> <li><strong>資料通道</strong>: 在兩個裝置之間傳遞檔案資料<ul> <li>使用 <strong>TCP port 20</strong></li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/ftp_connection.png> <br> <a href=https://www.tsnien.idv.tw/Manager_WebBook/chap5/5-2%20%E6%AA%94%E6%A1%88%E5%82%B3%E8%BC%B8%E7%B3%BB%E7%B5%B1%E5%88%86%E6%9E%90.html>圖片來源</a></p> </li> <li> <p>FTP 有兩種模式</p> <ul> <li> <p><strong>主動模式（Active Mode）</strong>: 伺服器端主動連線到客戶端的資料通道。當客戶端需要傳輸數據時，它會在其本地端隨機開啟一個臨時 port ，並告知伺服器端該 port。接著，伺服器端會從自己的 port 20 主動連線到客戶端指定的 port，從而建立資料通道進行資料傳輸</p> <ul> <li><strong>FTP 預設採用此主動模式</strong></li> <li>若客戶端位於防火牆或 NAT 後面，伺服器無法直接連接到客戶端的隨機 port，這可能會導致連線失敗 <img alt src=../../assets/pics/networking/active_ftp_firewall.png> <br> <a href=https://www.mybluelinux.com/active-and-passive-ftp-simplified-understanding-ftp-ports/ >圖片出處</a></li> </ul> </li> <li> <p><strong>被動模式（Passive Mode）</strong>: 客戶端主動連線到伺服器端的資料通道。在被動模式下，當客戶端需要傳輸資料時，它會<strong>要求伺服器開啟一個隨機端口（port 通常 &gt; 1024），然後告知客戶端這個 port。隨後，客戶端會主動連接到伺服器的這個端口來建立資料通道</strong></p> <ul> <li>被動模式可以更好地應對防火牆、NAT 等網路設備的限制，因為客戶端負責發起所有連線 <img alt src=../../assets/pics/networking/passive_ftp_firewall.png> <br> <a href=https://www.mybluelinux.com/active-and-passive-ftp-simplified-understanding-ftp-ports/ >圖片出處</a></li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/ftp_active_passive_mode.jpg> <br> <a href=https://www.mybluelinux.com/active-and-passive-ftp-simplified-understanding-ftp-ports/ >圖片出處</a></p> </li> </ul> </li> <li> <p>應用情境: 在封閉系統內，傳遞大批次的伺服器檔案</p> </li> <li>優點:<ul> <li>可以同時傳遞多個檔案</li> <li>在連線中斷後恢復檔案傳遞</li> <li>安排傳遞作業</li> </ul> </li> <li>缺點: FTP 算是一個相對老舊的協定，存在一些安全漏洞和風險（因為 <strong>FTP 傳輸資料時並未加密</strong>，這表示當駭客擷取資料封包後，就能相對輕易地讀取密碼、使用者名稱和其他機密資料），<strong>因此在實際應用中，我們傾向於使用更新、更安全的協定</strong>，例如: <strong>SFTP（= FTP + SSH）</strong></li> </ul> <h4 id=ssh-secure-shell>SSH (Secure Shell)<a class=headerlink href=#ssh-secure-shell title="Permanent link">&para;</a></h4> <ul> <li>說明: 是一種<strong>加密連線的網路協定，用於在不安全的網路上安全地遠端連接到遠端伺服器</strong><ul> <li>使用 <strong>TCP port 22</strong></li> </ul> </li> <li> <p><strong>SSH 採用主從式架構</strong>: 要建立一個 SSH 連線，遠端的伺服器必須跑一個 SSH daemon，本地端則要有一個 SSH client 程序</p> <ul> <li>伺服器端的 SSH daemon 會預設聽從 TCP port 22 進來的連線，並在認證後提供相對應的環境給使用者</li> <li>SSH client 則負責使用 SSH protocol 來傳送認證訊息、連線細節給遠端機器 <img alt src=../../assets/pics/networking/ssh_create_conntection.png> <a href=https://www.ssh.com/academy/ssh>圖片出處</a></li> </ul> </li> <li> <p>SSH 加密: 採用非對稱式加密後。一旦建立連線後，雙方就能使用對稱式密鑰來加密通訊</p> <ul> <li>在 SSH 連線中，雙方都有一個公開/私密金鑰對，並且每一方都使用這些金鑰來驗證對方的身份</li> </ul> <blockquote> <p>而 HTTPS 在大多數實作中僅驗證 web 伺服器的身分</p> </blockquote> </li> <li> <p>SSH 驗證 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>ssh<span class=w> </span>&lt;username&gt;@&lt;host&gt;
</span></code></pre></div></p> </li> <li> <p>應用情境: 遠端登入電腦、安全地傳輸檔案、加密通訊</p> </li> <li>SSH vs. VPN<ul> <li><strong>SSH</strong>: <strong>一次僅加密一個連線，範圍侷限在單一個 session 上</strong>。適用於需要精確控制、高安全性要求的場景，例如: <strong>IT 系統管理員進行遠程伺服器管理</strong></li> <li><strong>IPsec VPN</strong>: <strong>加密所有網路流量</strong>，無論其來自哪個應用程式。適用於需要保護所有網路通訊的情境，例如: <strong>在公共 Wi-Fi 網路中工作</strong></li> </ul> </li> <li>參考連結: <a href=https://www.cloudflare.com/zh-tw/learning/access-management/what-is-ssh/ >什麼是 SSH？ | 安全殼層 (SSH) 通訊協定</a></li> </ul> <h3 id=layer-6-presentation-layer>Layer 6: Presentation Layer<a class=headerlink href=#layer-6-presentation-layer title="Permanent link">&para;</a></h3> <h4 id=ssltls>SSL/TLS<a class=headerlink href=#ssltls title="Permanent link">&para;</a></h4> <ul> <li>SSL (Secure Sockets Layer): 用於加密、保護、驗證網際網路上所發生通訊的協定<ul> <li>目前，SSL 已被 TLS (Transport Layer Security) 所取代</li> </ul> </li> <li> <p>TLS 握手（handshake）: 使用<strong>非對稱加密（asymmetric encryption）來建立安全通道</strong> <img alt src=../../assets/pics/networking/tls_handshake.png></p> <ul> <li>決定雙方將使用的 TLS 版本（例如: TLS 1.0、1.2、1.3）</li> <li>決定它們將使用的密碼套件</li> <li>透過<strong>伺服器端的公開密鑰、SSL 的 CA 頒發機構的電子簽名（digital signature）來驗證伺服器端的身份</strong></li> <li>產生<strong>工作階段密鑰（session key）</strong>，以便在 TLS 握手完成後，可使用<strong>對稱加密（symmetric encryption）來加密通訊</strong> <img alt src=../../assets/pics/networking/ssl_symmetric_encryption.png></li> </ul> </li> <li> <p>參考連結:</p> <ul> <li><a href=https://www.cloudflare.com/zh-tw/learning/ssl/how-does-ssl-work/ >Cloudflare: SSL 是如何運作的？ | SSL 憑證和 TLS</a></li> <li><a href=https://www.cloudflare.com/zh-tw/learning/ssl/what-happens-in-a-tls-handshake/ >Cloudflare: TLS 握手中發生什麼事情？| SSL 握手</a></li> </ul> </li> </ul> <h3 id=layer-4-transport-layer>Layer 4: Transport Layer<a class=headerlink href=#layer-4-transport-layer title="Permanent link">&para;</a></h3> <h4 id=tcp-transmission-control-protocol>TCP (Transmission Control Protocol)<a class=headerlink href=#tcp-transmission-control-protocol title="Permanent link">&para;</a></h4> <ul> <li>說明: 一種<strong>連結導向的協定</strong>，可<strong>確保資料的可靠傳輸</strong></li> <li> <p>TCP 建立連線（三次握手） &amp; TCP 中斷連線（四次握手） <img alt src=../../assets/pics/networking/tcp_handshake_example.png> <img alt src=../../assets/pics/networking/tcp_handshake_illustration.png></p> </li> <li> <p>TCP 標頭（header） <img alt src=../../assets/pics/networking/tcp_header.png></p> </li> <li> <p>參考連結: <a href=https://xiaolincoding.com/network/3_tcp/tcp_feature.html>TCP 重傳、滑動窗口、流量控制、擁塞控制</a></p> </li> </ul> <h3 id=layer-3-network-layer>Layer 3: Network Layer<a class=headerlink href=#layer-3-network-layer title="Permanent link">&para;</a></h3> <h4 id=subnet>subnet<a class=headerlink href=#subnet title="Permanent link">&para;</a></h4> <ul> <li>說明: subnet（子網）是網路的一部分，它<strong>由較大網路中的 IP 位址範圍劃分而來</strong>。子網的目的是<strong>將一個大的網路劃分成較小的、更容易管理的部分，從而提高網路的效率、安全性</strong></li> <li> <p>優點:</p> <ul> <li>提高安全性: 子網劃分<strong>可以將不同的網段隔離開來，限制不同網段之間的通訊，從而提高網路安全性</strong></li> <li>提高效率: 子網劃分有助於減少網路擁塞，因為<strong>封包會被限制在子網內部流動，而不會影響到整個大網路</strong></li> <li>方便管理: 將<strong>大網路劃分為多個子網，可以更容易管理和分配 IP 地址</strong>，並進行故障排除</li> </ul> <p><img alt src=../../assets/pics/networking/subnet_definition.png> <img alt src=../../assets/pics/networking/subnet_illustration.png></p> </li> <li> <p>子網遮罩 (subnet mask): 用於區分 IP 位址的網路部分（Network bits）、主機部分（Host bits） <img alt src=../../assets/pics/networking/subnet_mask_illustration.png> <img alt src=../../assets/pics/networking/subnet_mask_calculating.png> <img alt src=../../assets/pics/networking/subnet_mask_example.png></p> </li> <li> <p>參考連結: <a href="https://www.youtube.com/watch?v=eHV1aOnu7oM&feature=youtu.be">影片: IP address network and host portion | subnet mask explained</a></p> </li> </ul> <h4 id=cidr-classless-inter-domain-routing>CIDR (Classless Inter-Domain Routing)<a class=headerlink href=#cidr-classless-inter-domain-routing title="Permanent link">&para;</a></h4> <ul> <li>說明: <strong>可依據實際需求，彈性設定所需的網段 &amp; IP address 數量，使用「斜線表示法」來定義 subnet mask 的長度</strong>; 而不受限於傳統的 A, B, C 類別，例如 Class A 是 /8，Class B 是 /16，Class C 是 /24</li> <li> <p>優點:</p> <ul> <li>減少 IP 位置浪費: 因為 CIDR 可以讓我們更靈活地指派 IP 位址的網路、主機識別符，所以<strong>可使用 CIDR 為特定網路提供所需數量的 IP 位址並減少浪費</strong>。此外，CIDR 減少了路由表項目，簡化了封包路由</li> <li>建立虛擬私有雲端（VPC）: VPC 是託管在 AWS 雲端中的私有數位空間，其允許我們在隔離且安全的環境中佈建工作負載。<strong>VPC 在連線的裝置之間傳輸封包時使用 CIDR IP 地址</strong></li> </ul> <p><img alt src=../../assets/pics/networking/cidr_definition.png> <img alt src=../../assets/pics/networking/cidr_block.png></p> </li> <li> <p>參考連結: <a href=https://aws.amazon.com/tw/what-is/cidr/ >什麼是 CIDR ?</a></p> </li> </ul> <h4 id=ip-internet-protocol>IP (Internet Protocol)<a class=headerlink href=#ip-internet-protocol title="Permanent link">&para;</a></h4> <ul> <li>用途: 負責將封包從一個裝置傳送到另一個裝置</li> <li>重要觀念:<ul> <li>IP 流量可以使用 TCP 或 UDP 傳送。TCP 會先執行三次握手，以確保兩個裝置都準備好接收資料，才會開始傳輸; 而 UDP 則是無連接的協定，不需要握手過程</li> </ul> </li> <li> <p>IPv4</p> <ul> <li><strong>IPv4 address 的總長度為 32 bits</strong>，並且以 <code>.</code> 劃分為 4 個區段</li> <li><strong>每一區段的 number range = (0 ~ 255)<sub>10</sub></strong></li> <li>每一區段分別為 8 個 bits ➞ <strong>IPv4 中的每個數字代表 8 bits</strong></li> <li>總共 <strong>可分配出 2<sup>32</sup> 個 unique 的 IPv4 address</strong></li> <li><strong>採用句號( <code>.</code> )來分隔各區段</strong></li> <li> <p>示意圖: <img alt src=../../assets/pics/networking/ipv4_illustration.png> <img alt src=../../assets/pics/networking/ipv4_illustration_binary_conversion.png></p> </li> <li> <p>IPv4 datagram 內容</p> <ul> <li>從上至下，第 1 ～ 5 列（IP datagram header）為必填欄位，第 6 列（Option）為選填欄位<ul> <li>IP datagram header: 20 bytes</li> </ul> </li> <li>IP datagram 分段後，要重組成原本的 IP datagram，需要以下欄位:<ul> <li>Total Length (原本 IP datagram 的大小)</li> <li>Identification (IP 分段封包才能知道它是來自哪一個原本的 IP)</li> <li>Flags (知道哪個 IP 分段才是最後一個分段，不然無法確認 IP 分段到底到哪結束)</li> <li>Fragment Offset (當要重組的時候，才能組成原本的 IP datagram，不然順序會錯亂)</li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/ipv4_datagram_illustration.png></p> <ul> <li><strong>Version</strong>: 4 bits，表示 IP 協定的版本</li> <li><strong>Internet Header Length</strong>: 4 bits，表示 IP 標頭的長度，以 32 bits 為單位</li> <li><strong>Type of Service</strong>: 8 bits，用於指定 IP 封包在傳送過程中要求的服務類型</li> <li><strong>Total Length</strong>: 16 bits，表示整個 IP 封包的長度，包括 header, data</li> <li><strong>Identification</strong>: 16 bits，用於識別 IP 封包的分段（fragmentation）、重組（reassembly）所使用</li> <li><strong>Flags</strong>: 3 bits，用於控制 IP 封包是否需要分段</li> <li><strong>Fragment Offset</strong>: 13 bits，指定分段封包的偏移量。用於辨識分段封包的順序，以及將分段封包重組成原始封包</li> <li><strong>Time to Live (TTL)</strong>: 8 bits，表示 IP 封包在網路上的生命週期，每經過一個 router，TTL 就會減少 1</li> <li><strong>Protocol</strong>: 8 bits，表示 IP 封包中的資料是使用哪種協定傳送的</li> <li><strong>Header Checksum</strong>: 16 bits，這個數值主要用來檢錯用的，確保封包被正確無誤地接收到</li> <li><strong>Source IP Address</strong>: 32 bits，表示封包的發送者 IP 位址</li> <li><strong>Destination IP Address</strong>: 32 bits，表示封包的接收者 IP 位址</li> </ul> </li> </ul> </li> <li> <p>IPv6</p> <ul> <li>為下一代的 IP address 規範，採 <strong>16 進制</strong>(hexadecimal)表示</li> <li><strong>IPv6 address 的總長度為 128 bits</strong></li> <li><strong>IPv6 中的每個字元(可能是數字 or 字母)代表 4 bits</strong></li> <li>總共 <strong>可分配出 2<sup>128</sup> 個 unique 的 IPv6 address</strong></li> <li><strong>採用分號( <code>:</code> )來分隔各區段</strong></li> <li>當 IPv6 address 中有<strong>許多個 0 時，可以改用 <code>::</code> 代替，但是一段 IPv6 address 中只能使用一次 <code>::</code></strong></li> <li>優點:<ul> <li><strong>IPv6 提供更寬廣的 IP 定址空間</strong></li> <li><strong>IPv6 提供傳輸流量等級(Traffic Class)的分類</strong></li> <li><strong>IPv6 簡化封包標頭</strong></li> <li>IPv6 datagram 增加了 <strong>Flow Label</strong> 欄位，用來支援像視訊、語音這類即時服務的需求，以<strong>提高 QoS 的品質</strong></li> <li>IPv6 <strong>預設使用 IPsec，來提升安全性</strong></li> </ul> </li> </ul> </li> <li> <p>IPv4 vs. IPv6</p> <ul> <li>datagram header 比較 <img alt src=../../assets/pics/networking/ipv4_vs_ipv6_datagram_header.png> <br> <a href="https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.researchgate.net%2Ffigure%2FComparison-of-IPv4-and-IPv6-headers-structures-15_fig1_269810379&psig=AOvVaw19Bebw4_mkqgbscgtst2cQ&ust=1723268287134000&source=images&cd=vfe&opi=89978449&ved=0CBEQjRxqFwoTCOiX9OKY54cDFQAAAAAdAAAAABAJ">圖片來源</a></li> </ul> <table> <thead> <tr> <th>特色\IP 協定版本</th> <th>IPv4</th> <th>IPv6</th> </tr> </thead> <tbody> <tr> <td>IP address 長度</td> <td><strong>32 bits</strong></td> <td><strong>128 bits</strong></td> </tr> <tr> <td>間隔方式</td> <td>句號( <code>.</code> )</td> <td>分號( <code>:</code> )</td> </tr> <tr> <td>IP address 可使用數量</td> <td><strong>2<sup>32</sup> 個</strong></td> <td><strong>2<sup>128</sup> 個</strong></td> </tr> <tr> <td>流量標籤</td> <td>無</td> <td>Flow label</td> </tr> <tr> <td>廣播 address</td> <td>Host number 全為 1</td> <td><strong>以多播、任播來取代廣播</strong></td> </tr> <tr> <td>自動網路組態設定</td> <td>透過 DHCP Server</td> <td>靠 Neighbor Discovery 協定，從鄰近的 router 之資訊取得</td> </tr> <tr> <td>安全性</td> <td>未強制需使用 IPsec，安全性較低 ↓</td> <td><strong>預設使用 IPsec，安全性較高 ↑</strong></td> </tr> <tr> <td>QoS 機制</td> <td>表頭欄位不支援</td> <td><strong>表頭欄位支援</strong></td> </tr> <tr> <td>舉例</td> <td><code>210.59.230.150</code></td> <td><code>1079:3:6ED4::44:72BE</code></td> </tr> </tbody> </table> <blockquote> <p>註: <strong>IPv4 ↔ IPv6 之間可以互相轉換 <br></strong></p> </blockquote> </li> <li> <p>參考資料:</p> <ul> <li><a href=http://www.routeralley.com/guides/ipv4.pdf>IPv4 Addressing and Subnetting</a></li> <li><a href=https://ithelp.ithome.com.tw/articles/10207980>iT Home --- IPv4</a></li> <li><a href=https://www.ithome.com.tw/tech/92046>iT Home --- 認識 IPv4 與 IPv6 的差異</a></li> <li><a href="https://www.youtube.com/watch?v=ThdO9beHhpA">影片: IP Address - IPv4 vs IPv6 Tutorial</a></li> </ul> </li> </ul> <h4 id=icmp-internet-control-message-protocol>ICMP (Internet Control Message Protocol)<a class=headerlink href=#icmp-internet-control-message-protocol title="Permanent link">&para;</a></h4> <ul> <li>用途: ICMP 是網路層的協定，用於主機、路由器之間傳遞網絡層資訊。其主要功能包括：<ul> <li><strong>錯誤報告</strong>: 當主機, 網路, port, 協定無法送達時，回報錯誤</li> <li><strong>回應請求</strong>: 使用 Echo Request, Echo Reply 來測試網路連通性 (e.g <code>ping</code>)</li> </ul> </li> <li>重要觀念:<ul> <li>ICMP 與傳輸層通訊協定（TCP 或 UDP）沒有關聯，因此，<strong>ICMP 成為無連線的通訊協定，在傳送 ICMP 訊息之前，一個裝置不需要開啟與另一個裝置的連線</strong></li> <li>ICMP 通訊協定也不允許綁定裝置上的特定 port</li> </ul> </li> <li> <p>ICMP 封包</p> <ul> <li> <p>ICMP 封包是使用 ICMP 通訊協定的封包。 ICMP 封包含一般 IP 標頭之後的 ICMP 標頭。當路由器 or 伺服器需要傳送錯誤訊息時，ICMP 封包主體或資料區段一律會包含造成錯誤之封包 IP 標頭的副本</p> <ul> <li> <p>ICMP packet = IP header + ICMP message(ICMP header + ICMP data) <img alt src=../../assets/pics/networking/icmp_packet_error_message.png> <br> <a href="https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.astorinonetworks.com%2F2012%2F02%2F13%2Fasa-icmp-error-inspection%2F&psig=AOvVaw2w7nR8du7_lO-fC3yinIRB&ust=1723018168772000&source=images&cd=vfe&opi=89978449&ved=0CBEQjRxqFwoTCPiLwoH134cDFQAAAAAdAAAAABAK">圖片出處</a></p> </li> <li> <p>常見的 ICMP error message</p> <ul> <li>類型 (Type): 表示 ICMP 訊息的類型，定義了<strong>訊息的總類</strong><ul> <li>0: Echo Reply</li> <li>3: Destination Unreachable</li> <li>8: Echo Request</li> <li>11: Time Exceeded</li> </ul> </li> <li>錯誤代碼 (Code): 用於<strong>進一步細分 Type 的具體情況</strong>。例如: Type 3 (Destination Unreachable) 中<ul> <li>Code 0: Network Unreachable</li> <li>Code 1: Host Unreachable</li> <li>Code 3: Port Unreachable <img alt src=../../assets/pics/networking/icmp_protocol_error_message_type_and_code.png></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>常用的終端機公用程式就是使用 ICMP 來測試網路通訊的可用性</p> <ul> <li><code>ping</code>: 是 traceroute 的簡化版本。<strong>ping 將測試兩個裝置之間的連線速度</strong>，並準確報告封包到達其目的地並返回寄件者裝置所需的時間<ul> <li>可用於衡量網路延遲的指標</li> </ul> </li> <li><code>traceroute</code>: 可用來<strong>顯示兩個網際網路裝置之間的路由路徑</strong>。路由路徑是連接路由器的實際物理路徑，請求在到達目的地之前必須通過該路由器<ul> <li>一個路由器與另一個路由器之間的旅程稱為「躍點」 (hop)，而 traceroute 也會報告每個躍點所需的時間，這對於<strong>確定網路延遲的來源</strong>很有用</li> </ul> </li> </ul> </li> <li> <p>常見的網路攻擊: ICMP 回應要求和回應回覆訊息通常用於執行 ping。不幸的是，網路攻擊可以利用這個過程，製造破壞手段，例如: <strong>ICMP 洪水攻擊、死亡之 ping 攻擊</strong></p> <ul> <li> <p>ICMP 洪水攻擊: 是指<strong>攻擊者嘗試使用 ICMP 回應請求封包壓垮目標裝置</strong>。目標不得不處理和回應每個封包，消耗其運算資源，直到合法使用者無法接收服務 <img alt src=../../assets/pics/networking/ping-icmp-flood-ddos-attack-diagram.png></p> </li> <li> <p>死亡之 Ping 攻擊: 是指<strong>攻擊者將大於封包允許大小的 ping 傳送至目標電腦</strong>，造成機器宕機或崩潰。封包在到達其目標的途中被分段，但<strong>當目標將封包重新組裝成其超出最大值的原始大小時，封包的大小會導致緩衝區溢位。</strong></p> <ul> <li><strong>如今，死亡之 Ping 攻擊基本上已成過去</strong>。但是，較舊的網路裝置仍然可能受到它的影響</li> </ul> </li> <li>參考連結:</li> <li><a href=https://www.cloudflare.com/zh-tw/learning/ddos/glossary/internet-control-message-protocol-icmp/ >Cloudflare: 什麼是網際網路控制訊息通訊協定 (ICMP)？</a></li> <li><a href="https://www.informit.com/articles/article.aspx?p=26557&seqNum=5">informIT: ICMP 訊息類型</a></li> </ul> </li> </ul> <h2 id=tools>Tools<a class=headerlink href=#tools title="Permanent link">&para;</a></h2> <h3 id=netcat-nc>netcat (nc)<a class=headerlink href=#netcat-nc title="Permanent link">&para;</a></h3> <ul> <li>說明: <code>netcat</code> 是 Linux 系統中一個多功能的工具程式，雖然它只是一個小程式，但是能夠做的事情很多，就像瑞士刀一樣，<strong>幾乎任何使用 TCP 或 UDP 封包的動作都可以用它來達成，是許多系統管理者常用的網路診斷工具之一</strong></li> <li> <p>主要功能包括</p> <ul> <li> <p>伺服器 <img alt=↔ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/2194.svg title=:left_right_arrow:> 客戶端模式: 可指定伺服器端監聽指定的 port，或是讓客戶端連接到指定 port，以<strong>實現 client-server socket communication</strong> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># Server 監聽 2389 port 的訊息</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>nc<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Client</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>nc<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1># 在終端機畫面上，隨意輸入一段文字</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>Hi,<span class=w> </span>server
</span></code></pre></div> </li> <li> <p>檔案傳輸: 可以將檔案從一個裝置傳送到另一個裝置</p> <blockquote> <p>假設在伺服器端有一個檔案叫作 <code>test</code>，且在客戶端上有一個檔案叫作 <code>testfile</code></p> </blockquote> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># Server: 監聽 2389 port，並將其內容寫入 test 檔案中</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>nc<span class=w> </span>-l<span class=w> </span><span class=m>2389</span><span class=w> </span>&gt;<span class=w> </span><span class=nb>test</span>
</span></code></pre></div> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># Client: 將 testfile 檔案內容傳送到伺服器端</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>cat<span class=w> </span>testfile<span class=w> </span><span class=p>|</span><span class=w> </span>nc<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> </li> <li> <p>設定連線超時限制: 在某些情況下，我們不希望連線永遠是開放狀態，因此可以透過 <code>w</code> 選項來設定連線的超時限制 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1># Server: 監聽 2389 port</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>nc<span class=w> </span>-l<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Client: 連接到 2389 port，並設定連線超時限制為 10 秒</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>nc<span class=w> </span>-w<span class=w> </span><span class=m>10</span><span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <ul> <li>這麼做後，連線將會在 10 秒後自動關閉<blockquote> <p>請勿在伺服器端使用將 <code>-w</code>, <code>-l</code> 參數一起使用，因為這樣 <code>-w</code> 參數會被視為無效，連線將會一直保持開放狀態，這樣會有風險！</p> </blockquote> </li> </ul> </li> <li> <p><code>nc</code> 可支援 IPv4, IPv6 位址，使用 <code>-4</code>, <code>-6</code> 選項來指定</p> <ul> <li> <p>IPv4 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Server</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>nc<span class=w> </span>-4<span class=w> </span>-l<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># Client</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>nc<span class=w> </span>-4<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>netstat<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <div class="language-console highlight"><span class=filename>Bash Session</span><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=go>tcp        0      0 localhost:2389          localhost:50851         ESTABLISHED</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=go>tcp        0      0 localhost:50851         localhost:2389          ESTABLISHED</span>
</span></code></pre></div> </li> <li> <p>IPv6 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1># Server</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>nc<span class=w> </span>-4<span class=w> </span>-l<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># Client</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>nc<span class=w> </span>-4<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>netstat<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <div class="language-console highlight"><span class=filename>Bash Session</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=gp># </span>會看到類似以下的結果，這是一個完整的雙向連接，表明本地主機上的這兩個<span class=w> </span>port<span class=w> </span>之間的連接狀態為<span class=w> </span>ESTABLISHED，表示連接已成功建立並正在進行通訊
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=go>tcp        0      0 localhost:2389          localhost:50851         ESTABLISHED</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=go>tcp        0      0 localhost:50851         localhost:2389          ESTABLISHED</span>
</span></code></pre></div> </li> </ul> </li> <li> <p>禁用讀取 STDIN: 有時候我們不希望 <code>netcat</code> 從 STDIN 讀取資料，我們可以在客戶端使用 <code>-d</code> 參數來禁用 STDIN <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1># Server</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>nc<span class=w> </span>-l<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1># Client</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>nc<span class=w> </span>-d<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=c1># 從鍵盤輸入 &quot;Hi&quot; (即 STDIN)</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>Hi
</span></code></pre></div> <ul> <li>使用 <code>-d</code> 選項，從 STDIN 讀取的內容將被禁用，因此 "Hi" 文字不會被傳送到伺服器端</li> </ul> </li> <li> <p>保持伺服器持續運行: 有時候當客戶端斷開連接，我們仍希望伺服器持續運行，可使用 <code>-k</code> 選項讓伺服器持續運行 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1># Server</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>nc<span class=w> </span>-k<span class=w> </span>-l<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># Client</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>nc<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=c1># 在鍵盤上按下 Ctrl + C 來結束連接</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>^C
</span></code></pre></div> </li> <li> <p>可設定當客戶端接收到 EOF (End of File) 後，仍保持連線一段時間。通常情況下，<code>nc</code> 客戶端在接收到 EOF 字符後會立即終止，但可以使用 <code>-q</code> 選項來宣告要在接收到 EOF 後等待多少秒，再終止連接 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1># Client: 當客戶端接收到 EOF 字符後，將會等待 5 秒後再終止連接</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>nc<span class=w>  </span>-q<span class=w> </span><span class=m>5</span><span class=w>  </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> </li> <li> <p>可使用 UDP 協定: 預設情況下，<code>nc</code> 使用 TCP 協定，但是我們可以使用 <code>-u</code> 選項來指定要使用 UDP 協定 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1># Server</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>nc<span class=w> </span>-4<span class=w> </span>-u<span class=w> </span>-l<span class=w> </span><span class=m>2389</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1># Client</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>nc<span class=w> </span>-4<span class=w> </span>-u<span class=w> </span>localhost<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>netstat<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=m>2389</span>
</span></code></pre></div> <div class="language-console highlight"><span class=filename>Bash Session</span><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=gp># </span>會看到類似以下的結果，表示當前的連線是採用<span class=w> </span>UDP<span class=w> </span>協定
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=go>udp        0      0 localhost:42634         localhost:2389          ESTABLISHED</span>
</span></code></pre></div> </li> <li> <p>參考連結: <a href=https://www.thegeekstuff.com/2012/04/nc-command-examples/ >8 Practical Linux Netcat NC Command Examples</a></p> </li> </ul> </li> </ul> <h3 id=ping>ping<a class=headerlink href=#ping title="Permanent link">&para;</a></h3> <ul> <li>說明: <code>ping</code> 工具會透過發送 ICMP 協定的 Echo Request 封包給目的地設備，來測試網路連接的問題</li> <li>主要功能: 能提供以下兩種資訊<ul> <li>回傳的回應數量</li> <li>花費多久時間來回應</li> </ul> </li> <li>常見的 <code>ping</code> 指令的選項<ul> <li><code>-a</code>: 若能解析，就會將目的地的 IP 位址，解析為 hostname</li> <li><code>-f</code>: 防止 ICMP Echo Request 訊息被路由器分段</li> <li><code>-i &lt;TTL&gt;</code>: 設定 Time To Live（TTL）值，範圍為 1 ～ 255</li> <li><code>-s &lt;size&gt;</code>: 指定要傳送的封包大小，預設為 32 bytes</li> <li><code>-c &lt;count&gt;</code>: 指定要傳送的封包數量，預設為 4 個</li> <li><code>-l</code>: 設定預先發送的封包數量。亦即在開始正常發送封包之前，先快速發送一些封包（預發送），以測試網路的穩定性</li> </ul> </li> <li> <p>常見用法</p> <ul> <li> <p>透過 <code>ping</code> 指令，向 <code>www.google.com</code> 發送 5 個封包，預先發送 1500 個封包，以測試網路的穩定性 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>sudo<span class=w> </span>ping<span class=w> </span>-c<span class=w> </span><span class=m>5</span><span class=w> </span>-l<span class=w> </span><span class=m>1500</span><span class=w> </span>www.google.com
</span></code></pre></div></p> <p><img alt src=../../assets/pics/networking/ping_example.png> - 說明: 0% packet loss 表示發送到 <code>www.google.com</code> 的每個 ICMP Echo Request 封包都已回傳成功，代表網路連接正常</p> </li> <li> <p>透過 <code>ping</code> 指令，向 localhost IP 位址(loopback address)發送封包，檢測<strong>作業系統的網路功能是否正常</strong> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>ping<span class=w> </span><span class=m>127</span>.0.0.1
</span></code></pre></div></p> </li> <li> <p>透過 <code>ping</code> 指令，查詢目標 IP 位址的 hostname，有助於診斷網路問題 (例如: 確認某個 IP 地址是否正確對應到預期的主機) <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a>ping<span class=w> </span>-a<span class=w> </span><span class=m>192</span>.168.1.22
</span></code></pre></div></p> </li> <li> <p>透過 <code>ping</code> 指令，測試本機與路由器之間的連線狀況</p> <blockquote> <p>在內網中，路由器(router)的預設 IP 位址通常是 <code>192.168.2.1</code></p> </blockquote> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>ping<span class=w> </span><span class=m>192</span>.168.2.1
</span></code></pre></div> </li> </ul> </li> <li> <p>參考連結: <a href=https://www.lifewire.com/ping-command-2618099>How to Use the Ping Command for Testing in Windows</a></p> </li> </ul> <h3 id=traceroute>traceroute<a class=headerlink href=#traceroute title="Permanent link">&para;</a></h3> <ul> <li>說明: <code>traceroute</code> 是一個常用的網絡診斷工具，用於追蹤封包從 來源主機 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> 目標主機 所經過的路徑</li> <li> <p>安裝方法:</p> <ul> <li> <p>Ubuntu <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a>sudo<span class=w> </span>apt-get<span class=w> </span>install<span class=w> </span>traceroute
</span></code></pre></div></p> </li> <li> <p>CentOS <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>sudo<span class=w> </span>yum<span class=w> </span>install<span class=w> </span>traceroute
</span></code></pre></div></p> </li> </ul> </li> <li> <p>基本用法</p> <ul> <li> <p>查詢封包到達目標 IP address 所經過的路由器、其 IP 地址、回應時間</p> <ul> <li>在 <code>traceroute</code> 工具中，<strong>只有目標 IP 位址是必填的參數</strong> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a>traceroute<span class=w> </span>www.google.com
</span></code></pre></div></li> </ul> <p><img alt src=../../assets/pics/networking/traceroute_example.png></p> </li> </ul> </li> <li> <p>常用參數</p> <ul> <li><code>-w</code>: 設定等待每個回應的時間，預設為 5 秒</li> <li><code>-q</code>: 設定要發送的封包數量，預設為 3 個</li> <li><code>-m</code>: 設定最大 TTL（Time To Live）值，也就是跳躍數(hop)，預設為 30 次跳躍</li> <li><code>-f</code>: 設定起始 TTL 值，預設為 1</li> <li><code>-s</code>: 使用指定的來源 IP 位址作為封包發送的起點</li> <li><code>-n</code>: 禁止將 IP 位址解析為 hostname</li> <li><code>-F</code>: 禁止將探測封包（ICMP Echo Request）分段傳送，確保封包不會被路由器分段，以更準確地測試網路連線的狀況</li> </ul> </li> <li><code>ping</code> vs. <code>traceroute</code><ul> <li><code>ping</code>: <ul> <li>是一個核心的網路連線除錯工具，它使用 Echo Request、Echo Reply 的 ICMP 封包來判斷某個 IP 位址是否可以正確抵達並且有回應</li> <li><code>ping</code> 還會提供 來源地址、目標地址 之間的往返時間 (Round-Trip Time, RTT)，通常以毫秒為單位測量</li> </ul> </li> <li><code>traceroute</code>:<ul> <li>用於確定封包到達其目的地所經過的路由路徑</li> <li><code>traceroute</code> 不僅會識別封包經過的每個路由器，還會測量每個路由節點 (hop) 所經歷的延遲時間</li> </ul> </li> <li>統整: 這兩個工具在網路連接除錯中都很常使用<ul> <li><code>ping</code> 用來<strong>快速測試目標是否可到達，並檢測網路連接的延遲</strong></li> <li><code>traceroute</code> 則用來<strong>追蹤封包的路徑，幫助識別網路路由上的問題</strong></li> </ul> </li> </ul> </li> <li>參考連結: <a href=https://linux.die.net/man/8/traceroute>Linux manual page: traceroute</a></li> </ul> <h3 id=mtr>mtr<a class=headerlink href=#mtr title="Permanent link">&para;</a></h3> <blockquote> <p><code>ping</code>, <code>traceroute</code>, <code>mtr</code> 這三個都是用來測試網路連線的工具，但是 <code>mtr</code> 是 <code>ping</code> 和 <code>traceroute</code> 的結合體，它可以提供更多的資訊，並且可以持續監控網路連線的狀況</p> <p><code>ping</code>: 透過發送 ICMP Echo Request 封包並計算往返時間來測試網路連線的狀況</p> <p><code>traceroute</code> 和 <code>mtr</code>: 使用 TTL 來追蹤封包從 來源主機 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> 目標主機 的路由狀況</p> </blockquote> <ul> <li>說明: <code>mtr</code> 是一個網路診斷工具，它結合了 <code>ping</code> 和 <code>traceroute</code> 的功能，可以提供更完整的資訊，並且可以持續監控網路連線的狀況</li> <li> <p>安裝方法:</p> <ul> <li> <p>Ubuntu <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a>apt<span class=w> </span>update<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span>apt<span class=w> </span>upgrade
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>apt<span class=w> </span>install<span class=w> </span>mtr-tiny
</span></code></pre></div></p> </li> <li> <p>CentOS <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a>yum<span class=w> </span>update
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>yum<span class=w> </span>install<span class=w> </span>mtr
</span></code></pre></div></p> </li> </ul> </li> <li> <p>產生 <code>mtr</code> 報告 <div class="language-text highlight"><span class=filename>Text Only</span><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>sudo mtr -rw www.google.com
</span></code></pre></div></p> <ul> <li><code>r</code>: 產生報告 (若沒有加上 <code>-r</code> 選項，則會在互動式環境下，持續監控)</li> <li><code>w</code>: 顯示每個躍點的完整主機名稱</li> </ul> </li> <li> <p>閱讀 <code>mtr</code> 報告 <img alt src=../../assets/pics/networking/read_mtr_report.png></p> <ul> <li><code>mtr</code> 報告中的每個編號行代表一個躍點(hop)<ul> <li>躍點是封包到達目的地所經過的網路節點</li> </ul> </li> <li><code>Loss%</code>: 表示每經過一個躍點，所發生的封包遺失百分率</li> <li><code>Snt</code>: 表示發送的封包數量 (預設為 10 個封包)</li> <li>衡量延遲的指標 (以毫秒為單位)<ul> <li><code>Last</code>: 表示最後一個封包的往返時間</li> <li><code>Avg</code>: 表示<strong>所有封包的平均往返時間</strong></li> <li><code>Best</code>: 表示所有封包的最低往返時間 = (最佳)</li> <li><code>Wrst</code>: 表示所有封包的最高往返時間 = (最差)</li> <li><code>StDev</code>: 提供了每個主機的延遲的標準差。當標準差越高，延遲測量之間的差異就越大</li> </ul> </li> <li>通常，<code>mtr</code> 報告可分為三個部分<ul> <li>前 2 ~ 3 躍點: 通常代表 來源主機的 ISP</li> <li>中間的躍點: 通常代表 傳輸過程中所經過的路由器<ul> <li>不幸的是，如果是中間躍點出現問題，兩個 ISP 解決此問題的能力都有限</li> </ul> </li> <li>最後 2 ~ 3 躍點: 通常代表 目的地主機的 ISP</li> </ul> </li> </ul> </li> <li> <p>分析 <code>mtr</code> 報告</p> <blockquote> <p>在分析 <code>mtr</code> 報告時，我們最需要關注的兩件事: <strong>封包遺失率</strong> 和 <strong>延遲</strong></p> </blockquote> <p><img alt src=../../assets/pics/networking/mtr_report_example1.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/#analyze-mtr-reports>圖片出處</a></p> <ul> <li>根據上圖，若在任一躍點上，看到 <code>Loss</code> 值異常，則可能是該躍點的路由器出現問題<ul> <li>然而，因為部分 ISP 會對 <code>mtr</code> 工具所使用的 ICMP 協定進行流量限制，因此要觀察後續的躍點才能確定問題所在。若後續躍點的 <code>Loss</code> 值為 0%，則表示 ICMP 封包受到 ISP 流量限制</li> </ul> </li> </ul> <p><img alt src=../../assets/pics/networking/mtr_report_example2.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></p> <ul> <li>根據上圖，若在躍點 2 ～ 躍點 3、躍點 3 ～ 躍點 4 發生 60 % 的封包遺失率，但是後續的躍點卻沒有繼續遺失封包，則表示 ICMP 封包受到 ISP 流量限制，因為後續的幾個躍點僅發生 40 % 的封包遺失率 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> <strong>當 <code>mtr</code> 報告中出現不同的封包遺失率時，請總是相信較後面的躍點</strong></li> <li>有時候，封包遺失的情況會發生在封包回傳的過程，因為封包可以成功地傳送到目標主機上，但卻不容易回傳到來源主機上 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> 因此，建議最好<strong>雙向收集 <code>mtr</code> 報告，才能較為準確地判斷問題所在</strong></li> <li>實務上，封包在傳輸的過程中可能會遇到一些不可避免的問題 (例如: 網際網路可能存在網路退化問題、路由器負載限制、網路維護問題等) <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> <strong>因此，<code>Loss</code> 值在 10 % 左右的少量封包遺失率，都是可接受的範圍</strong></li> </ul> <p><img alt src=../../assets/pics/networking/mtr_report_example3.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></p> <ul> <li>根據上圖，在躍點 3 ～ 躍點 4 發生明顯的網路延遲，並且在後續的躍點中，網路延遲秒數無明顯增加，則可以合理地假設第四個路由器可能有問題</li> </ul> <p><img alt src=../../assets/pics/networking/mtr_report_example4.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></p> <ul> <li>根據上圖，乍看之下雖然躍點 4 ～ 躍點 5 之間的網路延遲秒數較高，但是在後續的躍點中，網路延遲秒數急劇下降，則表示第五個路由器有 ICMP 流量限制 <img alt=➡ class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/27a1.svg title=:arrow_right:> <strong>在評估 <code>mtr</code> 報告中，關於網路延遲的問題時，請先看最後一個躍點的 <code>Loss</code> 值</strong></li> <li>在 <code>mtr</code> 報告中所發生的常見問題</li> <li> <p>情況 1: 目標主機的網路連線設定異常 <img alt src=../../assets/pics/networking/mtr_report_common_issue_destination_host_networking_improperly_configured.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></p> <ul> <li>根據上圖，躍點 8 發生了 100 % 的封包遺失率，並且這是最後一個躍點<ul> <li>表示雖然流量確實傳送到目標主機了，但因為目標主機未發送回應，這可能是由於網路 or 防火牆 (iptables) 規則設定不當，導致主機丟棄 ICMP 封包</li> </ul> </li> </ul> </li> <li> <p>情況 2: 家用 or 商用路由器的 ICMP 流量限制</p> <p><img alt src=../../assets/pics/networking/mtr_report_residential_or_business_router_icmp_traffic_restriction.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></p> <ul> <li> <p>根據上圖，躍點 2 雖然發生了 100 % 的封包遺失率，但是在後續的躍點中，封包遺失率為 0%，這表示躍點 2 的路由器可能對 ICMP 流量進行了限制</p> <ul> <li>情況 3: ISP 的路由器設定異常 <img alt src=../../assets/pics/networking/mtr_report_isp_router_improperly_configured.png></li> </ul> </li> <li> <p>當 <code>mtr</code> 報告中出現 <strong>???</strong> 時，可能表示路由器的路由設定不正確，導致封包無法傳送到目標主機</p> </li> </ul> <p><img alt src=../../assets/pics/networking/mtr_report_isp_router_improperly_configured_loop_back.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></p> <ul> <li> <p>根據上圖，躍點 4 的路由器設定異常，導致封包在路由器之間循環傳送，需通知網路管理員來解決此問題</p> <ul> <li>情況 4: 受到 ICMP 封包的速率限制，導致封包遺失 <img alt src=../../assets/pics/networking/mtr_report_icmp_packet_loss.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></li> </ul> </li> <li> <p>根據上圖，躍點 5 發生 60 % 的封包遺失率，但是在後續的躍點中，封包遺失率為 0%，這表示躍點 5 的路由器可能對 ICMP 流量進行了限制</p> <ul> <li>情況 5: 超時問題 (timeout) <img alt src=../../assets/pics/networking/mtr_report_timeout.png> <br> <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >圖片出處</a></li> </ul> </li> <li> <p>根據上圖，有很多種原因可能會導致發生<strong>超時問題</strong>，例如: <strong>路由器丟棄 ICMP 封包, 封包返回路由異常</strong> 等</p> <ul> <li>超時問題，並<strong>不一定會導致封包遺失，但是可能會導致延遲增加，封包仍能正確送達目標主機</strong></li> <li>超時問題可能發生在路由器基於服務品質（QoS），而丟棄 ICMP 封包; 或是封包返回路由異常</li> </ul> </li> <li>參考連結: <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ >Diagnosing Network Issues with MTR</a></li> </ul> </li> </ul> </li> </ul> <h3 id=tcpdumpwireshark>tcpdump/wireshark<a class=headerlink href=#tcpdumpwireshark title="Permanent link">&para;</a></h3> <h4 id=tcpdump>tcpdump<a class=headerlink href=#tcpdump title="Permanent link">&para;</a></h4> <ul> <li>說明: <code>tcpdump</code> 是一個網路封包分析工具，可以在 <strong>CLI 介面上</strong>捕獲並分析網路上的封包，常用於網路管理、過濾流量、安全監控、故障排除。<code>wireshark</code> 是 <code>tcpdump</code> 的 GUI 版本，提供了更多的功能、更直觀的操作介面</li> <li> <p>基本用法</p> <ul> <li> <p>查看網路介面上的封包 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=c1># 查看所有網路介面上的封包</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>sudo<span class=w> </span>tcpdump<span class=w> </span>-i<span class=w> </span>any
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=c1># 查看 eth0 網路介面上的封包</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>sudo<span class=w> </span>tcpdump<span class=w> </span>-i<span class=w> </span>eth0
</span></code></pre></div> </li> <li> <p>查看 HTTPS 協定的封包: 捕獲所有關於 port 443 的封包 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a>sudo<span class=w> </span>tcpdump<span class=w> </span>-nnSX<span class=w> </span>port<span class=w> </span><span class=m>443</span>
</span></code></pre></div></p> <ul> <li><code>nn</code>: 直接顯示 port 號，而不是將 port 號解析為服務名稱</li> <li><code>-S</code>: 顯示每個 TCP 封包的絕對序列號</li> <li> <p><code>-X</code>: 以十六進位和 ASCII 碼的形式顯示封包內容</p> <ul> <li>查看 tcpdump 原始完整的輸出內容 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a>sudo<span class=w> </span>tcpdump<span class=w> </span>-ttnnvvS
</span></code></pre></div></li> </ul> </li> <li> <p><code>tt</code>: 顯示原始的時間戳記</p> </li> <li><code>nn</code>: 直接顯示 port 號，而不是將 port 號解析為服務名稱</li> <li><code>vv</code>: 顯示詳細的輸出資訊</li> <li><code>S</code>: 顯示每個 TCP 封包的絕對序列號</li> </ul> </li> </ul> </li> <li> <p>常見用法</p> <ul> <li> <p>擷取明碼顯示的密鑰、文字、使用者名稱、密碼等 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a>tcpdump<span class=w> </span>-A<span class=w> </span>-i<span class=w> </span>eth0<span class=w> </span>&lt;port<span class=w> </span>http<span class=w> </span><span class=o>||</span><span class=w> </span>ftp<span class=w> </span><span class=o>||</span><span class=w> </span>telnet&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span><span class=s1>&#39;user\|pass\|login&#39;</span>
</span></code></pre></div></p> </li> <li> <p>監控可疑域名的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a>tcpdump<span class=w> </span>-i<span class=w> </span>eth0<span class=w> </span>dst<span class=w> </span>host<span class=w> </span>&lt;suspicious.com&gt;
</span></code></pre></div></p> </li> <li> <p>監控來自特定 IP 範圍的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a>tcpdump<span class=w> </span>src<span class=w> </span>net<span class=w> </span>&lt;IP_RANGE_OF_COUNTRY&gt;
</span></code></pre></div></p> </li> <li> <p>監控來自 SMB (Service Message Block) 協定的流量</p> <blockquote> <p>SMB 流量可用來作為檔案共享、印表機共享 等，因此需要預防潛在的安全問題，例如: WannyCry 勒索病毒</p> </blockquote> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a>tcpdump<span class=w> </span>-nn<span class=w> </span>-i<span class=w> </span>eth0<span class=w> </span>port<span class=w> </span><span class=m>445</span>
</span></code></pre></div> </li> <li> <p>監控同時具有 RESET, ACK 標誌的封包，有助於識別可能的網路攻擊 or 設定問題 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a>tcpdump<span class=w> </span><span class=s1>&#39;tcp[13] = 41&#39;</span>
</span></code></pre></div></p> <ul> <li><code>tcp[13]</code>: 表示 TCP 標頭的第 13 個字節，其中包含 TCP 標誌</li> <li><code>41</code>: 十六進制數字 0x29，表示同時設置了 RESET（0x04）, ACK（0x10）標誌</li> <li>篩選流量<ul> <li>根據 host, net, port, protocol, src（來源）, dst（目標）來篩選流量</li> </ul> </li> <li> <p>監控來自或發送到指定主機的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=c1># host</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>tcpdump<span class=w> </span>host<span class=w> </span><span class=m>192</span>.168.1.1
</span></code></pre></div></p> </li> <li> <p>監控來自或發送到指定網段的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=c1># net</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>tcpdump<span class=w> </span>net<span class=w> </span><span class=m>192</span>.168.1.0/24
</span></code></pre></div></p> </li> <li> <p>監控來自或發送到指定 port 的流量，或是也可以監控指定 port 範圍的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=c1># port</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>tcpdump<span class=w> </span>port<span class=w> </span><span class=m>80</span>
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=c1># port range</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>tcpdump<span class=w> </span>portrange<span class=w> </span><span class=m>21</span>-23
</span></code></pre></div> </li> <li> <p>監控指定的協定的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=c1># protocol</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>tcpdump<span class=w> </span>tcp
</span></code></pre></div></p> </li> <li> <p>監控來自指定來源的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=c1># src</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>tcpdump<span class=w> </span><span class=m>1</span>.1.1.1
</span></code></pre></div></p> </li> <li> <p>監控發送到指定目標的流量 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=c1># dst</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>tcpdump<span class=w> </span>dst<span class=w> </span><span class=m>1</span>.0.0.1
</span></code></pre></div></p> </li> </ul> </li> </ul> </li> <li> <p>將捕獲的封包內容，儲存為 PCAP 檔案，供其他應用程式進行分析，例如: 網路分析器、入侵檢測系統</p> <ul> <li> <p>儲存 PCAP 檔案 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a>tcpdump<span class=w> </span>port<span class=w> </span><span class=m>80</span><span class=w> </span>-w<span class=w> </span>&lt;capture_file.txt&gt;
</span></code></pre></div></p> </li> <li> <p>讀取 PCAP 檔案 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a>tcpdump<span class=w> </span>-r<span class=w> </span>&lt;capture_file.txt&gt;
</span></code></pre></div></p> </li> </ul> </li> <li> <p><code>tcpdump</code> 工具，可使用運算子來更精確地篩選流量，例如: <code>and</code>, <code>or</code>, <code>not</code></p> <ul> <li> <p><code>and</code>: 同時符合兩個條件 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a>tcpdump<span class=w> </span>src<span class=w> </span><span class=m>192</span>.168.1.1<span class=w> </span>and<span class=w> </span>dst<span class=w> </span>port<span class=w> </span><span class=m>80</span>
</span></code></pre></div></p> </li> <li> <p><code>or</code>: 符合其中一個條件 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a>tcpdump<span class=w> </span>src<span class=w> </span><span class=m>192</span>.168.1.1<span class=w> </span>or<span class=w> </span>dst<span class=w> </span>port<span class=w> </span><span class=m>443</span>
</span></code></pre></div></p> </li> <li> <p><code>not</code>: 不符合條件 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a>tcpdump<span class=w> </span>not<span class=w> </span>port<span class=w> </span><span class=m>22</span>
</span></code></pre></div></p> </li> </ul> </li> <li> <p>需使用單引號 (<code>' '</code>) 來讓 <code>tcpdump</code> 工具能跳脫解析某些特殊字元（e.g. 括號 <code>( )</code>） <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=c1># 捕獲來自 IP address 為 10.0.2.4 並且目標 port 是 3389 或 22 的封包</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>tcpdump<span class=w> </span><span class=s1>&#39;src 10.0.2.4 and (dst port 3389 or 22)&#39;</span>
</span></code></pre></div></p> </li> <li> <p>可使用 <code>grep</code> 指令，來進一步過濾 <code>tcpdump</code> 工具所捕獲的封包</p> <ul> <li> <p>篩選出所有關於 HTTP GET 請求的封包 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a>tcpdump<span class=w> </span>-vvAls0<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=s1>&#39;GET&#39;</span>
</span></code></pre></div></p> </li> <li> <p>篩選出所有關於 HTTP Set-Cookie, Host, Cookie 的封包 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>tcpdump<span class=w> </span>-vvAls0<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=s1>&#39;Set-Cookie|Host:|Cookie:&#39;</span>
</span></code></pre></div></p> </li> <li> <p>篩選出 DNS 流量的封包 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a>tcpdump<span class=w> </span>-vvAs0<span class=w> </span>port<span class=w> </span><span class=m>53</span>
</span></code></pre></div></p> </li> </ul> </li> <li> <p>注意! 舊版本的 <code>tcpdump</code> 工具會將封包截斷到 68 ～ 96 bytes 的大小，因此可使用 <code>s</code> 選項，來捕獲完整大小的封包 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a>tcpdump<span class=w> </span>-i<span class=w> </span>&lt;network<span class=w> </span>interface&gt;<span class=w> </span>-s<span class=w> </span><span class=m>65535</span><span class=w> </span>-w<span class=w> </span>&lt;file&gt;
</span></code></pre></div></p> </li> <li> <p>比較 <code>tcpdump</code>, Wireshark 工具</p> <ul> <li>有時候 <code>tcpdump</code> 更適合用於遠端捕獲封包，因為它可以在 CLI 介面上執行，特別是在沒有 GUI 介面，或是未安裝 WireShark 工具的情況下</li> </ul> </li> </ul> <h4 id=wireshark>WireShark<a class=headerlink href=#wireshark title="Permanent link">&para;</a></h4> <ul> <li> <p>說明: <code>Wireshark</code> 是一個網路封包分析工具，提供了 <strong>GUI 介面</strong>，可以捕獲並分析網路上的封包，並且提供了更多的功能，例如: 顯示封包的內容、統計資訊、封包過濾、封包重組 等</p> </li> <li> <p>參考連結:</p> <ul> <li><a href=https://danielmiessler.com/p/tcpdump>A tcpdump Tutorial with Examples</a></li> <li><a href=https://www.wireshark.org/docs/wsug_html_chunked/AppToolstcpdump.html>tcpdump: Capturing with “tcpdump” for viewing with Wireshark</a></li> <li><a href=https://www.howtogeek.com/104278/how-to-use-wireshark-to-capture-filter-and-inspect-packets/ >How to Use Wireshark to Capture, Filter and Inspect Packets?</a></li> </ul> </li> </ul> <h3 id=iperf>iperf<a class=headerlink href=#iperf title="Permanent link">&para;</a></h3> <ul> <li>說明: 測試網路頻寬的工具，可用於測試網路的吞吐量、延遲、封包丟失率</li> <li> <p>補充觀念</p> <ul> <li><strong>最大傳輸單元</strong> (Maximum Transmission Unit, <strong>MTU</strong>): 是指在<strong>網路上能夠傳輸的最大封包大小</strong>，通常為 <strong>1500 bytes</strong><ul> <li><strong>網路連線的 MTU 越大，則可以在單一個封包中傳輸的資料量就越多</strong>。Ethernet frames 由封包 (packet) 或是實際傳送的資料，以及其他網路資訊所組成</li> </ul> </li> <li>抖動 (Jitter): 是指在資料傳輸過程中，連續封包分別的到達時間的變化或不一致性。簡單來說，就是封包傳送到目的地的時間間隔不均勻<ul> <li>在網際網路中，封包在路由器、交換機之間傳輸時，可能會經歷不同的路徑和不同的延遲。可能會受到網路擁塞、路由變更、硬體性能不同等因素的影響，導致封包的到達時間不一致</li> <li>抖動通常以毫秒（ms）為單位，<strong>抖動越小，則網路的穩定性就越好</strong></li> <li>對於講求即時性的應用程式會影響比較大，例如: 語音通話（VoIP）、視訊會議、線上遊戲</li> </ul> </li> </ul> </li> <li> <p>測試 TCP 連線的頻寬</p> <ul> <li> <p>伺服器端</p> <ul> <li>啟動 server 模式 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=c1># iperf3 預設使用 port 5001</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a>sudo<span class=w> </span>iperf3<span class=w> </span>-s
</span></code></pre></div></li> </ul> </li> <li> <p>客戶端</p> <ul> <li> <p>啟動 client 模式，並指定伺服器端的 IP 位址 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=c1># iperf3 預設使用 port 5001</span>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>iperf3<span class=w> </span>-c<span class=w> </span><span class=m>172</span>.31.30.41<span class=w> </span>--parallel<span class=w> </span><span class=m>40</span><span class=w> </span>-i<span class=w> </span><span class=m>1</span><span class=w> </span>-t<span class=w> </span><span class=m>2</span>
</span></code></pre></div></p> <ul> <li><code>-c</code>: 指定伺服器端的 IP 位址</li> <li><code>--parallel</code>: 設定併發連線數，即同時進行 40 個連接來測試頻寬</li> <li><code>-i</code>: 設定報告間隔時間為 1 秒，即每秒輸出一次測試報告</li> <li><code>-t</code>: 設定測試時間為 2 秒，即整個測試會持續 2 秒鐘</li> </ul> <p><img alt src=../../assets/pics/networking/iperf3_test_tcp.png></p> <ul> <li>客戶端已連接到伺服器端（172.31.30.41）的 TCP port 5001</li> <li>TCP window 大小: 975 KB</li> <li>每個連線都會使用一個唯一的本地 port（e.g. 49498、49506），來連線到伺服器的 port 5001</li> <li><strong>Interval</strong>: 測試的時間間隔（0.0-2.0 秒）</li> <li><strong>Transfer</strong>: 傳輸的總資料量（22.8 GBytes）</li> <li><strong>Bandwidth</strong>: 達到的總頻寬（97.6 Gbits/sec）</li> <li>分析<ul> <li>這個 iperf 測試報告顯示，在 2 秒的測試期間，總共傳輸了 22.8 GBytes 的資料，達到的總頻寬為 97.6 Gbits/sec。測試使用了 40 個併發連接，每個連線都有其唯一的本地端 port</li> <li><strong>代表在高併發的情況下，此網路能夠保持非常高的頻寬，適合需要大規模資料傳輸的應用</strong></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p>測試 UDP 連線的頻寬</p> <ul> <li> <p>伺服器端</p> <ul> <li>啟動 server 模式 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=c1># iperf3 預設使用 port 5001</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a>sudo<span class=w> </span>iperf3<span class=w> </span>-s
</span></code></pre></div></li> </ul> </li> <li> <p>客戶端</p> <ul> <li> <p>啟動 client 模式，並指定伺服器端的 IP 位址 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=c1># iperf3 預設使用 port 5001</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>iperf3<span class=w> </span>-c<span class=w> </span><span class=m>172</span>.31.1.152<span class=w> </span>-u<span class=w> </span>-b<span class=w> </span>5g
</span></code></pre></div></p> <ul> <li><code>-c</code>: 指定伺服器端的 IP 位址</li> <li><code>-u</code>: 使用 UDP 協定，因為預設情況下 iperf3 會採用 TCP 協定</li> <li><code>-b</code>: 設定每秒傳送的速度為 5 Gbits/sec</li> </ul> <p><img alt src=../../assets/pics/networking/iperf3_test_udp.png></p> <ul> <li>IPG target: 2.35 us (kalman adjust): 設定的 UDP datagram 的間隔時間（Inter-Packet Gap）目標為 2.35 微秒，使用 Kalman 濾波器調整</li> <li>本地端 IP 位址（172.31.20.27）使用 port 39022，連線到伺服器端 IP 位址（172.31.30.41）的 port 5001</li> <li>Interval: 測試時間範圍（0.0-10.0 秒）</li> <li>Transfer: 傳輸的總資料量（5.82 GBytes）</li> <li>Bandwidth: 達到的總頻寬（5.00 Gbits/sec）</li> <li>Jitter: 抖動（0.003 毫秒）</li> <li>Lost/Total Datagrams: 丟失的 datagram 數量/總 datagram 數量（1911/4251700），datagram 遺失率為 0.045 %</li> <li>分析<ul> <li>這份 iperf3 報告顯示，在 10 秒的測試期間，總共傳輸了 5.82 GB 的資料，達到的總頻寬為 5.00 Gbits/sec。測試中發送了 4251700 個 datagram，遺失了 1911 個，datagram 的遺失率為 0.045 %。抖動（Jitter）非常小，僅為 0.003 毫秒</li> <li><strong>代表此網路性能穩定，這些數據可以用來評估網路在高頻寬下的性能、穩定性</strong></li> </ul> </li> <li>常見選項<ul> <li>通用參數<ul> <li><code>-f</code> [k|m|K|M]: 報告結果顯示的單位，以Kbits, Mbits, KBytes, MBytes，例如: <code>iperf -c 192.168.1.3 -f K</code></li> <li><code>-i</code>: 報告顯示的時間間隔(以秒為單位)，例如: <code>iperf -c 192.168.1.3 -i 2</code></li> <li><code>-l</code> [KM]: 緩衝區大小，預設是 8 KB,例如: <code>iperf -c 192.168.1.3 -l 16</code></li> <li><code>-m</code>: 顯示MTU最大值</li> <li><code>-o</code>: 將報告與錯誤信息輸出到檔案，例如: <code>iperf -c 192.168.1.3 -o c:\iperf-log.txt</code></li> <li><code>-p</code>: server 端使用的 port，或 client 端使用的 port，兩端的 port 需一致，例如:<code>iperf -s -p 9999</code></li> <li><code>-u</code>: 使用 UDP 協定</li> <li><code>-w</code>: 指定 TCP window 大小，預設是 8 KB</li> <li><code>-B</code>: 綁定一個主機 IP 位址，可以是介面 or 廣播的 IP 位址，當主機端同時有很多 IP 位址時才需要綁定</li> <li><code>-C</code>: 相容舊版本 (兩端版本不一致時使用)</li> <li><code>-M</code>: 設定 TCP 封包的最大 MTU 值</li> <li><code>-N</code>: 設定 TCP 不延遲，禁用 Nagle 演算法</li> <li><code>-V</code>: 傳輸 IPv6 封包</li> </ul> </li> <li>Server 端專用<ul> <li><code>-D</code>: 背景服務方式運行，例如: <code>iperf -s -D</code></li> <li><code>-U</code>: 使用單一執行緒使用 UDP 模式</li> </ul> </li> <li>Client 端專用<ul> <li><code>-b</code>: UDP 測試專用，可以設定每秒傳送的速度</li> <li><code>c</code>: 指定 server 端的 IP 位址</li> <li><code>-d</code>: 同時進行雙向傳輸測試</li> <li><code>-n</code>: 指定傳輸的大小，例如: <code>iperf -c 192.168.1.3 -n 100000</code></li> <li><code>-r</code>: 單獨進行雙向傳輸測試</li> <li><code>F</code>: 使用指定檔案來傳輸</li> <li><code>-I</code>: 使用 stdin 方式當做傳輸內容</li> <li><code>-T</code>: 指定 TTL 值</li> </ul> </li> </ul> </li> <li>參考連結: <a href=https://repost.aws/knowledge-center/network-throughput-benchmark-linux-ec2>How do I benchmark network throughput between Amazon EC2 Linux instances in the same Amazon VPC</a></li> </ul> </li> </ul> </li> </ul> </li> </ul> <h3 id=curl>curl<a class=headerlink href=#curl title="Permanent link">&para;</a></h3> <ul> <li>說明: 全名為 Command Line URL，是一個用於傳輸資料的工具，支援多種協定，例如: HTTP, HTTPS, FTP, FTPS 等</li> <li>功能: <ul> <li>功能強大，任何網路相關的操作都可以透過 curl 進行</li> <li>只需要透過短短幾行指令就可以發送出 request，因此很適合拿來做<strong>測試使用</strong></li> <li>支援<strong>檔案的上傳、下載</strong></li> </ul> </li> <li> <p>基本用法: 第一步是使用不帶參數的 curl 測試網站的狀態，以驗證存取是否正確 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a>curl<span class=w> </span>&lt;https://example.com&gt;
</span></code></pre></div></p> </li> <li> <p>常用選項</p> <ul> <li> <p><code>A</code>: 指定 User-Agent。基於網路安全不斷受到重視，會遇到某些網頁不支援 curl 工具做連線，需要修改 User-Agent 來宣告改變瀏覽器， <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a>curl<span class=w> </span>-v<span class=w> </span>-A<span class=w> </span><span class=s2>&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot;</span><span class=w> </span>https://google.com/
</span></code></pre></div></p> </li> <li> <p><code>c</code>: 儲存 cookie。網站都會使用 cookie 來做登入上的認證，或是存取網站時用來辨認是否為正常的使用者 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=c1># 將請求時產生的 cookie 資訊儲存至 cookie_file</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a>curl<span class=w> </span>-c<span class=w> </span>cookie_file<span class=w> </span>https://www.google.com/
</span></code></pre></div></p> </li> <li> <p><code>b</code>: 讀取 cookie <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=c1># 發出請求時將 cookie_file 中的資訊帶入至請求中</span>
</span><span id=__span-72-2><a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a>curl<span class=w> </span>-b<span class=w> </span>cookie_file<span class=w> </span>https://www.google.com/
</span></code></pre></div></p> </li> <li> <p><code>e</code>: 帶入來源網址（referrer）。這個參數可以幫助模擬來自特定來源網頁的訪問，以便伺服器可以識別出請求的來源 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=c1># 設定請求來源網址為 facebook</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a>curl<span class=w> </span>-v<span class=w> </span>-e<span class=w> </span><span class=s2>&quot;https://www.facebook.com&quot;</span><span class=w> </span>https://google.com/
</span></code></pre></div></p> </li> <li> <p><code>O</code>（大寫）: 下載檔案，並使用原始檔案名稱</p> </li> <li> <p><code>o</code>（小寫）: 下載檔案並重新命名 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=c1># 下載檔案並重新命名為 city_bridge</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a>curl<span class=w> </span>-o<span class=w> </span>city_bridge<span class=w> </span>https://cdn.stocksnap.io/img-thumbs/960w/city-bridge_KSM9UIBTQ9.jpg
</span></code></pre></div></p> </li> <li> <p><code>C</code>: 檔案下載到中斷時，不用整個檔案重新下載，可使用 <code>-C</code> 選項來重新續傳下載 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a>curl<span class=w> </span>-C<span class=w> </span>-O<span class=w> </span>https://cdn.stocksnap.io/img-thumbs/960w/city-bridge_KSM9UIBTQ9.jpg
</span></code></pre></div></p> </li> <li> <p><code>--limit-rate</code>: 限制傳輸速度。有時候欲測試下載是否正常，又不想佔滿網路頻寬，需限制 <code>curl</code> 工具的資料傳輸速度，使用 <code>–limit-rate</code> 參數來指定傳輸速度的上限 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a>curl<span class=w> </span>--limit-rate<span class=w> </span>100k<span class=w> </span>-O<span class=w> </span>https://cdn.stocksnap.io/img-thumbs/960w/city-bridge_KSM9UIBTQ9.jpg
</span></code></pre></div></p> </li> <li> <p><code>L</code>: 預設情況下，<code>curl</code> 工具不會隨著 HTTP 301 或 302 重新導向到新的網址，可使用 <code>-L</code> 選項來強制重新導向 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a>curl<span class=w> </span>-L<span class=w> </span>https://www.google.com/
</span></code></pre></div></p> </li> <li> <p><code>I</code>: 只顯示 HTTP 頭部資訊，不顯示內容 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a>curl<span class=w> </span>-I<span class=w> </span>https://www.google.com/
</span></code></pre></div></p> </li> <li> <p><code>V</code>（大寫）: 檢查當前的 <code>curl</code> 工具版本號。偶爾在比較舊的版本中會有些 bug 或是不支援，不要忘了檢查 <code>curl</code> 版本號 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-79-1><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a>curl<span class=w> </span>-V
</span></code></pre></div></p> </li> <li> <p><code>v</code>（小寫）: 輸出完整訊息。主要是用來除錯 or 完整顯示整個連線過程的內容，會包含 SSL 握手資訊, request 裡所攜帶的 header <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-80-1><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a>curl<span class=w> </span>-v<span class=w> </span>https://google.com/
</span></code></pre></div></p> </li> <li> <p><code>X</code>（= <code>--request</code>）: 指定 HTTP 方法 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-81-1><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a><span class=c1># 使用 GET 方法發送請求</span>
</span><span id=__span-81-2><a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a>curl<span class=w> </span>https://reqres.in/api/users/1
</span></code></pre></div></p> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-82-1><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=c1># 使用 PATCH 方法，部分更新資料</span>
</span><span id=__span-82-2><a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a>curl<span class=w> </span>-X<span class=w> </span>PATCH<span class=w> </span>https://reqres.in/api/users/1<span class=w> </span>-d<span class=w> </span><span class=s2>&quot;name=mia&amp;job=leader&quot;</span>
</span></code></pre></div> <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-83-1><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=c1># 使用 DELETE 方法，刪除資料</span>
</span><span id=__span-83-2><a id=__codelineno-83-2 name=__codelineno-83-2 href=#__codelineno-83-2></a>curl<span class=w> </span>-X<span class=w> </span>DELETE<span class=w> </span>-I<span class=w> </span>https://reqres.in/api/users/1
</span></code></pre></div> </li> <li> <p><code>d</code>（= <code>--data</code>）: 指定 POST 請求的資料 <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-84-1><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=c1># 使用 POST 方法發送請求，並提供 request body 的資料</span>
</span><span id=__span-84-2><a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a>curl<span class=w> </span>https://reqres.in/api/users/<span class=w> </span>-d<span class=w> </span><span class=s2>&quot;name=mia&amp;job=leader&quot;</span>
</span></code></pre></div></p> </li> <li> <p><code>H</code>: 指定 request header <div class="language-bash highlight"><span class=filename>Bash</span><pre><span></span><code><span id=__span-85-1><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a>curl<span class=w> </span>https://reqres.in/api/users/<span class=w> </span>-d<span class=w> </span><span class=s1>&#39;{&quot;name&quot;]&quot; : &quot;mia&quot;, &quot;job&quot;: &quot;leader&quot;}&#39;</span><span class=w> </span>-H<span class=w> </span><span class=s2>&quot;Content-Type: application/json&quot;</span>
</span></code></pre></div></p> </li> </ul> </li> <li> <p>參考連結:</p> <ul> <li><a href=https://www.cjkuo.net/linux-curl-detail/ >Linux Curl 超詳細教學(常用篇)</a></li> <li><a href=https://www.cjkuo.net/linux-curl_v_debug/ >Linux curl -v 快速判別無法訪問服務問題點在哪裡?</a></li> </ul> </li> </ul> <h2 id=_1>其他學習資源<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <ul> <li> <p><a href=https://hpbn.co/ >O'Reilly: High Performance Browser Networking</a></p> <ul> <li> <p><a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch01.html>Chapter 1. Primer on Latency and Bandwidth</a></p> <ul> <li> <p><strong>延遲才是效能瓶頸</strong>; 而不是網路頻寬 <img alt src=../../assets/pics/networking/web_performance_depends_on_latency.png></p> </li> <li> <p>考慮到我們目前的速度已經在光速的 &#8532; 以內，我們對這項策略的最大期望只是 30% 的適度改善，已經達到物理定律的極限了。由於我們無法使光傳播得更快，我們可以縮短距離——地球上任意兩點之間的最短距離由它們之間的大圓路徑定義。因此，為了提高應用程式的效能，具體做法會是</p> <ul> <li><strong>優化我們的協定（TLS, TCP 協定）, 網路程式碼</strong></li> <li><strong>減少往返（RTT）</strong></li> <li><strong>將資料移動到更接近客戶端的位置</strong>，並建立應用程式可以透過<strong>快取、預取、各種類似技術來隱藏延遲</strong></li> <li><a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch04.html>Chapter 4. Transport Layer Security (TLS)</a></li> </ul> </li> <li><strong>啟用 TLS false start</strong>: <strong>允許當 TLS 握手僅部分完成，就能開始發送應用程式的資料</strong><ul> <li><strong>新的 TLS 連線需要 2 次 RTT</strong> 才能實現<strong>完全握手</strong></li> <li>TLS false start 不會修改 TLS 握手協議，而只會影響傳送應用程式資料的協議時間。直觀地說，<strong>一旦客戶端發送了 tlsClientKeyExchange 記錄，它就已經知道加密金鑰並可以開始傳輸應用程式資料</strong>，TLS 握手的其餘部分用於確認沒有人篡改握手記錄，並且可以併行完成。因此，TLS false start 讓我們可以在一次往返中保持 TLS 握手，無論我們是執行完整握手 or 簡短握手 <img alt src=../../assets/pics/networking/tls_false_start.png></li> </ul> </li> </ul> </li> <li> <p><a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch10.html>Chapter 10. Primer on Web Performance</a></p> <ul> <li> <p>瀏覽器渲染網頁的流程 <img alt src=../../assets/pics/networking/browser_processing_pipeline.png></p> <ul> <li>Web 應用程式的效能，尤其是<strong>首次載入的渲染時間</strong>，直接<strong>取決於如何解析 HTML DOM、CSS 樣式表、 JavaScript 之間的依賴關係圖</strong></li> <li> <p>所以才會有 <strong>CSS 樣式寫在 HTML 頂部，Javascript 腳本寫在 HTML 底部</strong> 的名言 - 運用 <a href=https://www.webpagetest.org/ >WebPagesTest</a> 工具，來測試網頁的效能，根據產生的資源瀑布圖表（resource waterfall），來分析網頁的載入時間 <img alt src=../../assets/pics/networking/yahoo_resource_waterfall_example.png></p> </li> <li> <p><font color=#9AFF02>開始渲染（Time to First Byte）</font>: 發生在所有資源完全載入以前，允許使用者在建立頁面時，就能開始與頁面互動</p> </li> <li><font color=#2894FF>文檔完成 事件（Content Download）</font>: 也會在剩餘資源載入之前提前觸發<ul> <li>換句話說，雖然瀏覽器已停止轉動，使用者可以繼續執行其任務，但 Yahoo! 主頁正在後台逐步填充附加內容，例如: 廣告、社交小工具</li> </ul> </li> </ul> </li> </ul> </li> <li> <p><a href=https://www.oreilly.com/library/view/high-performance-browser/9781449344757/ch13.html>Chapter 13. Optimizing Application Delivery</a> <img alt src=../../assets/pics/networking/primer_on_web_performance.png></p> <ul> <li> <p>根據上圖，欲優化網頁效能，可以分成以下三個層級的面向</p> <ul> <li><strong>優化應用程式層（Application Layer）</strong><ul> <li>解決 HTTP/1.x 的限制，並利用 HTTP/2 的新功能ㄍ</li> <li>落實 evergreen performance 的最佳實踐<ul> <li>基礎原則<ul> <li><strong>減少 DNS 查詢</strong>: 每一個主機名解析需要網路往返，可能會造成延遲</li> <li><strong>重複使用 TCP 連接</strong>: 盡可能利用 keep-alive 連線，來消除 TCP 握手、慢啟動所造成的網路延遲時間</li> <li><strong>最小化 HTTP 重定向次數</strong>: HTTP 重新導向會造成高延遲</li> <li><strong>減少往返時間</strong>: 將伺服器定位在更靠近使用者的位置</li> <li><strong>刪除不必要的資源</strong>: 沒有請求比沒有提出請求更快，適時刪除不必要的資源</li> </ul> </li> <li>資源優化<ul> <li><strong>在客戶端快取資源</strong>: 應快取應用程式資源，以避免每次需要資源時重新請求相同的資料</li> <li><strong>傳輸過程中壓縮資料</strong>: 應對每個需傳輸的資料，採用最佳壓縮方法</li> <li><strong>去除不必要的資料請求</strong>: 減少傳輸的 HTTP 標頭資料（例如: HTTP cookie）可以節省整個往返的網路延遲</li> <li><strong>併行化請求、回應處理</strong>: 客戶端、伺服器上的請求、回應排隊延遲通常不會被注意到，但卻會造成顯著且不必要的延遲</li> <li><strong>採用 HTTP/2 協定</strong>: HTTP/2 協定支援多路請求、回應，並且支援伺服器推送資源</li> </ul> </li> </ul> </li> </ul> </li> <li> <p><strong>優化 TLS 協定（Presentation Layer）</strong>:</p> <ul> <li><strong>重複使用 TCP + TLS 連線</strong>: 設定 TCP 連線為 keep-alive，以減少 TLS 握手的次數</li> <li> <p><strong>使用 edge proxy server 作為 CDN 服務</strong>: 運用 CDN 讓邊緣伺服器能更靠近使用者，以大幅減少往返時間（RTT），以及 TCP, TLS 握手的總成本 <img alt src=../../assets/pics/networking/enhance_tls_using_edge_proxy_as_cdn.png></p> </li> <li> <p><strong>啟用會話恢復（Session Resumption）</strong>: TLS 會話恢復允許客戶端、伺服器端之間的 TLS 連接在多次連接之間共享相同的 session 密鑰資訊，可以在重新連線時跳過完整的握手過程，以加快連線速度</p> </li> <li><strong>啟用 TLS false start</strong>: 允許當 TLS 握手流程僅部分完成時，就能開始發送應用程式的資料 - <strong>優化 TCP 協定（Transport Layer）</strong>: 優化 TCP 協定的最佳方法是<strong>調整 TCP 如何感知當前網路狀況，並根據其上、下層的類型, 要求調整其行為</strong>，例如: 無線網路可能需要不同的擁塞演算法，並且某些應用程式可能需要自訂服務品質(QoS) 以提供最佳體驗。為了讓<strong>各個 TCP 連線實現最佳效能 - 更低的延遲、更高的吞吐量</strong></li> </ul> <blockquote> <p><strong>擁塞視窗（cwnd）</strong>: cwnd 用來<strong>進行 TCP 擁塞控制，可決定在未接收到確認（ACK）之前，TCP 連接能夠發送的最大資料量</strong>。透過動態調整 CWND 的大小，TCP 協定能夠適應網路狀況，在最大化傳輸效率的同時，盡量避免網路擁塞的發生</p> <p><strong>接收視窗（rwnd）</strong>: rwnd 是 TCP 的接收窗口大小，它由接收端決定，用來通知發送端，當前接收端能夠處理的資料量。rwnd 用來<strong>進行 TCP 流量控制，確保發送端不會傳送過多的資料超出接收端的處理能力</strong>。rwnd 的值會隨著接收端緩衝區的變化而變化，是由接收端在 TCP header 中透過 <code>ACK</code> 消息來告知發送端的</p> <p><strong>慢啟動重啟（Slow Start Restart, SSR）</strong>: <strong>為了調節新 TCP 連線的傳輸速率，TCP 還實現了慢啟動重啟（SSR）機制，該機制在連接空閒一段定義的時間後，會重置連接的擁塞視窗</strong>。理由很簡單 --- 在連接空閒時網路狀況可能已經發生變化，為了避免擁塞，視窗被重置為「安全」預設值</p> <p><strong>TCP 快速開啟（Fast Open, TFO）</strong>: TCP 快速開啟 (TFO) 是一種機制，<strong>允許在初始 <code>SYN</code> 封包中就傳送應用程式資料，來消除對新 TCP 連接造成的延遲損失</strong>。但是，它確實有其自身的限制，例如: <code>SYN</code> 封包內資料有效負載的最大大小有限制、只能發送某些類型的 HTTP 請求，並且由於需要重複連接，因此它僅適用於重複連接加密 cookie</p> </blockquote> <ul> <li><strong>增加 TCP 的初始擁塞視窗</strong>: 較大的起始擁塞視窗允許 TCP 在第一次往返中傳輸更多數據，並顯著加速 cwnd 視窗成長<ul> <li>預設: 3 個 MSS (Maximum Segment Size) 的擁塞視窗大小。可調整為 10 個 MSS</li> </ul> </li> <li><strong>停用 TCP 的 Slow Start Restart 功能</strong>: 停用閒置後的 SSR，將提高以週期性突發方式傳輸資料的長期 TCP 連線的效能</li> <li><strong>調整 cwnd 視窗大小</strong>: 啟用視窗縮放可增加最大接收視窗大小，並允許高延遲連線實現更好的吞吐量</li> <li><strong>啟用 TCP Fast Open（TFO）</strong>: 在某些情況下，允許在初始 SYN 封包中發送應用程式資料。<strong>TFO 是一個新的優化，需要客戶端和服務端都支援，需事先調查您的應用程式是否可以使用它</strong></li> </ul> </li> <li> <p><strong>優化物理層、傳輸層（Physical Layer, Data Link Layer）</strong>: 光速、用戶端 :left_arrow_right: 伺服器之間的距離決定了傳播延遲; 而傳播媒介的選擇（有線、無線）決定了每個資料封包所產生的處理、傳輸、排隊的延遲時間</p> <ul> <li>實際上，WiFi 網路通常是有線 LAN 的延伸，而有線 LAN 又透過 DSL、電纜或光纖連接到廣域網路。對於美國的普通用戶來說，這代表<strong>邊緣頻寬為 8.6 Mbps，全球平均頻寬為 3.1 Mbps</strong>。換句話說，<strong>大多數 WiFi 用戶端仍然可能受到可用 WAN 頻寬的限制，而不是 WiFi 本身的限制</strong></li> <li>根據下圖，<strong>在最好的情況下，無線電已經處於高功率狀態，DNS 已預先解析，並且現有 TCP 連線可用</strong>（客戶端可以重複使用現有的 TCP 連線，並避免建立新連線的開銷）。但是，如果連接繁忙或不存在，則在發送任何應用程式資料之前，我們必須進行多次額外的往返（RTT） <img alt src=../../assets/pics/networking/network_latency_of_http_request_illustration.png></li> </ul> </li> </ul> </li> </ul> </li> </ul> </li> <li> <p><a href=https://www.igvita.com/posa/high-performance-networking-in-google-chrome/ >High Performance Networking in Google Chrome</a></p> </li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> 回到頂端 </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 ~ Hans Tsai </div> </div> <div class=md-social> <a href=https://github.com/hans-tsai target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.sections", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u8907\u88fd", "clipboard.copy": "\u8907\u88fd", "search.result.more.one": "\u6b64\u9801\u5c1a\u6709 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.more.other": "\u6b64\u9801\u5c1a\u6709 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.term.missing": "\u7f3a\u5c11\u5b57\u8a5e", "select.version": "\u9078\u64c7\u7248\u672c"}}</script> <script src=../../assets/javascripts/bundle.af256bd8.min.js></script> <script src=../../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> <script src=../../assets/javascripts/custom.a678ee80.min.js></script> </body> </html>