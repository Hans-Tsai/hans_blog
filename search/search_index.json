{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Material for MkDocs","text":"<p>Welcome to Material for MkDocs.</p>"},{"location":"mkdocs_info/mkdocs/","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"mkdocs_info/mkdocs/#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> <li><code>mkdocs gh-deploy --force</code> - Deploy your project documentation manually.</li> </ul>"},{"location":"mkdocs_info/mkdocs/#project-layout","title":"Project layout","text":"Text Only<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"mkdocs_info/mkdocs/#references","title":"References","text":"<ul> <li>Mkdocs \u90e8\u7f72\u975c\u614b\u7db2\u9801\u81f3 GitHub pages \u7d44\u614b\u8aaa\u660e (mkdocs.yml)</li> </ul>"},{"location":"programming_language/nodejs/","title":"Node.js Learn","text":""},{"location":"programming_language/nodejs/#nodejs","title":"\u81ea\u4e3b\u5b78\u7fd2 Node.js \u7684\u89c0\u5ff5\u548c\u6307\u4ee4\u5f8c\u505a\u7684\u7d71\u6574 &amp; \u5b78\u7fd2\u7b46\u8a18","text":""},{"location":"programming_language/nodejs/#_1","title":"\u5b89\u88dd\u65b9\u5f0f","text":"<ul> <li>\u5b98\u65b9\u7db2\u7ad9\u6703\u5148\u5206\u6210LTS.Current\u5169\u500b\u7248\u672c</li> <li><code>LTS</code>(Long-term support): Recommended for most users</li> <li><code>Current</code>: Latest features</li> <li>\u5b89\u88ddNode.js\u4e4b\u5f8c,\u4e5f\u6703\u81ea\u52d5\u5b89\u88ddNPM</li> <li>\u82e5\u60f3\u8981\u5b89\u88dd\u6307\u5b9a\u7248\u672c\u7684Node.js,\u53ef\u4ee5\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>brew install node@&lt;specific version&gt;</code><ul> <li>\u4f8b: <code>brew install node@10</code></li> </ul> </li> <li>\u53ef\u53c3\u8003How to install specific NodeJS version</li> <li>\u82e5\u60f3\u8981\u5b89\u88dd\u6307\u5b9a\u7248\u672c\u7684NPM(Node Package Manager),\u53ef\u4ee5\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4</li> <li>\u5347\u7d1a\u5230Latest version: <code>npm install -g npm@latest</code></li> <li>\u5347\u7d1a\u5230Most recent release version: <code>npm install -g npm@next</code></li> <li>\u53ef\u53c3\u8003Try the latest stable version of npm</li> <li>\u5982\u679c\u60f3\u8981\u5728\u540c\u4e00\u53f0\u96fb\u8166\u4e0a\u9762,\u5207\u63dbNode\u7684\u7248\u672c,\u53ef\u4ee5\u5b89\u88ddNVM(Node Version Manager)</li> <li>MacOS<ul> <li>$ <code>brew install nvm</code></li> </ul> </li> <li>Linux<ul> <li>$ <code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh | bash</code></li> </ul> </li> <li>\u63a5\u4e0b\u4f86\u8981\u5230(~/.bash_profile, ~/.zshrc, ~/.profile, or ~/.bashrc)\u7684\u5176\u4e2d\u4e00\u500b\u6a94\u6848,\u65b0\u589e\u4ee5\u4e0b3\u884c\u6307\u4ee4 \u5230\u8a72\u6a94\u6848\u7684\u6700\u4e0b\u9762<ul> <li><code>export NVM_DIR=\"$HOME/.nvm\"</code> <code>[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; \\. \"$NVM_DIR/nvm.sh\"</code>  # This loads nvm <code>[ -s \"$NVM_DIR/bash_completion\" ] &amp;&amp; \\. \"$NVM_DIR/bash_completion\"</code>  # This loads nvm bash_completion</li> </ul> </li> <li>\u6aa2\u67e5\u662f\u5426\u6b63\u5e38\u5b89\u88ddNVM<ul> <li>$ <code>command -v nvm</code>: \u5982\u679c\u6709\u6210\u529f\u5b89\u88ddNVM\u7684\u8a71,\u61c9\u8a72\u8981\u56de\u50b3<code>nvm</code></li> </ul> </li> <li>\u6aa2\u67e5\u5b89\u88dd\u7684NVM\u7248\u672c<ul> <li>$ <code>nvm --version</code> </li> </ul> </li> <li>\u53ef\u53c3\u8003Node Version Manager</li> </ul>"},{"location":"programming_language/nodejs/#windows","title":"Windows \u7cfb\u7d71","text":"<ul> <li>\u9023\u7d50: https://nodejs.org/en/download/</li> <li>\u5b89\u88dd\u5b8c\u6210\u5f8c,\u53ef\u4ee5\u7528CLI\u6307\u4ee4\u6aa2\u67e5 Node &amp; NPM \u7684\u7248\u672c<ul> <li>$ <code>node --version</code> </li> <li>$ <code>npm --version</code></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#macos","title":"MacOS \u7cfb\u7d71","text":"<ul> <li>\u9023\u7d50: https://nodejs.org/en/download/package-manager/#macos<ul> <li>\u6307\u4ee4: <code>brew install node</code></li> </ul> </li> <li>\u5b89\u88dd\u5b8c\u6210\u5f8c,\u53ef\u4ee5\u7528CLI\u6307\u4ee4\u6aa2\u67e5 Node &amp; NPM \u7684\u7248\u672c<ul> <li>$ <code>node --version</code> </li> <li>$ <code>npm --version</code></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#linux-ubuntu","title":"Linux \u7cfb\u7d71 (\u4ee5 Ubuntu \u70ba\u4f8b)","text":"<ul> <li>\u9023\u7d50: https://github.com/nodesource/distributions/blob/master/README.md</li> <li>\u6307\u4ee4: <ul> <li>$ <code>sudo apt-get install -y nodejs</code></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs_1","title":"Node.js \u6838\u5fc3\u89c0\u5ff5","text":""},{"location":"programming_language/nodejs/#introduction-to-nodejs","title":"Introduction to Node.js","text":"<p><code>\u5148\u5099\u77e5\u8b58</code></p> <p><code>One process</code>: \u4e00\u500b\u5168\u57df\u7684Object,\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u88ab\u57f7\u884c,\u4e26\u4fdd\u6709\u57f7\u884c\u6642\u7684\u8cc7\u6599 <code>One thread</code>: single-thread,\u5728\u4e00\u500b<code>process</code>\u4e2d\u53ea\u80fd\u57f7\u884c\u4e00\u4ef6\u4e8b <code>One event loop</code>: \u4e00\u500b\u4e8b\u4ef6\u8ff4\u5708,\u56e0\u70ba\u5b83\u4f7fNode\u53ef\u4ee5\u662f\u975e\u540c\u6b65(asynchronous) &amp; \u975e\u963b\u585eI/O(non-blocking I/O); \u56e0\u70baNode\u662fsingle-thread\u7684,\u900f\u904ecallback.Promise.async/await\u80fd\u5c07\u5de5\u4f5c\u5206\u6563\u7d66system kernel <code>One JS Engine Instance</code>: \u4e00\u500bJavascript\u5be6\u4f8b,\u7528\u4f86\u57f7\u884cJavascript\u7684\u7a0b\u5f0f\u78bc <code>One Node.js Instance</code>: \u4e00\u500bNode\u5be6\u4f8b,\u7528\u4f86\u57f7\u884cNode\u7684\u7a0b\u5f0f\u78bc</p> <ul> <li>Node\u662f\u4e00\u500b\u514d\u8cbb.\u958b\u6e90.\u8de8\u5e73\u53f0\u7684Javascript\u57f7\u884c\u74b0\u5883,\u8b93\u958b\u767c\u8005\u53ef\u4ee5\u5728\u700f\u89bd\u5668\u4ee5\u5916\u4e5f\u80fd\u4f7f\u7528Javascript</li> <li>\u4e5f\u56e0\u6b64\u8b93\u5ee3\u5927\u7684\u524d\u7aef\u958b\u767c\u8005\u5011,\u53ef\u4ee5\u52a0\u5165\u5f8c\u7aef\u958b\u767c\u7684\u884c\u5217,\u4e26\u4e14\u4e0d\u7528\u56e0\u6b64\u9700\u8981\u591a\u5b78\u4e00\u9580\u7a0b\u5f0f\u8a9e\u8a00 </li> <li>Node\u662f\u57fa\u65bcChrome\u700f\u89bd\u5668\u7684V8\u5f15\u64ce\u4f86\u5efa\u7acb\u51fa\u7684\u57f7\u884c\u74b0\u5883,\u56e0\u6b64\u80fd\u6709\u975e\u5e38\u597d\u7684\u6548\u80fd</li> <li>Node\u662f\u7531\u958b\u6e90\u793e\u7fa4\u4f86\u5171\u540c\u7dad\u8b77,\u4e26\u4e14\u80fd\u4f7f\u7528\u6700\u65b0\u7684ECMAScript\u6a19\u6e96</li> <li>\u56e0\u6b64\u4e0d\u5fc5\u7b49\u5f85\u6240\u6709\u7528\u6236\u66f4\u65b0\u4ed6\u5011\u7684\u700f\u89bd\u5668,\u5c31\u53ef\u4ee5\u9078\u64c7\u8981\u4f7f\u7528\u7684Node\u7248\u672c\u4f86\u9054\u5230\u4f86\u6c7a\u5b9a\u8981\u4f7f\u7528\u54ea\u500bECMAScript\u7248\u672c</li> <li>\u53ef\u53c3\u8003\u5b98\u65b9\u6587\u4ef6ECMAScript 2015 (ES6) and beyond </li> <li>Node\u61c9\u7528\u7a0b\u5f0f\u5728\u55ae\u500b\u9032\u7a0b(single process)\u4e2d\u904b\u884c,\u7121\u9700\u70ba\u6bcf\u500b\u8acb\u6c42\u5efa\u7acb\u65b0\u7dda\u7a0b(thread),\u80fd\u8655\u7406\u6578\u5343\u500b\u4f75\u767c\u9023\u63a5(concurrent connections),\u4e5f\u4e0d\u6703\u56e0\u6b64\u800c\u589e\u52a0\u7ba1\u7406\u7dda\u7a0b(thread)\u4e0a\u7684\u8ca0\u64d4</li> <li>\u540c\u6642Node\u4e5f\u5728\u5176\u6a19\u6e96\u51fd\u5f0f\u5eab\u4e2d\u63d0\u4f9b\u4e86\u4e00\u7d44\u975e\u540c\u6b65I/O\u539f\u8a9e(asynchronous I/O primitives)\u4f86\u9632\u6b62Javascript\u7684\u7a0b\u5f0f\u78bc\u88ab\u963b\u585e\u4f4f,\u56e0\u6b64\u5728Node\u4e2d\u4f7f\u7528\u975e\u963b\u585e\u5f0f\u8a9e\u6cd5(non-blocking paradigms)\u4f86\u958b\u767c\u662f\u6b63\u5e38\u4e14\u666e\u904d\u7684</li> <li>\u7576Node\u57f7\u884c\u6703\u6709I/O\u7684\u64cd\u4f5c(e.g. \u5f9e\u7db2\u8def\u4e0a\u8b80\u53d6\u8cc7\u6599.\u5b58\u53d6\u8cc7\u6599\u5eabor\u6a94\u6848\u7cfb\u7d71)\u6642,Node\u6703\u81ea\u52d5\u5728response\u56de\u50b3\u6642\u624d\u6062\u5fa9\u64cd\u4f5c,\u800c\u4e0d\u662f\u7121\u6548\u5730\u963b\u64cb\u4f4f\u7dda\u7a0b\u548c\u6d6a\u8cbbCPU\u9031\u671f\u7b49\u5f85\u6642\u9593</li> <li>\u53d7\u60e0\u65bcnpm\u7684\u7c21\u55ae\u7d50\u69cb,\u5176\u4fc3\u4f7fNode\u751f\u614b\u7cfb\u53ef\u4ee5\u84ec\u52c3\u5730\u767c\u5c55,\u76ee\u524d\u5728npm\u4e0a\u5df2\u7d93\u6709\u8d85\u904e1,000,000\u500b\u958b\u6e90\u8edf\u9ad4&amp;\u5de5\u5177\u53ef\u4f9b\u4f7f\u7528</li> <li>Node.js\u7b97\u662f\u4e00\u500b\u4f4e\u968e\u7684\u5e73\u53f0,\u7136\u800c\u5728\u793e\u7fa4(community)\u4e0a\u6709\u6578\u5343\u500b\u51fd\u5f0f\u5eab\u8207\u597d\u7528\u7684\u6846\u67b6\u5efa\u69cb\u65bcNode.js\u4e4b\u4e0a</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const http = require('http');\nconst hostname = '127.0.0.1';\nconst port = process.env.PORT;\nconst server = http.createServer((req, res) =&gt; {\nres.statusCode = 200\nres.setHeader('Content-Type', 'text/plain')\nres.end('Hello World!\\n')\n});\nserver.listen(port, hostname, () =&gt; {\nconsole.log(`Server running at http://${hostname}:${port}/`)\n});\n</code></pre></li> <li>\u4ee5\u4e0a\u7a0b\u5f0f\u78bc\u6703\u5efa\u7acb\u4e00\u500b\u65b0\u7684http server\u4e26\u56de\u50b3,\u540c\u6642\u9019\u500bserver\u4e5f\u6703\u76e3\u807d\u6307\u5b9a\u7684port &amp; host name</li> <li>\u7576server\u6e96\u5099\u5c31\u7dd2\u6642,\u5c07\u57f7\u884ccallback function,\u5728\u9019\u6642\u4e5f\u6703\u901a\u77e5\u6211\u5011server\u6b63\u5728\u904b\u884c\u4e2d</li> <li>\u6bcf\u7576\u6536\u5230\u4e00\u500b\u65b0\u7684request\u6642,\u90fd\u6703\u547c\u53eb\u8a72request event,\u4e26\u63d0\u4f9b\u5169\u500b\u7269\u4ef6(objects)<ul> <li>\u8acb\u6c42\u7269\u4ef6(request): <code>http.IncomingMessage</code></li> <li>\u5b83\u6703\u63d0\u4f9brequest details </li> <li>\u56de\u61c9\u7269\u4ef6(response): <code>http.ServerResponse</code></li> <li>\u5b83\u6703\u7528\u4f86\u5c07data\u56de\u50b3\u7d66\u547c\u53ebrequest event\u7684\u90a3\u65b9</li> </ul> </li> <li>\u5728\u9019\u7a2e\u72c0\u6cc1\u4e0b, \u6211\u5011\u6703\u5c07\u72c0\u614b\u78bc\u8a2d\u5b9a\u70ba200,\u4ee5\u8868\u793a\u8a72request\u6210\u529f     =&gt; <code>res.statusCode = 200</code></li> <li>\u4e26\u8a2d\u5b9aContent-Type\u6a19\u982d     =&gt; <code>res.setHeader('Content-Type', 'text/plain')</code></li> <li>\u6700\u5f8c,\u6703\u95dc\u9589response,\u4e26\u5c07\u5167\u5bb9\u4f5c\u70ba\u53c3\u6578\u6dfb\u52a0\u5230res.end()\u4e2d     =&gt; <code>res.end('Hello World\\n')</code></li> </ul>"},{"location":"programming_language/nodejs/#a-brief-history-of-nodejs","title":"A brief history of Node.js","text":"<ul> <li>Node.js\u6700\u521d\u662f\u7531Ryan Lienhart Dahl,\u65bc2010/05\u6708\u521d\u6b21\u767c\u8868,\u76f8\u6bd4\u65bcJavascript(1995/12\u6708)\u8207\u7db2\u969b\u7db2\u8def\u7684\u8a95\u751f(1989\u5e74)\u4f86\u8aaa,\u5728\u6280\u8853\u9818\u57df\u4e2d,\u4e26\u4e0d\u7b97\u662f\u5f88\u9577\u7684\u6642\u9593,\u4f46\u76ee\u524d\u770b\u4f86Node\u6703\u6301\u7e8c\u5b58\u5728\u4e0b\u53bb</li> <li></li> <li></li> <li>\u53d7\u60e0\u65bc\u700f\u89bd\u5668\u7684\u6548\u80fd\u7af6\u722d\u6230(2003~2008\u5e74)\u5f8c\u7684\u7d50\u679c,\u5404\u5bb6\u700f\u89bd\u5668\u4f9b\u61c9\u5546\u722d\u76f8\u70ba\u7528\u6236\u63d0\u4f9b\u6700\u4f73\u6027\u80fd,Javscript engine\u7684\u904b\u884c\u6548\u80fd\u4e5f\u8d8a\u4f86\u8d8a\u597d,\u800cNode\u4f7f\u7528\u7684Chrome\u700f\u89bd\u5668\u7684Javascript engine---V8,\u5728\u6027\u80fd\u4e0a\u4e5f\u6709\u5353\u8d8a\u7684\u63d0\u5347</li> <li>\u53e6\u4e00\u500b\u4f7fNode\u5feb\u901f\u5d1b\u8d77\u7684\u95dc\u9375\u56e0\u7d20\u662fWeb2.0\u7684\u8a95\u751f,\u4f8b\u5982Flickr.Gmail\u7b49,\u8b93Javascript\u958b\u59cb\u88ab\u8996\u70ba\u4e00\u500b\u66f4\u70ba\u91cd\u8981\u7684\u7a0b\u5f0f\u8a9e\u8a00</li> <li>Node\u6070\u5de7\u662f\u5728\u6b63\u78ba\u7684\u6642\u9593\u548c\u6b63\u78ba\u7684\u6642\u9593\u69cb\u5efa\u7684,\u5b83\u70baJavaScript\u670d\u52d9\u5668\u7aef\u958b\u767c\u5f15\u5165\u4e86\u8a31\u591a\u5275\u65b0\u601d\u7dad\u548c\u65b9\u6cd5,\u9019\u4e9b\u65b9\u6cd5\u548c\u65b9\u6cd5\u5df2\u7d93\u70ba\u8a31\u591a\u958b\u767c\u4eba\u54e1\u63d0\u4f9b\u4e86\u5e6b\u52a9,\u9019\u5c31\u662f\u70ba\u4ec0\u9ebc\u5b83\u958b\u59cb\u6d41\u884c\u7684\u539f\u56e0</li> <li>Node.js \u7c21\u53f2(Change log)</li> <li>\u897f\u51432009\u5e74<ul> <li>Node.js\u8a95\u751f</li> <li>\u6700\u521d\u7248npm\u554f\u4e16</li> </ul> </li> <li>\u897f\u51432010\u5e74<ul> <li>Express.js\u6846\u67b6 \u8a95\u751f</li> <li>socket.io \u8a95\u751f</li> </ul> </li> <li>\u897f\u51432011\u5e74<ul> <li>npm \u767c\u5e031.0\u7248\u672c</li> <li>\u8a31\u591a\u5927\u578b\u516c\u53f8\u958b\u59cb\u63a1\u7528Node.js,\u4f8b:LinkedIn.Uber\u7b49</li> </ul> </li> <li>\u897f\u51432012\u5e74<ul> <li>\u8d8a\u4f86\u8d8a\u591a\u4eba\u958b\u59cb\u63a1\u7528Node.js</li> </ul> </li> <li>\u897f\u51432013\u5e74<ul> <li>\u7b2c\u4e00\u500b\u4f7f\u7528Node.js\u7684\u5927\u578b\u90e8\u843d\u683c\u5e73\u53f0: Ghost</li> <li>koa\u6846\u67b6 \u8a95\u751f</li> </ul> </li> <li>\u897f\u51432014\u5e74<ul> <li>\u91cd\u5927\u4e8b\u4ef6: io.js\u8a95\u751f,\u662fNode.js\u7684\u4e3b\u8981Fork\u51fa\u4f86\u7684\u5c08\u6848,\u76ee\u7684\u662f\u70ba\u4e86\u52a0\u5165Javascript\u7684ES6\u8a9e\u6cd5\u652f\u63f4\u4e26\u63d0\u5347\u4e86\u6548\u80fd </li> </ul> </li> <li>\u897f\u51432015\u5e74<ul> <li>Node.js\u57fa\u91d1\u6703\u8a95\u751f (\u76ee\u524d\u96b8\u5c6c\u65bcOpenJS Foundation\u65d7\u4e0b\u7684\u5176\u4e2d\u4e00\u500b\u5c08\u6848)</li> <li>io.js\u5408\u4f75\u56deNode.js\u5c08\u6848\u4e2d</li> <li>npm\u958b\u59cb\u63a8\u51fa\u79c1\u6709\u6a21\u7d44(private modules)</li> <li>Node.js 4\u767c\u5e03(\u76f4\u63a5\u8df3\u904eNode.js 1,2,3)</li> <li>\u53ef\u53c3\u8003Node_changelog</li> </ul> </li> <li>\u897f\u51432016\u5e74<ul> <li>kik\u6a21\u7d44\u7684left-pad\u4e8b\u4ef6\u7206\u767c,\u5f15\u8d77\u958b\u6e90\u793e\u7fa4\u7684\u4e00\u9663\u9a37\u52d5</li> <li>Yarn\u5957\u4ef6\u7ba1\u7406\u5305\u5de5\u5177 \u8a95\u751f</li> <li>Node.js 6\u767c\u5e03</li> </ul> </li> <li>\u897f\u51432017\u5e74<ul> <li>npm\u958b\u59cb\u66f4\u52a0\u6ce8\u91cd\u5b89\u5168\u6027</li> <li>Node.js 8\u767c\u5e03</li> <li>HTTP/2 \u6838\u5fc3\u6a21\u7d44 \u767c\u5e03</li> <li>V8\u5c07Node\u52a0\u5165\u5b83\u7684\u6e2c\u8a66\u5957\u4ef6\u4e2d,\u4f7fNode\u6210\u70ba\u7e7cChrome\u4e4b\u5f8c\u7684Javascript engine\u6b63\u5f0f\u76ee\u6a19</li> <li>\u9054\u621030\u5104\u6b21/\u9031\u7684\u4e0b\u8f09\u6d41\u91cf\u7d00\u9304</li> </ul> </li> <li>\u897f\u51432018\u5e74<ul> <li>Node.js 10\u767c\u5e03</li> <li>ES modules.mjs\u958b\u59cb\u52a0\u5165\u5be6\u9a57\u6027\u652f\u63f4(experimental support)</li> <li>Node.js 11\u767c\u5e03</li> </ul> </li> <li>\u897f\u51432019\u5e74<ul> <li>Node.js 12\u767c\u5e03  </li> <li>Node.js 13\u767c\u5e03</li> </ul> </li> <li>\u897f\u51432020\u5e74<ul> <li>Node.js 14\u767c\u5e03</li> <li>Node.js 15\u767c\u5e03</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#how-to-install-nodejs","title":"How to install Node.js?","text":"<ul> <li>Node\u6709\u5f88\u591a\u7a2e\u5b89\u88dd\u65b9\u5f0f,\u6700\u5e38\u898b\u7684\u65b9\u5f0f\u662f\u900f\u904e\u5957\u4ef6\u7ba1\u7406\u5305(package manager)\u4e0b\u8f09,\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b,\u6bcf\u500b\u4f5c\u696d\u7cfb\u7d71\u6709\u81ea\u5df1\u7684\u5b89\u88dd\u65b9\u5f0f</li> <li>\u53ef\u53c3\u8003\u5b89\u88dd\u65b9\u5f0f\u7684\u7ae0\u7bc0</li> <li>NVM(Node Version Manager)\u662f\u4e00\u7a2e\u57f7\u884cNode.js\u7684\u6d41\u884c\u65b9\u6cd5</li> <li>nvm\u8b93\u6211\u5011\u53ef\u4ee5\u8f15\u9b06\u5207\u63dbNode\u7248\u672c</li> <li>\u5047\u5982\u78b0\u5230\u932f\u8aa4\u6642,\u53ef\u4ee5\u5b89\u88dd\u65b0\u7248\u672c\u4ee5\u5617\u8a66\u8f15\u9b06\u5730\u56de\u6efe(rollback)</li> <li>nvm\u4e5f\u662f\u500b\u6709\u6548\u7684\u5de5\u5177\u8b93\u6211\u5011\u53ef\u4ee5\u8f15\u9b06\u5730\u4f7f\u7528Node\u7684\u820a\u7248\u672c\u4f86\u6e2c\u8a66\u6211\u5011\u7684\u7a0b\u5f0f\u78bc</li> <li>\u53ef\u53c3\u8003Node Version Manager(nvm)</li> <li>\u5982\u679c\u4f7f\u7528macOS,\u63a8\u85a6\u4f7f\u7528Homebrew\u4f86\u5b89\u88ddNode</li> <li>\u7576\u5b89\u88dd\u5b8cNode\u4e4b\u5f8c,\u5c31\u53ef\u4ee5\u4f7f\u7528<code>$ node xxx.js</code>\u5728CLI\u4e2d\u57f7\u884cNode\u7a0b\u5f0f</li> </ul>"},{"location":"programming_language/nodejs/#how-much-javascript-do-you-need-to-know-to-use-nodejs","title":"How much JavaScript do you need to know to use Node.js?","text":"<ul> <li>\u8eab\u70ba\u4e00\u500b\u521d\u5b78\u8005,\u6211\u5011\u5e38\u5e38\u96e3\u4ee5\u5224\u65b7\u8981\u5230\u4ec0\u9ebc\u6a23\u7684\u7a0b\u5ea6\u624d\u662f\u5c0d\u7a0b\u5f0f\u8a2d\u8a08\u7684\u80fd\u529b\u8db3\u5920\u6709\u81ea\u4fe1\u7684</li> <li>\u7576\u6211\u5011\u525b\u958b\u59cb\u5b78\u7fd2Javascript,\u6211\u5011\u53ef\u80fd\u6703\u5c0dJavascript\u7684\u7d50\u675f\u4f4d\u7f6e,\u4ee5\u53caNode\u7684\u8d77\u59cb\u4f4d\u7f6e\u8207\u7d50\u675f\u4f4d\u7f6e\u611f\u5230\u5f88\u56f0\u60d1</li> <li>\u5efa\u8b70\u5148\u7406\u89e3Javascript\u7684\u4e3b\u8981\u89c0\u5ff5\u5f8c,\u5728\u958b\u59cb\u6295\u5165\u65bcNode\u7684\u7814\u7a76\u4e2d</li> <li>\u4ee5\u4e0b\u662fJavascript\u76ee\u524d\u7684\u4e3b\u8981\u89c0\u5ff5</li> <li>\u8a5e\u5f59\u7d50\u69cb(Lexcial Structure)</li> <li>\u904b\u7b97\u5f0f(Expressions)</li> <li>\u578b\u5225(Types)</li> <li>\u8b8a\u6578(Variables)</li> <li>\u51fd\u5f0f(Functions)</li> <li><code>this</code> \u95dc\u9375\u5b57</li> <li>\u7bad\u982d\u51fd\u5f0f(Arrow Functions)</li> <li>\u8ff4\u5708(Loops)</li> <li>\u7bc4\u570d(Scopes)</li> <li>\u9663\u5217(Arrays)</li> <li>\u6a21\u677f\u6587\u5b57(Template Literals)</li> <li>\u5206\u865f(Semicolons)</li> <li>\u56b4\u8b39\u6a21\u5f0f(Strict Mode)</li> <li>ECMAScript 6,7,8 (\u624b\u7a3f\u8a9e\u8a00\u898f\u7bc4)</li> <li>\u5982\u679c\u80fd\u5c07\u4ee5\u4e0a\u7684Javascript\u4e3b\u8981\u89c0\u5ff5\u90fd\u638c\u63e1\u5230\u7684\u8a71,\u7121\u8ad6\u662f\u5728\u700f\u89bd\u5668\u9084\u662f\u5728Node\u4e2d,\u60a8\u90fd\u5c07\u6210\u70ba\u4e00\u540d\u719f\u7df4\u7684JavaScript\u958b\u767c\u4eba\u54e1</li> <li>\u4ee5\u4e0b\u662f\u7406\u89e3 \u975e\u540c\u6b65\u7a0b\u5f0f\u8a2d\u8a08 \u7684(asynchronous programming),\u9019\u4e5f\u662fNode.js\u7684\u57fa\u672c\u89c0\u5ff5\u4e4b\u4e00</li> <li>\u975e\u540c\u6b65\u7a0b\u5f0f\u8a2d\u8a08\u8207\u56de\u547c (Asynchronous programming and callbacks)</li> <li>\u8a08\u6642\u5668 (Timers)</li> <li>Promise\u7269\u4ef6 (ES6\u4ee5\u5f8c\u958b\u59cb\u52a0\u5165\u7684\u8a9e\u6cd5)</li> <li>Async &amp; Await</li> <li>\u9589\u5305(Closures)</li> <li>\u4e8b\u4ef6\u8ff4\u5708 (The Event Loop)</li> </ul>"},{"location":"programming_language/nodejs/#differences-between-nodejs-and-the-browser","title":"Differences between Node.js and the Browser","text":"<ul> <li>\u700f\u89bd\u5668\u8207Node.js\u90fd\u662f\u4f7f\u7528Javascript\u7a0b\u5f0f\u8a9e\u8a00\u4f86\u958b\u767c\u7684</li> <li>\u5efa\u69cb\u51fa\u4e00\u500b\u904b\u884c\u5728\u700f\u89bd\u5668\u7684\u61c9\u7528\u7a0b\u5f0f\u8207\u5efa\u69cb\u51fa\u4e00\u500b\u904b\u884c\u5728Node\u7684\u61c9\u7528\u7a0b\u5f0f\u5b8c\u5168\u4e0d\u540c; \u5118\u7ba1\u90fd\u662f\u4f7f\u7528Javascript\u7a0b\u5f0f\u8a9e\u8a00\u4f86\u958b\u767c,\u537b\u4ecd\u5b58\u5728\u4e00\u4e9b\u95dc\u9375\u5dee\u7570,\u4f7f\u9ad4\u9a57\u5b8c\u5168\u4e0d\u540c</li> <li>Node\u6539\u8b8a\u7684\u662f\u6574\u500b\u751f\u614b\u7cfb\u7d71(ecosystem),\u56e0\u70ba\u5b83\u8b93\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u4e00\u7a2e\u7a0b\u5f0f\u8a9e\u8a00-Javascript,\u5c31\u53ef\u4ee5\u5b8c\u6210\u6211\u5011\u6240\u6709\u7684\u7db2\u9801\u958b\u767c\u5de5\u4f5c(\u5305\u542b\u524d\u7aef &amp; \u5f8c\u7aef),\u9019\u662f\u4e00\u500b\u7368\u7279\u7684\u512a\u52e2\u5730\u4f4d</li> <li>\u5728\u700f\u89bd\u5668\u4e2d,\u6211\u5011\u82b1\u8cbb\u5927\u591a\u6578\u7684\u6642\u9593\u5728\u8207DOM\u6216\u662f\u5176\u4ed6\u7db2\u9801\u5e73\u53f0\u7684APIs(\u4f8b: Cookies)\u3002 \u7576\u7136,\u9019\u4e9b\u6771\u897f\u4e26\u4e0d\u5b58\u5728\u65bcNode\u4e4b\u4e2d\u3002Node\u4e5f\u4e0d\u6703\u6709Document\u7269\u4ef6\u8207Window\u7269\u4ef6\u4ee5\u53ca\u5176\u4ed6\u6240\u6709\u900f\u904e\u700f\u89bd\u5668\u63d0\u4f9b\u7684\u7269\u4ef6\u5011</li> <li>\u5728\u700f\u89bd\u5668\u4e2d,\u6211\u5011\u6c92\u6709\u90a3\u4e9bNode\u900f\u904e\u5176\u5167\u5efa\u6a21\u7d44\u6240\u63d0\u4f9b\u7684\u5be6\u7528APIs(\u4f8b: \u6587\u4ef6\u7cfb\u7d71\u8a2a\u554f\u529f\u80fd (filesystem access functionality))</li> <li>\u53e6\u4e00\u500b\u6bd4\u8f03\u5927\u7684\u5dee\u7570\u662f\u5728Node\u4e2d,\u6211\u5011\u63a7\u5236\u7684\u662f \u74b0\u5883,\u9664\u975e\u60a8\u69cb\u5efa\u4e00\u500b\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u90e8\u7f72\u7684\u958b\u6e90\u61c9\u7528\u7a0b\u5f0f,\u5426\u5247\u6211\u5011\u901a\u5e38\u6703\u77e5\u9053\u61c9\u8a72\u5728\u54ea\u500b\u7248\u672c\u7684Node\u4e0a\u904b\u884c\u8a72\u61c9\u7528\u7a0b\u5f0f; \u4f46\u662f\u5728\u700f\u89bd\u5668\u7684\u74b0\u5883\u4e2d,\u6211\u5011\u7121\u6cd5\u9078\u64c7\u4f7f\u7528\u8005\u6703\u4f7f\u7528\u7684\u700f\u89bd\u5668,\u9019\u9ede\u975e\u5e38\u4e0d\u65b9\u4fbf</li> <li>\u9019\u4e5f\u610f\u5473\u8457\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u8a72Node\u7248\u672c\u53ef\u652f\u63f4\u7684\u6240\u6709ECMAScript 6-7-8-9\u7684\u73fe\u4ee3\u5316Javascript\u8a9e\u6cd5</li> <li>\u7531\u65bcJavascript\u7684\u8b8a\u5316\u5982\u6b64\u4e4b\u5feb,\u4f46\u662f\u700f\u89bd\u5668\u8207\u4f7f\u7528\u8005\u6240\u4f7f\u7528\u7684\u700f\u89bd\u5668\u4e26\u6c92\u6709\u9019\u9ebc\u8fc5\u901f\u7684\u5347\u7d1a,\u56e0\u6b64\u6211\u5011\u4e0d\u5f97\u4e0d\u4f7f\u7528\u8f03\u820a\u7684JavaScript/ECMAScript\u7248\u672c</li> <li>\u9019\u6642\u6211\u5011\u53ef\u4ee5\u4f7f\u7528Babel\u4f86\u5c07\u7a0b\u5f0f\u78bc\u8f49\u63db\u6210\u53ef\u8207ES5\u53ef\u76f8\u5bb9\u7684\u8a9e\u6cd5,\u7136\u5f8c\u518d\u4ea4\u7d66\u700f\u89bd\u5668</li> <li>\u7136\u800c\u5728Node\u4e2d,\u6211\u5011\u4e26\u4e0d\u9700\u8981\u9019\u6a23\u505a</li> <li>\u9084\u6709\u4e00\u500b\u91cd\u5927\u7684\u5dee\u7570\u662f\u5728Node\u4e2d,\u6211\u5011\u4f7f\u7528\u7684\u662fCommonJS\u6a21\u7d44\u7cfb\u7d71; \u4f46\u662f\u5728\u700f\u89bd\u5668\u4e2d,\u6211\u5011\u6703\u4f9d\u7167ECMAScript\u7684\u6a21\u7d44\u6a19\u6e96\u4f86\u5be6\u4f5cJavascipt\u8a9e\u6cd5</li> <li>\u5be6\u969b\u4e0a,\u9019\u4ee3\u8868\u6211\u5011\u6703\u5206\u5225\u4f7f\u7528<ul> <li>require() =&gt; \u5728Node.js\u4e2d</li> <li>import =&gt; \u5728\u700f\u89bd\u5668\u4e2d</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-v8-javascript-engine","title":"The V8 JavaScript Engine","text":"<ul> <li>V8\u662f\u7528\u4f86\u652f\u6301Google Chrome\u700f\u89bd\u5668\u7684Javascript engine\u3002\u7576\u6211\u5011\u4f7f\u7528Chrome\u700f\u89bd\u5668\u6642,\u5b83\u9700\u8981\u6211\u5011\u7684Javascript\u7a0b\u5f0f\u78bc\u4e26\u57f7\u884c\u5b83\u5011 </li> <li>V8\u8ca0\u8cac\u63d0\u4f9bJavascript\u57f7\u884c\u6642\u6240\u9700\u8981\u7684\u57f7\u884c\u74b0\u5883(runtime)\u3002<code>DOM</code>\u548c\u5176\u4ed6\u7684Web APIs\u5247\u7531\u700f\u89bd\u5668\u8ca0\u8cac\u63d0\u4f9b</li> <li>Javascript engine\u662f\u80fd\u7368\u7acb\u904b\u4f5c\u7684,\u4e26\u4e0d\u4e00\u5b9a\u9700\u8981\u8ddf\u96a8\u8457\u8a17\u7ba1(hosted)\u5b83\u7684\u700f\u89bd\u5668,\u9019\u4e5f\u4fc3\u4f7fNode\u7684\u8208\u8d77</li> <li>\u897f\u51432009\u5e74\u6642,V8\u88ab\u9078\u70ba\u7528\u4f86\u4f5c\u70baNode.js\u7684Javascript engine,\u4e26\u4e14\u96a8\u8005Node\u7684\u7206\u70b8\u6027\u6210\u9577,V8\u6210\u70ba\u4e86\u73fe\u5728\u70ba\u5927\u91cf\u4f7f\u7528Javascript\u7de8\u5beb\u4f3a\u670d\u5668\u7aef\u7a0b\u5f0f\u78bc(server-side code)\u7684engine</li> <li>Node\u751f\u614b\u7cfb\u975e\u5e38\u9f90\u5927,\u53d7\u60e0\u65bc\u6b64,V8\u4e5f\u652f\u63f4\u684c\u9762\u61c9\u7528\u7a0b\u5f0f(\u4f8b: Electron)</li> <li>\u5176\u4ed6\u700f\u89bd\u5668\u4f7f\u7528\u7684Javascript engine</li> <li>Firefox: SpiderMonkey</li> <li>Safari: JavaScriptCore(\u4e5f\u88ab\u7a31\u70baNitro)</li> <li>Microsoft Edge: \u6700\u521d\u662f\u57fa\u65bcChakraCore\u958b\u767c\u7684,\u5f8c\u4f86\u8f49\u7531\u57fa\u65bcChromium &amp; V8 engine\u4f86\u91cd\u69cb<ul> <li>\u53ef\u53c3\u8003Download the new Microsoft Edge based on Chromium </li> </ul> </li> <li>V8\u5f15\u64ce\u662f\u7531C++\u7a0b\u5f0f\u8a9e\u8a00\u6240\u7de8\u5beb\u3002\u5b83\u662f\u53ef\u651c\u5e36\u5f0f\u7684(portable),\u53ef\u63d0\u4f9b\u8de8\u5e73\u53f0\u652f\u63f4(on macOS &amp;Windows &amp; Linux ...\u7b49\u7b49)</li> <li>V8\u4e5f\u8207\u5176\u4ed6\u7684Javascript engine\u4e00\u6a23,V8\u4e5f\u5728\u6301\u7e8c\u6539\u9032\u4e2d,\u4e5f\u52a0\u901f\u4e86Web\u548cNode\u751f\u614b\u7cfb\u7684\u5feb\u901f\u767c\u5c55; \u591a\u5e74\u4f86,\u5728\u7db2\u8def\u4e0a\u6709\u5f88\u591a\u95dc\u65bc\u6027\u80fd\u8abf\u6821\u7684\u7af6\u8cfd,\u8eab\u70ba\u958b\u767c\u8005\u548c\u4f7f\u7528\u8005\u7684\u6211\u5011\u4e5f\u53d7\u60e0\u65bc\u6b64,\u8b93\u6211\u5011\u80fd\u64c1\u6709\u66f4\u5feb.\u6548\u80fd\u66f4\u597d\u7684\u6a5f\u5668(machines)\u53ef\u4ee5\u4f7f\u7528</li> <li>Javascript\u901a\u5e38\u88ab\u8a8d\u70ba\u662f\u4e00\u7a2e\u76f4\u8b6f\u5f0f\u8a9e\u8a00(interpreted language),\u4f46\u662f\u5728\u73fe\u4ee3\u5316\u7684Javascript engine\u4e2d,\u5df2\u4e0d\u518d\u53ea\u662f\u76f4\u8b6fJavascript,\u5b83\u5011\u4e5f\u7de8\u8b6fJavascript</li> <li>\u5f9e\u897f\u51432009\u5e74\u958b\u59cb,\u7576SpiderMonkey JavaScript compiler\u88ab\u52a0\u5165\u5230Firefox\u700f\u89bd\u5668 v3.5\u4e4b\u4e2d\u4ee5\u5f8c,\u6bcf\u500b\u4eba\u90fd\u958b\u59cb\u8ffd\u96a8\u9019\u7a2e\u505a\u6cd5</li> <li>Javascript\u6703\u88abV8 engine\u9032\u884c\u5167\u90e8\u5373\u6642\u7de8\u8b6f(just-in-time compilation, JIT)\u4ee5\u52a0\u5feb\u57f7\u884c\u901f\u5ea6; \u9019\u53ef\u80fd\u662f\u4e00\u7a2e\u9055\u53cd\u76f4\u89ba\u7684\u65b9\u5f0f,\u4f46\u662f\u5f9e2004\u5e74\u5f15\u5165Google Maps\u4ee5\u4f86,Javascript\u5df2\u7d93\u5f9e\u4e00\u7a2e\u901a\u5e38\u7528\u4f86\u57f7\u884c\u5e7e\u5341\u884c\u7a0b\u5f0f\u78bc\u7684\u5c0f\u578b\u61c9\u7528\u7a0b\u5f0f\u7684\u7a0b\u5f0f\u8a9e\u8a00,\u9010\u6f38\u767c\u5c55\u6210\u53ef\u4ee5\u5728\u700f\u89bd\u5668\u4e2d\u57f7\u884c\u6210\u5343\u4e0a\u842c\u884c\u7684\u5927\u578b.\u5b8c\u6574\u7684\u61c9\u7528\u7a0b\u5f0f\u7684\u7a0b\u5f0f\u8a9e\u8a00</li> <li>\u6f14\u8b8a\u81f3\u4eca,\u6211\u5011\u7684\u61c9\u7528\u7a0b\u5f0f\u5df2\u7d93\u53ef\u4ee5\u5728\u700f\u89bd\u5668\u6301\u7e8c\u57f7\u884c\u6578\u5c0f\u6642,\u800c\u9019\u4e5f\u4e0d\u50c5\u9650\u65bc\u55ae\u7d14\u7684\u8868\u55ae\u9a57\u8b49\u898f\u5247(a few form validation rules)\u6216\u662f\u7c21\u55ae\u7684\u7a0b\u5f0f\u78bc(simple scripts)</li> <li>\u5728\u73fe\u4ee3\u7684\u65b0\u4e16\u754c\u4e2d,\"\u7de8\u8b6f\"Javascript\u662f\u975e\u5e38\u6709\u610f\u7fa9\u7684,\u56e0\u70ba\u96d6\u7136\u7de8\u5bebJavascript\u4ecd\u7136\u9700\u8981\u82b1\u8cbb\u5f88\u591a\u6642\u9593,\u4f46\u662f\u4e00\u65e6\u958b\u767c\u5b8c\u6210\u5f8c,\u5b83\u5c07\u6bd4\u8d77\u7d14\u76f4\u8b6f\u7a0b\u5f0f\u78bc\u4f86\u7684\u64c1\u6709\u66f4\u597d\u7684\u6548\u80fd</li> </ul>"},{"location":"programming_language/nodejs/#run-nodejs-scripts-from-the-command-line","title":"Run Node.js scripts from the command line","text":"<ul> <li>\u7576\u6211\u5011\u5b89\u88dd\u597dNode.js\u5f8c,\u901a\u5e38\u6211\u5011\u6703\u7528\u53ef\u5728\u5168\u57df\u57f7\u884c\u7684<code>node</code>\u6307\u4ee4,\u63a5\u8457\u50b3\u905e\u8981\u57f7\u884c\u7684\u6a94\u540d\u4f5c\u70ba\u53c3\u6578\u5230CLI\u4e0a</li> <li>\u5047\u8a2d\u6211\u5011\u7684\u4e3b\u8981Node\u61c9\u7528\u7a0b\u5f0f\u7684\u6a94\u540d\u53eb\u505a<code>app.js</code> </li> <li>\u4f8b: $ <code>node app.js</code></li> <li>\u63d0\u9192: \u8981\u5728\u5305\u542b<code>app.js</code>\u7684\u6a94\u6848\u8def\u5f91\u4e0b\u57f7\u884c\u8a72\u6307\u4ee4\u624d\u884c</li> </ul>"},{"location":"programming_language/nodejs/#how-to-exit-from-a-nodejs-program","title":"How to exit from a Node.js program?","text":"<ul> <li>\u6709\u591a\u7a2e\u65b9\u6cd5\u53ef\u4ee5\u7d42\u6b62Node\u61c9\u7528\u7a0b\u5f0f</li> <li>CLI: $ <code>ctrl-C</code></li> <li>\u7a0b\u5f0f\u78bc: <code>process.exit()</code></li> <li>\u7a0b\u5f0f\u78bc: <code>process.on('SIGTERM', callback function)</code></li> <li>Node\u7684\u6838\u5fc3\u6a21\u7d44-Process\u63d0\u4f9b\u4e86\u4e00\u500b\u7c21\u4fbf\u7684\u65b9\u6cd5,\u8b93\u6211\u5011\u53ef\u4ee5\u5f9e\u4e00\u500bNode\u61c9\u7528\u7a0b\u5f0f\u9000\u51fa,\u53ef\u57f7\u884c\u4ee5\u4e0b\u7684command</li> <li>$ <code>process.exit()</code></li> <li>\u7576Node\u57f7\u884c\u5230\u9019\u908a\u6642,\u8a72\u9032\u7a0b(process)\u5c31\u6703\u88ab\u7acb\u5373\u5f37\u5236\u7d42\u6b62\u3002\u9019\u4ee3\u8868\u4efb\u4f55\u8655\u65bc<code>pending\u72c0\u614b</code>\u7684<code>callback function</code>\u8207\u4efb\u4f55\u7db2\u8def\u8acb\u6c42(network request)\u4ecd\u7136\u6703\u88ab\u50b3\u9001\u51fa\u53bb; \u7136\u800c\u4efb\u4f55\u8a2a\u554f\u6587\u4ef6\u7cfb\u7d71(<code>filesystem</code>)\u6216\u662f\u9032\u7a0b(<code>process</code>),\u4f8b\u5982: process.stdout() \u6216\u662f process.stderr\u90fd\u5c07\u7acb\u523b\u88ab\u4e0d\u6b63\u5e38\u5730\u7d42\u6b62(ungracefully terminated right away.)</li> <li>\u5982\u679c\u9019\u6a23\u662f\u6211\u5011\u60f3\u8981\u7684\u7d50\u679c,\u90a3\u6211\u5011\u53ef\u4ee5\u50b3\u905e\u4e00\u500b\u6574\u6578,\u4ee5\u6b64\u4f5c\u70ba\u50cf\u4f5c\u696d\u7cfb\u7d71\u767c\u51fa\u7684\u9000\u51fa\u78bc(exit code)<ul> <li>\u4f8b: $ <code>process.exit(1)</code></li> <li>\u88dc\u5145: \u9000\u51fa\u78bc(exit code)</li> <li>\u9810\u8a2d\u503c: <code>0</code> (\u4ee3\u8868\u6210\u529f) </li> <li>\u7576<code>exit code</code> &lt;= 0 \u6642,\u8868\u793a\u6307\u4ee4\u57f7\u884c\u6210\u529f</li> <li>\u7576<code>exit code</code> &gt; 0 \u6642,\u8868\u793a\u6307\u4ee4\u57f7\u884c\u5931\u6557</li> <li>\u4e0d\u540c\u7684\u9000\u51fa\u78bc\u5177\u6709\u4e0d\u540c\u7684\u610f\u7fa9,\u6211\u5011\u53ef\u4ee5\u5229\u7528\u9019\u4e9b\u9000\u51fa\u78bc\u4f86\u8b93\u6211\u5011\u7cfb\u7d71\u4e2d\u7684\"\u7a0b\u5f0f\u8207\u7a0b\u5f0f\"\u4e4b\u9593\u80fd\u4e92\u76f8\u6e9d\u901a</li> <li>\u53ef\u53c3\u8003Node\u6838\u5fc3\u6a21\u7d44-Process\u7684 Exit codes \u7ae0\u7bc0</li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u8a2d\u5b9aprocess.exitCode\u5c6c\u6027\u4f86\u6307\u5b9a\u7576Node\u61c9\u7528\u7a0b\u5f0f\u9000\u51fa\u6642,\u8981\u56de\u50b3\u4ec0\u9ebc\u9000\u51fa\u78bc<ul> <li>\u4f7f\u7528process.exitCode\u7684\u60c5\u5883,\u9700\u6eff\u8db3\u4ee5\u4e0b\u689d\u4ef6</li> <li>\u7576\u4f7f\u7528process.exit([code]) -&gt; \u4e14\u672a\u6307\u5b9a\u9000\u51fa\u78bc\u6642</li> <li>\u9032\u7a0b(process)\u6b63\u5e38\u5730\u7d42\u6b62(exits gracefully)\u6642</li> <li>\u4f8b: $ <code>process.exitCode = 1</code></li> <li>\u7576Node\u61c9\u7528\u7a0b\u5f0f\u7d42\u6b62\u6642,\u5c07\u6703return\u8a72\u9000\u51fa\u78bc,\u5728\u5b8c\u6210\u8655\u7406\u6240\u6709\u9032\u7a0b(process)\u5f8c,Node\u61c9\u7528\u7a0b\u5f0f\u5c07\u6703\u6b63\u5e38\u5730\u9000\u51fa</li> <li>\u53ef\u4ee5\u5229\u7528<code>process.exit([code])</code>\u4f86\u63a8\u7ffb\u6389(override)\u5148\u524d\u7684<code>process.exitCode</code>\u7684\u8a2d\u5b9a\u503c</li> </ul> </li> <li>\u53e6\u4e00\u7a2e\u5e38\u898b\u7684\u60c5\u6cc1\u662f\u7576\u6211\u5011\u555f\u52d5\u4e00\u500b\u4f3a\u670d\u5668,\u4f8b\u5982: HTTP server       JavaScript<pre><code>const express = require('express')\nconst app = express()\napp.get('/', (req, res) =&gt; {\nres.send('Hi!')\n})\napp.listen(3000, () =&gt; console.log('Server ready'))\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u6c38\u9060\u4e0d\u6703\u7d42\u6b62! \u5982\u679c\u6211\u5011\u547c\u53eb<code>process.exit()</code>,\u9019\u6642\u6b63\u5728\u8655\u7406\u7684pending\u8207running request\u90fd\u5c07\u88ab\u7d42\u6b62,\u800c\u9019\u4e0d\u662f\u4e00\u500b\u597d\u7684\u505a\u6cd5</li> <li>\u9019\u6642\u5019\u6bd4\u8f03\u597d\u7684\u89e3\u6c7a\u65b9\u6cd5\u662f\u5c0d\u8a72command\u767c\u51fa<code>SIGTERM</code>\u4fe1\u865f(signal),\u4e26\u4f7f\u7528process\u6a21\u7d44\u7684signal handler\u4f86\u9032\u884c\u8655\u7406</li> <li>\u53ef\u53c3\u8003Signal events JavaScript<pre><code>const express = require('express')\nconst app = express()\napp.get('/', (req, res) =&gt; {\nres.send('Hi!')\n})\nconst server = app.listen(3000, () =&gt; console.log('Server ready'))\nprocess.on('SIGTERM', () =&gt; {\nserver.close(() =&gt; {\nconsole.log('Process terminated')\n})\n})\n</code></pre> <p>Q: \u4ec0\u9ebc\u662f\u4fe1\u865f(signals)?   A: \u4fe1\u865f\u662fPOSIX\u7684\u76f8\u4e92\u901a\u8a0a\u7cfb\u7d71: \u7576\u901a\u77e5(notification)\u88ab\u767c\u9001\u5230\u4e00\u500b\u9032\u7a0b(process),\u4ee5\u4fbf\u5c07\u767c\u751f\u7684\u4e8b\u4ef6(event)\u901a\u77e5\u7d66\u9032\u7a0b(process)</p> </li> <li><code>SIGKILL</code>\u662f\u544a\u8a34\u9032\u7a0b(process)\u7acb\u5373\u4e2d\u6b62\u7684\u4fe1\u865f</li> <li><code>SIGTERM</code>\u662f\u544a\u8a34\u9032\u7a0b(process)\u6b63\u5e38\u7d42\u6b62\u7684\u4fe1\u865f\u3002\u9019\u662f\u5f9e\u4f8b\u5982upstart &amp; supervisored\u7b49\u5176\u4ed6\u6d41\u7a0b\u7ba1\u7406\u5de5\u5177\u767c\u51fa\u7684\u4fe1\u865f</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u5728\u61c9\u7528\u7a0b\u5f0f\u4e2d\u7684\u53e6\u4e00\u500b\u51fd\u5f0f\u4e2d,\u767c\u51fa\u9019\u500b\u4fe1\u865f</li> <li>$ <code>process.kill(process.pid, 'SIGTERM')</code></li> <li>\u4e5f\u53ef\u4ee5\u5f9e\u5176\u4ed6\u57f7\u884c\u4e2d\u7684Node\u61c9\u7528\u7a0b\u5f0for\u5176\u4ed6\u5728\u6211\u5011\u7684\u4f5c\u696d\u7cfb\u7d71\u4e2d\u6b63\u5728\u57f7\u884c\u7684\u61c9\u7528\u7a0b\u5f0f,\u4f86\u5f97\u77e5\u6211\u5011\u60f3\u8981\u7d42\u6b62\u7684\u61c9\u7528\u7a0b\u5f0f\u7684ID(process ID, pid)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#how-to-read-environment-variables-from-nodejs","title":"How to read environment variables from Node.js?","text":"<ul> <li><code>process</code>\u6838\u5fc3\u6a21\u7d44\u63d0\u4f9b\u4e86<code>env</code>\u5c6c\u6027,<code>process.env</code>\u5c6c\u6027\u6703\u8a17\u7ba1\u7576\u555f\u52d5Node\u9032\u7a0b(process)\u7684\u6642\u5019\u7684\u6240\u6709Node\u74b0\u5883\u8b8a\u6578</li> <li>\u4ee5\u4e0b\u662f\u4e00\u500b\u9810\u8a2d\u5728<code>development</code>\u74b0\u5883\u4e0b,\u5b58\u53d6<code>NODE_ENV</code>\u9019\u500b\u74b0\u5883\u8b8a\u6578\u7684\u7bc4\u4f8b</li> <li>\u63d0\u9192: \u56e0\u70ba\u5b83\u662fNode\u7684\u6838\u5fc3\u6a21\u7d44,\u6240\u4ee5<code>process</code>\u6a21\u7d44\u4e0d\u9700\u8981\u4e8b\u5148\u532f\u5165(<code>require()</code>),\u53ef\u4ee5\u76f4\u63a5\u958b\u59cb\u4f7f\u7528     JavaScript<pre><code>process.env.NODE_ENV // \"development\"\n</code></pre></li> <li>\u7576\u5728\u8173\u672c(script)\u57f7\u884c\u4e4b\u524d,\u53ef\u4ee5\u5148\u5c07\u8a72\u5c6c\u6027\u8a2d\u5b9a\u70ba<code>production</code>,\u4f86\u544a\u8a34Node\u9019\u662f\u4e00\u500b<code>production</code>\u7684\u751f\u7522\u74b0\u5883     JavaScript<pre><code>process.env.NODE_ENV // \"production\"\n</code></pre></li> <li>\u7576\u7136\u6211\u5011\u4e5f\u53ef\u4ee5\u5229\u7528\u4e0a\u8ff0\u7684\u65b9\u5f0f\u518d\u8a2d\u5b9a\u6211\u5011\u9700\u8981\u7684\u81ea\u5b9a\u7fa9\u74b0\u5883\u8b8a\u6578</li> </ul>"},{"location":"programming_language/nodejs/#how-to-use-the-nodejs-repl","title":"How to use the Node.js REPL?","text":"<ul> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528$ <code>node</code>\u6307\u4ee4\u4f86\u57f7\u884c\u6211\u5011\u5beb\u597d\u7684Node\u8173\u672c(script)</li> <li>\u4f8b: $ <code>node script.js</code></li> <li>\u5982\u679c\u6211\u5011\u7701\u7565\u8981\u57f7\u884c\u7684\u8173\u672c\u540d\u7a31\u9019\u500b\u53c3\u6578\u7684\u8a71,\u5c31\u6703\u9032\u5165<code>REPL\u6a21\u5f0f</code> <p>\u88dc\u5145: <code>REPL</code>\u53c8\u88ab\u7a31\u70baRead Evaluate Print Loop(\u8b80\u53d6-\u6c42\u503c-\u8f38\u51fa\u5faa\u74b0\u7684\u4e92\u52d5\u5f0f\u4ecb\u9762, REPL),\u662f\u4e00\u7a2e\u7a0b\u5f0f\u8a9e\u8a00\u7684\u74b0\u5883(\u4e3b\u8981\u662f\u5728CLI console\u756b\u9762\u4e2d)\u3002\u4ed6\u6703\u4f7f\u7528\u55ae\u500b\u8868\u9054\u5f0f\u4f5c\u70ba\u4f7f\u7528\u8005\u8f38\u5165,\u4e26\u5728\u57f7\u884c\u5f8c\u5c07\u7d50\u679c\u56de\u50b3\u5230CLI console\u756b\u9762\u4e0a \u88dc\u5145: <code>REPL\u6a21\u5f0f</code>\u56e0\u70ba\u662f\u4e92\u52d5\u5f0f\u4ecb\u9762,\u6240\u4ee5\u652f\u63f4\u53ef\u5229\u7528<code>Tab</code>\u9375\u505a\u81ea\u52d5\u88dc\u5168(autocomplete)\u7684\u529f\u80fd,\u5b83\u6703\u5617\u8a66\u81ea\u52d5\u5b8c\u6210\u6240\u5beb\u7684\u5167\u5bb9,\u4ee5\u5339\u914d\u5df2\u5b9a\u7fa9\u7684\u8b8a\u91cf\u6216\u9810\u5b9a\u7fa9\u7684\u8b8a\u91cf</p> </li> <li>node <code>REPL\u6a21\u5f0f</code>\u7bc4\u4f8b\u60c5\u5883     Bash Session<pre><code>\u276f node\n&gt;\n</code></pre><ul> <li>\u8a72\u6307\u4ee4\u6703\u505c\u7559\u5728\u9592\u7f6e\u6a21\u5f0f(idle mode),\u4e26\u7b49\u5f85\u6211\u5011\u8f38\u5165\u4e9b\u4ec0\u9ebc\u6771\u897f\u3002\u66f4\u7cbe\u78ba\u5730\u8aaa\u662f<code>REPL\u6a21\u5f0f</code>\u6b63\u5728\u7b49\u5f85\u6211\u5011\u8f38\u5165\u4e00\u4e9bJavascript\u7684\u7a0b\u5f0f\u78bc</li> </ul> </li> <li>\u6211\u5011\u5f9e\u7c21\u55ae\u7684\u7bc4\u4f8b\u958b\u59cb\u770b\u770b     Bash Session<pre><code>&gt; console.log('test')\ntest\nundefined\n&gt;\n</code></pre><ul> <li>\u7b2c\u4e00\u500b\u503c<code>test</code>\u662f\u8981\u544a\u8a34CLI console\u8981\u6253\u5370(print)\u51fa\u4ec0\u9ebc\u503c,\u63a5\u8457\u6211\u5011\u6536\u5230<code>undefined</code>,\u5b83\u662f\u57f7\u884c\u4e2d(running)\u7684<code>console.log()</code></li> <li>\u63a5\u8457\u6211\u5011\u53ef\u4ee5\u958b\u59cb\u8f38\u5165\u4e00\u884c\u65b0\u7684Javascript\u7684\u7a0b\u5f0f\u78bc</li> </ul> </li> <li>\u63a2\u7d22Javascript\u7269\u4ef6(Objects)</li> <li>\u6211\u5011\u53ef\u4ee5\u8a66\u8457\u8f38\u5165Javascript\u7684\u985e\u5225(Class),\u50cf\u662f<code>Number</code>,\u4e26\u5728\u5f8c\u9762\u52a0\u4e0a\u4e00\u500b<code>.</code> ,\u518d\u63a5\u8457\u6309\u4e0b<code>Tab</code>\u6309\u9215\u4f86\u81ea\u52d5\u88dc\u5168</li> <li></li> <li>\u63a2\u7d22Javascript\u7684\u5168\u57df\u7269\u4ef6(global)</li> <li>\u6211\u5011\u53ef\u4ee5\u8a66\u8457\u8f38\u5165Javascript\u7684\u985e\u5225(Class),\u50cf\u662f<code>global</code>,\u4e26\u5728\u5f8c\u9762\u52a0\u4e0a\u4e00\u500b<code>.</code> ,\u518d\u63a5\u8457\u6309\u4e0b<code>Tab</code>\u6309\u9215\u4f86\u81ea\u52d5\u88dc\u5168</li> <li></li> <li>\u63a2\u7d22\u7279\u6b8a\u8b8a\u6578(<code>_</code>)</li> <li>\u5982\u679c\u5728\u67d0\u4e9b\u7a0b\u5f0f\u78bc\u5f8c\u9762\u8f38\u5165<code>_</code>,\u5247\u5c07\u56de\u50b3\u4e0a\u4e00\u500b\u64cd\u4f5c\u7684\u7d50\u679c</li> <li>\u63a2\u7d22\u9ede\u547d\u4ee4(Dot commands)</li> <li>REPL\u6a21\u5f0f\u6709\u4e00\u4e9b\u7279\u5225\u7684\u6307\u4ee4,\u9019\u4e9b\u6307\u4ee4\u90fd\u662f\u7531<code>.</code>\u70ba\u958b\u982d\u7684</li> <li>\u8209\u4f8b\u4f86\u8aaa<ul> <li><code>.help</code>: \u986f\u793a\u6240\u6709\u7684\u9ede\u547d\u4ee4(dot commands)\u7684\u5e6b\u52a9(help)</li> <li><code>.editor</code>: \u555f\u7528\u7de8\u8f2f\u6a21\u5f0f,\u53ef\u4ee5\u8f15\u9b06\u5730\u958b\u59cb\u5beb\u591a\u884cJavascript\u7a0b\u5f0f\u78bc\u3002\u4e00\u65e6\u9032\u5165\u9019\u500b\u6a21\u5f0f,\u6211\u5011\u5c07\u8981\u4f7f\u7528<code>ctrl-D</code>\u7684\u7d44\u5408\u9375\u4f86\u57f7\u884c\u6211\u5011\u5beb\u7684Javascript\u591a\u884c\u7a0b\u5f0f\u78bc</li> <li><code>.break</code>: \u7576\u8f38\u5165\u591a\u884c\u8868\u9054\u5f0f(multi-line expression)\u6642,\u8f38\u5165<code>.break</code>\u6307\u4ee4\u5c07\u7d42\u6b62\u9032\u4e00\u6b65\u7684\u8f38\u5165(abort further input)\u3002\u8207<code>ctrl-C</code>\u7d44\u5408\u9375\u7684\u529f\u80fd\u662f\u4e00\u6a23\u7684</li> <li><code>.clear</code>: \u5c07<code>REPL</code>\u6a21\u5f0f\u7684\u5167\u6587\u91cd\u65b0\u8a2d\u5b9a(reset)\u70ba\u4e00\u500b\u7a7a\u7269\u4ef6,\u4e26\u6e05\u9664\u7576\u524d\u6b63\u5728\u8f38\u5165\u7684\u4efb\u4f55\u591a\u884c\u8868\u9054\u5f0f</li> <li><code>.load</code>: \u8b80\u53d6\u7576\u524d\u5de5\u4f5c\u76ee\u9304\u8def\u5f91\u4e0b\u7684Javascript\u6a94\u6848</li> <li><code>.save</code>: \u5c07\u6211\u5011\u5728<code>REPL\u9023\u7dda</code>(session)\u4e2d\u7684\u6240\u6709\u5c0d\u6307\u5b9a\u6a94\u6848\u7684\u8f38\u5165\u5132\u5b58\u8d77\u4f86</li> <li><code>.exit</code>: \u9000\u51fa<code>REPL\u6a21\u5f0f</code>\u3002\u8207\u9023\u7e8c\u6309\u4e0b<code>ctrl-C</code>\u7d44\u5408\u9375 \u5169\u6b21 \u7684\u529f\u80fd\u662f\u4e00\u6a23\u7684</li> </ul> </li> <li>\u5176\u5be6<code>REPL\u6a21\u5f0f</code>\u6703\u77e5\u9053\u4ec0\u9ebc\u6642\u5019\u8981\u8f38\u5165\u591a\u884c\u8868\u9054\u5f0f,\u800c\u4e0d\u9700\u8981\u547c\u53eb<code>.editor</code><ul> <li>\u4ee5\u4e0b\u662f\u7bc4\u4f8b\u7a0b\u5f0f\u78bc      JavaScript<pre><code>  [1, 2, 3].forEach(num =&gt; {\n</code></pre></li> <li>\u9019\u6642\u5019\u7576\u6211\u5011\u6309\u4e0b<code>enter</code>\u9375\u6642,<code>REPL\u6a21\u5f0f</code>\u6703\u5230\u65b0\u7684\u4e0b\u4e00\u884c,\u4e26\u4ee5<code>...</code>\u4f5c\u70ba\u958b\u982d,\u8868\u793a\u6211\u5011\u73fe\u5728\u53ef\u4ee5\u7e7c\u7e8c\u5728\u8a72\u5340\u584a(block)\u5de5\u4f5c</li> <li>\u60c5\u5883\u8aaa\u660e     JavaScript<pre><code>... console.log(num)\n... })\n</code></pre></li> <li>\u5982\u679c\u6211\u5011\u9019\u6642\u5019\u5728\u4e00\u884c\u7684\u53e5\u5c3e\u52a0\u4e0a<code>.break</code>\u6642,\u8a72\u591a\u884c\u8868\u9054\u5f0f\u7684\u6a21\u5f0f\u5c07\u6703\u505c\u6b62\u4e26\u4e0d\u6703\u88ab\u57f7\u884c</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs-accept-arguments-from-the-command-line","title":"Node.js, accept arguments from the command line","text":"<ul> <li>\u6211\u5011\u53ef\u4ee5\u5c07\u4e0d\u9650\u5236\u6578\u91cf\u7684\u53c3\u6578(arguments)\u50b3\u905e\u7d66Node\u61c9\u7528\u7a0b\u5f0f,\u53c3\u6578\u7684\u5f62\u5f0f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b2\u7a2e\u5f62\u5f0f</li> <li>\u7368\u7acb\u7684\u53c3\u6578\u503c(standalone)<ul> <li>$ <code>node app.js joe</code></li> </ul> </li> <li>\u9375-&gt;\u503c\u5f62\u5f0f\u7684\u53c3\u6578\u503c(key and value)<ul> <li>$ <code>node app.js name=joe</code></li> </ul> </li> <li>\u9019\u4e5f\u5c07\u6539\u8b8a\u6211\u5011\u5728Node\u61c9\u7528\u7a0b\u5f0f\u7684\u7a0b\u5f0f\u78bc\u4e2d,\u5982\u4f55\u5f97\u5230\u6b64\u503c\u7684\u65b9\u5f0f,\u6211\u5011\u53ef\u4ee5\u900f\u904eNode\u5167\u5efa\u7684\u6838\u5fc3\u6a21\u7d44<code>process</code>\u4f86\u5f97\u5230\u6b64\u503c,\u8a72\u6a21\u7d44\u7684process.argv\u5c6c\u6027\u6703\u516c\u958b(exposes)\u51fa\u4e00\u500b\u9663\u5217(array),\u5176\u4e2d\u5305\u542b\u7576\u555f\u52d5Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9032\u7a0b\u7684\u6642\u5019,\u6574\u500b\u547d\u4ee4\u5217(command-line)\u8981\u50b3\u905e\u7684\u6240\u6709\u53c3\u6578</li> <li>\u7b2c1\u500b\u5143\u7d20\u662fnode\u6307\u4ee4\u7684\u5b8c\u6574\u8def\u5f91(= process.execPath)</li> <li>\u7b2c2\u500b\u5143\u7d20\u6703\u662f\u6b63\u5728\u88ab\u57f7\u884c\u7684Javascript\u6a94\u6848\u7684\u8def\u5f91\u4f4d\u7f6e</li> <li>\u5269\u4e0b\u7684\u5143\u7d20\u5c31\u662f\u4efb\u4f55\u5176\u4ed6\u7684\u547d\u4ee4\u5217\u53c3\u6578(command-line arguments)</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc</li> <li>\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\u5229\u7528\u4e00\u500b\u8ff4\u5708\u4f86\u904d\u6b77(iterate over)\u6240\u6709\u7684\u53c3\u6578\u5011(\u4e5f\u5305\u62ecnode\u6307\u4ee4\u7684\u5b8c\u6574\u8def\u5f91\u8207\u6b63\u5728\u88ab\u57f7\u884c\u7684Javascript\u6a94\u6848\u7684\u8def\u5f91\u4f4d\u7f6e)     JavaScript<pre><code>process.argv.forEach((val, index) =&gt; {\nconsole.log(`${index}: ${val}`)\n})\n</code></pre></li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u9663\u5217\u4e26\u5207\u7247(<code>array.slice()</code>\u65b9\u6cd5)\u4f86\u7372\u5f97\u984d\u5916\u7684\u53c3\u6578(\u4e0d\u5305\u542b\u524d\u5169\u500b\u53c3\u6578)     JavaScript<pre><code>const args = process.argv.slice(2)\n</code></pre></li> <li>\u5982\u679c\u6211\u5011\u7684\u53c3\u6578\u6c92\u6709\u7d22\u5f15\u540d\u7a31\u7684\u8a71(without index name)</li> <li>\u4f8b: $ <code>node app.js joe</code> JavaScript<pre><code>const args = process.argv.slice(2)\nconsole.log(args[0])\n</code></pre><ul> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4f86\u5b58\u53d6\u547d\u4ee4\u5217\u53c3\u6578(command-line arguments)</li> </ul> </li> <li>\u53e6\u4e00\u7a2e\u60c5\u6cc1\u662f,\u6211\u5011\u6703\u4ee5\u9375\u503c(key-value)\u5f62\u5f0f\u4f86\u50b3\u905e\u547d\u4ee4\u5217\u53c3\u6578</li> <li>\u4f8b: $ <code>node app.js name=joe</code> JavaScript<pre><code>const args = require('minimist')(process.argv.slice(2))\nargs['name'] //joe\n</code></pre><ul> <li>\u4ee5\u4e0a\u8ff0\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u70ba\u4f8b,<code>args[0]</code>\u662f<code>name=joe</code>,\u9019\u7a2e\u60c5\u6cc1\u6211\u5011\u5c31\u6703\u9700\u8981\u4f86\u89e3\u6790(parse)\u5b83,\u6700\u4f73\u7684\u505a\u6cd5\u662f,\u6211\u5011\u53ef\u4ee5\u5229\u7528npm\u4e0a\u9762\u7684minimist\u5957\u4ef6\u4f86\u8655\u7406\u9019\u4e9b \u9375\u503c\u5f62\u5f0f\u7684\u53c3\u6578</li> </ul> </li> <li>\u9019\u6b21\u6211\u5011\u5c31\u8981\u5728\u6bcf\u500b\u53c3\u6578\u7684\u9375(key)\u4e4b\u524d\u4f7f\u7528\u96d9\u7834\u6298\u865f(double dashes)<ul> <li>\u4f8b: $ <code>node app.js --name=joe</code></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#output-to-the-command-line-using-nodejs","title":"Output to the command line using Node.js","text":"<p>npm\u7684chalk\u5957\u4ef6---\u53ef\u8a2d\u5b9a\u7d42\u7aef\u6a5f\u8f38\u51fa\u6587\u5b57\u7684\u6a23\u5f0f\u8207\u984f\u8272 npm\u7684progress\u5957\u4ef6---\u53ef\u4ee5\u5728<code>CLI console</code>\u756b\u9762\u4e0a\u5275\u9020\u9032\u5ea6\u689d\u7684\u5957\u4ef6</p> <ul> <li>\u5229\u7528console\u6838\u5fc3\u6a21\u7d44\u7684\u57fa\u672c\u8f38\u51fa(basic output)</li> <li>Node\u6709\u4e00\u500b<code>console</code>\u6838\u5fc3\u6a21\u7d44,\u8a72\u6a21\u7d44\u63d0\u4f9b\u4e86\u8a31\u591a\u8207<code>CLI</code>\u6709\u7528\u7684\u4e92\u52d5\u65b9\u6cd5</li> <li>\u5b83\u57fa\u672c\u4e0a\u8ddf\u6211\u5011\u5728\u700f\u89bd\u5668\u4e0a\u770b\u5230\u7684<code>console</code>\u7269\u4ef6\u662f\u4e00\u6a23\u7684</li> <li>\u6700\u57fa\u672c\u8207\u6700\u6709\u7528\u7684\u65b9\u6cd5\u662fconsole.log([data][, ...args]),\u9019\u500b\u65b9\u6cd5\u6703\u6253\u5370\u51fa(print)\u6211\u5011\u50b3\u905e\u7d66console\u7684\u5b57\u4e32<ul> <li>\u5982\u679c\u6211\u5011\u50b3\u905e\u7269\u4ef6,\u8a72\u65b9\u6cd5\u6703\u81ea\u52d5\u5e6b\u6211\u5011\u8f49\u63db\u6210\u5b57\u4e32</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u50b3\u905e\u591a\u500b\u8b8a\u6578\u7d66<code>console.log()</code></li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>const x = 'x'\nconst y = 'y'\nconsole.log(x, y)\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc,Node\u6703\u5c07\u5169\u500b\u8b8a\u6578\u90fd\u6253\u5370\u51fa\u4f86(print)</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u50b3\u905e\u8b8a\u6578\u7d66\u6a21\u677f\u5b57\u4e32</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc JavaScript<pre><code>console.log('My %s has %d years', 'cat', 2)\n</code></pre></li> <li><code>%s</code>: \u5c07\u8b8a\u6578\u683c\u5f0f\u5316\u70ba\u5b57\u4e32</li> <li><code>%d</code>: \u5c07\u8b8a\u6578\u683c\u5f0f\u5316\u70ba\u6578\u5b57</li> <li><code>%i</code>: \u5c07\u8b8a\u6578\u683c\u5f0f\u5316\u70ba\u5176\u6574\u6578\u90e8\u5206</li> <li><code>%o</code>: \u5c07\u8b8a\u6578\u683c\u5f0f\u5316\u70ba\u7269\u4ef6</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>console.log('%o', Number)\n</code></pre></li> </ul> </li> <li>\u6e05\u9664\u5f8c\u53f0(console)-console.clear()</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>console.clear()\n</code></pre></li> <li>\u8a72\u65b9\u6cd5\u6703\u5c07\u5f8c\u53f0\u6e05\u7a7a(\u8a3b: \u8a72\u65b9\u6cd5\u7684\u884c\u70ba\u4e5f\u6703\u53d6\u6c7a\u65bc\u6211\u5011\u662f\u4f7f\u7528\u54ea\u7a2e\u5f8c\u53f0)</li> <li>\u8a08\u7b97\u5143\u7d20\u6578\u91cf-console.count([label])</li> <li><code>console.count()</code>\u662f\u4e00\u500b\u65b9\u4fbf\u7684\u65b9\u6cd5</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const x = 1\nconst y = 2\nconst z = 3\nconsole.count(\n'The value of x is ' + x + ' and has been checked .. how many times?'\n)\nconsole.count(\n'The value of x is ' + x + ' and has been checked .. how many times?'\n)\nconsole.count(\n'The value of y is ' + y + ' and has been checked .. how many times?'\n)\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u6703\u8a08\u7b97\u8a72\u5b57\u4e32\u88ab\u6253\u5370\u51fa(print)\u5e7e\u6b21\u4e86,\u4e26\u5c07\u5176\u6b21\u6253\u5370\u5728\u65c1\u908a</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc<ul> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u53ea\u8a08\u7b97\u860b\u679c\u548c\u6a58\u5b50\u7684\u6578\u91cf   JavaScript<pre><code>const oranges = ['orange', 'orange']\nconst apples = ['just one apple']\noranges.forEach(fruit =&gt; {\nconsole.count(fruit)\n})\napples.forEach(fruit =&gt; {\nconsole.count(fruit)\n})\n</code></pre></li> </ul> </li> <li>\u6253\u5370\u51fa\u5806\u68e7\u8ffd\u8e64(print stack trace)-console.trace([message][, ...args])</li> <li>\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b,\u6253\u5370\u51fa\u51fd\u6578\u7684\u5806\u68e7\u8abf\u7528\u60c5\u6cc1\u662f\u5f88\u6709\u7528\u7684,\u9019\u4e5f\u8a31\u5c31\u80fd\u56de\u7b54\u6211\u5011\u7684\u4e00\u500b\u554f\u984c---\u6211\u5011\u8a72\u5982\u4f55\u5230\u9054\u7a0b\u5f0f\u78bc\u7684\u5176\u4e2d\u4e00\u500b\u90e8\u5206?</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528<code>console.trace()</code>\u65b9\u6cd5\u4f86\u5b8c\u6210</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>const function2 = () =&gt; console.trace()\nconst function1 = () =&gt; function2()\nfunction1()\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\u6253\u5370\u51fa\u5806\u68e7\u8ffd\u8e64(stack trace)</li> <li>\u5982\u679c\u6211\u5011\u5728Node\u7684<code>REPL\u6a21\u5f0f</code>\u4e2d\u5617\u8a66\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u6703\u5f97\u5230\u4ee5\u4e0b\u7684\u56de\u50b3\u8cc7\u8a0a     Bash Session<pre><code>Trace\n  at function2 (repl:1:33)\n  at function1 (repl:1:25)\n  at repl:1:1\n  at ContextifyScript.Script.runInThisContext (vm.js:44:33)\n  at REPLServer.defaultEval (repl.js:239:29)\n  at bound (domain.js:301:14)\n  at REPLServer.runBound [as eval] (domain.js:314:12)\n  at REPLServer.onLine (repl.js:440:10)\n  at emitOne (events.js:120:20)\n  at REPLServer.emit (events.js:210:7)\n</code></pre></li> </ul> </li> <li>\u8a08\u7b97\u57f7\u884cNode\u7a0b\u5f0f\u78bc\u6240\u82b1\u8cbb\u7684\u6642\u9593-console.time([label]) &amp; console.timeEnd([label])</li> <li>\u6211\u5011\u53ef\u4ee5\u4f7f\u7528<code>console.time()</code> &amp; <code>console.timeEnd()</code></li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const doSomething = () =&gt; console.log('test')\nconst measureDoingSomething = () =&gt; {\nconsole.time('doSomething()')\n//do something, and measure the time it takes\ndoSomething()\nconsole.timeEnd('doSomething()')\n}\nmeasureDoingSomething()\n</code></pre></li> <li>\u6a19\u6e96\u8f38\u51fa &amp; \u6a19\u6e96\u932f\u8aa4-console.log([data][, ...args]) &amp; console.error([data][, ...args])</li> <li>\u5982\u6211\u5011\u6240\u898b,<code>console.log()</code>\u975e\u5e38\u9069\u5408\u5728\u5f8c\u53f0(Console)\u6253\u5370\u51fa\u8a0a\u606f,\u9019\u4e5f\u5c31\u662f\u6240\u8b02\u7684\u6a19\u6e96\u8f38\u51fa(standard output, <code>stdout</code>)</li> <li>\u53cd\u4e4b,<code>console.error()</code>\u5247\u6703\u5c07\u8a0a\u606f\u6253\u5370\u5230\u6a19\u6e96\u932f\u8aa4(standard error, <code>stderr</code>)\u6d41(stream)\u4e0a\u9762<ul> <li><code>stderr</code>\u6d41\u4e0d\u6703\u51fa\u73fe\u5728\u5f8c\u53f0(Console)\u4e0a,\u4f46\u662f\u5b83\u6703\u51fa\u73fe\u5728\u932f\u8aa4\u65e5\u8a8c\u4e0a(error log)</li> </ul> </li> <li>\u70ba\u6587\u5b57\u8f38\u51fa\u4e0a\u8272-\u8df3\u812b\u5e8f\u5217(escape sequences) &amp; npm\u7684chalk package</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528\u8df3\u812b\u5e8f\u5217(escape sequence)\u5c07\u6587\u5b57\u8f38\u51fa\u4e0a\u8272</li> <li>\u8df3\u812b\u5e8f\u5217\u662f\u4e00\u7d44\u5b57\u7b26\u4ee3\u8868\u4e00\u7a2e\u984f\u8272</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>console.log('\\x1b[33m%s\\x1b[0m', 'hi!')\n</code></pre><ul> <li>\u5728<code>CLI</code>\u4e0a\u9032\u5165Node\u7684<code>REPL\u6a21\u5f0f</code>\u4e2d,\u57f7\u884c\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u6703\u770b\u5230<code>hi</code>\u8b8a\u6210\u9ec3\u8272\u7684\u5b57\u9ad4</li> <li></li> <li>\u7136\u800c\u9019\u6a23\u505a\u5176\u5be6\u662f\u4e00\u7a2e\u4f4e\u968e(low-level)\u65b9\u6cd5,\u6700\u7c21\u55ae\u7684\u505a\u6cd5\u662f\u5229\u7528\u5957\u4ef6(library)\u4f86\u5c07\u6587\u5b57\u8f38\u51fa\u4e0a\u8272</li> </ul> </li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528npm\u4e0a\u9762\u7684<code>chalk</code>\u5957\u4ef6,\u8a72\u5957\u4ef6\u4e0d\u50c5\u53ef\u4ee5\u70ba\u6587\u5b57\u8f38\u51fa\u4e0a\u8272,\u4e5f\u53ef\u4ee5\u5c07\u6587\u5b57\u8f38\u51fa\u7684\u5b57\u9ad4\u8b8a\u6210 \u7c97\u9ad4 or \u659c\u9ad4 or \u5e36\u6709\u4e0b\u5283\u7dda<ul> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>CLI</code>\u6307\u4ee4\u4f86\u5b89\u88dd<code>chalk</code>\u9019\u500b\u5957\u4ef6,\u5b89\u88dd\u5b8c\u5f8c\u5c31\u53ef\u4ee5\u7acb\u5373\u4f7f\u7528\u5b83</li> <li>$ <code>npm install chalk</code></li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>const chalk = require('chalk')\nconsole.log(chalk.yellow('hi!'))\n</code></pre></li> <li>\u5f9e\u4e0a\u9762\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u770b\u51fa\u6211\u5011\u53ef\u4ee5\u4f7f\u7528<code>chalk.yellow()</code>\u9019\u500b\u65b9\u6cd5\u6703\u6bd4\u8d77\u8df3\u812b\u5e8f\u5217(escape sequences)\u4f86\u5f97\u66f4\u597d\u8a18\u8207\u66f4\u597d\u95b1\u8b80</li> <li>\u66f4\u591a\u76f8\u95dc\u529f\u80fd\u53ef\u4ee5\u53c3\u8003chalk</li> </ul> </li> <li>\u5efa\u7acb\u9032\u5ea6\u689d-npm\u7684progress package</li> <li><code>progress</code>\u662f\u4e00\u500b\u975e\u5e38\u68d2\u7684\u5957\u4ef6\u5728CLI console\u756b\u9762\u4e0a\u5275\u9020 \u9032\u5ea6\u689d \u7684\u5957\u4ef6</li> <li>\u53ef\u4ee5\u5148\u5229\u7528npm\u4f86\u5b89\u88dd<code>progress</code>\u9019\u500b\u5957\u4ef6<ul> <li>$ <code>npm install progress</code></li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const ProgressBar = require('progress')\nconst bar = new ProgressBar(':bar', { total: 10 })\nconst timer = setInterval(() =&gt; {\nbar.tick()\nif (bar.complete) {\nclearInterval(timer)\n}\n}, 100)\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\u5efa\u7acb\u4e00\u500b\u542b\u670910\u500b\u6b65\u9a5f(steps)\u7684\u9032\u5ea6\u689d(progress bar),\u6bcf100\u6beb\u79d2\u5c31\u6703\u57f7\u884c\u4e00\u6b21</li> <li>\u7576\u9032\u5ea6\u689d\u5b8c\u6210\u6642,\u5c31\u6703\u6e05\u9664\u9019\u500b\u9593\u9694(clear the interval)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#accept-input-from-the-command-line-in-nodejs","title":"Accept input from the command line in Node.js","text":"<p>npm\u7684readline-sync\u5957\u4ef6---\u63d0\u4f9b\u4e00\u500b\u80fd\u900f\u904econsole(TTY)\u8207\u4f7f\u7528\u8005\u9032\u884c\u5c0d\u8a71\u7684\u4e92\u52d5\u5f0f\u57f7\u884c\u5730\u540c\u6b65\u8b80\u53d6\u884c(synchronous readline for interactively running) npm\u7684inquirer---\u6536\u96c6\u4e86\u5e38\u898b\u7684<code>CLI</code>\u6307\u4ee4</p> <ul> <li>\u5982\u4f55\u8b93Node\u61c9\u7528\u7a0b\u5f0f\u7684<code>CLI console</code>\u6210\u70ba\u4e92\u52d5\u6027(interactive)\u7684\u63a7\u5236\u53f0</li> <li>\u81ea\u5f9eNode<code>v7.0.0</code>\u7248\u672c\u4e4b\u5f8c,Node\u63d0\u4f9b\u4e86<code>readline</code>\u9019\u500b\u5167\u5efa\u6838\u5fc3\u6a21\u7d44\u4f86\u78ba\u5207\u5730\u57f7\u884c\u4ee5\u4e0b\u9019\u4ef6\u4e8b\u60c5</li> <li>\u5f9e\u4e00\u500b\u53ef\u8b80\u53d6\u7684\u6d41(readable stream),\u4f8b\u5982: <code>process.stdin</code>\u6d41(stream)\u7372\u5f97\u8f38\u5165(get input)</li> <li>\u88dc\u5145: <code>process.stdin</code>\u662f\u5728\u57f7\u884cNode.js\u61c9\u7528\u7a0b\u5f0f\u671f\u9593\u6642,\u7d42\u7aef\u6a5f\u8f38\u5165\u7684\u6d41,\u4e00\u6b21\u50c5\u4e00\u884c</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const readline = require('readline').createInterface({\ninput: process.stdin,\noutput: process.stdout\n})\nreadline.question(`What's your name?`, name =&gt; {\nconsole.log(`Hi ${name}!`)\nreadline.close()\n})\n</code></pre><ul> <li>\u4ee5\u4e0a\u7247\u6bb5(piece)\u7684\u7a0b\u5f0f\u78bc\u6703\u8a62\u554f\u4f7f\u7528\u8005\u540d\u7a31,\u4e00\u65e6\u4f7f\u7528\u8005\u8f38\u5165\u6587\u5b57\u4e26\u6309\u4e0b<code>enter</code>\u9375\u5f8c,\u6211\u5011\u5c31\u6703\u767c\u9001\u4e00\u500b\u554f\u5019(greeting)</li> <li>\u8aaa\u660e: readline.question()\u65b9\u6cd5\u986f\u793a\u7b2c\u4e00\u500b\u53c3\u6578(\u4f8b: \u4e00\u500b\u554f\u53e5),\u4e26\u7b49\u5f85\u4f7f\u7528\u8005\u8f38\u5165\u3002\u4e00\u65e6\u4f7f\u7528\u8005\u8f38\u5165\u6587\u5b57\u4e26\u6309\u4e0b<code>enter</code>\u9375\u5f8c,\u5c31\u6703\u547c\u53eb\u8a72\u65b9\u6cd5\u7684\u7b2c\u4e8c\u500b\u53c3\u6578---\u56de\u547c\u51fd\u5f0f(callback function)</li> <li>\u5728\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011\u7684\u56de\u547c\u51fd\u5f0f\u6703\u95dc\u9589\u8b80\u53d6\u884c\u4ecb\u9762(readline interface)---(readline.close())</li> </ul> </li> <li><code>readline</code>\u6a21\u7d44\u63d0\u4f9b\u4e86\u8a31\u591a\u5176\u4ed6\u7684\u65b9\u6cd5,\u63a5\u4e0b\u4f86\u5c07\u6703\u5728\u5957\u4ef6\u7684\u540d\u7a31\u4e0a\u8a2d\u5b9a\u8d85\u9023\u7d50\u4f86\u8b93\u6211\u5011\u53ef\u4ee5\u53bb\u67e5\u770b\u8a72\u5957\u4ef6\u7684\u6587\u4ef6</li> <li>\u5982\u679c\u6211\u5011\u8981\u6c42\u8f38\u5165\u5bc6\u78bc,\u6211\u5011\u6703\u5e0c\u671b\u6700\u597d\u4e0d\u8981\u4ee5\u660e\u78bc\u986f\u793a\u56de\u50b3\u7684\u5bc6\u78bc,\u800c\u662f\u4f7f\u7528<code>*</code>\u7b26\u865f\u4f86\u66ff\u63db\u986f\u793a\u4f7f\u7528\u8005\u8f38\u5165\u7684\u5bc6\u78bc<ul> <li>\u9019\u6642\u6700\u7c21\u55ae\u7684\u65b9\u5f0f\u662f\u4f7f\u7528\u5c31API\u800c\u8a00\u975e\u5e38\u985e\u4f3c\u7684,npm\u4e0a\u7684readline-sync\u5957\u4ef6,\u4e26\u7acb\u5373\u5c0d\u5176\u9032\u884c\u8655\u7406</li> </ul> </li> <li>npm\u7684inquirer\u5957\u4ef6\u63d0\u4f9b\u4e86\u4e00\u500b\u66f4\u5b8c\u6574\u4e14\u66f4\u62bd\u8c61\u7684\u89e3\u6c7a\u65b9\u6848<ul> <li>\u6211\u5011\u9700\u8981\u5148\u900f\u904enpm\u5b89\u88dd<code>inquirer</code>\u5957\u4ef6</li> <li>$ <code>npm install inquirer</code></li> </ul> </li> <li>\u60c5\u5883\u8aaa\u660e     JavaScript<pre><code>const inquirer = require('inquirer')\nvar questions = [\n{\ntype: 'input',\nname: 'name',\nmessage: \"What's your name?\"\n}\n]\ninquirer.prompt(questions).then(answers =&gt; {\nconsole.log(`Hi ${answers['name']}!`)\n})\n</code></pre><ul> <li><code>inquirer</code>\u9019\u500b\u5957\u4ef6\u8b93\u6211\u5011\u53ef\u4ee5\u505a\u8a31\u591a\u4e8b\u60c5\u50cf\u662f\u8a62\u554f\u9078\u64c7\u984c(multiple choices),\u63d0\u4f9b\u55ae\u9078\u6309\u9215(radio button),\u78ba\u8a8d(confirmation),...\u7b49\u7b49</li> <li>\u503c\u5f97\u4e00\u63d0\u7684\u662f\u6240\u6709\u7684\u66ff\u4ee3\u65b9\u6848(alternatives),\u5c24\u5176\u662f\u90a3\u4e9bNode\u63d0\u4f9b\u7684\u5167\u5efa\u66ff\u4ee3\u65b9\u6848\u9084\u4e0d\u932f\u3002\u4f46\u5982\u679c\u6211\u5011\u60f3\u8981\u5c07<code>CLI</code>\u4e92\u52d5\u5f0f\u8f38\u5165\u63d0\u4f9b\u5230\u53e6\u4e00\u500b\u66f4\u9ad8\u7684\u6c34\u5e73\u4e0a\u6642,<code>inquirer.js</code>\u662f\u4e00\u500b\u6700\u7406\u60f3(optimal)\u7684\u9078\u64c7</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#expose-functionality-from-a-nodejs-file-using-exports","title":"Expose functionality from a Node.js file using exports","text":"<ul> <li>Node\u64c1\u6709\u5167\u5efa\u7684\u6a21\u7d44\u7cfb\u7d71,\u4e26\u80fd\u900f\u904e\u532f\u5165(import)\u4f86\u4f7f\u7528\u7531\u5176\u5b83Node.js\u7684\u6a94\u6848\u516c\u958b(exposed)\u51fa\u4f86\u7684\u529f\u80fd</li> <li>\u5047\u5982\u6211\u5011\u60f3\u8981\u532f\u5165\u67d0\u4e9b\u6211\u5011\u60f3\u4f7f\u7528\u7684\u6771\u897f</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const library = require('./library')\n</code></pre><ul> <li>\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u4f86\u532f\u5165\u5b58\u5728\u65bc(resides)\u7576\u524d\u6a94\u6848\u76ee\u9304\u4e0b\u7684<code>library.js</code>\u6240\u516c\u958b(exposed)\u51fa\u4f86\u7684\u529f\u80fd</li> <li>\u5728<code>library.js</code>\u6a94\u6848\u7684\u7a0b\u5f0f\u78bc\u4e2d\u7684\u6700\u4e0b\u9762,\u9700\u8981\u4e8b\u5148\u516c\u958b(exposed)=&gt; (\u4f7f\u7528<code>module.exports</code>\u7269\u4ef6\u7684API)\u51fa\u4f86\u8a72\u6a94\u6848\u7684\u529f\u80fd,\u624d\u80fd\u5728\u5176\u4ed6\u9700\u8981\u4f7f\u7528\u6642,\u76f4\u63a5\u532f\u5165<code>library.js</code>\u5c31\u53ef\u4ee5\u4f7f\u7528</li> <li>\u56e0\u70ba\u5728\u9810\u8a2d\u60c5\u6cc1\u4e0b,\u6240\u6709\u5728<code>library.js</code>\u4e2d\u5b9a\u7fa9\u7684\u7269\u4ef6or\u8b8a\u6578\u90fd\u662f\u79c1\u6709\u7684(private)\u4e26\u4e14\u6c92\u6709\u5c0d\u5916(to outer world)\u516c\u958b(exposed)</li> <li>\u800c\u9019\u4e5f\u5c31\u662fCommonJS modules\u6a21\u7d44\u63d0\u4f9b\u7684module.exports API,\u6240\u5141\u8a31\u6211\u5011\u9019\u9ebc\u505a\u7684</li> </ul> </li> <li>\u7576\u6211\u5011\u6307\u6d3e(assign)\u4e00\u500b\u7269\u4ef6\u6216\u662f\u4e00\u500b\u51fd\u5f0f\u6210\u70ba<code>exports</code>\u7684\u65b0\u5c6c\u6027\u6642,\u800c\u9019\u5c31\u662f\u6211\u5011\u8981\u516c\u958b(exposed)\u7684\u6771\u897f,\u56e0\u6b64\u6211\u5011\u5c31\u53ef\u4ee5\u5728\u6211\u5011\u7684Node\u61c9\u7528\u7a0b\u5f0f\u4e2d\u7684\u5176\u5b83\u90e8\u5206\u4e2d\u6216\u751a\u81f3\u662f\u5728\u5176\u5b83\u7684Node\u61c9\u7528\u7a0b\u5f0f\u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528</li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b2\u7a2e\u65b9\u5f0f\u4f86\u64cd\u4f5c</li> <li>\u65b9\u6cd5\u4e00: \u6307\u6d3e(assign)\u4e00\u500b\u7269\u4ef6\u7d66<code>module.exports</code>,\u4e5f\u5c31\u662f\u6307\u6d3e\u7d66\u7531Node\u7684<code>CommonJS modules</code>\u6838\u5fc3\u6a21\u7d44\u6240\u63d0\u4f9b\u7684\u7269\u4ef6,\u5982\u6b64\u5c31\u80fd\u5c07\u6211\u5011\u7684\u6a94\u6848\u50c5\u5c0d\u5916\u532f\u51fa(export)\u90a3\u500b\u7269\u4ef6<ul> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>const car = {\nbrand: 'Ford',\nmodel: 'Fiesta'\n}\nmodule.exports = car\n//..in the other file\nconst car = require('./car')\n</code></pre></li> </ul> </li> <li>\u65b9\u6cd5\u4e8c: \u5c07\u60f3\u8981\u532f\u51fa(exported)\u7269\u4ef6\u65b0\u589e(add)\u70baexports\u7684\u5c6c\u6027(property),\u9019\u500b\u65b9\u6cd5\u8b93\u6211\u5011\u80fd\u5920\u532f\u51fa\u591a\u500b\u7269\u4ef6(objects),\u51fd\u5f0f(functions),\u8cc7\u6599(data)<ul> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>const car = {\nbrand: 'Ford',\nmodel: 'Fiesta'\n}\nexports.car = car\n</code></pre></li> <li>\u6216\u662f\u4e5f\u53ef\u4ee5\u76f4\u63a5\u9019\u6a23\u532f\u51fa(export)</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>exports.car = {\nbrand: 'Ford',\nmodel: 'Fiesta'\n}\n</code></pre></li> <li>\u63a5\u8457,\u6211\u5011\u5728\u53e6\u4e00\u500b\u6a94\u6848\u4e2d\u5c31\u53ef\u4ee5\u532f\u5165(import)\u4e26\u5f15\u7528(referencing)\u9019\u500b\u5c6c\u6027</li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b2\u7a2e\u65b9\u5f0f\u4f86\u5f15\u7528\u5b83</li> <li>\u65b9\u6cd5\u4e00:     JavaScript<pre><code>const items = require('./items')\nitems.car\n</code></pre></li> <li>\u65b9\u6cd5\u4e8c:     JavaScript<pre><code>const car = require('./items').car\n</code></pre></li> </ul> </li> <li>module.exports\u8207exports\u4e4b\u9593\u6709\u4ec0\u9ebc\u5340\u5225\u5462?</li> <li><code>module.exports</code>\u6703\u516c\u958b(exposes)\u5b83\u6307\u5411(points to)\u7684\u5c0d\u8c61(object)</li> <li><code>exports</code>\u6703\u516c\u958b(exposes)\u5b83\u6240\u6307\u5411(points to)\u7684\u5c0d\u8c61(object)\u7684\u5c6c\u6027(properties)</li> </ul>"},{"location":"programming_language/nodejs/#an-introduction-to-the-npm-package-manager","title":"An introduction to the npm package manager","text":"<p>npm install - Install a package</p> <ul> <li><code>npm</code>\u4ecb\u7d39</li> <li>npm\u662fNode\u6a19\u6e96\u7684\u5957\u4ef6\u7ba1\u7406\u5de5\u5177(standard package manager)</li> <li>\u57282017\u5e741\u6708,\u6839\u64da\u5831\u544a\u986f\u793a<code>npm registry</code>\u5217\u8868\u4e0a\u5df2\u6709\u8d85\u904e350,000\u500b\u5957\u4ef6(packages),\u4e5f\u4f7f\u5176\u6210\u70ba\u5730\u7403\u4e0a\u55ae\u4e00\u8a9e\u8a00\u7a0b\u5f0f\u78bc\u5132\u5b58\u5eab,\u4e26\u4e14\u6211\u5011\u53ef\u4ee5\u78ba\u5b9a\u5728<code>npm</code>\u4e0a\u6709\u5e7e\u4e4e\u6240\u6709\u7684\u6771\u897f</li> <li><code>npm</code>\u8d77\u521d\u662f\u7528\u4f86\u4e0b\u8f09\u548c\u7ba1\u7406Node\u5957\u4ef6(package)\u7684\u76f8\u4f9d\u6027(dependencies)\u7684\u65b9\u5f0f,\u4f46\u5b83\u6b64\u5f8c\u5df2\u7d93\u6210\u70ba\u524d\u7aef(frontend) Javascript\u7684\u5de5\u5177</li> <li><code>npm</code>\u5e6b\u52a9\u6211\u5011\u5b8c\u6210\u5f88\u591a\u4e8b\u60c5,\u53e6\u5916<code>Yarn</code>\u662f\u4e00\u500b<code>npm</code>\u7684\u66ff\u4ee3\u65b9\u6848(alternative),\u53ef\u4ee5\u5230Yarn\u7684\u5b98\u65b9\u7db2\u7ad9\u53bb\u77a7\u77a7</li> <li>\u4e0b\u8f09</li> <li><code>npm</code>\u6703\u7ba1\u7406\u6211\u5011\u5c08\u6848\u7684\u5957\u4ef6\u76f8\u4f9d\u6027(dependencies)</li> <li>\u5b89\u88dd\u6240\u6709\u8a72\u5c08\u6848\u7684\u5957\u4ef6\u8207\u5176\u76f8\u4f9d\u7684\u5957\u4ef6(all dependencies)<ul> <li>\u5982\u679c\u6211\u5011\u7684\u5c08\u6848\u6709\u4e00\u500b<code>package.json</code>\u6a94\u6848\u7684\u8a71,\u53ea\u8981\u5728\u7d42\u7aef\u6a5f\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>npm install</code></li> <li>\u5982\u679c\u6211\u5011\u7684\u5c08\u6848\u4e2d\u4e0d\u5b58\u5728<code>node_modules/</code>\u9019\u500b\u8cc7\u6599\u593e\u7684\u8a71,\u8a72\u6307\u4ee4\u5c31\u6703\u5b89\u88dd\u6240\u6709\u9019\u500b\u5c08\u6848\u6703\u9700\u8981\u7684\u5957\u4ef6,\u4e26\u5c07\u9019\u4e9b\u6771\u897f\u653e\u5728<code>node_modules/</code>\u7684\u8cc7\u6599\u593e</li> </ul> </li> <li>\u5b89\u88dd\u55ae\u4e00\u500b\u5957\u4ef6(package)<ul> <li>\u6211\u5011\u53ea\u60f3\u5b89\u88dd\u6307\u5b9a\u7684\u5957\u4ef6\u7684\u8a71,\u53ef\u4ee5\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>npm install &lt;package-name&gt;</code></li> <li>\u901a\u5e38,\u6211\u5011\u6703\u770b\u5230\u95dc\u65bc\u9019\u500b\u6307\u4ee4\u7684\u66f4\u591a\u9078\u9805,\u4f8b\u5982\u4ee5\u4e0b\u5169\u7a2e\u9078\u9805<ul> <li>--save: \u5b89\u88dd\u8a72\u5957\u4ef6\u4e26\u65b0\u589e\u5230<code>package.json</code>\u7684<code>dependencies</code>\u9375\u4e2d</li> <li>--save-dev: \u5b89\u88dd\u8a72\u5957\u4ef6\u4e26\u65b0\u589e\u5230<code>package.json</code>\u7684<code>devDependencies</code>\u9375\u4e2d</li> </ul> </li> <li>\u4ee5\u4e0a\u5169\u7a2e\u5b89\u88dd\u9078\u9805\u7684\u5340\u5225\u4e3b\u8981\u662f<code>devDependencies</code>\u901a\u5e38\u662f\u958b\u767c\u5de5\u5177(development tools),\u50cf\u662f\u6e2c\u8a66\u5957\u4ef6(testing library); \u800c<code>dependencies</code>\u5728\u751f\u7522\u74b0\u5883\u4e2d\u8207\u61c9\u7528\u7a0b\u5f0f\u672c\u8eab\u7d81\u5b9a\u5728\u4e00\u8d77</li> </ul> </li> <li>\u66f4\u65b0\u5957\u4ef6(Updating packages)<ul> <li>\u4f7f\u7528<code>npm</code>\u4e5f\u8b93\u66f4\u65b0\u5957\u4ef6\u66f4\u5bb9\u6613,\u53ef\u4ee5\u900f\u904e\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4</li> <li><code>npm update</code></li> <li><code>npm</code>\u5c07\u6aa2\u67e5\u6240\u6709\u5957\u4ef6\u662f\u5426\u6709\u80fd\u6eff\u8db3\u6211\u5011\u5c08\u6848\u4e2d\u7684<code>package.json</code>\u6a94\u6848\u7248\u672c\u9650\u5236(constraints)\u7684\u6700\u65b0\u7248\u672c</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8981\u66f4\u65b0\u55ae\u4e00\u500b\u5957\u4ef6</li> <li>$ <code>npm update &lt;package-name&gt;</code></li> </ul> </li> <li>\u5957\u4ef6\u7684\u7248\u672c\u63a7\u5236</li> <li>\u9664\u4e86\u55ae\u7d14\u7684\u4e0b\u8f09\u4e4b\u5916,<code>npm</code>\u4e5f\u80fd\u7ba1\u7406\u5957\u4ef6\u7684\u7248\u672c,\u56e0\u6b64\u6211\u5011\u53ef\u4ee5\u5728\u6211\u5011\u5c08\u6848\u4e2d\u7684<code>package.json</code>\u6a94\u6848\u4e2d,\u5c0d\u5957\u4ef6\u6307\u5b9a\u4efb\u4f55\u4e00\u500b\u7279\u5b9a\u7684\u7248\u672c,\u6216\u662f\u8981\u6c42\u5b89\u88dd\u7684\u7248\u672c\u9700\u8981\u9ad8\u65bc or \u4f4e\u65bc\u6211\u5011\u6240\u9700\u8981\u7684\u7279\u5b9a\u7248\u672c</li> <li>\u5f88\u591a\u6642\u5019\u6703\u767c\u73fe\u4e00\u500b\u51fd\u5f0f\u5eab(library)\u50c5\u8207\u53e6\u4e00\u500b\u51fd\u5f0f\u5eab\u7684\u4e3b\u8981\u7248\u672c(major release)\u6240\u76f8\u5bb9(compatible); \u6216\u662f\u6700\u65b0\u767c\u5e03\u7684\u51fd\u5f0f\u5eab\u7684\u7248\u672c\u4e4b\u4e2d\u6709<code>bug</code>,\u4ecd\u7136\u672a\u4fee\u5fa9,\u4e26\u9020\u6210\u4e86\u4e00\u4e9b\u554f\u984c(issue)</li> <li>\u6307\u5b9a\u4e00\u500b\u660e\u78ba\u7684\u51fd\u5f0f\u5eab(library)\u7248\u672c\u4e5f\u53ef\u4ee5\u5e6b\u52a9\u6bcf\u500b\u4eba\u90fd\u4f7f\u7528\u78ba\u5b9a\u76f8\u540c\u7684\u5957\u4ef6(package)\u7248\u672c,\u56e0\u6b64\u6574\u500b\u5718\u968a\u90fd\u4f7f\u7528\u76f8\u540c\u7684\u7248\u672c\u4f86\u904b\u884c\u7a0b\u5f0f,\u76f4\u5230<code>package.json</code>\u6a94\u6848\u88ab\u66f4\u65b0\u70ba\u6b62</li> <li>\u5728\u4ee5\u4e0a\u7684\u60c5\u6cc1\u4e2d,\u5957\u4ef6\u7684\u7248\u672c\u7ba1\u7406\u90fd\u975e\u5e38\u6709\u7528,<code>npm</code>\u4e5f\u9075\u5faa\u4e86\u8a9e\u610f\u5316\u7248\u672c\u63a7\u5236\u7684\u6a19\u6e96(semantic versioning (semver) standard)<ul> <li>npm Docs---semver: <code>npm</code>\u7684\u8a9e\u610f\u5316\u7248\u672c\u63a7\u5236\u5de5\u5177</li> <li>Semantic Versioning 2.0.0: \u8a9e\u610f\u5316\u7248\u672c\u7684\u5b98\u65b9\u7db2\u7ad9</li> </ul> </li> <li>\u57f7\u884c\u4efb\u52d9(Running Tasks)</li> <li><code>package.json</code>\u652f\u63f4\u900f\u904e\u6307\u5b9a\u683c\u5f0f\u7684\u547d\u4ee4\u4f86\u57f7\u884cNode\u61c9\u7528\u7a0b\u5f0f,\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u6307\u4ee4<ul> <li>$ <code>npm run &lt;task-name&gt;</code></li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>{\n\"scripts\": {\n\"start-dev\": \"node lib/server-development\",\n\"start\": \"node lib/server-production\"\n},\n}\n</code></pre></li> <li>\u4ee5\u4e0b\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u662f\u5229\u7528\u6b64\u529f\u80fd\u57f7\u884c Webpack \u5e38\u898b\u7684\u65b9\u5f0f     JavaScript<pre><code>{\n\"scripts\": {\n\"watch\": \"webpack --watch --progress --colors --config webpack.conf.js\",\n\"dev\": \"webpack --progress --colors --config webpack.conf.js\",\n\"prod\": \"NODE_ENV=production webpack -p --config webpack.conf.js\",\n},\n}\n</code></pre></li> </ul> </li> <li>\u56e0\u6b64,\u6211\u5011\u4e0d\u7528\u518d\u53bb\u8a18\u90a3\u4e9b\u5bb9\u6613\u5fd8\u8a18or\u8f38\u5165\u932f\u8aa4\u7684\u9577\u6307\u4ee4,\u800c\u53ef\u4ee5\u50cf\u662f\u5982\u4e0b\u7c21\u6f54\u7684\u65b9\u5f0f\u4f86\u57f7\u884cNode\u61c9\u7528\u7a0b\u5f0f<ul> <li>$ <code>npm run watch</code></li> <li>$ <code>npm run dev</code></li> <li>$ <code>npm run prod</code></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#where-does-npm-install-the-packages","title":"Where does npm install the packages?","text":"<ul> <li>\u7576\u6211\u5011\u5229\u7528<code>npm</code>\u5957\u4ef6\u7ba1\u7406\u5de5\u5177\u4f86\u5b89\u88dd\u4e00\u500b\u5957\u4ef6\u6642,\u53ef\u4ee5\u9078\u64c7\u57f7\u884c\u4ee5\u4e0b2\u7a2e\u985e\u578b\u7684\u5b89\u88dd\u65b9\u5f0f</li> <li>\u672c\u5730\u7aef\u5b89\u88dd(a local install)</li> <li>\u5168\u57df\u5b89\u88dd(a global install)</li> <li>\u5728\u9810\u8a2d\u60c5\u6cc1\u4e0b,\u6211\u5011\u53ef\u4ee5\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4\u4f86\u5b89\u88dd\u5957\u4ef6(=&gt; \u672c\u5730\u7aef\u5b89\u88dd)</li> <li>\u4f8b: $ <code>npm install lodash</code></li> <li>\u9019\u6a23<code>npm</code>\u5c31\u6703\u5728\u7576\u524d\u5c08\u6848\u7684\u76ee\u9304\u88e1\u9762\u7684<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d\u5b89\u88dd\u8a72\u5957\u4ef6</li> <li>\u9019\u6642,<code>npm</code>\u4e5f\u6703\u65b0\u589e<code>lodash</code>\u9019\u500b\u9805\u76ee(entry)\u5230\u7576\u524d\u5c08\u6848\u76ee\u9304\u88e1\u7684<code>package.json</code>\u6a94\u6848\u4e2d\u7684<code>dependencies</code>\u5c6c\u6027\u4e2d</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>-g</code>\u9078\u9805\u4f86\u57f7\u884c\u5168\u57df\u5b89\u88dd</li> <li>\u4f8b: $ <code>npm install -g lodash</code></li> <li>\u9019\u6642,<code>npm</code>\u5c31\u4e0d\u6703\u5728\u7576\u524d\u7684\u8cc7\u6599\u593e\u5b89\u88dd\u8a72\u5957\u4ef6,\u800c\u662f\u6703\u5b89\u88dd\u5230\u4e00\u500b\u5168\u57df\u7684\u4f4d\u7f6e\u4e0a(global location)</li> <li>\u5177\u9ad4\u4f86\u8aaa,\u5168\u57df\u5b89\u88dd\u7684\u8def\u5f91\u4f4d\u7f6e\u5728\u54ea\u88e1\u5462? A: \u6703\u4f9d\u64da\u672c\u5730\u7aef\u96fb\u8166\u7684\u4f5c\u696d\u7cfb\u7d71\u4e0d\u540c\u800c\u5b9a<ul> <li>\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u4e2d\u6703\u662f<code>C:\\Users\\YOU\\AppData\\Roaming\\npm\\node_modules</code></li> <li>\u5728macOS &amp; Linux\u4f5c\u696d\u7cfb\u7d71\u4e2d\u6703\u662f<code>/usr/local/lib/node_modules</code></li> <li></li> </ul> </li> <li>\u7136\u800c,\u5982\u679c\u6211\u5011\u4f7f\u7528<code>nvm</code>\u4f86\u7ba1\u7406Node\u7248\u672c\u7684\u8a71,\u5168\u57df\u5b89\u88dd\u7684\u8def\u5f91\u4f4d\u7f6e\u5c31\u6703\u6709\u6240\u4e0d\u540c</li> <li>\u4ee5\u6211\u4f7f\u7528<code>nvm</code>\u7684\u60c5\u6cc1\u4f86\u8aaa,\u6211\u7684\u5957\u4ef6\u6703\u88ab\u5168\u57df\u5b89\u88dd\u5728<code>/Users/joe/.nvm/versions/node/v8.9.0/lib/node_modules</code></li> </ul>"},{"location":"programming_language/nodejs/#how-to-use-or-execute-a-package-installed-using-npm","title":"How to use or execute a package installed using npm?","text":"<p>npm\u7684cowsay\u5957\u4ef6---\u662f\u4e00\u500b\u7531<code>Perl</code>\u8a9e\u8a00\u6240\u958b\u767c\u7684\u5957\u4ef6,\u80fd\u63d0\u4f9b\u4e00\u500b\u7d42\u7aef\u6a5f\u4ecb\u9762\u7684\u7a0b\u5f0f,\u4e26\u4ee5\u6bcd\u725b(cow)\u7684\u65b9\u5f0f\u8aaa\u8a71</p> <ul> <li>\u7576\u6211\u5011\u900f\u904e<code>npm</code>\u5b89\u88dd\u5957\u4ef6\u5230<code>node_modules/</code>\u8cc7\u6599\u593e\u6642,\u6216\u662f\u5168\u57df\u5b89\u88dd\u6642,\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>require('&lt;package name&gt;')</code>\u7684\u8a9e\u6cd5\u4f86\u5f15\u7528\u8a72\u5957\u4ef6(package)</li> <li>\u5047\u8a2d\u6211\u5011\u5b89\u88dd\u4e86<code>lodash</code>\u9019\u500bJavascript\u4e16\u754c\u4e2d\u6d41\u884c\u4e14\u5be6\u7528\u7684\u51fd\u5f0f\u5eab(library)<ul> <li>\u4f8b: $ <code>npm install lodash</code></li> </ul> </li> <li>\u9019\u6a23<code>npm</code>\u5c07\u6703\u628a<code>lodash</code>\u51fd\u5f0f\u5eab\u5b89\u88dd\u5230\u7576\u524d\u5c08\u6848\u76ee\u9304\u4e2d\u7684<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d</li> <li>\u7576\u6211\u5011\u60f3\u8981\u4f7f\u7528<code>lodash</code>\u51fd\u5f0f\u5eab\u5728\u6211\u5011\u7684\u7a0b\u5f0f\u78bc\u6642,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u7684\u6307\u4ee4<ul> <li>\u4f8b: $ <code>const _ = require('lodash')</code></li> <li>\u4ee5\u9019\u500b\u7bc4\u4f8b\u70ba\u4f8b \u6703\u5c07\u53ef\u57f7\u884c\u7684\u6a94\u6848(executable file)\u653e\u5728<code>node_modules/.bin/</code>\u8cc7\u6599\u593e\u4e0b\u9762</li> </ul> </li> <li>\u4ee5\u4e0a\u7684\u89c0\u5ff5,\u6211\u5011\u53ef\u4ee5\u5229\u7528<code>npm</code>\u4e0a\u7684cowsay\u5957\u4ef6\u4f86\u505a\u500b\u5c55\u793a</li> <li>cowsay\u5957\u4ef6\u80fd\u63d0\u4f9b\u4e00\u500b\u7d42\u7aef\u6a5f\u4ecb\u9762\u7684\u7a0b\u5f0f,\u4e26\u4ee5\u6bcd\u725b(cow)\u7684\u65b9\u5f0f\u8aaa\u8a71</li> <li>\u7576\u6211\u5011\u900f\u904e<code>npm</code>\u5b89\u88dd<code>cowsay</code>\u5957\u4ef6\u6642, \u8a72\u5957\u4ef6\u5c31\u6703\u5b89\u88dd\u5b83\u81ea\u5df1\u672c\u8eab &amp; \u5176\u6240\u6709\u76f8\u4f9d\u7684\u5957\u4ef6(dependencies)\u5728<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d<ul> <li></li> </ul> </li> <li>\u5728<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d\u6703\u6709\u4e00\u500b\u96b1\u85cf\u76ee\u9304<code>.bin/</code>,\u88e1\u9762\u5305\u542b\u6307\u5411<code>cowsay</code>\u5957\u4ef6\u7684\u4e8c\u9032\u5236\u6587\u4ef6(binaries)<ul> <li></li> </ul> </li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>npx</code>\u4f86\u57f7\u884c<code>cowsay</code>\u5957\u4ef6\u4f86\u8a66\u8a66\u770b,<code>npx</code>\u6703\u81ea\u52d5\u53bb\u627e\u5230\u8a72\u5957\u4ef6\u7684\u8def\u5f91\u4f4d\u7f6e<ul> <li>\u4f8b: $ <code>npx cowsay</code></li> <li></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-packagejson-guide","title":"The package.json guide","text":"<ul> <li>\u5982\u679c\u60a8\u6709\u4f7f\u7528\u904eJavascript,\u6216\u662f\u66fe\u7d93\u6709\u548cJavascript\u5c08\u6848\u4e92\u52d5(interacted)\u904e,\u6216\u662f\u60a8\u662f\u4e00\u4f4dNode.js\u5f8c\u7aef\u958b\u767c\u4eba\u54e1,\u6216\u662f\u524d\u7aef\u958b\u767c\u4eba\u54e1,\u60a8\u80af\u5b9a\u8a8d\u8b58<code>package.json</code>\u9019\u500b\u6a94\u6848</li> <li>\u63a5\u4e0b\u4f86\u6211\u5011\u6703\u8a0e\u8ad6<code>package.json</code>\u9019\u500b\u6a94\u6848\u7684</li> <li>\u6709\u4ec0\u9ebc\u7528\u9014\u5462?</li> <li>\u6211\u5011\u61c9\u8a72\u8981\u5c0d\u65bc\u9019\u500b\u6a94\u6848\u6709\u4ec0\u9ebc\u8a8d\u77e5\u5462?</li> <li>\u6211\u5011\u80fd\u7528\u5b83\u505a\u4ec0\u9ebc\u7279\u5225\u7684\u4e8b\u60c5\u5462?</li> <li><code>package.json</code>\u6709\u9ede\u50cf\u662f\u6211\u5011\u5c08\u6848\u7684\u6e05\u55ae(manifest),\u5b83\u53ef\u4ee5\u7528\u4f86\u505a\u5f88\u591a\u4e8b\u60c5\u3002\u5b83\u662f\u5b89\u88dd\u5de5\u5177(configuration for tools)\u7684\u4e00\u500b\u4e2d\u592e\u5132\u5b58\u5eab(central repository)</li> <li>\u4f8b\u5982: <code>npm</code> &amp; <code>yarn</code>\u90fd\u6703\u5c07\u5957\u4ef6(package)\u7684\u540d\u7a31(names)\u8207\u5c0d\u61c9\u7248\u672c(versions)\u90fd\u5132\u5b58\u5728\u9019\u88e1</li> <li><code>package.json</code>\u7684\u6a94\u6848\u7d50\u69cb(file structure)</li> <li>\u4ee5\u4e0b\u662f\u4e00\u500b<code>package.json</code>\u6a94\u6848\u7684\u7bc4\u4f8b<ul> <li><code>{}</code></li> </ul> </li> <li>\u6211\u5011\u53ef\u4ee5\u770b\u5230\u539f\u59cb\u7684<code>package.json</code>\u6a94\u6848\u5167\u5bb9\u662f\u7a7a\u7684,\u5c0d\u65bc\u61c9\u7528\u7a0b\u5f0f\u4f86\u8aaa,\u5b83\u6c92\u6709\u4ec0\u9ebc\u56fa\u5b9a\u7684\u8981\u6c42,\u552f\u4e00\u7684\u8981\u6c42\u5c31\u662f\u9700\u8981\u662f<code>JSON</code>\u7684\u8cc7\u6599\u683c\u5f0f; \u5426\u5247\u7a0b\u5f0f\u5c07\u7121\u6cd5\u900f\u904e\u7a0b\u5f0f\u7684\u65b9\u5f0f(programmatically)\u4f86\u8b80\u53d6\u5b83</li> <li>\u5982\u679c\u6211\u5011\u5728\u5efa\u69cb(build)\u4e00\u500bNode\u5957\u4ef6,\u4e26\u900f\u904e<code>npm</code>\u4f86\u5206\u767c(distribute over)\u5b83,\u5c07\u767c\u751f\u6839\u672c\u6027\u7684\u8b8a\u5316(things change radically),\u4e26\u4e14\u5fc5\u9808\u6709\u4e00\u7d44\u5c6c\u6027\u4f86\u5e6b\u52a9\u5176\u4ed6\u4eba\u4f86\u4f7f\u7528\u9019\u500b\u5957\u4ef6<ul> <li>\u9019\u662f\u53e6\u4e00\u500b<code>package.json</code>\u6a94\u6848\u7684\u7bc4\u4f8b   JavaScript<pre><code>{\n\"name\": \"test-project\"\n}\n</code></pre></li> <li>\u5b83\u5b9a\u7fa9\u4e86\u4e00\u500b<code>name</code>\u5c6c\u6027(property),\u8a72\u5c6c\u6027\u6703\u544a\u8a34\u61c9\u7528\u7a0b\u5f0f(application)\u6216\u662f\u5957\u4ef6(package),\u5176\u5c6c\u6027\u4e5f\u6703\u5305\u542b\u65bc\u8a72<code>package.json</code>\u6a94\u6848\u6240\u5c6c\u7684\u5c08\u6848\u76ee\u9304\u4e2d</li> </ul> </li> <li>\u4ee5\u4e0b\u662f\u4e00\u500b\u66f4\u8907\u96dc\u7684\u7bc4\u4f8b,\u9019\u500b\u7bc4\u4f8b\u662f\u5f9eVue.js\u7684\u61c9\u7528\u7a0b\u5f0f\u6240\u63d0\u53d6\u51fa\u4f86\u7684\u4e00\u90e8\u5206       JavaScript<pre><code>{\n\"name\": \"test-project\",\n\"version\": \"1.0.0\",\n\"description\": \"A Vue.js project\",\n\"main\": \"src/main.js\",\n\"private\": true,\n\"scripts\": {\n\"dev\": \"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\",\n\"start\": \"npm run dev\",\n\"unit\": \"jest --config test/unit/jest.conf.js --coverage\",\n\"test\": \"npm run unit\",\n\"lint\": \"eslint --ext .js,.vue src test/unit\",\n\"build\": \"node build/build.js\"\n},\n\"dependencies\": {\n\"vue\": \"^2.5.2\"\n},\n\"devDependencies\": {\n\"autoprefixer\": \"^7.1.2\",\n\"babel-core\": \"^6.22.1\",\n\"babel-eslint\": \"^8.2.1\",\n\"babel-helper-vue-jsx-merge-props\": \"^2.0.3\",\n\"babel-jest\": \"^21.0.2\",\n\"babel-loader\": \"^7.1.1\",\n\"babel-plugin-dynamic-import-node\": \"^1.2.0\",\n\"babel-plugin-syntax-jsx\": \"^6.18.0\",\n\"babel-plugin-transform-es2015-modules-commonjs\": \"^6.26.0\",\n\"babel-plugin-transform-runtime\": \"^6.22.0\",\n\"babel-plugin-transform-vue-jsx\": \"^3.5.0\",\n\"babel-preset-env\": \"^1.3.2\",\n\"babel-preset-stage-2\": \"^6.22.0\",\n\"chalk\": \"^2.0.1\",\n\"copy-webpack-plugin\": \"^4.0.1\",\n\"css-loader\": \"^0.28.0\",\n\"eslint\": \"^4.15.0\",\n\"eslint-config-airbnb-base\": \"^11.3.0\",\n\"eslint-friendly-formatter\": \"^3.0.0\",\n\"eslint-import-resolver-webpack\": \"^0.8.3\",\n\"eslint-loader\": \"^1.7.1\",\n\"eslint-plugin-import\": \"^2.7.0\",\n\"eslint-plugin-vue\": \"^4.0.0\",\n\"extract-text-webpack-plugin\": \"^3.0.0\",\n\"file-loader\": \"^1.1.4\",\n\"friendly-errors-webpack-plugin\": \"^1.6.1\",\n\"html-webpack-plugin\": \"^2.30.1\",\n\"jest\": \"^22.0.4\",\n\"jest-serializer-vue\": \"^0.3.0\",\n\"node-notifier\": \"^5.1.2\",\n\"optimize-css-assets-webpack-plugin\": \"^3.2.0\",\n\"ora\": \"^1.2.0\",\n\"portfinder\": \"^1.0.13\",\n\"postcss-import\": \"^11.0.0\",\n\"postcss-loader\": \"^2.0.8\",\n\"postcss-url\": \"^7.2.1\",\n\"rimraf\": \"^2.6.0\",\n\"semver\": \"^5.3.0\",\n\"shelljs\": \"^0.7.6\",\n\"uglifyjs-webpack-plugin\": \"^1.1.1\",\n\"url-loader\": \"^0.5.8\",\n\"vue-jest\": \"^1.0.2\",\n\"vue-loader\": \"^13.3.0\",\n\"vue-style-loader\": \"^3.0.1\",\n\"vue-template-compiler\": \"^2.5.2\",\n\"webpack\": \"^3.6.0\",\n\"webpack-bundle-analyzer\": \"^2.9.0\",\n\"webpack-dev-server\": \"^2.9.1\",\n\"webpack-merge\": \"^4.1.0\"\n},\n\"engines\": {\n\"node\": \"&gt;= 6.0.0\",\n\"npm\": \"&gt;= 3.0.0\"\n},\n\"browserslist\": [\"&gt; 1%\", \"last 2 versions\", \"not ie &lt;= 8\"]\n}\n</code></pre><ul> <li>\u9019\u88e1\u6709\u5e7e\u500b\u91cd\u8981\u7684\u5c6c\u6027\u8981\u8aaa\u660e</li> <li><code>version</code>: \u8868\u793a\u76ee\u524d\u7684\u7248\u672c\u865f</li> <li><code>name</code>: \u8a2d\u5b9a\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)\u7684\u540d\u7a31</li> <li><code>description</code>: \u7c21\u55ae\u7684\u63cf\u8ff0\u8a72\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)</li> <li><code>main</code>: \u8a2d\u5b9a\u61c9\u7528\u7a0b\u5f0f\u7684\u5165\u53e3\u9ede(entry point)</li> <li><code>private</code>: \u5982\u679c\u8a2d\u5b9a\u70ba<code>true</code>,<code>npm</code>\u5c31\u6703\u62d2\u7d55\u767c\u5e03\u8a72\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package),\u6b64\u5c6c\u6027\u662f\u7528\u4f86\u9632\u6b62\u6211\u5011\u4e0d\u5c0f\u5fc3\u516c\u958b\u5730\u767c\u5e03\u9019\u500b\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)</li> <li><code>scripts</code>: \u5b9a\u7fa9\u4e00\u7d44<code>node</code>\u7684<code>CLI</code>\u8173\u672c(scripts)\u6307\u4ee4</li> <li><code>dependencies</code>: \u8a2d\u5b9a\u4e00\u500b<code>npm</code>\u9700\u8981\u5b89\u88dd\u7684\u76f8\u4f9d\u6027\u5957\u4ef6\u6e05\u55ae(list)</li> <li><code>devDependencies</code>: \u8a2d\u5b9a\u4e00\u500b\u5728\u958b\u767c\u74b0\u5883(development)\u4e2d<code>npm</code>\u9700\u8981\u5b89\u88dd\u7684\u76f8\u4f9d\u6027\u5957\u4ef6\u6e05\u55ae(list)</li> <li><code>engines</code>: \u8a2d\u5b9a\u8981\u7528\u54ea\u500bNode\u7684\u7248\u672c\u4f86\u904b\u884c\u8a72\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)</li> <li><code>browserslist</code>: \u7528\u4f86\u8072\u660e\u8a72\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)\u6709\u652f\u63f4\u54ea\u4e9b\u700f\u89bd\u5668 &amp; \u5176\u700f\u89bd\u5668\u7684\u7248\u672c</li> <li>\u4ee5\u4e0a\u7684\u6240\u6709\u5c6c\u6027,\u90fd\u53ef\u4ee5\u88ab<code>npm</code>\u6216\u662f\u5176\u4ed6\u53ef\u4ee5\u8b80\u53d6<code>package.json</code>\u7684\u6a94\u6848\u6240\u4f7f\u7528</li> </ul> </li> <li><code>package.json</code>\u7684\u5c6c\u6027\u5206\u985e(properties breakdown)</li> <li>\u672c\u7ae0\u7bc0\u6703\u958b\u59cb\u8a73\u7d30\u63cf\u8ff0\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u7684<code>package.json</code>\u6a94\u6848\u7684\u5c6c\u6027\u7d30\u7bc0\u3002\u5728\u9019\u88e1\u6211\u5011\u4e3b\u8981\u8a0e\u8ad6\u7684\u662f\u5957\u4ef6(package),\u4f46\u662f\u540c\u6a23\u7684\u9053\u7406\u4e5f\u9069\u7528\u65bc\u6211\u5011\u672c\u5730\u7aef(local)\u7684\u61c9\u7528\u7a0b\u5f0f</li> <li>\u9019\u4e9b\u5c6c\u6027\u5927\u591a\u6578\u50c5\u6703\u5728npm\u5b98\u7db2\u4e0a\u6240\u7528\u5230\u3002\u53e6\u5916,\u5176\u4ed6\u5c6c\u6027\u5247\u6703\u8207\u6211\u5011\u7684\u7a0b\u5f0f\u78bc(code)\u4e92\u52d5(interact with),\u50cf\u662f<code>npm</code>\u6216\u662f\u5176\u4ed6\u7684\u5957\u4ef6\u7ba1\u7406\u5305\u5de5\u5177</li> <li>\u4ee5\u4e0b\u5217\u8209<code>package.json</code>\u4e2d\u7684\u5e7e\u500b\u5e38\u7528\u4e14\u91cd\u8981\u7684\u5c6c\u6027<ul> <li><code>name</code>: \u8a2d\u5b9a\u5957\u4ef6(package)\u540d\u7a31   JavaScript<pre><code>\"name\": \"test-project\"\n</code></pre></li> <li><code>name</code>\u5c6c\u6027\u7684\u547d\u540d\u898f\u5247\u6709\u4ee5\u4e0b\u5e7e\u9805<ul> <li>\u5fc5\u9808\u5c0f\u65bc214\u5b57\u5143(characters)\u7684\u9577\u5ea6\u9650\u5236</li> <li>\u4e0d\u80fd\u542b\u6709\u7a7a\u683c(spaces)</li> <li>\u50c5\u80fd\u4f7f\u7528 \u5c0f\u5beb \u82f1\u6587\u5b57\u6bcd</li> <li>\u53ef\u4ee5\u4f7f\u7528\u9023\u5b57\u865f(hyphens) &amp; \u5e95\u7dda(underscores)</li> </ul> </li> <li>\u9019\u662f\u56e0\u70ba\u7576\u8a72\u5957\u4ef6(package)\u88ab\u767c\u5e03(publish)\u5230<code>npm</code>\u4e0a\u6642,\u5b83\u6703\u57fa\u65bc<code>name</code>\u5c6c\u6027\u7684\u503c\u4f86\u53d6\u5f97\u4e00\u6bb5\u81ea\u5df1\u7684(own) URL</li> <li>\u5982\u679c\u6211\u5011\u8981\u767c\u5e03\u4e00\u500b\u5957\u4ef6(package)\u5230<code>GitHub</code>\u4e0a\u6642,\u6b64<code>name</code>\u5c6c\u6027\u5c31\u662f\u4e00\u500b\u4f5c\u70baGitHub\u4e0a\u5132\u5b58\u5eab(repository)\u7684\u540d\u7a31</li> <li><code>author</code>: \u5217\u51fa\u8a72\u5957\u4ef6\u7684\u4f5c\u8005\u7684\u76f8\u95dc\u8cc7\u8a0a,\u53ef\u4ee5\u7528\u4ee5\u4e0b2\u7a2e\u5f62\u5f0f\u4f86\u8868\u793a(\u76f4\u63a5\u5217\u8209 or \u7269\u4ef6(object))   JavaScript<pre><code>{\n\"author\": \"Joe &lt;joe@whatever.com&gt; (https://whatever.com)\"\n}\n</code></pre> JavaScript<pre><code>{\n\"author\": {\n\"name\": \"Joe\",\n\"email\": \"joe@whatever.com\",\n\"url\": \"https://whatever.com\"\n}\n}\n</code></pre></li> <li>\u4f5c\u8005(author)\u70ba\u4e00\u500b\u4eba,\u53ef\u4ee5\u7528\u7269\u4ef6(object)\u7684\u5f62\u5f0f\u4f86\u8868\u793a,\u6703\u6709\u4e00\u500b<code>name</code>\u7684\u9375(key)\u503c(value),\u4e26\u4e14\u901a\u5e38\u6703\u6709<code>url</code>\u8207<code>email</code>\u7684\u9375\u503c</li> <li><code>contributors</code>: \u9664\u4e86\u4f5c\u8005(author)\u4ee5\u5916,\u8a72\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)\u53ef\u4ee5\u53e6\u5916\u67091~\u591a\u500b\u8ca2\u737b\u8005(contributors),\u53ef\u4ee5\u7528\u9663\u5217(array)\u7684\u5f62\u5f0f\u4f86\u8868\u793a   JavaScript<pre><code>{\n\"contributors\": [\"Joe &lt;joe@whatever.com&gt; (https://whatever.com)\"]\n}\n</code></pre> JavaScript<pre><code>{\n\"contributors\": [\n{\n\"name\": \"Joe\",\n\"email\": \"joe@whatever.com\",\n\"url\": \"https://whatever.com\"\n}\n]\n}\n</code></pre></li> <li><code>bug</code>: \u9023\u7d50\u5230\u8a72\u5957\u4ef6(package)\u7684\u554f\u984c\u8ffd\u8e64\u5340,\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\u6703\u662f\u4e00\u500b<code>GitHub</code>\u7684\u554f\u984c\u8a0e\u8ad6\u9801\u9762(issue page)   JavaScript<pre><code>  {\n\"bugs\": \"https://github.com/whatever/package/issues\"\n}\n</code></pre></li> <li><code>homepage</code>: \u8a2d\u5b9a\u4e00\u500b\u8a72\u5957\u4ef6(package)\u7684\u4e3b\u9801(homepage)\u756b\u9762\u9023\u7d50   JavaScript<pre><code>{\n\"homepage\": \"https://whatever.com/package\"\n}\n</code></pre></li> <li><code>version</code>: \u8868\u793a\u7576\u524d\u7684(current)\u5957\u4ef6\u7248\u672c\u865f   JavaScript<pre><code>\"version\": \"1.0.0\"\n</code></pre></li> <li>\u8a72\u5c6c\u6027\u6703\u9075\u5f9e\u8a9e\u610f\u5316\u7248\u672c\u6a19\u8a18(semantic versioning notation)\u898f\u5247,\u4e5f\u5c31\u662f\u6240\u6709<code>npm</code>\u4e0a\u7684\u5957\u4ef6\u7248\u672c\u865f\u90fd\u6703\u662f x.x.x \u7684\u6578\u5b57\u5f62\u5f0f</li> <li>\u8a9e\u610f\u5316\u7248\u672c\u6a19\u8a18(semantic versioning notation)\u898f\u5247<ul> <li>\u7b2c\u4e00\u500b\u6578\u5b57\u4ee3\u8868\u4e3b\u8981\u7248\u672c\u865f(major version)</li> <li><code>\u4f7f\u7528\u60c5\u5883</code>: \u7576\u60a8\u9032\u884c\u4e0d\u517c\u5bb9\u7684API\u66f4\u6539\u6642\u7684\u4e3b\u8981\u7248\u672c =&gt; \u4e5f\u5c31\u662f\u7576\u8a72\u5957\u4ef6\u7248\u672c \u542b\u6709\u91cd\u5927\u66f4\u6539 \u6642</li> <li>\u7b2c\u4e8c\u500b\u6578\u5b57\u4ee3\u8868\u6b21\u8981\u7248\u672c\u865f(minor version)</li> <li><code>\u4f7f\u7528\u60c5\u5883</code>: \u4ee5\u5411\u4e0b\u517c\u5bb9\u7684\u65b9\u5f0f\u6dfb\u52a0\u529f\u80fd\u6642\u7684MINOR\u7248\u672c =&gt; \u4e5f\u5c31\u662f \u50c5\u5f15\u5165(introduces)\u8207\u904e\u53bb\u76f8\u5bb9\u7684\u5957\u4ef6\u529f\u80fd \u6642</li> <li>\u7b2c\u4e09\u500b\u6578\u5b57\u4ee3\u8868\u4fee\u88dc\u7248\u672c\u865f(patch version)</li> <li>\u5411\u5f8c\u517c\u5bb9\u7684bug\u4fee\u5fa9\u7a0b\u5e8f\u6642\u7684PATCH\u7248\u672c =&gt; \u4e5f\u5c31\u662f \u50c5\u4fee\u6539\u932f\u8aa4 (only fixes bugs)\u6642</li> <li>\u53ef\u53c3\u8003<code>npm</code>\u4e0a\u7684semver\u5957\u4ef6(package)</li> <li>\u53e6\u5916,\u4e5f\u53ef\u4ee5Semantic Versioning 2.0.0\u7684\u5b98\u65b9\u7db2\u7ad9</li> </ul> </li> <li><code>license</code>: \u8868\u793a\u4e00\u500b\u5957\u4ef6\u7684\u6388\u6b0a(license)\u7bc4\u570d   JavaScript<pre><code>\"license\": \"MIT\"\n</code></pre></li> <li>\u53ef\u53c3\u8003\u5e38\u898b\u7684\u4e94\u500b\u958b\u6e90\u5c08\u6848\u6388\u6b0a\u689d\u6b3e,\u4f7f\u7528\u8edf\u9ad4\u66f4\u81ea\u7531</li> <li><code>keywords</code>: \u5305\u542b\u8207\u8a72\u5957\u4ef6(package)\u76f8\u95dc\u7684\u95dc\u9375\u5b57\u7684\u9663\u5217(array)   JavaScript<pre><code>\"keywords\": [\n\"email\",\n\"machine learning\",\n\"ai\"\n]\n</code></pre></li> <li>\u8a72\u5c6c\u6027\u662f\u7528\u4f86\u5e6b\u52a9\u5176\u4ed6\u4eba\u5728\u700f\u89bdnpm\u5b98\u7db2\u4e0a\u5176\u4ed6\u76f8\u4f3c\u7684\u5957\u4ef6\u6642,\u80fd\u900f\u904e\u9019\u4e9b\u95dc\u9375\u5b57\u66f4\u5feb\u5c0e\u5411(navigating)\u5230\u6211\u5011\u7684\u5957\u4ef6</li> <li><code>description</code>: \u5305\u542b\u4e00\u6bb5\u5c0d\u8a72\u5957\u4ef6(package)\u7684\u7c21\u6f54\u7684\u63cf\u8ff0</li> <li>\u8a72\u5c6c\u6027\u662f\u7576\u6211\u5011\u5728<code>npm</code>\u4e0a\u516c\u958b\u767c\u5e03(publish)\u6211\u5011\u7684\u5957\u4ef6(package)\u6642,\b\u80fd\u8b93\u5176\u4ed6\u4eba\u4e86\u89e3\u9019\u500b\u5957\u4ef6\u7684\u7528\u9014\u8207\u4f7f\u7528\u65b9\u6cd5,\u9019\u662f\u7279\u5225\u6709\u7528\u7684     JavaScript<pre><code>\"description\": \"A package to work with strings\"\n</code></pre></li> <li><code>repository</code>: \u6307\u5b9a\u9019\u500b\u5957\u4ef6(package)\u7684\u7a0b\u5f0f\u78bc\u5132\u5b58\u5eab\u5728\u54ea\u88e1     JavaScript<pre><code>\"repository\": \"github:whatever/testing\",\n</code></pre></li> <li> <p>\u6ce8\u610f<code>github</code>\u524d\u7db4(prefix)\u5b57\u6a23,\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5176\u5b83\u6d41\u884c\u7684\u7a0b\u5f0f\u78bc\u5132\u5b58\u5eab,\u50cf\u662f<code>gitlab</code> or <code>bitbucket</code> JavaScript<pre><code>\"repository\": \"gitlab:whatever/testing\",\n</code></pre></p> <p>JavaScript<pre><code>\"repository\": \"bitbucket:whatever/testing\",\n</code></pre>       * \u6211\u5011\u4e5f\u53ef\u4ee5\u660e\u78ba\u5730\u8a2d\u5b9a\u4e00\u500b\u7248\u672c\u63a7\u5236\u7cfb\u7d71(version control system)   JavaScript<pre><code>\"repository\": {\n\"type\": \"git\",\n\"url\": \"https://github.com/whatever/testing.git\"\n}\n</code></pre>       * \u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u5b83\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7d71,\u50cf\u662f<code>svn</code> JavaScript<pre><code>\"repository\": {\n\"type\": \"svn\",\n\"url\": \"...\"\n}\n</code></pre>     * <code>main</code>: \u8a2d\u5b9a\u4e00\u500b\u6b64\u5957\u4ef6\u7684\u9032\u5165\u9ede(entry point)       * \u7576\u6211\u5011\u5728\u61c9\u7528\u7a0b\u5f0f\u4e2d\u532f\u5165(import)\u6b64\u5957\u4ef6\u6642,\u8a72\u5c6c\u6027\u5c31\u6703\u5f9e\u6211\u5011\u61c9\u7528\u7a0b\u5f0f\u7684\u9019\u500b\u9032\u5165\u9ede(entry point)\u8def\u5f91\u88e1\u9762,\u641c\u5c0b(search)\u4e26\u532f\u51fa(export)\u6a21\u7d44 JavaScript<pre><code>\"main\": \"src/main.js\"\n</code></pre>     * <code>private</code>: \u7528\u4f86\u9632\u6b62\u6211\u5011\u5c07\u6b64\u5957\u4ef6\u4e0d\u5c0f\u5fc3\u516c\u958b\u5730\u767c\u5e03\u5230<code>npm</code>\u4e0a       * \u53ef\u4ee5\u5c07\u8a72\u5c6c\u6027\u503c\u8a2d\u5b9a\u70ba<code>true</code>,\u4f86\u9632\u6b62\u6211\u5011\u5c07\u6b64\u5957\u4ef6\u4e0d\u5c0f\u5fc3\u516c\u958b\u5730\u767c\u5e03\u5230<code>npm</code>\u4e0a JavaScript<pre><code>\"private\": true\n</code></pre>     * <code>scripts</code>: \u53ef\u7528\u4f86\u5b9a\u7fa9\u4e00\u7d44\u53ef\u4ee5\u7d66Node\u57f7\u884c\u7684\u8173\u672c(scripts)\u6307\u4ee4 JavaScript<pre><code>\"scripts\": {\n\"dev\": \"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js\",\n\"start\": \"npm run dev\",\n\"unit\": \"jest --config test/unit/jest.conf.js --coverage\",\n\"test\": \"npm run unit\",\n\"lint\": \"eslint --ext .js,.vue src test/unit\",\n\"build\": \"node build/build.js\"\n}\n</code></pre>       * \u9019\u4e9b\u8173\u672c(scripts)\u6307\u4ee4\u662f\u7528\u4f86\u5728<code>CLI</code>\u7d42\u7aef\u6a5f\u4e0a\u57f7\u884c\u7684,\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u6307\u4ee4\u7684\u5f62\u5f0f\u4f86\u57f7\u884c * $ <code>npm run &lt;script name&gt;</code> * \u4f8b: $ <code>npm run dev</code> \u6216\u662f <code>yarn dev</code>     * <code>dependencies</code>: \u8a2d\u5b9a\u4e00\u500b\u6e05\u55ae\u4f86\u8868\u793a\u8a72\u5957\u4ef6\u7684\u76f8\u4f9d\u5957\u4ef6\u540d\u7a31\u8207\u5176\u5206\u5225\u7684\u7248\u672c\u865f\u4e4b\u9593\u7684\u5c0d\u61c9\u95dc\u4fc2       * \u53ef\u4ee5\u7528\u7269\u4ef6(object)\u7684\u5f62\u5f0f\u4f86\u8868\u793a,\u9375=\u76f8\u4f9d\u5957\u4ef6\u7684\u540d\u7a31,\u503c=\u5c0d\u61c9\u7684\u7248\u672c\u865f       * \u6211\u5011\u53ef\u4ee5\u4f7f\u7528<code>npm</code>\u6216\u662f<code>yarn</code>\u4f86\u5b89\u88dd\u6240\u6709\u9019\u4e9b\u76f8\u4f9d\u5957\u4ef6 * \u4f8b: $ <code>npm install &lt;PACKAGENAME&gt;</code> * \u4f8b: $ <code>yarn add &lt;PACKAGENAME&gt;</code>       * \u7576\u900f\u904e<code>npm</code>\u6216\u662f<code>yarn</code>\u4f86\u5b89\u88dd\u9019\u4e9b\u76f8\u4f9d\u5957\u4ef6\u5f8c,<code>package.json</code>\u6a94\u6848\u7684<code>dependencies</code>\u5c6c\u6027\u5c31\u6703\u81ea\u52d5\u5730\u65b0\u589e\u4e00\u689d\u8a72\u5957\u4ef6(package)\u7684\u76f8\u4f9d\u5957\u4ef6(dependencies)\u7684\u9375\u503c JavaScript<pre><code>\"dependencies\": {\n\"vue\": \"^2.5.2\"\n}\n</code></pre>     * <code>devDependencies</code>: \u8a2d\u5b9a\u4e00\u500b\u6e05\u55ae\u4f86\u8868\u793a \u5728\u958b\u767c\u74b0\u5883(development)\u4e2d \u8a72\u5957\u4ef6\u7684\u76f8\u4f9d\u5957\u4ef6\u540d\u7a31\u8207\u5176\u5206\u5225\u7684\u7248\u672c\u865f\u4e4b\u9593\u7684\u5c0d\u61c9\u95dc\u4fc2       * \u8a72\u5c6c\u6027\u8207\u524d\u4e00\u500b<code>dependencies</code>\u5c6c\u6027\u7684\u5dee\u5225\u662f,<code>devDependencies</code>\u5c6c\u6027\u4e2d\u6240\u5217\u51fa\u7684\u76f8\u4f9d\u5957\u4ef6\u9700\u8981 \u5728\u958b\u767c\u74b0\u5883(development)\u4e2d \u624d\u6703\u88ab\u5b89\u88dd,\u4e26\u4e0d\u6703\u5728\u751f\u7522\u74b0\u5883(production)\u4e2d\u88ab\u5b89\u88dd       * \u6211\u5011\u53ef\u4ee5\u4f7f\u7528<code>npm</code>\u6216\u662f<code>yarn</code>\u4f86\u5b89\u88dd\u6240\u6709\u9019\u4e9b\u76f8\u4f9d\u5957\u4ef6 * \u4f8b: $ <code>npm install --save-dev &lt;PACKAGENAME&gt;</code> * \u4f8b: $ <code>yarn add --dev &lt;PACKAGENAME&gt;</code>       * \u7576\u900f\u904e<code>npm</code>\u6216\u662f<code>yarn</code>\u4f86\u5b89\u88dd\u9019\u4e9b\u76f8\u4f9d\u5957\u4ef6\u5f8c,<code>package.json</code>\u6a94\u6848\u7684<code>dependencies</code>\u5c6c\u6027\u5c31\u6703\u81ea\u52d5\u5730\u65b0\u589e\u4e00\u689d \u5728\u958b\u767c\u74b0\u5883(development)\u4e2d \u8a72\u5957\u4ef6(package)\u7684\u76f8\u4f9d\u5957\u4ef6(devDependencies)\u7684\u9375\u503c JavaScript<pre><code>\"devDependencies\": {\n\"autoprefixer\": \"^7.1.2\",\n\"babel-core\": \"^6.22.1\"\n}\n</code></pre>     * <code>engines</code>: \u53ef\u8a2d\u5b9a\u6b64\u61c9\u7528\u7a0b\u5f0f(application)/\u5957\u4ef6(package)\u60f3\u8981\u7528\u4ec0\u9ebc\u7248\u672c\u7684<code>Node</code>, <code>npm</code>, <code>yarn</code>\u4f86\u57f7\u884c or \u5b89\u88dd       * \u53ef\u6307\u5b9a\u4e00\u500b\u660e\u78ba\u7684\u7248\u672c,\u6216\u662f\u7d66\u5b9a\u4e00\u500b\u7248\u672c\u5340\u9593\u7684\u7bc4\u570d JavaScript<pre><code>\"engines\": {\n\"node\": \"&gt;= 6.0.0\",\n\"npm\": \"&gt;= 3.0.0\",\n\"yarn\": \"^0.13.0\"\n}\n</code></pre>     * <code>browserslist</code>: \u7528\u4f86\u8072\u660e\u9019\u500b\u5957\u4ef6(package)\u80fd\u652f\u63f4\u54ea\u4e9b\u700f\u89bd\u5668\u4ee5\u53ca\u5176\u700f\u89bd\u5668\u7684\u5c0d\u61c9\u7248\u672c\u865f       * \u8a72\u5c6c\u6027\u901a\u5e38\u662f\u7d66Babel, Autoprefixer\u4ee5\u53ca\u5176\u4ed6\u7684\u5de5\u5177\u4f86\u8b80\u53d6\u7684       * \u50c5\u6703\u5c07<code>polyfills</code>\u8207<code>fallbacks</code>\u65b0\u589e\u5230\u76ee\u6a19\u700f\u89bd\u5668\u4e2d JavaScript<pre><code>\"browserslist\": [\n\"&gt; 1%\",\n\"last 2 versions\",\n\"not ie &lt;= 8\"\n]\n</code></pre> * \u4ee5\u4e0a\u7684\u7bc4\u4f8b\u8a2d\u5b9a\u8868\u793a\u6211\u5011\u60f3\u8981\u652f\u63f4\u904e\u53bb\u6240\u6709\u700f\u89bd\u5668\u6700\u65b0\u76842\u500b\u4e3b\u8981\u7248\u672c,\u4e26\u4e14\u81f3\u5c11\u8981\u6709\u4f7f\u75281%\u7684\u4f7f\u7528\u7387(\u4f9d\u64daCanIUse.com\u7684\u7d71\u8a08\u6578\u64da\u70ba\u6e96)\u3002\u53e6\u5916,\u4e0d\u652f\u63f4IE8\u4ee5\u53ca\u5176\u66f4\u820a\u7684\u7248\u672c       * \u53ef\u53c3\u8003<code>npm</code>\u4e0a\u7684browserslist\u5957\u4ef6     * \u7279\u6b8a\u547d\u4ee4\u7684\u5c6c\u6027(Command-specific properties)       * \u5176\u5be6<code>package.json</code>\u6a94\u6848\u9084\u53ef\u4ee5\u8a17\u7ba1(host)\u7279\u6b8a\u547d\u4ee4(command-specific)\u7684\u8a2d\u5b9a(configuration),\u50cf\u662feslintConfig, babel...\u7b49\u7b49\u5176\u5b83\u7684\u8a2d\u5b9a       * \u9019\u4e9b\u90fd\u662f\u7279\u6b8a\u547d\u4ee4\u7684\u5c6c\u6027\u8a2d\u5b9a,\u6211\u5011\u53ef\u4ee5\u5230\u5b83\u5011\u5206\u5225\u7684\u5b98\u65b9\u6587\u4ef6\u4e2d\u67e5\u8a62\u8a72\u5982\u4f55\u8a2d\u5b9a\u5b83\u5011(\u4f8b: <code>ESlint</code>, <code>Babel</code>) - \u5957\u4ef6\u7684\u7248\u672c\u865f(Package versions)   + \u6211\u5011\u53ef\u4ee5\u5f9e\u4e0a\u9762\u7684<code>package.json</code>\u7bc4\u4f8b\u4e2d\u770b\u5230\u50cf\u662f<code>~3.0.0</code>\u6216\u662f<code>^0.13.0</code>\u7684\u7248\u672c\u8868\u793a\u65b9\u5f0f,\u9019\u4e9b\u524d\u7db4\u7b26\u865f(symbol)\u4ee3\u8868\u8a72\u5957\u4ef6(package)\u7684\u9019\u4e9b\u76f8\u4f9d\u5957\u4ef6(dependencies)\u53ef\u4ee5\u88ab\u66f4\u65b0(update)\u5230\u54ea\u500b\u7248\u672c   + \u5176\u7248\u672c\u865f\u898f\u5247\u53ef\u53c3\u8003Semantic Versioning using npm\u7ae0\u7bc0\u7684\u8aaa\u660e   + \u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u7d44\u5408\u7bc4\u570d\u7684\u7248\u672c\u8868\u9054\u65b9\u5f0f     * \u4f8b: <code>1.0.0 || &gt;=1.1.0 &lt;1.2.0</code>     * \u4ee5\u4e0a\u7684\u7d44\u5408\u7bc4\u570d\u7684\u7248\u672c\u8868\u9054\u65b9\u5f0f\u5c31\u4ee3\u8868\u6211\u5011\u53ef\u4ee5\u4f7f\u7528<code>1.0.0</code>\u4ee5\u4e0a or \u5f9e<code>1.1.0</code>\u8d77,\u4f46\u4f4e\u65bc<code>1.2.0</code>\u7684\u7248\u672c</p> </li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-package-lockjson-file","title":"The package-lock.json file","text":"<ul> <li>\u5f9e<code>npm</code> v5.0.0\u958b\u59cb, \u5c31\u958b\u59cb\u5f15\u9032(introduced)<code>package-lock.json</code>\u6a94\u6848</li> <li><code>package-lock.json</code>\u6a94\u6848\u4e3b\u8981\u662f\u7528\u4f86\u8ffd\u8e64(track)\u6bcf\u500b\u5957\u4ef6\u5df2\u5b89\u88dd\u7684\u78ba\u5207(exact)\u7248\u672c,\u4ee5\u4fbf\u53ef\u4ee5\u5229\u7528\u76f8\u540c\u7684\u65b9\u5f0f\u4f86\u9054\u5230100%\u7684\u8907\u88fd\u51fa\u540c\u6a23\u7684\u8edf\u9ad4\u7522\u54c1,\u56e0\u6b64\u4e5f\u4e0d\u6703\u53d7\u5230\u5957\u4ef6\u7dad\u8b77\u8005(maintainers)\u66f4\u65b0\u9019\u4e9b\u5957\u4ef6\u6642\u800c\u5f71\u97ff</li> <li>\u9019\u89e3\u6c7a\u4e86\u4e00\u500b<code>package.json</code>\u6a94\u6848\u5c1a\u672a\u89e3\u6c7a\u7684\u4e00\u500b\u5177\u9ad4\u7684\u554f\u984c\u3002\u5728<code>package.json</code>\u4e2d,\u6211\u5011\u53ef\u4ee5\u5229\u7528semver\u4f86\u8a2d\u5b9a(set)\u6211\u5011\u8981\u5347\u7d1a(upgrade)\u5230\u7684\u7248\u672c,\u50cf\u662f\u6b21\u8981(minor)\u6216\u662f\u4fee\u88dc(patch)\u7248\u672c</li> <li>\u7bc4\u4f8b\u8aaa\u660e</li> <li><code>~0.13.0</code>: \u8868\u793a\u53ea\u60f3\u66f4\u65b0(update)\u4fee\u88dc\u7248\u672c,\u4f8b\u5982<code>0.13.1</code>\u53ef\u4ee5,\u4f46\u662f<code>0.14.0</code>\u5c31\u4e0d\u884c</li> <li><code>^0.13.0</code>: \u8868\u793a\u53ea\u60f3\u66f4\u65b0\u6b21\u8981(minor)\u4ee5\u53ca\u4fee\u88dc(patch)\u7248\u672c,\u4f8b\u5982<code>0.13.0</code>\u548c<code>0.14.0</code>...\u7b49\u7b49\u90fd\u662f\u53ef\u4ee5\u7684</li> <li><code>0.13.0</code>: \u8868\u793a\u6211\u5011\u5c07\u59cb\u7d42\u4f7f\u7528\u9019\u500b\u78ba\u5207\u7684\u7248\u672c\u865f</li> <li>\u6b63\u5e38\u4f86\u8aaa,\u6211\u5011 \u4e0d\u6703\u63d0\u4ea4 (commit)<code>node_modules/</code>\u8cc7\u6599\u593e,\u56e0\u70ba\u5b83\u901a\u5e38\u5f88\u5927\u3002\u7576\u6211\u5011\u60f3\u8981\u8907\u88fd\u51fa\u4e00\u4efd\u76f8\u540c\u7684\u5c08\u6848,\u53ef\u4ee5\u900f\u904e $ <code>npm install</code> \u6307\u4ee4,\u8a72\u6307\u4ee4\u5c31\u6703\u53c3\u8003<code>~</code>\u8207<code>^</code>\u8a9e\u6cd5(syntax)\u4f86\u4e0b\u8f09\u76f8\u61c9\u7684\u7248\u672c\u865f</li> <li>\u7576\u7136,\u6211\u5011\u6709\u53ef\u4ee5\u6307\u5b9a\u78ba\u5207\u7684\u7248\u672c\u865f,\u50cf\u662f<code>0.13.0</code></li> <li>\u56e0\u6b64,\u6211\u5011\u7684\u539f\u59cb\u5c08\u6848\u8207\u65b0\u521d\u59cb\u5316\u7684\u5c08\u6848\u5be6\u969b\u4e0a\u662f\u4e0d\u540c\u7684\u3002\u5373\u4f7f\u6b21\u8981(minor)\u6216\u662f\u4fee\u88dc(patch)\u7248\u672c\u4e0d\u61c9\u8a72\u5f15\u5165(introduce)\u91cd\u5927\u66f4\u6539(breaking changes),\u4f46\u662f\u6211\u5011\u90fd\u77e5\u9053\u4ecd\u7136\u53ef\u80fd\u6709<code>bug</code>\u57cb\u85cf\u5728\u5176\u4e2d</li> <li><code>package-lock.json</code>\u6a94\u6848\u6703\u8a2d\u5b9a\u76ee\u524d\u5df2\u5b89\u88dd\u7684\u5957\u4ef6\u7684 \u78ba\u5207\u7248\u672c\u865f ,<code>npm</code>\u5c31\u6703\u900f\u904e $ <code>npm install</code> \u6307\u4ee4\u4f86\u5b89\u88dd; \u5176\u5be6\u9019\u4e0d\u662f\u4e00\u500b\u4e00\u500b\u65b0\u89c0\u5ff5,\u5982\u540c<code>PHP</code>\u7684<code>Composer</code>\u5957\u4ef6\u7ba1\u7406\u5305\u5de5\u5177\u5c31\u5df2\u7d93\u4f7f\u7528\u985e\u4f3c\u7684\u7cfb\u7d71\u5f88\u591a\u5e74\u4e86</li> <li>\u5982\u679c\u8a72\u5c08\u6848\u662f\u516c\u958b\u7684,\u6216\u662f\u6211\u5011\u6709\u5176\u4ed6\u5354\u4f5c\u8005(collaborators),\u6216\u8005\u6211\u5011\u6709\u4f7f\u7528Git\u4f5c\u70ba\u7528\u4f86\u90e8\u7f72\u7684\u8cc7\u6e90,<code>package-lock.json</code>\u6a94\u6848\u90fd\u9700\u8981\u88ab\u63d0\u4ea4(commit)\u5230<code>Git</code>\u7684\u5132\u5b58\u5eab\u4e2d,\u4f7f\u5b83\u80fd\u5920\u88ab\u5176\u4ed6\u4eba\u4e0b\u8f09</li> <li>\u6240\u6709\u7684\u76f8\u4f9d\u5957\u4ef6\u90fd\u6703\u88ab<code>package-lock.json</code>\u66f4\u65b0(updated),\u7576\u6211\u5011\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\u6642</li> <li>$ <code>npm update</code></li> <li>\u4ee5\u4e0b\u662f\u5728\u4e00\u500b\u7a7a\u8cc7\u6599\u593e,\u57f7\u884c $ <code>npm install cowsay</code> \u4f86\u5b89\u88dd<code>package-lock.json</code>\u6240\u5f97\u5230\u7684\u7bc4\u4f8b\u6a94\u6848\u7d50\u69cb     JavaScript<pre><code>{\n\"requires\": true,\n\"lockfileVersion\": 1,\n\"dependencies\": {\n\"ansi-regex\": {\n\"version\": \"3.0.0\",\n\"resolved\": \"https://registry.npmjs.org/ansi-regex/-/ansi-regex-3.\n0.0.tgz\",\n\"integrity\": \"sha1-7QMXwyIGT3lGbAKWa922Bas32Zg=\"\n},\n\"cowsay\": {\n\"version\": \"1.3.1\",\n\"resolved\": \"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz\"\n,\n\"integrity\": \"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkM\nAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ==\",\n\"requires\": {\n\"get-stdin\": \"^5.0.1\",\n\"optimist\": \"~0.6.1\",\n\"string-width\": \"~2.1.1\",\n\"strip-eof\": \"^1.0.0\"\n}\n},\n\"get-stdin\": {\n\"version\": \"5.0.1\",\n\"resolved\": \"https://registry.npmjs.org/get-stdin/-/get-stdin-5.0.\n1.tgz\",\n\"integrity\": \"sha1-Ei4WFZHiH/TFJTAwVpPyDmOTo5g=\"\n},\n\"is-fullwidth-code-point\": {\n\"version\": \"2.0.0\",\n\"resolved\": \"https://registry.npmjs.org/is-fullwidth-code-point/-/\nis-fullwidth-code-point-2.0.0.tgz\",\n\"integrity\": \"sha1-o7MKXE8ZkYMWeqq5O+764937ZU8=\"\n},\n\"minimist\": {\n\"version\": \"0.0.10\",\n\"resolved\": \"https://registry.npmjs.org/minimist/-/minimist-0.0.10\n.tgz\",\n\"integrity\": \"sha1-3j+YVD2/lggr5IrRoMfNqDYwHc8=\"\n},\n\"optimist\": {\n\"version\": \"0.6.1\",\n\"resolved\": \"https://registry.npmjs.org/optimist/-/optimist-0.6.1.tgz\",\n\"integrity\": \"sha1-2j6nRob6IaGaERwybpDrFaAZZoY=\",\n\"requires\": {\n\"minimist\": \"~0.0.1\",\n\"wordwrap\": \"~0.0.2\"\n}\n},\n\"string-width\": {\n\"version\": \"2.1.1\",\n\"resolved\": \"https://registry.npmjs.org/string-width/-/string-width-2.1.1.tgz\",\n\"integrity\": \"sha512-nOqH59deCq9SRHlxq1Aw85Jnt4w6KvLKqWVik6oA9ZklXLNIOlqg4F2yrT1MVaTjAqvVwdfeZ7w7aCvJD7ugkw==\",\n\"requires\": {\n\"is-fullwidth-code-point\": \"^2.0.0\",\n\"strip-ansi\": \"^4.0.0\"\n}\n},\n\"strip-ansi\": {\n\"version\": \"4.0.0\",\n\"resolved\": \"https://registry.npmjs.org/strip-ansi/-/strip-ansi-4.0.0.tgz\",\n\"integrity\": \"sha1-qEeQIusaw2iocTibY1JixQXuNo8=\",\n\"requires\": {\n\"ansi-regex\": \"^3.0.0\"\n}\n},\n\"strip-eof\": {\n\"version\": \"1.0.0\",\n\"resolved\": \"https://registry.npmjs.org/strip-eof/-/strip-eof-1.0.0.tgz\",\n\"integrity\": \"sha1-u0P/VZim6wXYm1n80SnJgzE2Br8=\"\n},\n\"wordwrap\": {\n\"version\": \"0.0.3\",\n\"resolved\": \"https://registry.npmjs.org/wordwrap/-/wordwrap-0.0.3.tgz\",\n\"integrity\": \"sha1-o9XabNXAvAAI03I0u68b7WMFkQc=\"\n}\n}\n}\n</code></pre></li> <li><code>npm</code>\u6703\u4f9d\u64da\u4ee5\u4e0b4\u9ede\u4f86\u5b89\u88dd<code>cowsay</code><ul> <li>get-stdin</li> <li>optimist</li> <li>string-width</li> <li>strip-eof</li> </ul> </li> <li>\u53cd\u904e\u4f86\u8aaa,\u4ee5\u4e0a\u90a3\u4e9b\u5957\u4ef6\u4e5f\u9700\u8981\u5176\u5b83\u5957\u4ef6(packages),\u6b63\u5982\u6211\u5011\u5f9e<code>requires</code>\u5c6c\u6027\u6240\u770b\u5230\u7684<ul> <li>ansi-regex</li> <li>is-fullwidth-code-point</li> <li>minimist</li> <li>wordwrap</li> <li>strip-eof</li> </ul> </li> <li>\u5b83\u5011\u90fd\u662f\u6309\u7167\u82f1\u6587\u5b57\u6bcd\u9806\u5e8f\u4f86\u52a0\u5165\u5230<code>package-lock.json</code>\u6a94\u6848\u4e2d\u7684,\u6bcf\u500b\u5957\u4ef6\u90fd\u6703\u6709\u4ee5\u4e0b\u5e7e\u7a2e\u6b04\u4f4d<ul> <li><code>version</code>: \u7248\u672c\u865f</li> <li><code>resolved</code>: \u6307\u5411\u8a72\u5957\u4ef6(package)\u7684\u4e0b\u8f09\u4f4d\u7f6e</li> <li><code>integrity</code>: \u53ef\u4ee5\u7528\u4f86\u9a57\u8b49(verify)\u8a72\u5957\u4ef6\u7684\u4e00\u6bb5\u6587\u5b57(\u901a\u5e38\u6703\u662f<code>SHA512</code>\u5f62\u5f0f\u7684\u503c)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#find-the-installed-version-of-an-npm-package","title":"Find the installed version of an npm package","text":"<p>npm list - List installed packages npm view - View registry info</p> <ul> <li>\u5982\u679c\u6211\u5011\u60f3\u8981\u6aa2\u8996\u6240\u6709\u5df2\u7d93\u5b89\u88dd\u7684\u5957\u4ef6\u7684\u6700\u65b0\u7248\u672c\u7684\u8a71(\u4e5f\u5305\u542b\u5b83\u5011\u6240\u76f8\u4f9d\u7684\u5957\u4ef6\u5011),\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>npm list</code><ul> <li><code>-g</code>: \u5217\u51fa\u6240\u6709\u5df2\u7d93\u5b89\u88dd\u7684\u5168\u57df\u5957\u4ef6\u7684\u6700\u65b0\u7248\u672c</li> </ul> </li> <li></li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u6253\u958b<code>package-lock.json</code>\u6a94\u6848\u4f86\u505a\u4e00\u4e9b\u8996\u89ba\u4e0a\u7684\u6383\u63cf(visual scanning)</li> <li>\u5982\u679c\u6211\u5011\u53ea\u60f3\u8981\u5217\u51fa\u7b2c\u4e00(\u6700\u9ad8)\u968e\u5c64\u7684\u5957\u4ef6(\u57fa\u672c\u4e0a\u5c31\u662f\u6211\u5011\u5229\u7528<code>npm</code>\u4f86\u5b89\u88dd<code>package.json</code>\u4e2d\u5217\u51fa\u7684\u90a3\u4e9b\u5957\u4ef6\u5011),\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4<ul> <li>$ <code>npm list --depth=0</code></li> <li><code>--depth</code>: \u60f3\u8981\u5c55\u793a\u51fa\u7684\u5957\u4ef6\u76f8\u4f9d\u6027\u6a39\u72c0\u5716\u7684\u6700\u5927\u6df1\u5ea6</li> <li></li> </ul> </li> <li>\u6211\u5011\u6709\u53ef\u4ee5\u900f\u904e\u6307\u5b9a\u5957\u4ef6\u540d\u7a31\u4f86\u5f97\u5230\u5176\u7248\u672c\u865f<ul> <li>$ <code>npm list &lt;package&gt;</code></li> <li></li> </ul> </li> <li>\u9019\u4e5f\u9069\u7528\u65bc\u6211\u5011\u5b89\u88dd\u7684\u5957\u4ef6(package)\u7684\u76f8\u4f9d\u5957\u4ef6(dependencies)<ul> <li></li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u67e5\u770b\u8a72\u5957\u4ef6\u5728<code>npm</code>\u5132\u5b58\u5eab(repository)\u4e0a\u7684 \u6700\u65b0\u7248\u672c<ul> <li>$ <code>npm view &lt;package_name&gt; version</code></li> <li></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#install-an-older-version-of-an-npm-package","title":"Install an older version of an npm package","text":"<ul> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>@</code>\u8a9e\u6cd5(syntax)\u4f86\u5b89\u88dd\u8f03\u820a\u7248\u672c\u7684<code>npm</code>\u5957\u4ef6(package)</li> <li>$ <code>npm install &lt;package&gt;@&lt;version&gt;</code></li> <li>\u4f8b: $ <code>npm install cowsay@1.2.0</code></li> <li>\u4f8b: $ <code>npm install -g webpack@4.16.4</code></li> <li>\u6211\u5011\u53ef\u80fd\u6703\u5c0d\u67d0\u500b\u5957\u4ef6\u7684 \u6240\u6709\u7248\u672c \u6709\u8208\u8da3,\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u6307\u4ee4\u4f86\u6aa2\u8996</li> <li>$ <code>npm view &lt;package&gt; versions</code></li> <li>\u4f8b: $ <code>npm view cowsay versions</code><ul> <li></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#update-all-the-nodejs-dependencies-to-their-latest-version","title":"Update all the Node.js dependencies to their latest version","text":"<p>npm update - Update a package npm outdated - Check for outdated packages npm\u7684check updates\u5957\u4ef6---upgrades your package.json dependencies to the latest versions, ignoring specified versions.</p> <ul> <li>\u7576\u6211\u5011\u900f\u904e$ <code>npm install &lt;package-name&gt;</code>\u4f86\u5b89\u88dd\u6642,\u8a72\u5957\u4ef6\u7684\u6700\u65b0(latest)\u53ef\u7528(available)\u7248\u672c\u5c31\u6703\u88ab\u4e0b\u8f09\u5230<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d,\u4e26\u4e14\u5c07\u76f8\u5c0d\u61c9\u7684(corresponding)\u9805\u76ee(entry)\u65b0\u589e\u5230\u7576\u524d\u8cc7\u6599\u593e\u88e1\u9762\u7684<code>package.json</code>\u6a94\u6848 &amp; <code>package-lock.json</code>\u6a94\u6848\u4e2d</li> <li><code>npm</code>\u6703\u81ea\u52d5\u8a08\u7b97(calculates)\u8a72\u5957\u4ef6\u7684\u76f8\u4f9d\u5957\u4ef6\u5011(dependencies),\u4e26\u5b89\u88dd\u6700\u65b0\u53ef\u7528\u7684\u76f8\u4f9d\u5957\u4ef6\u5011</li> <li>\u6bd4\u5982\u8aaa,\u7576\u6211\u5011\u5b89\u88dd<code>cowsay</code>\u9019\u500b\u5957\u4ef6,\u5b83\u662f\u4e00\u500b\u53ef<code>CLI</code>\u4ecb\u9762\u7684\u5de5\u5177\u53ef\u4ee5\u8b93\u4e00\u96bb\u725b\u8aaa\u4e9b\u8a71</li> <li>\u7576\u6211\u5011\u4f7f\u7528$ <code>npm install</code>\u6307\u4ee4\u6642,\u8a72\u9805\u76ee(entry)\u5c31\u6703\u88ab\u65b0\u589e\u5230<code>package.json</code>\u6a94\u6848\u4e2d     JavaScript<pre><code>  {\n\"dependencies\": {\n\"cowsay\": \"^1.3.1\"\n}\n}\n</code></pre></li> <li>\u4ee5\u4e0b\u662f\u5f9e<code>package-lock.json</code>\u6a94\u6848\u4e2d,\u63d0\u53d6(extract)\u51fa\u7684\u7247\u6bb5\u3002\u70ba\u4e86\u6e05\u695a\u8d77\u898b,\u6211\u5011\u79fb\u9664\u4e86\u5de2\u72c0\u76f8\u4f9d\u5957\u4ef6\u7684\u5167\u5bb9     JavaScript<pre><code>  {\n\"requires\": true,\n\"lockfileVersion\": 1,\n\"dependencies\": {\n\"cowsay\": {\n\"version\": \"1.3.1\",\n\"resolved\": \"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz\",\n\"integrity\": \"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkMAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ==\",\n\"requires\": {\n\"get-stdin\": \"^5.0.1\",\n\"optimist\": \"~0.6.1\",\n\"string-width\": \"~2.1.1\",\n\"strip-eof\": \"^1.0.0\"\n}\n}\n}\n}\n</code></pre></li> <li>\u4ee5\u4e0a\u5169\u500b\u6a94\u6848\u544a\u8a34\u6211\u5011\u8981\u5b89\u88dd<code>cowsay</code>\u5957\u4ef6\u7684<code>v1.3.1</code>\u7248\u672c,\u4e26\u4e14\u6211\u5011\u7684\u66f4\u65b0(updates\u898f\u5247\u662f<code>^1.3.1</code>,\u9019\u4ee3\u8868<code>npm</code>\u53ef\u4ee5\u66f4\u65b0\u6b21\u8981(minor)\u8207\u4fee\u88dc(patch)\u7248\u672c,\u50cf\u662f<code>v1.3.2</code>,<code>v1.4.0</code>, ...\u7b49\u7b49<ul> <li>\u4e5f\u5c31\u662f\u8aaa,\u7576\u6709\u6b21\u8981(minor)\u8207\u4fee\u88dc(patch)\u7248\u672c\u767c\u5e03\u6642,\u6211\u5011\u53ef\u4ee5\u900f\u904e$ <code>npm update</code>\u4f86\u66f4\u65b0\u5957\u4ef6\u7248\u672c\u3002\u9019\u6a23\u4e00\u4f86,\u6211\u5011\u5df2\u5b89\u88dd\u7684\u5957\u4ef6\u5c31\u6703\u662f\u6700\u65b0\u7248\u672c</li> <li>\u540c\u6642<code>package-lock.json</code>\u6a94\u6848\u4e5f\u6703\u52e4\u596e\u5730(diligently)\u586b\u4e0a(filled with)\u65b0\u7248\u672c; \u800c<code>package.json</code>\u6a94\u6848\u7dad\u6301\u4e0d\u8b8a</li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u6307\u4ee4,\u767c\u73fe(discover)\u662f\u5426\u6709\u5957\u4ef6\u6709\u767c\u5e03\u65b0\u7248\u672c</li> <li>$ <code>npm oudated</code><ul> <li></li> <li>\u4e0a\u8ff0\u7684\u90e8\u5206\u5957\u4ef6\u9700\u8981\u66f4\u65b0\u4e3b\u8981\u7248\u672c(major),\u9019\u6642\u5019\u5982\u679c\u6211\u5011\u57f7\u884c$ <code>npm update</code>\u5c31 \u4e0d\u6703 \u66f4\u65b0\u5230\u9019\u4e9b\u5957\u4ef6\u3002\u82e5\u8981\u66f4\u65b0\u5957\u4ef6\u7684\u4e3b\u8981(major)\u7248\u672c,\u7d55\u4e0d\u6703\u7528\u9019\u7a2e\u65b9\u5f0f,\u56e0\u70ba\u4f9d\u64da\u8a9e\u610f\u5316\u7248\u672c\u898f\u5247\u7684\u5b9a\u7fa9,\u4e3b\u8981\u7248\u672c\u7684\u66f4\u65b0\u4ee3\u8868\u6709\u91cd\u5927\u66f4\u6539(breaking changes),\u800c<code>npm</code>\u60f3\u8981\u5e6b\u6211\u5011\u7701\u4e0b\u9ebb\u7169</li> </ul> </li> <li>\u5982\u679c\u6211\u5011\u78ba\u5b9a\u60f3\u8981\u66f4\u65b0\u5957\u4ef6\u7684 \u4e3b\u8981(major)\u7248\u672c \u7684\u8a71,\u53ef\u4ee5\u5148 \u5168\u57df \u5b89\u88dd<code>check-updates</code>\u9019\u500b\u5957\u4ef6<ul> <li>$ <code>npm install -g npm-check-updates</code></li> <li>\u63a5\u8457\u57f7\u884c\u5b83(\u8a72\u5957\u4ef6)</li> <li>$ <code>ncu -u</code></li> <li>\u9019\u6a23\u5b83\u5c31\u6703\u5347\u7d1a(upgrade)\u6240\u6709\u5728<code>package.json</code>\u6a94\u6848\u4e2d<code>dependencies</code>\u8207<code>devDependencies</code>\u7684\u7248\u672c\u63d0\u793a(version hints),\u56e0\u6b64<code>npm</code>\u5c31\u53ef\u4ee5\u5b89\u88dd\u5957\u4ef6\u65b0\u7684\u4e3b\u8981\u7248\u672c</li> </ul> </li> <li>\u5982\u679c\u6211\u5011\u53ea\u662f\u4e0b\u8f09\u9060\u7aef\u5132\u5b58\u5eab\u4e0a\u7684\u5c08\u6848,\u800c\u4e0d\u5305\u542b\u5176<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d\u7684\u76f8\u4f9d\u5957\u4ef6\u7684\u8a71,\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u6307\u4ee4,\u4f86\u5b89\u88dd\u6700\u65b0\u7684\u5957\u4ef6\u7248\u672c</li> <li>$ <code>npm install</code></li> </ul>"},{"location":"programming_language/nodejs/#semantic-versioning-using-npm","title":"Semantic Versioning using npm","text":"<p>npm\u7684semver\u5957\u4ef6---The semantic versioner for npm</p> <ul> <li>\u5728Node.js\u5957\u4ef6\u7684\u4e16\u754c\u4e2d,\u6709\u4e00\u4ef6\u5f88\u68d2\u7684\u4e8b\u60c5,\u90a3\u5c31\u662f\u5b83\u5011\u7686\u540c\u610f\u4f7f\u7528\u8a9e\u610f\u5316\u7248\u672c\u898f\u5247(using Semantic Versionin)\u4f86\u4f5c\u70ba\u4ed6\u5011\u7684\u7248\u672c\u7de8\u865f</li> <li>\u8a9e\u610f\u5316\u7248\u672c\u898f\u5247\u7684\u89c0\u5ff5\u5176\u5be6\u5f88\u7c21\u55ae---&gt;\u6240\u6709\u7684\u90fd\u7531\u4e09\u500b\u6578\u5b57(digits)\u7d44\u5408\u800c\u6210</li> <li>\u7bc4\u4f8b: <code>x.y.z</code><ul> <li>\u7b2c1\u500b\u6578\u5b57<code>x</code>\u662f\u4e3b\u8981\u7248\u672c(major)</li> <li>\u7b2c2\u500b\u6578\u5b57<code>y</code>\u662f\u6b21\u8981\u7248\u672c(minor)</li> <li>\u7b2c3\u500b\u6578\u5b57<code>z</code>\u662f\u4fee\u88dc\u7248\u672c(patch)</li> </ul> </li> <li>\u7576\u6211\u5011\u767c\u5e03\u4e00\u500b\u65b0\u7684\u5957\u4ef6(package)\u7248\u672c\u6642,\u6211\u5011\u4e0d\u50c5\u53ef\u4ee5\u81ea\u5df1\u9078\u64c7\u8981\u589e\u52a0\u7684\u6578\u5b57\u4e4b\u5916,\u4e5f\u4ecd\u9808\u9075\u5b88\u4ee5\u4e0b\u898f\u5247</li> <li><code>major</code>: \u7576\u6211\u5011\u9032\u884c\u4e0d\u517c\u5bb9(incompatible)\u7684API\u4fee\u6539(changes)\u6642,\u53ef\u4ee5\u63d0\u5347(up)\u4e3b\u8981\u7248\u672c\u865f</li> <li><code>minor</code>: \u7576\u6211\u5011\u65b0\u589e\u4e00\u500b\u80fd\u5411\u5f8c\u517c\u5bb9(backward-compatible, =&gt; \u4e5f\u5c31\u662f\u80fd\u8207\u904e\u53bb\u76f8\u5bb9)\u7684\u529f\u80fd\u6642,\u53ef\u4ee5\u63d0\u5347(up)\u6b21\u8981\u7248\u672c\u865f</li> <li><code>patch</code>: \u7576\u6211\u5011\u4fee\u5fa9(fix)\u4e00\u500b\u80fd\u5411\u5f8c\u517c\u5bb9(backward-compatible bug fixes)\u7684\u932f\u8aa4(bug)\u6642,\u53ef\u4ee5\u63d0\u5347(up)\u4fee\u88dc\u7248\u672c\u865f</li> <li>\u9019\u6a23\u7684\u7248\u672c\u865f\u6163\u4f8b(convention)\u4e5f\u88ab\u6240\u6709\u7684\u7a0b\u5f0f\u8a9e\u8a00\u6240\u63a1\u7528(adopted),\u800c<code>npm</code>\u7684\u6bcf\u500b\u5957\u4ef6(package)\u6709\u90fd\u6703\u9075\u5b88(adheres to)\u6b64\u7248\u672c\u865f\u898f\u7bc4,\u6240\u4ee5\u6b64\u4e00\u7248\u672c\u865f\u898f\u7bc4\u662f\u975e\u5e38\u91cd\u8981\u7684</li> <li>\u56e0\u70ba<code>npm</code>\u8a2d\u5b9a\u4e86\u4e00\u4e9b\u898f\u5247,\u8b93\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>package.json</code>\u6a94\u6848\u4f86\u9078\u64c7\u7576\u6211\u5011\u5229\u7528$ <code>npm update</code>\u6307\u4ee4\u4f86\u66f4\u65b0\u6211\u5011\u7684\u5957\u4ef6\u6642,\u8981\u66f4\u65b0\u5230\u7684\u54ea\u500b\u7248\u672c\u865f</li> <li>\u4ee5\u4e0b\u662f<code>npm</code>\u8a2d\u5b9a\u7d66<code>package.json</code>\u6a94\u6848\u7684\u7248\u672c\u865f\u898f\u7bc4\u8a9e\u6cd5<ul> <li><code>^</code>(Tilde Ranges)</li> <li>\u53ea\u6703\u66f4\u65b0(updates),\u4f46\u4e0d\u6703\u66f4\u6539\u6700\u5de6\u908a(leftmost)\u975e\u96f6(non-zero)\u7684\u6578\u5b57</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u7576\u6211\u5011\u57f7\u884c$ <code>npm update</code>\u6307\u4ee4\u6642<ul> <li>\u4f8b1: <code>^0.13.0</code> =&gt; \u53ef\u4ee5\u66f4\u65b0(update)\u5230<code>0.13.1</code>\u6216<code>0.13.2</code>...\u7b49\u7b49</li> <li>\u4f8b2: <code>^1.13.0</code> =&gt; \u53ef\u4ee5\u66f4\u65b0(update)\u5230<code>1.13.1</code>\u6216<code>1.14.0</code>,\u4f46\u662f \u4e0d\u80fd \u66f4\u65b0\u5230<code>2.0.0</code>\u6216\u662f\u518d\u5176\u66f4\u4e4b\u4e0a\u7684\u7248\u672c</li> </ul> </li> <li><code>~</code> (Caret Ranges)</li> <li>\u5982\u679c\u6b21\u8981\u7248\u672c\u5728<code>package.json</code>\u4e2d\u5df2\u7d93\u6307\u5b9a\u4e86\u7684\u8a71,\u5141\u8a31\u4fee\u88dc\u5c64\u7d1a\u7684\u66f4\u6539(patch-level changes); \u82e5\u4e0d\u5141\u8a31\u4fee\u88dc\u5c64\u7d1a\u7684\u4fee\u6539\u7684\u8a71,\u5247\u5141\u8a31\u6b21\u8981\u7248\u672c\u5c64\u7d1a\u7684\u4fee\u6539(minor-level changes)</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u7576\u6211\u5011\u57f7\u884c$ <code>npm update</code>\u6307\u4ee4\u6642<ul> <li>\u4f8b1: <code>~0.13.0</code> =&gt; \u53ef\u4ee5\u66f4\u65b0\u5230<code>0.13.1</code>,\u4f46\u662f \u4e0d\u80fd \u66f4\u65b0\u5230<code>0.14.0</code></li> </ul> </li> <li><code>&gt;</code></li> <li>\u53ef\u4ee5\u63a5\u53d7\u6bd4\u6211\u5011\u6307\u5b9a\u7684\u7248\u672c\u9084\u8981\u9ad8\u7684\u4efb\u4f55\u4e00\u500b\u7248\u672c</li> <li><code>&gt;=</code></li> <li>\u53ef\u4ee5\u63a5\u53d7\u8207\u6211\u5011\u6307\u5b9a\u7684\u7248\u672c\u76f8\u540cor\u9084\u8981\u9ad8\u7684\u4efb\u4f55\u4e00\u500b\u7248\u672c</li> <li><code>&lt;</code></li> <li>\u53ef\u4ee5\u63a5\u53d7\u6bd4\u6211\u5011\u6307\u5b9a\u7684\u7248\u672c\u9084\u8981\u4f4e\u7684\u4efb\u4f55\u4e00\u500b\u7248\u672c</li> <li><code>&lt;=</code></li> <li>\u53ef\u4ee5\u63a5\u53d7\u8207\u6211\u5011\u6307\u5b9a\u7684\u7248\u672c\u76f8\u540cor\u9084\u8981\u4f4e\u7684\u4efb\u4f55\u4e00\u500b\u7248\u672c</li> <li><code>=</code></li> <li>\u53ef\u4ee5\u63a5\u53d7\u8207\u6211\u5011\u6307\u5b9a\u7684\u78ba\u5207\u7248\u672c \u5b8c\u5168\u76f8\u540c \u7684\u7248\u672c</li> <li><code>-</code> (Hyphen Ranges)</li> <li>\u53ef\u4ee5\u63a5\u53d7\u4e00\u500b\u6307\u5b9a\u7bc4\u570d\u5167\u7684\u6240\u6709\u7248\u672c\u865f</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u7576\u6211\u5011\u57f7\u884c$ <code>npm update</code>\u6307\u4ee4\u6642<ul> <li>\u4f8b1: <code>1.2.3 - 2.3.4</code> =&gt; \u8868\u793a\u53ef\u4ee5\u66f4\u65b0\u5230 <code>&gt;=1.2.3 &amp;&amp; &lt;=2.3.4</code>\u7684\u7248\u672c\u865f</li> </ul> </li> <li><code>||</code> (combine sets)</li> <li>\u53ef\u4ee5\u63a5\u53d7\u4e00\u500b\u7d44\u5408\u7684\u6307\u5b9a\u7bc4\u570d\u5167\u7684\u6240\u6709\u7248\u672c\u865f</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u7576\u6211\u5011\u57f7\u884c$ <code>npm update</code>\u6307\u4ee4\u6642<ul> <li>\u4f8b1: <code>1.0.0 || &gt;=1.1.0 &lt;1.2.0</code> =&gt; \u53ef\u4ee5\u66f4\u65b0\u70ba<code>1.0.0</code>\u7684\u9019\u500b\u78ba\u5207\u7248\u672c,\u6216\u662f\u4e5f\u53ef\u4ee5\u66f4\u65b0\u5230<code>1.1.0</code>\u6216\u662f\u518d\u5176\u66f4\u4e4b\u4e0a\u7684\u7248\u672c,\u4f46\u662f \u4e0d\u80fd \u66f4\u65b0\u70ba<code>1.2.0</code>\u6216\u662f\u518d\u5176\u66f4\u4e4b\u4e0a\u7684\u7248\u672c</li> <li>\u4f8b2: <code>1.2.7 || &gt;=1.2.9 &lt;2.0.0</code> =&gt; \u53ef\u4ee5\u66f4\u65b0\u70ba<code>1.2.7</code>\u7684\u9019\u500b\u78ba\u5207\u7248\u672c,\u6216\u662f\u4e5f\u53ef\u4ee5\u66f4\u65b0\u5230<code>1.2.9</code>\u6216\u662f\u518d\u5176\u66f4\u4e4b\u4e0a\u7684\u7248\u672c,\u4f46\u662f \u4e0d\u80fd \u66f4\u65b0\u70ba<code>1.2.8</code>\u6216\u662f<code>2.0.0</code>\u7684\u7248\u672c</li> </ul> </li> </ul> </li> <li>\u8a9e\u610f\u5316\u7248\u672c\u898f\u5247\u4e5f\u6709\u5176\u4ed6\u7279\u6b8a\u898f\u5247</li> <li>\u7121\u4efb\u4f55\u7b26\u865f(no symbol): \u53ea\u80fd\u63a5\u53d7\u6307\u5b9a\u7684\u8a72\u660e\u78ba\u7248\u672c<ul> <li>\u4f8b: <code>1.2.1</code></li> </ul> </li> <li><code>latest</code>: \u76f4\u63a5\u6307\u5b9a\u53ef\u7528(available)\u4e14\u6700\u65b0(latest)\u7684\u8a72\u5957\u4ef6\u7248\u672c\u865f</li> </ul>"},{"location":"programming_language/nodejs/#uninstalling-npm-packages","title":"Uninstalling npm packages","text":"<p>npm uninstall - Remove a package</p> <ul> <li>\u8981\u5728\u672c\u5730\u74b0\u5883(locally)\u89e3\u9664\u5b89\u88dd(uninstall)\u4e4b\u524d\u5df2\u5b89\u88dd\u904e,\u4e26\u4e14\u5132\u5b58\u5728<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d\u7684\u5957\u4ef6(packages)\u3002\u53ef\u4ee5\u5728\u8a72\u5c08\u6848\u7684\u6839\u76ee\u9304(project root folder, =&gt; \u4e5f\u5c31\u662f\u5305\u542b<code>node_modules/</code>\u8cc7\u6599\u593e\u7684\u5c08\u6848\u6839\u76ee\u9304),\u4e26\u900f\u904e\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>npm uninstall &lt;package-name&gt;</code></li> <li>\u82e5\u60f3\u8981\u9023\u540c<code>package.json</code>\u6a94\u6848\u4e2d\u7684\u53c3\u8003(reference)\u4e5f\u522a\u9664\u6389\u7684\u8a71,\u53ef\u4ee5\u4f7f\u7528<code>-S</code>\u6216\u662f<code>--save</code>\u9078\u9805</li> <li>$ <code>npm uninstall --save &lt;package-name&gt;</code><ul> <li><code>--save</code>(=&gt; <code>-S</code>): <code>npm</code>\u6703\u5c07\u8a72\u5957\u4ef6(package)\u5f9e<code>package.json</code>\u6a94\u6848\u4e2d\u7684<code>dependencies</code>\u9375\u4e4b\u4e2d\u79fb\u9664</li> </ul> </li> <li>\u82e5\u6b64\u5957\u4ef6(package)\u70ba\u958b\u767c\u74b0\u5883\u6240\u4f7f\u7528\u7684\u5957\u4ef6\u7684\u8a71,\u53ef\u4ee5\u4f7f\u7528<code>-D</code>\u6216\u662f<code>--save-dev</code>\u9078\u9805</li> <li>$ <code>npm uninstall --save-dev &lt;package-name&gt;</code><ul> <li><code>--save-dev</code>(=&gt; <code>-D</code>): <code>npm</code>\u6703\u5c07\u8a72\u5957\u4ef6(package)\u5f9e<code>package.json</code>\u6a94\u6848\u4e2d\u7684<code>devDependencies</code>\u9375\u4e4b\u4e2d\u79fb\u9664</li> </ul> </li> <li>\u82e5\u6b64\u5957\u4ef6(package)\u662f\u5728\u5168\u57df\u74b0\u5883\u5b89\u88dd\u7684\u8a71,\u53ef\u4ee5\u4f7f\u7528<code>-g</code>\u6216\u662f<code>--global</code>\u9078\u9805</li> <li>$ <code>npm uninstall -g &lt;package-name&gt;</code><ul> <li><code>--global</code>(=&gt; <code>-g</code>): <code>npm</code>\u6703\u5c07\u8a72\u5957\u4ef6(package)\u5f9e\u5168\u57df\u74b0\u5883\u79fb\u9664\u6389,\u800c\u9019\u6642\u5019\u4e5f\u7121\u9700\u5728\u610f\u6211\u5011\u662f\u5728\u7cfb\u7d71\u4e0a\u7684\u54ea\u500b\u76ee\u9304\u4e0b\u57f7\u884c\u8a72\u6307\u4ee4,\u56e0\u70ba\u6211\u5011\u662f\u8981 \u5168\u57df \u89e3\u9664\u5b89\u88dd\u6b64\u5957\u4ef6</li> </ul> </li> <li>\u4f8b: $ <code>npm uninstall -g webpack</code></li> </ul>"},{"location":"programming_language/nodejs/#npm-global-or-local-packages","title":"npm global or local packages","text":"<p>npx - Run a command from a local or remote npm package</p> <ul> <li>\u672c\u5730(local)\u8207\u5168\u57df(global)\u5957\u4ef6(package)\u7684\u4e3b\u8981\u5dee\u5225\u662f</li> <li>\u672c\u5730(local)\u5957\u4ef6\u6703\u5b89\u88dd\u5728\u6211\u5011\u57f7\u884c$ <code>npm install &lt;package-name&gt;</code>\u6307\u4ee4\u6642\u7684\u90a3\u500b\u76ee\u9304\u4e0b,\u4e26\u5c07<code>node_modules/</code>\u8cc7\u6599\u593e\u653e\u5728\u9019\u500b\u8cc7\u6599\u593e\u7684\u88e1\u9762</li> <li>\u5168\u57df(global)\u5957\u4ef6\u5247\u6703\u5b89\u88dd\u5728\u4f5c\u696d\u7cfb\u7d71\u4e2d\u7684\u55ae\u4e00\u500b\u8def\u5f91\u4e0b(\u78ba\u5207\u4f86\u8aaa\u8981\u8996\u5404\u4f5c\u696d\u7cfb\u7d71\u800c\u5b9a),\u9019\u6642\u5c31\u4e0d\u6703\u7ba1\u6211\u5011\u662f\u5728\u54ea\u88e1\u57f7\u884c$ <code>npm install -g &lt;package-name&gt;</code>\u6307\u4ee4\u4e86</li> <li>\u5728\u6211\u5011\u7684\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011 \u50c5\u80fd\u5f15\u5165(require)\u672c\u5730(local)\u5b89\u88dd\u7684\u5957\u4ef6(package)</li> <li>\u4f8b: <code>require('package-name')</code></li> <li>\u6240\u4ee5\u4ec0\u9ebc\u6642\u5019\u9700\u8981\u672c\u5730\u5b89\u88dd,\u800c\u4ec0\u9ebc\u6642\u5019\u9700\u8981\u5168\u57df\u5b89\u88dd\u5957\u4ef6\u5462?</li> <li>\u4e00\u822c\u4f86\u8aaa,\u6240\u6709\u7684\u5957\u4ef6\u90fd\u61c9\u8a72\u8981\u7528 \u672c\u5730\u5b89\u88dd (locally)<ul> <li>\u9019\u6a23\u53ef\u4ee5\u78ba\u4fdd\u5728\u6211\u5011\u7684\u96fb\u8166\u4e2d\u6709\u8a31\u591a\u7684(dozens of)\u61c9\u7528\u7a0b\u5f0f(application),\u800c\u9019\u4e9b\u5957\u4ef6\u4e5f\u5206\u5225\u9700\u8981\u7528\u5230\u4e0d\u540c\u7248\u672c\u7684\u76f8\u4f9d\u5957\u4ef6\u6642,\u4e0d\u6703\u6df7\u4e82\u6389</li> </ul> </li> <li>\u66f4\u65b0\u5168\u57df\u5b89\u88dd\u7684\u5957\u4ef6\u6703\u8b93\u6211\u5011\u6574\u53f0\u96fb\u8166\u7684\u6240\u6709\u5c08\u6848\u90fd\u88ab\u8feb\u9700\u8981\u7528\u6700\u65b0\u7248\u672c\u7684\u5957\u4ef6\u3002\u800c\u9019\u4e5f\u8b93\u6211\u5011\u53ef\u4ee5\u60f3\u50cf\u5230,\u5c0d\u65bc\u7dad\u904b\u9762\u4f86\u8aaa,\u9019\u6703\u662f\u591a\u5927\u7684\u4e00\u5834\u60e1\u5922\u3002\u56e0\u70ba\u67d0\u4e9b\u5957\u4ef6\u53ef\u80fd\u6703\u7834\u58de(break)\u8207\u5176\u4ed6\u76f8\u4f9d\u5957\u4ef6(dependencies)\u4e4b\u9593\u7684\u76f8\u5bb9\u6027(compatibility)</li> <li>\u6240\u6709\u7684\u5c08\u6848\u90fd\u6709\u5b83\u5011\u81ea\u5df1\u7684\u672c\u5730\u5b89\u88dd(local)\u7684\u5957\u4ef6\u7248\u672c,\u5373\u4f7f\u9019\u6a23\u53ef\u80fd\u770b\u4f3c\u662f\u4e00\u7a2e\u6d6a\u8cbb\u8cc7\u6e90\u7684\u884c\u70ba,\u4f46\u8207\u5176\u53ef\u80fd\u9020\u6210\u7684\u8ca0\u9762\u5f71\u97ff(negative consequences)\u76f8\u6bd4,\u9019\u6a23\u7b97\u662f\u975e\u5e38\u5c0f\u7684\"\u6d6a\u8cbb\"</li> <li>\u53ea\u6709\u5728\u6211\u5011\u9700\u8981\u4e00\u500b\u53ef\u57f7\u884c(executable)\u5728<code>CLI</code>\u4ecb\u9762\u4e0a\u7684\u6307\u4ee4(command),\u4e26\u4e14\u9019\u500b\u53ef\u57f7\u884c\u547d\u4ee4\u662f\u80fd\u8de8\u5c08\u6848\u4e4b\u9593(across project)\u80fd\u88ab\u91cd\u8907\u4f7f\u7528\u7684(reused),\u90a3\u9019\u6642\u5019\u5c31\u6703\u9700\u8981 \u5168\u57df\u5b89\u88dd\u5957\u4ef6 (global)</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u672c\u5730(locally)\u5b89\u88dd\u53ef\u57f7\u884c\u547d\u4ee4(executable commands),\u4e26\u900f\u904e<code>npx</code>\u4f86\u57f7\u884c\u3002\u4f46\u662f\u6709\u4e9b\u7279\u5b9a\u7684\u5957\u4ef6(package),\u9084\u662f\u6703\u5efa\u8b70\u7528\u5168\u57df(globally)\u7684\u65b9\u5f0f\u4f86\u5b89\u88dd<ul> <li>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u6d41\u884c\u4e14\u5efa\u8b70\u9700\u8981\u5168\u57df\u5b89\u88dd\u7684\u5957\u4ef6</li> <li>npm</li> <li>create-react-app</li> <li>vue-cli</li> <li>grunt-cli</li> <li>mocha</li> <li>react-native-cli</li> <li>gatsby-cli</li> <li>forever</li> <li>nodemon</li> </ul> </li> <li>\u53ef\u53c3\u8003\u5b98\u65b9\u6587\u4ef6---npx VS npm exec\u7ae0\u7bc0\u7684\u8aaa\u660e</li> <li>\u5982\u679c\u6211\u5011\u60f3\u77e5\u9053\u76ee\u524d\u5728\u6211\u5011\u7cfb\u7d71\u4e2d\u5df2\u7d93\u5168\u57df\u5b89\u88dd\u7684\u5957\u4ef6\u6709\u54ea\u4e9b\u7684\u8a71,\u53ef\u4ee5\u900f\u904e\u57f7\u884c\u4ee5\u4e0b\u7684\u6307\u4ee4<ul> <li>$ <code>npm list -g --depth 0</code></li> <li></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#npm-dependencies-and-devdependencies","title":"npm dependencies and devDependencies","text":"<ul> <li>\u7576\u6211\u5011\u900f\u904e$ <code>npm install &lt;package-name&gt;</code>\u6307\u4ee4\u4f86\u5b89\u88dd\u4e00\u500b<code>npm</code>\u4e0a\u7684\u5957\u4ef6\u6642,\u9019\u5c31\u662f\u5c07\u5176\u5b89\u88dd\u70ba\u76f8\u4f9d\u5957\u4ef6(dependency)</li> <li>\u9019\u500b\u88ab\u5b89\u88dd\u7684\u76f8\u4f9d\u5957\u4ef6\u6703\u81ea\u52d5\u5730\u88ab\u5217\u51fa\u5728<code>package.json</code>\u6a94\u6848\u4e2d</li> <li>\u5982\u679c\u6211\u5011\u52a0\u4e0a<code>-D</code>\u6216\u662f<code>--save-dev</code>\u9078\u9805\u7684\u8a71,<code>npm</code>\u5c31\u6703\u8996\u70ba\u8981\u5b89\u88dd\u4f5c\u70ba\u958b\u767c\u74b0\u5883\u4f7f\u7528\u7684\u76f8\u4f9d\u5957\u4ef6(development dependency),\u540c\u6642\u4e5f\u6703\u81ea\u52d5\u5730\u65b0\u589e\u5230<code>package.json</code>\u6a94\u6848\u4e2d\u7684<code>devDependencies</code>\u9375\u4e2d</li> <li>\u958b\u767c\u74b0\u5883\u7684\u76f8\u4f9d\u5957\u4ef6(development dependency)\u65e8\u5728\u50c5\u7528\u5728\u958b\u767c\u74b0\u5883\u6240\u4f7f\u7528\u7684\u5957\u4ef6(development-only packages),\u800c\u9019\u4e9b\u5957\u4ef6\u4e5f\u4e0d\u6703\u5728\u751f\u7522\u74b0\u5883(production)\u4e2d\u6240\u4f7f\u7528</li> <li>\u4f8b: <code>testing packages</code> or <code>webpack</code> or <code>Babel</code></li> <li>\u7576\u6211\u5011\u5728\u751f\u7522\u74b0\u5883(production)\u4e2d,\u5982\u679c\u6211\u5011\u8f38\u5165$ <code>npm install</code>\u6307\u4ee4,\u4e26\u4e14\u5728\u8a72\u76ee\u9304\u4e2d\u5df2\u7d93\u6709\u4e00\u500b<code>package.json</code>\u6a94\u6848\u7684\u8a71,\u5247\u6703\u5b89\u88dd<code>package.json</code>\u6a94\u6848\u4e2d<code>dependencies</code>\u5c6c\u6027\u88e1\u9762\u7684\u6240\u6709\u5957\u4ef6,\u56e0\u70ba<code>npm</code>\u9810\u8a2d\u6703\u5047\u5b9a\u9019\u662f\u4e00\u500b\u958b\u767c\u90e8\u7f72(development deploy)</li> <li>\u9019\u6642\u5c31\u5fc5\u9808\u8981\u52a0\u4e0a<code>--production</code>\u9078\u9805\u4f86\u907f\u514d\u5b89\u88dd\u5230\u90a3\u4e9b\u958b\u767c\u74b0\u5883\u7684\u76f8\u4f9d\u5957\u4ef6(development dependencies)<ul> <li>$ <code>npm install --production &lt;package-name&gt;</code></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-npx-nodejs-package-runner","title":"The npx Node.js Package Runner","text":"<p>npm\u7684npx\u5957\u4ef6---execute npm package binaries nvm---nvm is a version manager for node.js, designed to be installed per-user, and invoked per-shell</p> <ul> <li><code>npx</code>\u662f\u4e00\u500b\u5f37\u5927\u7684\u5de5\u5177,\u662f\u5f9e<code>npm</code>\u7684<code>v5.2.0</code>(\u7d04\u65bc2017/06\u6708)\u767c\u5e03\u4ee5\u5f8c,\u5c31\u5df2\u7d93\u958b\u59cb\u53ef\u4ee5\u4f7f\u7528</li> <li>\u5982\u679c\u6211\u5011\u4e0d\u60f3\u4e0b\u8f09<code>npm</code>,\u53ef\u4ee5\u900f\u904einstall npx as a standalone package</li> <li><code>npx</code>\u8b93\u6211\u5011\u53ef\u4ee5\u5728Node\u74b0\u5883\u4e2d\u57f7\u884c\u7a0b\u5f0f\u78bc,\u4e26\u900f\u904e<code>npm registry</code>\u4f86\u767c\u5e03</li> <li>\u8f15\u9b06\u5730\u57f7\u884c\u672c\u5730\u6307\u4ee4(local commands)</li> <li>\u904e\u53bb,Node\u7684\u958b\u767c\u8005\u5011\u901a\u5e38\u5c07\u53ef\u57f7\u884c\u547d\u4ee4(executable commands)\u767c\u5e03\u70ba\u4e00\u500b\u5168\u57df\u5957\u4ef6(global package),\u4ee5\u4f7f\u5b83\u5011\u7acb\u5373\u4f4d\u65bc\u8def\u5f91(path)\u4e2d,\u4e26\u4e14\u662f\u7acb\u5373\u53ef\u4ee5\u88ab\u57f7\u884c\u7684<ul> <li>\u9019\u6a23\u5176\u5be6\u5f88\u75db\u82e6,\u56e0\u70ba\u6211\u5011\u78ba\u5be6\u7121\u6cd5\u5728\u540c\u4e00\u500b\u6307\u4ee4\u4e2d\u5b89\u88dd\u4e0d\u540c\u7684\u7248\u672c</li> </ul> </li> <li>\u57f7\u884c$ <code>npx &lt;command-name&gt;</code>\u6307\u4ee4\u6703\u81ea\u52d5\u5730\u627e\u51fa\u5728\u8a72\u5c08\u6848\u76ee\u9304\u4e2d\u7684<code>node_modules/</code>\u8cc7\u6599\u593e\u4e2d\u7684\u6b64\u6307\u4ee4\u7684\u78ba\u5207\u53c3\u8003\u4f4d\u7f6e(correct reference of the command),\u800c\u7121\u9700\u77e5\u9053\u78ba\u5207\u7684\u8def\u5f91,\u4e5f\u4e0d\u9700\u8981\u5728\u5168\u57df(global)\u8def\u5f91\u548c\u7528\u6236\u8def\u5f91\u4e2d(user's path)\u5b89\u88dd\u5957\u4ef6</li> <li>\u7121\u9700\u5148\u5b89\u88dd,\u5c31\u80fd\u76f4\u63a5\u57f7\u884c\u7684\u6307\u4ee4</li> <li><code>npx</code>\u5957\u4ef6\u7684\u7684\u53e6\u4e00\u500b\u91cd\u8981\u7684\u529f\u80fd\u662f\u6211\u5011\u80fd\u76f4\u63a5\u57f7\u884c\u6307\u4ee4(run commands),\u800c\u4e0d\u9700\u8981\u4e8b\u5148\u5b89\u88dd\u5b83\u5011<ul> <li>\u9019\u500b\u529f\u80fd\u662f\u975e\u5e38\u6709\u7528\u7684,\u4e3b\u8981\u662f\u56e0\u70ba</li> <li>\u6211\u5011\u4e0d\u9700\u8981\u4e8b\u5148\u5b89\u88dd\u8a72\u5957\u4ef6</li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>syntax @version</code>\u7684\u65b9\u5f0f\u4f86\u57f7\u884c\u540c\u4e00\u500b\u6307\u4ee4\u7684\u4e0d\u540c\u7248\u672c</li> </ul> </li> <li>\u6211\u5011\u7528<code>npm</code>\u7684<code>cowsay</code>\u5957\u4ef6\u4f86\u505a\u500b\u5c55\u793a\u900f\u904e<code>npx</code>\u4f86\u547c\u53eb<code>cowsay</code>\u5957\u4ef6\u7684\u6307\u4ee4\u3002\u8a72\u5957\u4ef6\u6703\u6253\u5370(print)\u51fa\u4e00\u96bb\u725b\u4e26\u8aaa\u51fa\u6211\u5011\u5728<code>CLI</code>\u4ecb\u9762\u4e0a\u8f38\u5165\u7684\u6307\u4ee4<ul> <li>\u8209\u4f8b\u4f86\u8aaa,\u7576\u6211\u5011\u5728<code>CLI</code>\u4ecb\u9762\u4e0a\u8f38\u5165$ <code>cowsay \"Hello\"</code></li> <li></li> <li>\u4ee5\u4e0a\u7684\u65b9\u5f0f,\u50c5\u6703\u5728\u6211\u5011\u6709\u900f\u904e<code>npm</code>\u5168\u57df(globally)\u5b89\u88dd<code>cowsay</code>\u5957\u4ef6\u6642\u624d\u80fd\u4f7f\u7528,\u5426\u5247\u7576\u6211\u5011\u57f7\u884c\u8a72\u6307\u4ee4\u6642,\u6703\u5f97\u5230\u932f\u8aa4(error)</li> <li><code>npx</code>\u53ef\u4ee5\u4f7f\u6211\u5011\u4e0d\u5fc5\u4e8b\u5148\u672c\u5730(locally)\u5b89\u88dd,\u5c31\u80fd\u57f7\u884c\u8a72\u6307\u4ee4</li> <li>\u4f8b: $ <code>npx cowsay \"Hello\"</code></li> </ul> </li> <li>\u7136\u800c,\u9019\u662f\u4e00\u500b\u6709\u8da3\u4f46\u6c92\u6709\u7528\u7684\u7bc4,\u5176\u4ed6\u60c5\u5883\u5305\u62ec<ul> <li>\u57f7\u884c<code>vue CLI</code>\u5de5\u5177</li> <li>\u4f8b: $ <code>npx @vue/cli create my-vue-app</code></li> <li>\u900f\u904e<code>npm</code>\u7684<code>create-react-app</code>\u4f86\u5efa\u7acb\u4e00\u500b\u65b0\u7684React app</li> <li>\u4f8b: $ <code>npx create-react-app my-react-app</code></li> </ul> </li> <li>\u900f\u904e\u4e0d\u540c\u7684Node\u7248\u672c\u4f86\u57f7\u884c\u7a0b\u5f0f\u78bc</li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e<code>@</code>\u8a9e\u6cd5\u4f86\u6307\u5b9a\u4e00\u500b\u7279\u5b9a\u7684Node\u7248\u672c,\u4e26\u8207<code>npm</code>\u7684node\u5957\u4ef6\u4e00\u8d77\u642d\u914d\u4f86\u4f7f\u7528<ul> <li>\u4f8b: $ <code>npx node@10 -v</code> #v10.18.1</li> <li>\u4f8b: $ <code>npx node@12 -v</code> #v12.14.1</li> </ul> </li> <li>\u9019\u9ebc\u505a\u80fd\u8b93\u6211\u5011\u80fd\u4e0d\u7528\u7279\u5225\u53bb\u4f7f\u7528\u50cf\u662f<code>nvm</code>\u6216\u662f\u5176\u4ed6Node\u7684\u7248\u672c\u7ba1\u7406\u5de5\u5177(Node.js version management tools)</li> <li>\u53ef\u4ee5\u76f4\u63a5\u5f9e<code>URL</code>\u4e0a\u57f7\u884c\u4e00\u6bb5\u7a0b\u5f0f\u78bc\u7684\u7247\u6bb5(snippets)</li> <li><code>npx</code>\u4e26\u4e0d\u6703\u9650\u5236\u6211\u5011\u4f7f\u7528<code>npm</code>\u4e0a\u9762\u767c\u5e03\u7684\u5957\u4ef6</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f\u4f86\u76f4\u63a5\u57f7\u884c<code>GitHub gist</code>\u4e0a\u7684\u7a0b\u5f0f\u78bc\u7247\u6bb5<ul> <li>\u4f8b: $ <code>npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</code></li> <li>\u7576\u6211\u5011\u9700\u8981\u57f7\u884c\u6211\u5011\u7121\u6cd5\u63a7\u5236\u7684\u7a0b\u5f0f\u78bc\u6642,\u9700\u8981\u66f4\u5c0f\u5fc3\u5730\u4f7f\u7528<code>npx</code>\u5de5\u5177\u3002\u56e0\u70ba\u8d8a\u5f37\u5927\u7684\u529f\u80fd,\u5e36\u4f86\u8d8a\u5927\u7684\u8cac\u4efb</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-event-loop","title":"The Node.js Event Loop","text":"<ul> <li>\u4e8b\u4ef6\u8ff4\u5708(Event loop)\u662f\u8981\u7406\u89e3Node\u7684\u5176\u4e2d\u4e00\u500b\u6700\u91cd\u8981\u7684\u5c64\u9762</li> <li>\u4e8b\u4ef6\u8ff4\u5708(Event loop)\u80fd\u89e3\u91cbNode\u5982\u4f55\u9054\u5230 \u975e\u540c\u6b65(=&gt; asynchronous) \u8207 \u975e\u963b\u585eI/O(=&gt; non-blocking I/O) \u3002\u9019\u4e5f\u662f\u8b93Node\u80fd\u6210\u70ba\u6bba\u624b\u7d1a\u61c9\u7528\u7a0b\u5f0f(killer app),\u4e26\u4e14\u80fd\u5982\u6b64\u6210\u529f\u7684\u539f\u56e0</li> <li>Node\u662f\u7528 \u55ae\u57f7\u884c\u7dd2(single thread)  \u5728\u57f7\u884cJavascript\u7684\u7a0b\u5f0f\u78bc,\u5728\u540c\u4e00\u500b\u6642\u9593\u53ea\u6703\u767c\u751f\u4e00\u4ef6\u4e8b</li> <li>\u9019\u500b\u9650\u5236\u5176\u5be6\u662f\u5f88\u6709\u7528\u7684,\u56e0\u70ba\u5b83\u80fd\u5927\u5927\u5730\u7c21\u5316\u6211\u5011\u5728\u958b\u767c\u7a0b\u5f0f\u7684\u5fc3\u529b,\u800c\u4e0d\u7528\u53bb\u64d4\u5fc3\u4f75\u767c(concurrency)\u7684\u554f\u984c(issues)</li> <li>\u6211\u5011\u53ea\u8981\u5c08\u6ce8\u5728\u5982\u4f55\u5beb\u7a0b\u5f0f\u78bc,\u4e26\u907f\u514d\u4efb\u4f55\u53ef\u80fd\u963b\u585e(block)\u7dda\u7a0b(thread)\u7684\u4e8b\u60c5,\u50cf\u662f\u4ee5\u4e0b2\u7a2e\u60c5\u6cc1<ul> <li>\u540c\u6b65\u7db2\u8def\u547c\u53eb(synchronous network calls)</li> <li>\u7121\u9650\u8ff4\u5708(infinite loops)</li> </ul> </li> <li>\u901a\u5e38\u5728\u5927\u591a\u6578\u700f\u89bd\u5668\u4e2d,\u6bcf\u500b\u700f\u89bd\u5668\u9801\u7c64(browser tab)\u90fd\u6703\u6709\u4e00\u500b\u4e8b\u4ef6\u5faa\u74b0,\u4ee5\u4f7f\u6bcf\u500b\u9032\u7a0b(process)\u90fd\u88ab\u9694\u96e2\u958b,\u4e26\u907f\u514d\u7db2\u9801\u756b\u9762\u843d\u5165\u7121\u9650\u8ff4\u5708(infinite loops)\u6216\u662f\u7e41\u91cd\u7684\u8655\u7406\u5de5\u4f5c,\u4ee5\u81f3\u65bc\u963b\u585e(block)\u6574\u500b\u700f\u89bd\u5668</li> <li>\u8a72\u74b0\u5883\u7ba1\u7406\u591a\u500b\u4f75\u767c\u4e8b\u4ef6\u8ff4\u5708(multiple concurrent event loops),\u4ee5\u8655\u7406\u50cf\u662f<code>API</code>\u547c\u53eb\u7684\u5de5\u4f5c\u3002\u7db2\u9801\u5de5\u4f5c(Web Workers)\u4e5f\u6703\u5728\u5176\u81ea\u5df1\u7684\u4e8b\u4ef6\u8ff4\u5708(event loops)\u4e2d\u57f7\u884c</li> <li>\u6211\u5011\u6700\u9700\u8981\u95dc\u5fc3\u7684\u662f\u6211\u5011\u7684\u7a0b\u5f0f\u78bc\u6703\u5728\u55ae\u4e00\u4e8b\u4ef6\u8ff4\u5708(single event loop)\u4e0a\u88ab\u57f7\u884c,\u4e26\u4e14\u8981\u7262\u8a18\u9019\u4e00\u9ede\u5728\u5fc3\u4e2d,\u4ee5\u907f\u514d\u9020\u6210\u963b\u585e(blocking)</li> <li>\u963b\u64cb\u4e8b\u4ef6\u8ff4\u5708(Blocking the event loop)</li> <li>\u4efb\u4f55\u82b1\u8cbb\u592a\u591a\u6642\u9593\u624d\u5c07\u63a7\u5236\u6b0a\u4ea4\u9084(return back control )\u7d66\u4e8b\u4ef6\u8ff4\u5708(event loop)\u7684Javascript\u7a0b\u5f0f\u78bc,\u90fd\u5c07\u963b\u64cb(block)\u4efb\u4f55\u8a72\u9801\u9762\u4e0a\u57f7\u884c\u7684Javascript\u7a0b\u5f0f\u78bc,\u751a\u81f3\u662f\u963b\u585eUI\u7dda\u7a0b(UI thread),\u4e26\u4e14\u7528\u6236\u7121\u6cd5\u9ede\u64ca\u6309\u9215.\u6ed1\u52d5\u9801\u9762...\u7b49\u7b49</li> <li>\u5728Javascript\u4e2d,\u5e7e\u4e4e\u6240\u6709\u7684 I/O\u539f\u8a9e(=&gt; I/O primitives) \u90fd\u662f \u975e\u963b\u585eI/O(=&gt; non-blocking I/O) \u7684,\u4f8b\u5982\u4ee5\u4e0b2\u7a2e\u60c5\u5883<ul> <li>\u7db2\u8def\u8acb\u6c42(Network requests)</li> <li>\u6a94\u6848\u7cfb\u7d71\u64cd\u4f5c(filesystem operations)</li> <li>...\u7b49\u7b49</li> </ul> </li> <li>\u88ab\u963b\u585e\u662f\u4e00\u7a2e\u4f8b\u5916,\u9019\u4e5f\u5c31\u662f\u70ba\u4ec0\u9ebcJavascript\u6703\u6709\u9019\u9ebc\u591a\u57fa\u65bc\u56de\u547c\u51fd\u5f0f(<code>callbacks</code>)\u7684\u6771\u897f,\u800c\u8fd1\u5e74\u4f86\u4e5f\u958b\u59cb\u6709<code>Promise</code>\u8207<code>async/await</code></li> <li>\u547c\u53eb\u5806\u758a(The call stack)</li> <li>\u547c\u53eb\u5806\u758a\u662f\u4e00\u7a2e<code>LIFO</code>\u968a\u5217(queue),\u4e5f\u5c31\u662f\u5f8c\u9032-&gt;\u5148\u51fa(Last in, First out)\u7684\u6a21\u5f0f</li> <li>\u4e8b\u4ef6\u8ff4\u5708(event loop)\u6703\u6301\u7e8c\u5730\u6aa2\u67e5\u662f\u5426\u5728\u547c\u53eb\u5806\u758a(call stack)\u4e2d\u4ecd\u6709\u4efb\u4f55\u51fd\u5f0f(function)\u9700\u8981\u88ab\u57f7\u884c</li> <li>\u9019\u6a23\u505a\u6642,\u5b83\u6703\u5c07\u4efb\u4f55\u6240\u6709\u80fd\u627e\u5230\u7684\u51fd\u5f0f\u90fd\u52a0\u5165\u5230\u547c\u53eb\u5806\u758a(call stack)\u4e2d,\u4e26\u4f9d\u5e8f\u57f7\u884c\u6bcf\u500b\u51fd\u5f0f</li> <li>\u6211\u5011\u6703\u77e5\u9053\u81ea\u5df1\u5c0d\u65bc\u9664\u932f\u5668(debugger)\u6216\u662f\u700f\u89bd\u5668\u63a7\u5236\u53f0(browser console)\u4e2d,\u6703\u6bd4\u8f03\u719f\u6089\u7528\u54ea\u500b\u65b9\u5f0f\u4f86\u8ffd\u8e64\u932f\u8aa4\u5806\u758a(error stack trace)<ul> <li>\u700f\u89bd\u5668\u6703\u5728\u547c\u53eb\u5806\u758a(call stack)\u4e2d\u67e5\u8a62\u51fd\u5f0f(function)\u7684\u540d\u7a31,\u4ee5\u901a\u77e5\u6211\u5011\u662f\u54ea\u500b\u51fd\u5f0f\u7522\u751f(originates)\u4e86\u7576\u524d\u7684\u547c\u53eb(current call)</li> <li></li> </ul> </li> <li>\u4e00\u500b\u7c21\u55ae\u7684\u4e8b\u4ef6\u8ff4\u5708\u8aaa\u660e\u7bc4\u4f8b   JavaScript<pre><code>const bar = () =&gt; console.log('bar')\nconst baz = () =&gt; console.log('baz')\nconst foo = () =&gt; {\nconsole.log('foo')\nbar()\nbaz()\n}\nfoo()\n</code></pre></li> <li>\u7576\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u88ab\u57f7\u884c\u6642<ul> <li>\u9996\u5148,\u662f<code>foo()</code>\u88ab\u547c\u53eb</li> <li>\u63a5\u8457,\u5728<code>foo()</code>\u4e2d,\u6703\u547c\u53eb<code>bar()</code></li> <li>\u6700\u5f8c,\u6703\u547c\u53eb<code>baz()</code></li> </ul> </li> <li>\u6b64\u6642,\u547c\u53eb\u5806\u758a(call stack)\u6703\u770b\u8d77\u4f86\u5982\u4e0b\u5716\u6240\u793a<ul> <li></li> </ul> </li> <li>\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u7684\u4e8b\u4ef6\u8ff4\u5708\u90fd\u6703\u67e5\u770b\u5728\u547c\u53eb\u5806\u758a(call stack)\u4e2d\u662f\u5426\u6709\u6771\u897f,\u4e26\u57f7\u884c\u5b83,\u76f4\u5230\u547c\u53eb\u5806\u758a(call stack)\u8b8a\u6210\u7a7a\u7684(empty)\u70ba\u6b62<ul> <li></li> </ul> </li> <li>\u51fd\u5f0f\u57f7\u884c\u968a\u5217(Queuing function execution)</li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u770b\u8d77\u4f86\u5f88\u6b63\u5e38,\u4e26\u6c92\u6709\u4ec0\u9ebc\u7279\u5225\u4e4b\u8655\u3002Javascript\u6703\u5c0b\u627e\u8981\u57f7\u884c\u7684\u6771\u897f,\u4e26\u4e14\u4f9d\u5e8f\u57f7\u884c\u5b83\u5011</li> <li>\u8b93\u6211\u5011\u4f86\u770b\u770b\u53e6\u4e00\u500b\u7bc4\u4f8b,\u5982\u4f55\u5c07\u51fd\u5f0f(function)\u63a8\u9072(defer)\u5230\u5806\u758a(stack)\u88ab\u6e05\u9664\u6389\u4e4b\u524d       JavaScript<pre><code>  const bar = () =&gt; console.log('bar')\nconst baz = () =&gt; console.log('baz')\nconst foo = () =&gt; {\nconsole.log('foo')\nsetTimeout(bar, 0)\nbaz()\n}\nfoo()\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d\u7684<code>setTimeout(() =&gt; {}, 0)</code>\u6703\u53bb\u547c\u53eb\u4e00\u500b\u51fd\u5f0f(function),\u4e00\u65e6\u9019\u6bb5\u7a0b\u5f0f\u78bc\u4e2d\u7684\u6bcf\u500b\u5176\u5b83\u51fd\u5f0f\u57f7\u884c\u4e00\u6b21,\u4fbf\u6703\u57f7\u884c\u4e00\u6b21\u8a72\u51fd\u5f0f</li> <li>\u9019\u500b\u7bc4\u4f8b\u6253\u5370(print)\u51fa\u4f86\u7684\u7d50\u679c\u4e5f\u8a31\u6703\u4ee4\u6211\u5011\u975e\u5e38\u9a5a\u8a1d     JavaScript<pre><code>  foo\nbaz\nbar\n</code></pre></li> <li>\u8aaa\u660e: \u7576\u9019\u6bb5\u7a0b\u5f0f\u78bc\u88ab\u57f7\u884c\u6642</li> <li>\u9996\u5148,\u662f<code>foo()</code>\u88ab\u547c\u53eb</li> <li>\u63a5\u8457,\u5728<code>foo()</code>\u5167\u90e8\u6703\u5148\u547c\u53eb<code>setTimeout()</code>,\u4e26\u5c07<code>bar</code>\u4f5c\u70ba\u53c3\u6578(argument),\u4e26\u6307\u793a(instruct)\u5b83\u76e1\u5feb\u5730\u57f7\u884c,\u4e26\u50b3\u905e<code>0</code>\u4f5c\u70ba\u8a08\u6642\u5668(timer)</li> <li>\u6700\u5f8c,\u6703\u547c\u53eb<code>baz()</code></li> <li>\u6b64\u6642,\u547c\u53eb\u5806\u758a(call stack)\u6703\u770b\u8d77\u4f86\u5982\u4e0b\u5716\u6240\u793a</li> <li></li> <li>\u4ee5\u4e0b\u662f\u7a0b\u5f0f(program)\u4e2d\u7684\u6240\u6709\u51fd\u5f0f\u7684\u57f7\u884c\u9806\u5e8f</li> <li></li> </ul> </li> <li>\u70ba\u4ec0\u9ebc\u6703\u9019\u6a23\u5462? \u6211\u5011\u63a5\u8457\u770b\u4e0b\u53bb</li> <li>\u8a0a\u606f\u968a\u5217(Message Queue)</li> <li>\u7576<code>setTimeout()</code>\u51fd\u5f0f\u88ab\u547c\u53eb\u6642,\u700f\u89bd\u5668\u8207Node\u6703\u555f\u52d5\u4e00\u500b\u8a08\u6642\u5668\u3002\u7576\u8a08\u6642\u5668\u5230\u671f\u6642,\u4e5f\u5c31\u662f\u8aaa\u5728\u9019\u500b\u60c5\u6cc1\u4e0b,\u6211\u5011\u5c07\u5ef6\u9072(delay)\u53c3\u6578\u8a2d\u5b9a\u70ba<code>0</code>,\u6b64\u6642\"\u5ef6\u9072(delay)\"\u5c31\u6703\u7acb\u5373\u5230\u671f,\u4e5f\u6703\u5c07\u56de\u547c\u51fd\u5f0f(callback function)\u653e\u5165\u8a0a\u606f\u968a\u5217(Message Queue)\u4e2d</li> <li>\u5728\u8a0a\u606f\u968a\u5217(Message Queue)\u4e2d,\u4f7f\u7528\u8005\u521d\u59cb\u5316\u7684\u4e8b\u4ef6(user-initiated events)\u50cf\u662f\u6ed1\u9f20\u9ede\u64ca(click),\u9375\u76e4\u4e8b\u4ef6(keyboard events),\u7372\u53d6\u56de\u61c9(fetch responses)\u90fd\u5c07\u5728\u6b64\u6392\u968a(queued)\u3002\u7136\u5f8c\u6211\u5011\u624d\u6709\u6a5f\u6703\u5c0d\u5176\u505a\u51fa\u53cd\u61c9(react),\u6216\u50cf\u662f<code>DOM\u4e8b\u4ef6</code>---&gt;<code>window.onLoad</code></li> <li>\u4e8b\u4ef6\u8ff4\u5708(event loop)\u5c07\u6703\u512a\u5148\u8655\u7406\u547c\u53eb\u5806\u758a(call stack),\u4e26\u9996\u5148\u8655\u7406(processes)\u5728\u547c\u53eb\u5806\u758a\u4e2d\u627e\u5230\u7684\u6240\u6709\u5167\u5bb9\u3002\u4e00\u65e6\u547c\u53eb\u5806\u758a\u4e2d\u6c92\u6709\u4efb\u4f55\u5167\u5bb9\u4e86,\u5b83\u5c31\u6703\u958b\u59cb\u5230\u8a0a\u606f\u968a\u5217(message queue)\u4e2d\u8655\u7406\u5167\u5bb9<ul> <li>\u6211\u5011\u4e0d\u5fc5\u7b49\u5f85\u50cf\u662f<code>setTimeout()</code>\u51fd\u5f0f,\u6293\u53d6\u8cc7\u6599(fetch),\u6216\u662f\u5176\u5b83\u51fd\u5f0f\u4f86\u5b8c\u6210\u5b83\u5011\u81ea\u5df1\u7684\u5de5\u4f5c,\u56e0\u70ba\u5b83\u5011\u662f\u7531\u700f\u89bd\u5668\u6240\u63d0\u4f9b\u7684,\u800c\u4e14\u5b83\u5011\u90fd\u4f4d\u65bc\u81ea\u5df1\u7684\u7dda\u7a0b\u4e2d(threads)</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u5982\u679c\u5c07<code>setTimeout(function[, delay])</code>\u51fd\u5f0f\u7684<code>delay</code>(\u5ef6\u9072)-&gt;\u9019\u500b\u53c3\u6578\u8a2d\u5b9a\u70ba<code>2</code>\u79d2,\u6211\u5011\u4e0d\u9700\u8981\u771f\u7684\u53bb\u7b49\u5f852\u79d2,\u5b83\u6703\u5728\u5176\u5b83\u5730\u65b9\u767c\u751f</li> </ul> </li> <li>ES6\u5de5\u4f5c\u968a\u5217(ES6 Job Queue)</li> <li>ES6(= ECMAScript 2015)\u5f15\u9032(introduced)\u4e86\u5de5\u4f5c\u968a\u5217(job queue)\u7684\u89c0\u5ff5,\u4e26\u4e14\u900f\u904e<code>Promise</code>\u7269\u4ef6\u4f86\u4f7f\u7528\u5de5\u4f5c\u968a\u5217(job queue)<ul> <li>\u88dc\u5145: Promise\u7269\u4ef6\u4e5f\u662f\u5f9eES6\u958b\u59cb\u5f15\u9032\u7684</li> <li>Promise\u7269\u4ef6 \u662f\u4e00\u7a2e\u76e1\u5feb\u5730\u57f7\u884c \u975e\u540c\u6b65\u51fd\u5f0f(async function) \u7684\u4e00\u7a2e\u65b9\u5f0f,\u800c\u4e0d\u662f(rather than)\u653e\u5728\u547c\u53eb\u5806\u758a(call stack)\u7684\u6700\u5f8c\u9762</li> <li>\u90a3\u4e9b\u5728\u7576\u524d\u51fd\u5f0f\u7d50\u675f\u4e4b\u524d\u5df2\u7d93\u89e3\u6c7a(resolve)\u7684<code>Promise</code>\u7269\u4ef6, \u5c07\u5728\u7576\u524d\u51fd\u5f0f\u4e4b\u5f8c\u7acb\u5373\u88ab\u57f7\u884c</li> <li>\u6211\u767c\u73fe\u53ef\u4ee5\u7528\u904a\u6a02\u5712\u7684\u904e\u5c71\u8eca\u8a2d\u65bd\u4f86\u505a\u500b\u6bd4\u55bb\u6703\u66f4\u597d,\u8a0a\u606f\u968a\u5217(message queue)\u6703\u5c07\u6211\u5011\u653e\u5728\u968a\u5217(queue)\u7684\u5f8c\u9762,\u5728\u6240\u6709\u5176\u4ed6\u4eba\u7684\u5f8c\u9762,\u800c\u6211\u5011\u6703\u56e0\u6b64\u9700\u8981\u7b49\u5230\u8f2a\u5230\u6211\u5011\u70ba\u6b62\u3002\u7136\u800c,\u5de5\u4f5c\u968a\u5217(job queue)\u5c31\u662f\u5feb\u901f\u901a\u95dc\u5238\u8b93\u6211\u5011\u80fd\u5920\u642d\u4e58\u5b8c\u4e00\u500b\u904a\u6a02\u8a2d\u65bd\u4e4b\u5f8c \u7dca\u63a5\u8457 \u518d\u642d\u4e58\u4e0b\u4e00\u500b\u904a\u6a02\u8a2d\u65bd</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>const bar = () =&gt; console.log('bar')\nconst baz = () =&gt; console.log('baz')\nconst foo = () =&gt; {\nconsole.log('foo')\nsetTimeout(bar, 0)\nnew Promise((resolve, reject) =&gt;\nresolve('should be right after baz, before bar')\n).then(resolve =&gt; console.log(resolve))\nbaz()\n}\nfoo()\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u5c07\u6703\u56de\u50b3   JavaScript<pre><code>foo\nbaz\nshould be right after baz, before bar\nbar\n</code></pre></li> </ul> </li> <li>\u9019\u662f<code>Promises</code>(\u548c\u57fa\u65bc<code>Promise</code>\u5efa\u69cb\u7684<code>Async/ await</code>)\u2194\u8207\u900f\u904e<code>setTimeout()</code>\u6216\u5176\u5b83\u5e73\u53f0API\u7684\u666e\u901a,\u820a\u7684\u975e\u540c\u6b65\u51fd\u6578(asynchronous functions)\u4e4b\u9593\u7684\u5de8\u5927\u5340\u5225</li> </ul>"},{"location":"programming_language/nodejs/#understanding-processnexttick","title":"Understanding process.nextTick()","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Process</code>\u4e2d\u7684process.nextTick(callback[, ...args])---process.nextTick() adds callback to the \"next tick queue\". This queue is fully drained after the current operation on the JavaScript stack runs to completion and before the event loop is allowed to continue. It's possible to create an infinite loop if one were to recursively call process.nextTick()</p> <ul> <li>\u7576\u6211\u5011\u5617\u8a66\u7406\u89e3Node\u7684\u4e8b\u4ef6\u8ff4\u5708(event loop)\u6642,<code>process.nextTick()</code>\u65b9\u6cd5\u5c31\u662f\u5b83\u4e00\u500b\u91cd\u8981\u7684\u90e8\u5206</li> <li>\u6bcf\u6b21\u4e8b\u4ef6\u8ff4\u5708\u7d93\u904e\u5b8c\u6574\u7684\u4e00\u8d9f(full trip)\u6642,\u6211\u5011\u7a31\u5176\u70ba<code>tick</code></li> <li>\u7576\u6211\u5011\u50b3\u905e\u4e00\u500b\u51fd\u5f0f(function)\u7d66<code>process.nextTick()</code>\u65b9\u6cd5\u6642,\u6703\u6307\u793a(instruct)\u5f15\u64ce(engine)\u65bc\u7576\u524d\u64cd\u4f5c\u7d50\u675f\u4e4b\u5f8c,\u4e26\u4e14\u65bc\u4e0b\u4e00\u500b\u4e8b\u4ef6\u8ff4\u5708(event loop)<code>tick</code>\u958b\u59cb\u4e4b\u524d,\u547c\u53eb(invoke)\u6b64\u65b9\u6cd5(<code>process.nextTick()</code>)</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>process.nextTick(() =&gt; {\n//do something\n})\n</code></pre><ul> <li>\u8a72\u4e8b\u4ef6\u8ff4\u5708(event loop)\u6b63\u5fd9\u65bc\u8655\u7406\u7576\u524d\u7684\u7a0b\u5f0f\u78bc</li> <li>\u7576\u8a72\u64cd\u4f5c\u7d50\u675f\u5f8c,Javascript\u5f15\u64ce(engine)\u6703\u4ee5\u975e\u540c\u6b65(asynchronouly)\u7684\u65b9\u5f0f\u4f86\u8655\u7406\u51fd\u5f0f(function)</li> </ul> </li> <li>\u547c\u53eb<code>setTimeout(() =&gt; {}, 0)</code>\u65b9\u6cd5\u6703\u5728\u4e0b\u4e00\u500b<code>tick</code>\u7d50\u675f\u4e4b\u5f8c\u624d\u57f7\u884c\u51fd\u5f0f,\u6bd4\u8d77\u4f7f\u7528<code>nextTick()</code>\u65b9\u6cd5\u9700\u8981\u5728\u4e0b\u4e00\u500b<code>tick</code>\u958b\u59cb\u4e4b\u524d,\u512a\u5148\u547c\u53eb\u548c\u57f7\u884c\u5b83,\u76f8\u5c0d\u6162\u5f88\u591a</li> <li>\u5efa\u8b70\u4f7f\u7528<code>process.nextTick()</code>\u65b9\u6cd5\u4f86\u78ba\u4fdd\u5728\u4e0b\u4e00\u6b21\u4e8b\u4ef6\u8ff4\u5708(event loop)\u8fed\u4ee3(iteration)\u4e2d,\u5df2\u7d93\u57f7\u884c\u4e86\u7a0b\u5f0f\u78bc</li> </ul>"},{"location":"programming_language/nodejs/#understanding-setimmediate","title":"Understanding setImmediate()","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Timers</code>\u4e2d\u7684setImmediate(callback[, ...args])---Schedules the \"immediate\" execution of the callback after I/O events' callbacks. Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Timers</code>\u4e2d\u7684setTimeout(callback[, delay[, ...args]])---Schedules execution of a one-time callback after delay milliseconds.</p> <ul> <li>\u7576\u6211\u5011\u60f3\u8981\u8b93\u67d0\u500b\u7247\u6bb5\u7684\u7a0b\u5f0f\u78bc\u7acb\u5373\u88ab\u57f7\u884c\u6642,\u5176\u4e2d\u4e00\u500b\u9078\u64c7\u662f\u53ef\u4ee5\u4f7f\u7528Node\u63d0\u4f9b\u7684<code>setImmediate()</code>\u65b9\u6cd5     JavaScript<pre><code>setImmediate(() =&gt; {\n//run something\n})\n</code></pre><ul> <li>\u4efb\u4f55\u51fd\u5f0f\u4f5c\u70ba\u53c3\u6578\u50b3\u905e\u7d66<code>setImmediate()</code>\u65b9\u6cd5,\u90fd\u6703\u5728\u4e0b\u4e00\u6b21\u4e8b\u4ef6\u8ff4\u5708(event loop)\u8fed\u4ee3(iteration)\u88ab\u7576\u4f5c\u56de\u547c\u51fd\u5f0f(callback)\u57f7\u884c</li> </ul> </li> <li><code>setImmediate()</code>\u8207<code>setTimeout(() =&gt; {}, 0)</code>\u8207<code>process.nextTick()</code>\u4e09\u8005\u6709\u4ec0\u9ebc\u4e0d\u540c\u5462?<ul> <li>\u7576\u50b3\u905e\u4e00\u500b\u51fd\u5f0f(function)\u7d66<code>process.nextTick()</code>\u65b9\u6cd5\u6642,\u8a72\u51fd\u5f0f\u6703\u5728\u7576\u524d\u64cd\u4f5c(current operation)\u4e4b\u5f8c,\u4e26\u65bc\u7576\u524d\u4e8b\u4ef6\u8ff4\u5708(event loop)\u7684\u8fed\u4ee3\u4e2d(current iteration)\u88ab\u57f7\u884c</li> <li>\u9019\u4e5f\u610f\u5473\u8457<code>process.nextTick()</code>\u65b9\u6cd5\u7e3d\u662f\u6703\u5728<code>setTimeout()</code>\u65b9\u6cd5 &amp; <code>setImmediate()</code>\u65b9\u6cd5\u4e4b\u524d\u88ab\u57f7\u884c</li> <li>\u7576\u8a2d\u5b9a<code>setTimeout(callback[, delay[, ...args]])</code>\u65b9\u6cd5\u7684\u5ef6\u9072(<code>delay</code>)\u53c3\u6578\u70ba<code>0</code>\u6beb\u79d2\u6642,\u9019\u6642\u8a72\u65b9\u6cd5\u6703\u975e\u5e38\u985e\u4f3c\u65bc<code>setImmediate()</code>\u65b9\u6cd5\u3002\u57f7\u884c\u9806\u5e8f\u5c07\u53d6\u6c7a\u65bc\u4e0d\u540c\u7684\u56e0\u7d20\u6240\u5f71\u97ff,\u4f46\u5b83\u5011\u90fd\u6703\u5728\u4e0b\u4e00\u6b21\u4e8b\u4ef6\u8ff4\u5708(event loop)\u7684\u8fed\u4ee3\u4e2d(current iteration)\u88ab\u57f7\u884c</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#discover-javascript-timers","title":"Discover JavaScript Timers","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Timers</code>\u4e2d\u7684setTimeout(callback[, delay[, ...args]])---Schedules execution of a one-time callback after delay milliseconds. Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Timers</code>\u4e2d\u7684setInterval(callback[, delay[, ...args]])---Schedules repeated execution of callback every delay milliseconds. Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Timers</code>\u4e2d\u7684clearTimeout(timeout)---Cancels a Timeout object created by setTimeout(). Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Timers</code>\u4e2d\u7684setImmediate(callback[, ...args])---Schedules the \"immediate\" execution of the callback after I/O events' callbacks.</p> <ul> <li><code>setTimeout()</code>\u65b9\u6cd5</li> <li>\u7576\u6211\u5011\u5728\u64b0\u5bebJavascript\u7a0b\u5f0f\u78bc\u6642,\u6709\u6642\u6211\u5011\u6703\u5e0c\u671b\u5ef6\u9072(delay)\u67d0\u4e9b\u51fd\u5f0f\u7684\u57f7\u884c</li> <li>\u9019\u5c31\u662f<code>setTimeout()</code>\u65b9\u6cd5\u5728\u505a\u7684\u4e8b\u60c5\u3002\u6211\u5011\u53ef\u4ee5\u6307\u5b9a\u4e00\u500b\u8981\u5ef6\u9072\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function),\u4e26\u4e14\u6307\u5b9a\u4e00\u500b\u60f3\u8981\u5ef6\u9072\u57f7\u884c\u7684\u6642\u9593(\u4ee5\u6beb\u79d2\u70ba\u55ae\u4f4d)       JavaScript<pre><code>setTimeout(() =&gt; {\n// runs after 2 seconds\n}, 2000)\nsetTimeout(() =&gt; {\n// runs after 50 milliseconds\n}, 50)\n</code></pre><ul> <li>\u9019\u500b\u8a9e\u6cd5\u5b9a\u7fa9\u4e86\u4e00\u500b\u65b0\u7684\u51fd\u5f0f,\u8b93\u6211\u5011\u53ef\u4ee5\u64b0\u5beb\u4efb\u4f55\u6211\u5011\u60f3\u8981\u57f7\u884c\u7684\u51fd\u5f0f,\u6216\u662f\u586b\u5165\u6211\u5011\u60f3\u8981\u547c\u53eb\u7684\u51fd\u5f0f\u4e26\u7d66\u4e00\u7d44\u53c3\u6578(a set of parameters)   JavaScript<pre><code>const myFunction = (firstParam, secondParam) =&gt; {\n// do something\n}\n// runs after 2 seconds\nsetTimeout(myFunction, 2000, firstParam, secondParam)\n</code></pre></li> <li><code>setTimeout()</code>\u65b9\u6cd5\u6703\u56de\u50b3\u4e00\u500b\u8a08\u6642\u5668ID(Timer ID),\u901a\u5e38\u6211\u5011\u4e0d\u6703\u7528\u5230\u9019\u500b\u8a08\u6642\u5668ID,\u4f46\u662f\u6211\u5011\u4ecd\u7136\u53ef\u4ee5\u5c07\u9019\u500b\u8a08\u6642\u5668ID\u8a18\u4e0b\u4f86   JavaScript<pre><code>const id = setTimeout(() =&gt; {\n// should run after 2 seconds\n}, 2000)\n// I changed my mind\nclearTimeout(id)\n</code></pre></li> <li>\u7576\u6211\u5011\u60f3\u8981\u5c07\u9019\u500b\u6392\u5b9a\u8981\u57f7\u884c\u7684\u51fd\u5f0f\u53d6\u6d88\u6642,\u5c31\u6703\u9700\u8981\u7528\u5230\u9019\u500b\u8a08\u6642\u5668ID</li> </ul> </li> <li>\u96f6\u5ef6\u9072\u57f7\u884c(Zero delay)<ul> <li>\u7576\u6211\u5011\u6307\u5b9a\u8981\u5ef6\u9072\u7684\u6642\u9593\u70ba<code>0</code>\u6beb\u79d2\u6642,\u8a72\u56de\u547c\u51fd\u5f0f\u5c31\u6703\u76e1\u5feb\u5730\u7acb\u5373\u88ab\u57f7\u884c,\u4e26\u4e14\u5728\u7576\u524d\u7684\u56de\u547c\u51fd\u5f0f(callback function)\u57f7\u884c\u5b8c\u5f8c   JavaScript<pre><code>setTimeout(() =&gt; {\nconsole.log('after ')\n}, 0)\nconsole.log(' before ')\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u6703\u6253\u5370(print)\u51fa<code>before after</code></li> <li>\u9019\u500b\u505a\u6cd5( \u5c07\u51fd\u5f0f\u52a0\u5165\u8abf\u5ea6\u5668(scheduler)\u7684\u6392\u968a(queuing)\u4e2d )\u5c0d\u65bc\u5728\u5bc6\u96c6\u4efb\u52d9\u6642,\u7528\u4f86\u907f\u514dCPU\u8cc7\u6e90\u7684\u963b\u585e or \u5c0d\u65bc\u8981\u57f7\u884c\u7e41\u91cd\u7684\u8a08\u7b97\u6642,\u80fd\u8b93\u5176\u4ed6\u51fd\u5f0f\u5148\u88ab\u57f7\u884c\u662f\u975e\u5e38\u6709\u7528\u7684</li> </ul> </li> <li>\u6709\u4e9b\u700f\u89bd\u5668(\u4f8b\u5982: <code>IE</code>\u6216\u662f<code>Edge</code>)\u6703\u5be6\u4f5c<code>setImmediate()</code>\u65b9\u6cd5\u4e5f\u80fd\u9054\u5230\u76f8\u540c\u7684\u529f\u80fd,\u4f46\u90a3\u6a23\u505a\u4e0d\u7b97\u662f\u6a19\u6e96\u7684,\u800c\u4e14\u4e5f\u7121\u6cd5\u5728\u5176\u5b83\u700f\u89bd\u5668\u4e2d\u4f7f\u7528\u3002\u4f46\u662f\u9019\u7b97\u662fNode\u7684\u6a19\u6e96\u529f\u80fd\u4e4b\u4e00<ul> <li>\u95dc\u65bc<code>setImmediate()</code>\u65b9\u6cd5\u5c0d\u65bc\u5404\u700f\u89bd\u5668\u7684\u652f\u63f4,\u53ef\u53c3\u8003Efficient Script Yielding: setImmediate()</li> </ul> </li> <li><code>setInterval()</code>\u65b9\u6cd5</li> <li><code>setInterval()</code>\u65b9\u6cd5\u8207<code>setTimeout()</code>\u65b9\u6cd5\u5f88\u985e\u4f3c,\u5169\u8005\u7684\u5dee\u5225\u662f<ul> <li><code>setInterval()</code>\u65b9\u6cd5\u6703\u6c38\u9060\u57f7\u884c\u4e0b\u53bb,\u800c\u4e0d\u662f\u53ea\u57f7\u884c\u4e00\u6b21,\u4e26\u4e14\u6211\u5011\u53ef\u4ee5\u6307\u5b9a\u60f3\u8981\u7684\u9593\u9694\u57f7\u884c\u6642\u9593(\u4ee5\u6beb\u79d2\u70ba\u55ae\u4f4d)   JavaScript<pre><code>setInterval(() =&gt; {\n// runs every 2 seconds\n}, 2000)\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u6703\u6301\u7e8c\u6bcf2\u79d2\u57f7\u884c\u4e00\u6b21,\u76f4\u5230\u6211\u5011\u5229\u7528<code>clearInterval()</code>\u65b9\u6cd5\u4f86\u505c\u6b62(stop)\u5b83   JavaScript<pre><code>const id = setInterval(() =&gt; {\n// runs every 2 seconds\n}, 2000)\nclearInterval(id)\n</code></pre></li> <li>\u800c\u8981\u505c\u6b62<code>clearInterval()</code>\u65b9\u6cd5,\u9700\u8981\u50b3\u905e\u7d66\u8a72\u65b9\u6cd5\u9593\u9694\u5668ID(interval ID, =&gt; \u7531<code>setInterval()</code>\u65b9\u6cd5\u6240\u56de\u50b3\u7684)</li> <li>\u5e38\u898b\u7684\u505a\u6cd5\u6703\u662f\u5728<code>setInterval()</code>\u56de\u547c\u51fd\u5f0f\u4e2d\u547c\u53eb<code>clearInterval()</code>\u65b9\u6cd5,\u4f86\u8b93<code>setInterval()</code>\u65b9\u6cd5\u81ea\u5df1\u81ea\u52d5\u5730\u6c7a\u5b9a\u662f\u5426\u8981\u518d\u57f7\u884c\u4e00\u6b21(again)\u6216\u662f\u505c\u6b62(stop)   JavaScript<pre><code>const interval = setInterval(() =&gt; {\nif (App.somethingIWait === 'arrived') {\nclearInterval(interval)\nreturn\n}\n// otherwise do things\n}, 100)\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u6703\u5728\u57f7\u884c\u67d0\u4e9b\u6771\u897f\u5f8c,\u76f4\u5230<code>App.somethingIWait</code>\u9019\u500b\u5c6c\u6027\u7684\u503c\u7b49\u65bc<code>'arrived'</code>\u5b57\u4e32\u6642,\u624d\u6703\u505c\u6b62</li> </ul> </li> <li>\u905e\u8ff4\u8a08\u6642\u5668(Recursive Timeout)<ul> <li><code>setInterval()</code>\u65b9\u6cd5\u6703\u555f\u52d5\u4e00\u500b\u6bcf<code>n</code>\u8c6a\u79d2\u57f7\u884c\u4e00\u6b21\u7684\u51fd\u5f0f,\u800c\u7121\u9808\u8003\u616e\u8a72\u51fd\u5f0f\u4f55\u6642\u6703\u57f7\u884c\u5b8c\u7562</li> <li>\u5982\u679c\u6709\u4e00\u500b\u51fd\u5f0f,\u6bcf\u6b21\u90fd\u6703\u82b1\u76f8\u540c\u7684\u6642\u9593\u624d\u6703\u57f7\u884c\u5b8c\u7562,\u90a3\u5c31\u4e0d\u6703\u6709\u554f\u984c</li> <li></li> <li>\u4e5f\u6709\u53ef\u80fd\u8a72\u51fd\u5f0f\u6bcf\u6b21\u6703\u56e0\u70ba\u7db2\u8def\u901f\u5ea6\u7684\u60c5\u6cc1(network conditions),\u82b1\u8cbb\u4e0d\u540c\u7684\u6642\u9593\u624d\u6703\u57f7\u884c\u5b8c\u7562</li> <li></li> <li>\u4e5f\u56e0\u6b64\u53ea\u8981\u4efb\u4f55\u4e00\u6b21\u9700\u8981\u82b1\u8cbb\u6bd4\u8f03\u9577\u7684\u6642\u9593\u624d\u6703\u57f7\u884c\u5b8c\u7562\u7684\u56de\u547c\u51fd\u5f0f\u5c31\u6703\u8207\u4e0b\u4e00\u6b21\u8981\u57f7\u884c\u7684\u6642\u9593 \u91cd\u758a (overlaps)</li> <li></li> <li>\u70ba\u4e86\u907f\u514d\u4e0a\u8ff0 \u91cd\u758a \u7684\u60c5\u6cc1,\u6211\u5011\u53ef\u4ee5\u5728\u56de\u547c\u51fd\u5f0f(callback function)\u57f7\u884c\u5b8c\u7562\u5f8c,\u518d\u5b89\u6392\u4e00\u500b\u905e\u8ff4\u8a08\u6642\u5668(recursive timeout)       JavaScript<pre><code>const myFunction = () =&gt; {\n// do something\nsetTimeout(myFunction, 1000)\n}\nsetTimeout(myFunction, 1000)\n</code></pre></li> <li>\u7576\u9054\u6210(achieve)\u9019\u500b\u905e\u8ff4\u8a08\u6642\u5668(recursive timeout)\u7684\u60c5\u5883(scenario),\u6703\u5982\u4e0b\u5716\u6240\u793a<ul> <li></li> </ul> </li> </ul> </li> <li><code>setTimeout()</code>\u8207<code>setInterval()</code>\u7686\u70baNode\u7684\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Timers\u7684\u65b9\u6cd5</li> <li>Node\u4e5f\u63d0\u4f9b<code>setImmediate()</code>\u65b9\u6cd5,\u9019\u500b\u65b9\u6cd5\u5c31\u76f8\u7576\u65bc\u4f7f\u7528<code>setTimeout(() =&gt; {}, 0)</code>,\u4e3b\u8981\u7528\u4f86\u642d\u914dNode\u7684\u4e8b\u4ef6\u8ff4\u5708(event loop)\u4f7f\u7528</li> </ul>"},{"location":"programming_language/nodejs/#javascript-asynchronous-programming-and-callbacks","title":"JavaScript Asynchronous Programming and Callbacks","text":"<ul> <li>\u7a0b\u5f0f\u8a9e\u8a00\u7684\u975e\u540c\u6b65\u6027(asynchronicity)</li> <li>\u96fb\u8166\u90fd\u662f\u8a2d\u8a08\u53ef\u4ee5\u975e\u540c\u6b65\u7684,\u975e\u540c\u6b65(asynchronous)\u610f\u5473\u8457\u4e8b\u4ef6\u53ef\u4ee5\u7368\u7acb\u65bc(independently)\u4e3b\u7a0b\u5f0f\u6d41(the main program flow)\u767c\u751f(happen)</li> <li>\u5728\u7576\u524d\u7684\u6d88\u8cbb\u8005\u96fb\u8166(consumer computers)\u4e2d,\u6bcf\u500b\u7a0b\u5f0f\u90fd\u6703\u904b\u884c\u4e00\u500b\u7279\u5b9a\u7684\u6642\u9593\u6bb5(time slot)\u5f8c,\u7136\u5f8c\u505c\u6b62\u904b\u884c,\u4ee5\u8b93\u5176\u5b83\u7a0b\u5f0f\u53ef\u4ee5\u7e7c\u7e8c\u57f7\u884c\u3002\u9019\u500b\u5faa\u74b0\u904b\u884c\u5f97\u5f88\u5feb,\u4ee5\u81f3\u65bc\u6211\u5011\u901a\u5e38\u4e0d\u6703\u6ce8\u610f\u5230,\u6211\u5011\u6703\u4ee5\u70ba\u662f\u6211\u5011\u7684\u96fb\u8166\u80fd\u540c\u6642(simultaneously)\u57f7\u884c\u591a\u500b\u7a0b\u5f0f,\u4e8b\u5be6\u4e0a\u9019\u53ea\u662f\u4e00\u500b\u5e7b\u89ba(illusion)</li> <li>\u6211\u5011\u9019\u908a\u4e0d\u6703\u6df1\u5165\u63a2\u8a0e\u9019\u500b\u89c0\u5ff5,\u4f46\u662f\u6211\u5011\u5fc5\u9808\u8981\u628a\u9019\u500b\u89c0\u5ff5\u8996\u70ba\u4e00\u500b\u6b63\u5e38\u7684\u60c5\u6cc1,\u4e5f\u5c31\u662f\u7a0b\u5f0f\u53ef\u4ee5\u662f\u975e\u540c\u6b65(asynchronous)\u57f7\u884c\u7684,\u76f4\u5230\u4ed6\u5011\u9700\u8981\u88ab\u6ce8\u610f\u6642\u624d\u6703\u505c\u6b62(halt),\u9019\u4e5f\u80fd\u8b93\u96fb\u8166\u80fd\u540c\u6642(in the meantime)\u57f7\u884c\u5176\u5b83\u4e8b\u60c5<ul> <li>\u7576\u7a0b\u5f0f\u6b63\u5728\u7b49\u5f85\u4f86\u81ea\u7db2\u8def\u7684\u56de\u61c9(response from the network)\u6642,\u8a72\u7a0b\u5f0f\u662f\u7121\u6cd5\u5728\u8acb\u6c42\u5b8c\u6210\u4e4b\u524d\u505c\u6b62(halt)\u8655\u7406\u5668(processor)\u7684</li> </ul> </li> <li>\u6b63\u5e38\u4f86\u8aaa,\u7a0b\u5f0f\u8a9e\u8a00\u662f\u540c\u6b65\u7684(synchronous),\u5176\u4e2d\u6709\u4e9b\u7a0b\u5f0f\u8a9e\u8a00\u6709\u63d0\u4f9b\u65b9\u6cd5\u4f86\u7ba1\u7406\u975e\u540c\u6b65\u6027(asynchronicity)\u6216\u662f\u900f\u904e\u51fd\u5f0f\u5eab(library)\u4f86\u8655\u7406<ul> <li>\u9810\u8a2d\u60c5\u6cc1\u4e0b,<code>C</code>\u3001<code>Java</code>\u3001<code>C#</code>\u3001<code>PHP</code>\u3001<code>Go</code>\u3001<code>Ruby</code>\u3001<code>Swift</code>\u3001<code>Python</code>\u90fd\u662f\u975e\u540c\u6b65(asynchronous)\u7684</li> <li>\u5176\u4e2d\u4e00\u4e9b\u7a0b\u5f0f\u8a9e\u8a00 \u900f\u904e\u7dda\u7a0b(thread)\u4f86\u8655\u7406\u975e\u540c\u6b65(async)\u884c\u70ba,\u5f9e\u800c\u7522\u751f(spawning)\u4e00\u500b\u65b0\u7684\u9032\u7a0b(process)</li> </ul> </li> <li>Javascript</li> <li>Javascript\u7a0b\u5f0f\u8a9e\u8a00,\u9810\u8a2d\u662f\u540c\u6b65(synchronous)\u4e14\u55ae\u57f7\u884c\u7dd2(single threaded)\u7684 \u3002\u9019\u610f\u5473\u8457\u7a0b\u5f0f\u78bc\u4e0d\u80fd\u5275\u9020\u65b0\u7684\u7dda\u7a0b(threads),\u4e26\u5e73\u884c(parallel)\u57f7\u884c     JavaScript<pre><code>const a = 1\nconst b = 2\nconst c = a * b\nconsole.log(c)\ndoSomething()\n</code></pre><ul> <li>\u96d6\u7136\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\"\u770b\u8d77\u4f86\"\u662f\u4f9d\u5e8f\u57f7\u884c\u7684,\u4f46\u662fJavascript\u9019\u500b\u7a0b\u5f0f\u8a9e\u8a00,\u8d77\u521d\u662f\u8a95\u751f\u65bc\u700f\u89bd\u5668(browser)\u7684,\u5b83\u4e00\u958b\u59cb\u7684\u5de5\u4f5c\u662f\u7528\u4f86\u56de\u61c9(response)\u4f7f\u7528\u8005\u7684\u884c\u70ba(user actions),\u50cf\u662f<code>onClick</code>\u3001<code>onMouseOver</code>\u3001<code>OnChange</code>\u3001<code>OnSubmit</code>...\u7b49\u7b49\u3002\u8a72\u5982\u4f55\u4f7f\u7528\u540c\u6b65\u7a0b\u5f0f\u8a2d\u8a08\u6a21\u578b(synchronous programming model)\u4f86\u505a\u5230\u9019\u4e9b\u4e8b\u60c5\u5462?</li> <li>\u7b54\u6848\u662f\u5b83\u7684\"\u74b0\u5883\"(environment)\u3002\u700f\u89bd\u5668(browser)\u6703\u900f\u904e\u63d0\u4f9b\u4e00\u7d44\u80fd\u5920\u8655\u7406\u9019\u7a2e\u529f\u80fd\u7684APIs\u4f86\u5b8c\u6210\u9019\u4e00\u9ede</li> <li>\u6700\u8fd1,Node\u5f15\u9032(introduced)\u4e86\u4e00\u500b\u975e\u963b\u585eI/O\u74b0\u5883(non-blocking I/O environment)\u4f86\u5c07\u8a72\u6982\u5ff5(concept)\u5ef6\u4f38(extend)\u5230\u6587\u4ef6\u5b58\u53d6(file access)\u3001\u7db2\u8def\u547c\u53eb(network calls)...\u7b49\u7b49</li> </ul> </li> <li>\u56de\u547c\u51fd\u5f0f(Callbacks)</li> <li>\u56e0\u70ba\u6211\u5011\u7121\u6cd5\u5f97\u77e5\u4f7f\u7528\u8005\u4f55\u6642\u6703\u9ede\u64ca\u6309\u9215,\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u5c0d\u8a72\u9ede\u64ca\u4e8b\u4ef6(click event)\u5b9a\u7fa9(define)\u4e00\u500b\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u3002\u9019\u500b\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u6703\u63a5\u53d7(accepts)\u4e00\u500b\u51fd\u5f0f(function),\u800c\u9019\u500b\u51fd\u5f0f\u6703\u5728\u8a72\u4e8b\u4ef6\u88ab\u89f8\u767c(triggered)\u6642\u547c\u53eb       JavaScript<pre><code>document.getElementById('button').addEventListener('click', () =&gt; {\n//item clicked\n})\n</code></pre><ul> <li>\u800c\u9019\u4e5f\u5c31\u662f\u6240\u8b02\u7684\"\u56de\u547c\u51fd\u5f0f\"(callback)</li> </ul> </li> <li>\u56de\u547c\u51fd\u5f0f(callback function)\u662f\u4e00\u500b\u7c21\u55ae\u7684\u51fd\u5f0f,\u80fd\u5920\u4f5c\u70ba\u503c\u50b3\u905e\u7d66\u53e6\u4e00\u500b\u51fd\u5f0f,\u4e26\u4e14\u50c5\u5728\u4e8b\u4ef6\u88ab\u89f8\u767c\u6642\u624d\u6703\u57f7\u884c<ul> <li>\u6211\u5011\u53ef\u4ee5\u9019\u6a23\u505a\u7684\u539f\u56e0\u662f,\u5728Javascript\u9019\u500b\u7a0b\u5f0f\u8a9e\u8a00\u4e2d,\u6709\u4e00\u7d1a\u51fd\u5f0f(first-class functions)\u9019\u7a2e\u6771\u897f,\u4e5f\u5c31\u662f\u51fd\u5f0f\u80fd\u4f5c\u70ba\u503c\u4e26\u6307\u6d3e\u7d66\u8b8a\u6578,\u518d\u50b3\u905e\u7d66\u5176\u4ed6\u51fd\u5f0f(=&gt; \u9019\u7a2e\u51fd\u5f0f\u88ab\u7a31\u4f5c\"\u9ad8\u968e\u51fd\u5f0f\", (higher-order functions))</li> <li>\u5e38\u898b\u7684\u505a\u6cd5\u662f\u5c07\u5ba2\u6236\u7aef\u7684\u7a0b\u5f0f\u78bc\u5305\u88dd\u5728<code>window</code>\u7269\u4ef6\u7684<code>load</code>\u4e8b\u4ef6\u76e3\u807d\u5668(event listener),\u5b83\u53ea\u6703\u5728\u9801\u9762\u6e96\u5099\u597d\u6642\u624d\u6703\u57f7\u884c\u56de\u547c\u51fd\u5f0f     JavaScript<pre><code>window.addEventListener('load', () =&gt; {\n//window loaded\n//do what you want\n})\n</code></pre></li> <li>\u56de\u547c\u51fd\u5f0f(Callbacks)\u9084\u6709\u7528\u5728\u5f88\u591a\u5730\u65b9,\u800c\u4e0d\u53ea\u662f\u5728<code>DOM</code>\u4e8b\u4ef6\u4e2d</li> <li>\u53e6\u4e00\u500b\u5e38\u898b\u7684\u505a\u6cd5\u662f\u4f7f\u7528\u8a08\u6642\u5668(timers)     JavaScript<pre><code>setTimeout(() =&gt; {\n// runs after 2 seconds\n}, 2000)\n</code></pre></li> <li>\u53e6\u5916,<code>XHR</code>\u8acb\u6c42(requests)\u4e5f\u80fd\u63a5\u53d7\u56de\u547c\u51fd\u5f0f(callback function),\u5728\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u900f\u904e\u6307\u5b9a\u4e00\u500b\u51fd\u5f0f\u7d66\u7576\u4e00\u500b\u7279\u5b9a\u7684\u4e8b\u4ef6(particular event)\u767c\u751f(occur)\u6642\u6703\u547c\u53eb\u7684\u5c6c\u6027(property)</li> <li>\u5728\u9019\u6b21\u7684\u7bc4\u4f8b\u4e2d,\u6240\u8b02\u7279\u5b9a\u7684\u4e8b\u4ef6\u5c31\u662f\u4ee3\u8868\u8acb\u6c42\u7684\u72c0\u614b\u767c\u751f\u6539\u8b8a\u6642(the state of the request changes)     JavaScript<pre><code>const xhr = new XMLHttpRequest()\nxhr.onreadystatechange = () =&gt; {\nif (xhr.readyState === 4) {\nxhr.status === 200 ? console.log(xhr.responseText) : console.error('error')\n}\n}\nxhr.open('GET', 'https://yoursite.com')\nxhr.send()\n</code></pre></li> </ul> </li> <li>\u5728\u56de\u547c\u51fd\u5f0f\u4e2d\u8655\u7406\u932f\u8aa4(Handling errors in callbacks)</li> <li>\u6211\u5011\u5e73\u5e38\u6703\u5982\u4f55\u8655\u7406(handle)\u56de\u547c\u51fd\u5f0f(callbacks)\u7684\u932f\u8aa4(errors)\u5462?<ul> <li>\u4e00\u500b\u5f88\u5e38\u898b\u7684\u7b56\u7565(strategy)\u662f\u5229\u7528Node\u6240\u63a1\u53d6\u7684\u65b9\u6cd5,\u4e5f\u5c31\u662f\u5728\u4efb\u4f55\u4e00\u500b\u56de\u547c\u51fd\u5f0f\u4e2d\u7684\u7b2c\u4e00\u500b\u53c3\u6578(first parameter)\u5c31\u662f\u932f\u8aa4(<code>error</code>)\u7269\u4ef6: error-first callbacks</li> <li>\u5982\u679c\u6c92\u6709\u767c\u751f\u932f\u8aa4(<code>error</code>)\u7684\u8a71,\u8a72\u7269\u4ef6\u7684\u503c\u5c31\u662f<code>null</code>; \u800c\u5982\u679c\u6709\u767c\u751f\u932f\u8aa4(<code>error</code>)\u7684\u8a71,\u8a72\u932f\u8aa4(<code>error</code>)\u7269\u4ef6\u5c31\u6703\u5305\u62ec\u95dc\u65bc\u9019\u500b\u932f\u8aa4(<code>error</code>)\u7684\u4e00\u4e9b\u63cf\u8ff0(description)\u4ee5\u53ca\u5176\u4ed6\u8cc7\u8a0a(information)   JavaScript<pre><code>fs.readFile('/file.json', (err, data) =&gt; {\nif (err !== null) {\n//handle error\nconsole.log(err)\nreturn\n}\n//no errors, process data\nconsole.log(data)\n})\n</code></pre></li> </ul> </li> <li>\u56de\u547c\u51fd\u5f0f\u7684\u554f\u984c(The problem with callbacks)</li> <li>\u56de\u547c\u51fd\u5f0f(Callbacks)\u5f88\u9069\u5408\u7528\u65bc\u7c21\u55ae\u7684\u60c5\u5883\u4e2d</li> <li>\u7136\u800c\u6bcf\u4e00\u500b\u56de\u547c\u51fd\u5f0f\u90fd\u6703\u589e\u52a0\u4e00\u5c64\u5de2\u72c0(nesting),\u9019\u6642\u5019\u5982\u679c\u6211\u5011\u6709\u5f88\u591a\u7684\u56de\u547c\u51fd\u5f0f(callbacks),\u7a0b\u5f0f\u78bc\u5f88\u5feb\u5730\u5c31\u6703\u958b\u59cb\u8b8a\u5f97\u8907\u96dc       JavaScript<pre><code>window.addEventListener('load', () =&gt; {\ndocument.getElementById('button').addEventListener('click', () =&gt; {\nsetTimeout(() =&gt; {\nitems.forEach(item =&gt; {\n//your code here\n})\n}, 2000)\n})\n})\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u53ea\u662f4\u5c64\u7684\u7a0b\u5f0f\u78bc,\u4f46\u662f\u53ef\u80fd\u6703\u6709\u66f4\u591a\u5c64\u7684\u7a0b\u5f0f\u78bc,\u9019\u6a23\u5c31\u4e0d\u597d\u73a9\u4e86</li> <li>\u90a3\u6211\u5011\u8a72\u600e\u9ebc\u89e3\u6c7a\u9019\u500b\u554f\u984c\u5462?</li> </ul> </li> <li>\u56de\u547c\u51fd\u5f0f\u7684\u66ff\u4ee3\u65b9\u6848(Alternatives to callbacks)</li> <li>\u5f9eES6\u958b\u59cb ,Javascript\u7a0b\u5f0f\u8a9e\u8a00\u958b\u59cb\u5f15\u9032(introduced)\u4e86\u8a31\u591a\u80fd\u5920\u4e0d\u6d89\u53ca(do not involve)\u4f7f\u7528\u56de\u547c\u51fd\u5f0f(callbacks)\u4f86\u8655\u7406\u975e\u540c\u6b65(asynchronous)\u7a0b\u5f0f\u78bc\u7684\u529f\u80fd,\u4f8b\u5982\u4ee5\u4e0b2\u7a2e\u529f\u80fd<ul> <li><code>Promise</code>\u7269\u4ef6 (ES6)</li> <li><code>Async/Await</code>\u8a9e\u6cd5 (ES8)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#understanding-javascript-promises","title":"Understanding JavaScript Promises","text":"<p>Promise\u7269\u4ef6 (by MDN\u5b98\u65b9\u6587\u4ef6) --- The Promise object represents the eventual completion (or failure) of an asynchronous operation and its resulting value. \u5982\u4f55\u4f7f\u7528Promise\u7269\u4ef6 (by MDN\u5b98\u65b9\u6587\u4ef6) Fetch API (by MDN\u5b98\u65b9\u6587\u4ef6) --- The Fetch API provides an interface for fetching resources (including across the network). It will seem familiar to anyone who has used XMLHttpRequest, but the new API provides a more powerful and flexible feature set.</p> <ul> <li>Promise\u7269\u4ef6\u7684\u4ecb\u7d39     JavaScript<pre><code>let done = true\nconst isItDoneYet = new Promise((resolve, reject) =&gt; {\nif (done) {\nconst workDone = 'Here is the thing I built'\nresolve(workDone)\n} else {\nconst why = 'Still working on something else'\nreject(why)\n}\n})\nconst checkIfItsDone = () =&gt; {\nisItDoneYet\n.then(ok =&gt; {\nconsole.log(ok)\n})\n.catch(err =&gt; {\nconsole.error(err)\n})\n}\ncheckIfItsDone()\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\u6253\u5370\u51fa<code>Here is the thing I built</code></li> </ul> </li> <li><code>Promise</code>\u7269\u4ef6\u901a\u5e38\u6703\u88ab\u5b9a\u7fa9\u70ba\u4e00\u500b\u6700\u7d42(eventually)\u5c07\u6703\u8b8a\u6210\u4e00\u500b\u53ef\u7528\u7684(available)\u4ee3\u7406\u503c(a proxy for a value)</li> <li><code>Promise</code>\u7269\u4ef6\u662f\u4e00\u7a2e\u80fd\u8655\u7406\u975e\u540c\u6b65(asynchronous)\u7a0b\u5f0f\u78bc\u7684\u65b9\u6cd5,\u800c\u4e0d\u7528\u9677\u5165\u56de\u547c\u5730\u7344(callback hell)<ul> <li>\u53ef\u53c3\u8003callback hell</li> </ul> </li> <li>\u81ea\u5f9e2015\u5e74(ES6\u7684\u6a19\u6e96\u5316\u8207\u5f15\u5165)\u958b\u59cb\u5f8c,<code>Promise</code>\u7269\u4ef6\u5df2\u7d93\u6210\u70baJavascript\u7a0b\u5f0f\u8a9e\u8a00\u7684\u4e00\u90e8\u5206\u4e86,\u4e26\u4e14\u5728\u8fd1\u5e74\u4f86\u66f4\u8207ES8\u7684<code>Async/Await</code>\u8a9e\u6cd5\u6574\u5408\u5f97\u66f4\u597d<ul> <li>\u975e\u540c\u6b65\u51fd\u5f0f(Async functions)\u6703\u5728\u80cc\u666f\u4e2d(behind the scenes)\u4f7f\u7528<code>Promise</code>\u7269\u4ef6,\u6240\u4ee5\u4e86\u89e3<code>Promise</code>\u7269\u4ef6\u904b\u4f5c\u7684\u539f\u7406 &amp; \u7406\u89e3<code>Async/Await</code>\u8a9e\u6cd5\u662f\u5982\u4f55\u4f5c\u7528\u7684\u662f\u975e\u5e38\u91cd\u8981\u7684</li> </ul> </li> <li><code>Promise</code>\u7269\u4ef6\u7c21\u55ae\u4f86\u8aaa\u662f\u5982\u4f55\u904b\u4f5c\u7684\u5462?<ul> <li>\u4e00\u65e6<code>Promise</code>\u7269\u4ef6\u88ab\u547c\u53eb\u5f8c,\u5b83\u5c07\u6703\u4ee5\u5f85\u8655\u7406\u72c0\u614b(pending state)\u958b\u59cb\u3002\u9019\u610f\u5473\u8457\u88ab\u547c\u53eb\u7684\u51fd\u5f0f(calling function)\u5c07\u6703\u7e7c\u7e8c\u57f7\u884c,\u7136\u800c<code>Promise</code>\u7269\u4ef6\u4ecd\u7136\u8655\u65bc\u5f85\u8655\u7406\u72c0\u614b(<code>pending</code>),\u76f4\u5230\u88ab\u89e3\u6c7a(<code>resolves</code>)\u70ba\u6b62,\u9032\u800c\u5c07\u6240\u8acb\u6c42\u5230\u7684\u4efb\u4f55\u6578\u64da\u50b3\u905e\u7d66\u5176\u547c\u53eb\u7684\u51fd\u5f0f(calling function)</li> <li>\u5efa\u7acb\u51fa\u4f86\u7684<code>Promise</code>\u7269\u4ef6\u6700\u7d42(eventually)\u5c07\u6703 \u5df2\u89e3\u6c7a\u7684\u72c0\u614b(resolved state) \u6216\u662f \u88ab\u62d2\u7d55\u7684\u72c0\u614b(rejected state) \u7d50\u675f(end in),\u4e26\u547c\u53eb\u5404\u81ea\u5c0d\u61c9\u7684(respective)\u56de\u547c\u51fd\u5f0f(callback functions),\u518d\u50b3\u905e\u7d66<code>then()</code>\u8207<code>catch()</code>\u4e4b\u5f8c\u5c31\u6703\u7acb\u5373\u7d50\u675f(upon finishing)</li> </ul> </li> <li>\u6709\u54ea\u4e9bJavascript\u7684APIs\u6703\u4f7f\u7528\u5230<code>Promise</code>\u7269\u4ef6\u5462?<ul> <li>\u5728\u6211\u5011\u81ea\u5df1\u7684\u7a0b\u5f0f\u78bc\u6216\u662f\u51fd\u5f0f\u5eab(library)\u7684\u7a0b\u5f0f\u78bc\u4e2d,\u6a19\u6e96\u7684\u73fe\u4ee3\u5316Web APIs\u4e5f\u6703\u4f7f\u7528\u5230<code>Promise</code>\u7269\u4ef6,\u50cf\u662f\u4ee5\u4e0b3\u7a2eWeb APIs</li> <li>the Battery API</li> <li>the Fetch API</li> <li>Service Workers</li> <li>\u5728\u73fe\u4ee3\u5316\u7684Javascript\u4e2d,\u6211\u5011\u4e0d\u592a\u53ef\u80fd\u6703\u767c\u73fe\u81ea\u5df1\u6c92\u6709\u5728\u4f7f\u7528<code>Promise</code>\u7269\u4ef6,\u6240\u4ee5\u8b93\u6211\u5011\u958b\u59cb\u6df1\u5165\u947d\u7814\u5b83\u5427!</li> </ul> </li> <li>\u5275\u9020\u4e00\u500b\u627f\u8afe\u7269\u4ef6</li> <li><code>Promise</code>\u7269\u4ef6API\u6703\u516c\u958b(exposes)\u4e00\u500b\u5efa\u69cb\u5b50(constructor),\u6211\u5011\u53ef\u4ee5\u4f7f\u7528<code>new Promise()</code>\u7684\u8a9e\u6cd5\u4f86\u521d\u59cb\u5316\u4e00\u500b<code>Promise</code>\u7269\u4ef6       JavaScript<pre><code>let done = true\nconst isItDoneYet = new Promise((resolve, reject) =&gt; {\nif (done) {\nconst workDone = 'Here is the thing I built'\nresolve(workDone)\n} else {\nconst why = 'Still working on something else'\nreject(why)\n}\n})\n</code></pre><ul> <li>\u5982\u6211\u5011\u6240\u898b,\u9019\u500b<code>Promise</code>\u7269\u4ef6\u6703\u6aa2\u67e5\u5168\u57df\u7684<code>done</code>\u5e38\u6578(global constant),\u800c\u5982\u679c<code>done</code>\u9019\u500b\u5168\u57df\u5e38\u6578\u7684\u503c\u70ba<code>true</code>\u7684\u8a71,\u5247<code>Promise</code>\u7269\u4ef6\u5c31\u6703\u9032\u5165\u5df2\u89e3\u6c7a\u7684\u72c0\u614b(resolved state) (\u7531\u65bc<code>resolve</code>\u56de\u547c\u51fd\u5f0f\u5df2\u7d93\u88ab\u547c\u53eb); \u5426\u5247,<code>reject</code>\u56de\u547c\u51fd\u5f0f\u5c31\u6703\u88ab\u57f7\u884c,\u4e26\u5c07<code>Promise</code>\u7269\u4ef6\u8b8a\u6210\u88ab\u62d2\u7d55\u7684\u72c0\u614b(rejected state)<ul> <li>\u800c\u5982\u679c\u4e0a\u8ff0\u76842\u7a2e\u51fd\u5f0f(<code>resolve</code> callback function &amp; <code>reject</code> callback function)\u90fd\u6c92\u6709\u88ab\u547c\u53eb\u7684\u8a71,<code>Promise</code>\u7269\u4ef6\u5c31\u6703\u7dad\u6301\u70ba\u5f85\u8655\u7406\u72c0\u614b(<code>pending</code> state)</li> </ul> </li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528<code>resolve</code>\u8207<code>reject</code>\u5169\u500b\u8a9e\u6cd5\u4f86\u5c07<code>Promise</code>\u7269\u4ef6\u7684\u7d50\u679c\u72c0\u614b(resulting state) &amp; \u5c07\u5982\u4f55\u8655\u7406\u7684\u65b9\u6cd5 \u56de\u50b3\u7d66\u547c\u53eb\u65b9(caller)\u3002\u5728\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011\u50c5\u56de\u50b3\u4e00\u500b\u5b57\u4e32(string),\u4f46\u5176\u5be6\u4e5f\u53ef\u4ee5\u56de\u50b3\u4e00\u500b\u7269\u4ef6(object)\u6216\u751a\u81f3\u662f<code>null</code></li> <li>\u56e0\u70ba\u6211\u5011\u5df2\u7d93\u5728\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6458\u9304(snippet)\u4e2d,\u5efa\u7acb\u4e86\u4e00\u500b<code>Promise</code>\u7269\u4ef6,\u56e0\u6b64\u5b83\u5df2\u7d93\u958b\u59cb\u57f7\u884c\u4e86\u3002\u9019\u5c07\u6703\u6709\u52a9\u65bc\u6211\u5011\u4e86\u89e3\u4ee5\u4e0b\u7684\"\u5982\u4f55\u4f7f\u7528<code>Promise</code>\u7269\u4ef6\"\u7ae0\u7bc0</li> </ul> </li> <li>\u53e6\u4e00\u500b\u6211\u5011\u53ef\u80fd\u6703\u78b0\u5230\u7684\u66f4\u5e38\u898b\u505a\u6cd5\u662f\u4e00\u7a2e\u88ab\u7a31\u70ba Promisifying \u7684\u6280\u8853\u3002\u9019\u7a2e\u6280\u8853\u662f\u4e00\u500b\u80fd\u5920\u4f7f\u7528\u53e4\u5178\u7684Javascript\u51fd\u5f0f\u4f86\u63a5\u6536(takes)\u4e00\u500b\u56de\u547c\u51fd\u5f0f(callback),\u4e26\u4f7f\u5176\u56de\u50b3\u4e00\u500b<code>Promise</code>\u7269\u4ef6     JavaScript<pre><code>const fs = require('fs')\nconst getFile = (fileName) =&gt; {\nreturn new Promise((resolve, reject) =&gt; {\nfs.readFile(fileName, (err, data) =&gt; {\nif (err) {\nreject (err)  // calling `reject` will cause the promise to fail with or without the error passed as an argument\nreturn        // and we don't want to go any further\n}\nresolve(data)\n})\n})\n}\ngetFile('/etc/passwd')\n.then(data =&gt; console.log(data))\n.catch(err =&gt; console.error(err))\n</code></pre></li> <li>\u88dc\u5145: \u5728\u6700\u8fd1\u7684Node\u7248\u672c\u4e2d,\u6211\u5011\u4e0d\u9700\u8981\u70ba\u8a31\u591a\u7684API\u9032\u884c\u624b\u52d5\u8f49\u63db(manual conversion)\u3002\u5047\u8a2d\u6211\u5011\u8981\u4f7f\u7528\u7684 Promisifying \u6280\u8853\u6709\u6b63\u78ba\u7684\u7c3d\u540d(correct signature)\u7684\u8a71,\u5728Node\u7684\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Util</code>\u4e2d\u6709\u4e00\u500b\u65b9\u6cd5\u53eb\u505autil.promisify(original)\u53ef\u4ee5\u4f7f\u7528,\u4f86\u5e6b\u52a9\u6211\u5011\u5be6\u73fe Promisifying \u6280\u8853</li> <li>\u4f7f\u7528<code>Promise</code>\u7269\u4ef6</li> <li>\u5728\u4e0a\u4e00\u500b\u7ae0\u7bc0\u4e2d,\u6211\u5011\u4ecb\u7d39\u4e86\u4e00\u500b<code>Promise</code>\u7269\u4ef6\u662f\u5982\u4f55\u88ab\u5efa\u7acb\u7684?</li> <li>\u73fe\u5728,\u6211\u5011\u8981\u4f86\u770b\u4e00\u500b<code>Promise</code>\u7269\u4ef6\u662f\u5982\u4f55\u88ab\u4f7f\u7528\u7684(used)   JavaScript<pre><code>const isItDoneYet = new Promise(/* ... as above ... */)\n//...\n//no errors, process data\nconsole.log(data)\n</code></pre></li> <li>\u56de\u547c\u51fd\u5f0f\u7684\u554f\u984c(The problem with callbacks)</li> <li>\u56de\u547c\u51fd\u5f0f(Callbacks)\u5f88\u9069\u5408\u7528\u65bc\u7c21\u55ae\u7684\u60c5\u5883\u4e2d</li> <li>\u7136\u800c\u6bcf\u4e00\u500b\u56de\u547c\u51fd\u5f0f\u90fd\u6703\u589e\u52a0\u4e00\u5c64\u5de2\u72c0(nesting),\u9019\u6642\u5019\u5982\u679c\u6211\u5011\u6709\u5f88\u591a\u7684\u56de\u547c\u51fd\u5f0f(callbacks),\u7a0b\u5f0f\u78bc\u5f88\u5feb\u5730\u5c31\u6703\u958b\u59cb\u8b8a\u5f97\u8907\u96dc     JavaScript<pre><code>window.addEventListener('load', () =&gt; {\ndocument.getElementById('button').addEventListener('click', () =&gt; {\nsetTimeout(() =&gt; {\nitems.forEach(item =&gt; {\n//your code here\n})\n}, 2000)\n})\n})\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u53ea\u662f4\u5c64\u7684\u7a0b\u5f0f\u78bc,\u4f46\u662f\u53ef\u80fd\u6703\u6709\u66f4\u591a\u5c64\u7684\u7a0b\u5f0f\u78bc,\u9019\u6a23\u5c31\u4e0d\u597d\u73a9\u4e86</li> <li>\u90a3\u6211\u5011\u8a72\u600e\u9ebc\u89e3\u6c7a\u9019\u500b\u554f\u984c\u5462?</li> </ul> </li> <li>\u56de\u547c\u51fd\u5f0f\u7684\u66ff\u4ee3\u65b9\u6848(Alternatives to callbacks)</li> <li>\u5f9eES6\u958b\u59cb ,Javascript\u7a0b\u5f0f\u8a9e\u8a00\u958b\u59cb\u5f15\u9032(introduced)\u4e86\u8a31\u591a\u80fd\u5920\u4e0d\u6d89\u53ca(do not involve)\u4f7f\u7528\u56de\u547c\u51fd\u5f0f(callbacks)\u4f86\u8655\u7406\u975e\u540c\u6b65(asynchronous)\u7a0b\u5f0f\u78bc\u7684\u529f\u80fd,\u4f8b\u5982\u4ee5\u4e0b2\u7a2e\u529f\u80fd<ul> <li><code>Promise</code>\u7269\u4ef6 (ES6)</li> <li><code>Async/Await</code>\u8a9e\u6cd5 (ES8)   JavaScript<pre><code>const checkIfItsDone = () =&gt; {\nisItDoneYet\n.then(ok =&gt; {\nconsole.log(ok)\n})\n.catch(err =&gt; {\nconsole.error(err)\n})\n}\n</code></pre></li> <li>\u57f7\u884c<code>checkIfItsDone()</code>\u65b9\u6cd5\u5c07\u6703\u6307\u5b9a(specify),\u7576<code>isItDoneYet</code>\u9019\u500b<code>Promise</code>\u7269\u4ef6\u5728</li> <li>\u5df2\u89e3\u6c7a\u7684\u72c0\u614b(resolves)\u6642,\u6703\u57f7\u884c<code>then()</code>\u65b9\u6cd5\u88e1\u9762\u7684\u51fd\u5f0f</li> <li>\u6216\u662f</li> <li>\u88ab\u62d2\u7d55\u7684\u72c0\u614b(rejects)\u6642,\u6703\u57f7\u884c<code>catch()</code>\u65b9\u6cd5\u88e1\u9762\u7684\u51fd\u5f0f</li> </ul> </li> <li>\u9023\u9396<code>Promise</code>\u7269\u4ef6(Chaining promises)</li> <li>\u4e00\u500b<code>Promise</code>\u7269\u4ef6\u53ef\u4ee5\u88ab\u56de\u50b3\u7d66\u53e6\u4e00\u500b<code>Promise</code>\u7269\u4ef6,\u4f86\u5275\u9020\u51fa\u4e00\u4e32\u9023\u9396<code>Promise</code>\u7269\u4ef6(a chain of promises)</li> <li>Fetch API\u5c31\u662f\u4e00\u500b\u5f88\u597d\u7684\u9023\u9396<code>Promise</code>\u7269\u4ef6\u7684\u4f8b\u5b50\u3002<code>Fetch API</code>\u80fd\u8b93\u6211\u5011\u7372\u53d6\u8cc7\u6e90(get a resource)\u4e26\u4e14\u7576\u8cc7\u6e90\u88ab\u7372\u53d6(fetched)\u6642,\u5c07\u9023\u9396<code>Promise</code>\u7269\u4ef6(a chain of promises)\u6392\u968a(queue)\u5f8c\u57f7\u884c(execute)<ul> <li><code>Fetch API</code>\u662f\u4e00\u500b\u57fa\u65bc<code>Promise</code>\u7269\u4ef6\u7684\u6a5f\u5236(mechanism),\u547c\u53eb<code>fetch()</code>\u65b9\u6cd5\u76f8\u7576\u65bc\u900f\u904e<code>new Promise()</code>\u5efa\u69cb\u5b50\u4f86\u5efa\u7acb\u51fa\u4e00\u500b\u5c6c\u65bc\u6211\u5011\u81ea\u5b9a\u7fa9\u7684<code>Promise</code>\u7269\u4ef6   JavaScript<pre><code>const status = response =&gt; {\nif (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) {\nreturn Promise.resolve(response)\n}\nreturn Promise.reject(new Error(response.statusText))\n}\nconst json = response =&gt; response.json()\nfetch('/todos.json')\n.then(status)    // note that the `status` function is actually **called** here, and that it **returns a promise**\n.then(json)      // likewise, the only difference here is that the `json` function here returns a promise that resolves with `data`\n.then(data =&gt; {  // ... which is why `data` shows up here as the first parameter to the anonymous function\nconsole.log('Request succeeded with JSON response', data)\n})\n.catch(error =&gt; {\nconsole.log('Request failed', error)\n})\n</code></pre></li> <li>\u5728\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011\u547c\u53eb\u4e86<code>fetch()</code>\u65b9\u6cd5,\u5f9e\u6839\u76ee\u9304\u4e2d\u7684<code>todos.json</code>\u9019\u500b\u6a94\u6848\u4e2d\u4f86\u7372\u5f97\u4e00\u500b\u5f85\u8fa6\u6e05\u55ae(a list of TODO items),\u63a5\u8457\u6211\u5011\u5c31\u5efa\u7acb\u51fa\u4e00\u4e32\u9023\u9396<code>Promise</code>\u7269\u4ef6(a chain of promises)</li> <li>\u57f7\u884c<code>fetch()</code>\u65b9\u6cd5\u6703\u56de\u50b3\u4e00\u500bresponse\u7269\u4ef6,\u5b83\u5177\u6709\u8a31\u591a\u5c6c\u6027(properties),\u6211\u5011\u6709\u53c3\u8003(reference)\u7684\u5c6c\u6027\u6709\u4ee5\u4e0b2\u7a2e<ul> <li><code>reponse.status</code>: \u4e00\u500b\u4ee3\u8868HTTP\u72c0\u614b\u78bc(status code)\u7684\u6578\u503c(numeric value)</li> <li><code>response.statusText</code>: \u4e00\u500b\u72c0\u614b\u8a0a\u606f,\u5982\u679c\u662f<code>'OK'</code>\u5247\u8868\u793a\u8a72\u8acb\u6c42\u6210\u529f(request succeeded)</li> </ul> </li> <li>\u81ea\u5b9a\u7fa9\u7684: <code>response</code>\u7269\u4ef6\u4e5f\u6709<code>response.json()</code>\u65b9\u6cd5,\u53ef\u4ee5\u56de\u50b3\u4e00\u500b<code>Promise</code>\u7269\u4ef6,\u9019\u500b\u65b9\u6cd5\u53ef\u4ee5\u7528\u4f86\u8655\u7406\u5167\u6587(the content of the body),\u4e26\u8f49\u63db\u6210<code>JSON</code>\u683c\u5f0f</li> <li>\u6240\u4ee5\u8003\u616e\u5230\u9019\u4e9b\u524d\u63d0(premises),\u5c31\u6703\u767c\u751f\u9019\u7a2e\u60c5\u6cc1,\u4e00\u4e32\u9023\u9396<code>Promise</code>\u7269\u4ef6\u4e2d\u7684\u7b2c\u4e00\u500b<code>Promise</code>\u7269\u4ef6\u662f\u6211\u5011\u5b9a\u7fa9\u7684<code>status()</code>\u51fd\u5f0f,\u8a72\u51fd\u5f0f\u7528\u4f86\u6aa2\u67e5\u56de\u61c9\u7684\u72c0\u614b(reponse status),\u82e5\u9019\u500b\u56de\u61c9\u72c0\u614b\u78bc\u4e0d\u662f\u6210\u529f\u7684(= <code>200</code>~<code>299</code>),\u8a72\u51fd\u5f0f\u5c31\u6703\u62d2\u7d55(rejects)\u9019\u500b<code>Promise</code>\u7269\u4ef6<ul> <li>\u6b64\u64cd\u4f5c(operation)\u5c07\u6703\u5c0e\u81f4\u6574\u500b\u8a72<code>Promise</code>\u7269\u4ef6\u6703\u8df3\u904e\u5217\u51fa\u7684(listed)\u6240\u6709\u9023\u9396<code>Promise</code>\u7269\u4ef6\u93c8,\u4e26\u76f4\u63a5\u8df3\u5230\u4e0b\u9762\u7684<code>catch()</code>\u9673\u8ff0\u53e5,\u8a72\u51fd\u5f0f\u6703\u8a18\u9304\u8acb\u6c42\u5931\u6557(<code>Request failed</code>)\u7684\u6587\u672c(text) &amp; \u932f\u8aa4\u8a0a\u606f(error message)</li> </ul> </li> <li>\u5982\u679c\u6211\u5011\u81ea\u5b9a\u7fa9\u7684<code>status()</code>\u51fd\u5f0f\u56de\u50b3\u7684\u56de\u61c9\u72c0\u614b\u78bc\u662f\u6210\u529f\u7684\u8a71,\u5b83\u6703\u547c\u53eb\u6211\u5011\u81ea\u5b9a\u7fa9\u7684<code>repsonse.json()</code>\u51fd\u5f0f\u3002\u7531\u65bc\u524d\u4e00\u500b(previous)<code>Promise</code>\u7269\u4ef6\u5728\u8acb\u6c42\u6210\u529f(successful)\u5f8c\u6703\u56de\u50b3\u4e00\u500b<code>response</code>\u7269\u4ef6,\u6211\u5011\u6703\u5c07\u9019\u500b<code>response</code>\u7269\u4ef6\u4f5c\u70ba\u4e0b\u4e00\u500b<code>Promise</code>\u7269\u4ef6\u7684\u8f38\u5165(input)</li> <li>\u5728\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011\u6703\u56de\u50b3\u4e00\u500b\u7d93\u904e<code>response.json()</code>\u51fd\u5f0f\u8655\u7406\u904e(<code>JSON</code> processed)\u7684\u8cc7\u6599(data),\u56e0\u6b64\u7b2c\u4e09\u500b<code>Promise</code>\u7269\u4ef6\u5c31\u80fd\u76f4\u63a5\u6536\u5230(receives)\u9019\u500b<code>JSON</code>\u7269\u4ef6<ul> <li><code>js     .then((data) =&gt; {       console.log('Request succeeded with JSON response', data)     })</code></li> <li>\u63a5\u4e0b\u4f86,\u6211\u5011\u53ea\u8981\u5c07\u9019\u500b\u8a18\u9304\u5230\u63a7\u5236\u53f0(console)\u5373\u53ef</li> </ul> </li> </ul> </li> <li>\u8655\u7406\u932f\u8aa4(Handling errors)</li> <li>\u5728\u4e0a\u4e00\u7bc0\u7684\u7bc4\u4f8b\u4e2d,\u6211\u5011\u5728\u9023\u9396<code>Promise</code>\u7269\u4ef6\u93c8\u4e2d\u9644\u52a0\u4e86<code>catch()</code>\u51fd\u5f0f       JavaScript<pre><code>.catch(error =&gt; {\nconsole.log('Request failed', error)\n})\n</code></pre></li> <li>\u5982\u679c\u5728\u6574\u500b\u9023\u9396<code>Promise</code>\u7269\u4ef6\u93c8\u4e2d\u6709\u4efb\u4f55\u7684\u5931\u6557(fails)\u4e26\u5f15\u8d77(raises)\u4e00\u500b\u932f\u8aa4(error)\u6216\u662f\u88ab\u62d2\u7d55\u7684<code>Promise</code>\u7269\u4ef6,\u7a0b\u5f0f\u78bc\u7684\u6d41\u7a0b\u63a7\u5236\u6b0a(control)\u5c07\u6703\u8f49\u79fb\u5230\u6574\u500b\u9023\u9396<code>Promise</code>\u7269\u4ef6\u93c8\u4e0b\u9762\u4e14\u6700\u8fd1\u7684(nearest)<code>catch()</code>\u9673\u8ff0\u53e5       JavaScript<pre><code>new Promise((resolve, reject) =&gt; {\nthrow new Error('Error')\n}).catch(err =&gt; {\nconsole.error(err)\n})\n// or\nnew Promise((resolve, reject) =&gt; {\nreject('Error')\n}).catch(err =&gt; {\nconsole.error(err)\n})\n</code></pre></li> <li>\u4e32\u93c8\u932f\u8aa4(Cascading errors)<ul> <li>\u5982\u679c\u5728<code>catch()</code>\u9673\u8ff0\u53e5\u88e1\u9762,\u53c8\u5f15\u8d77(raises)\u4e86\u4e00\u500b\u932f\u8aa4(error),\u6211\u5011\u53ef\u4ee5\u518d\u9644\u52a0\u7b2c2\u500b<code>catch()</code>\u51fd\u5f0f\u4f86\u8655\u7406\u8a72\u932f\u8aa4(error),\u4ee5\u6b64\u985e\u63a8   JavaScript<pre><code>new Promise((resolve, reject) =&gt; {\nthrow new Error('Error')\n})\n.catch(err =&gt; {\nthrow new Error('Error')\n})\n.catch(err =&gt; {\nconsole.error(err)\n})\n</code></pre></li> </ul> </li> <li>\u7de8\u6392<code>Promise</code>\u7269\u4ef6(Orchestrating promises)</li> <li>Promise.all(iterable)<ul> <li>\u5982\u679c\u6211\u5011\u60f3\u8981\u540c\u6b65\u5316(synchronize)\u4e0d\u540c\u7684<code>Promise</code>\u7269\u4ef6,<code>Promise.all()</code>\u65b9\u6cd5\u53ef\u4ee5\u5b9a\u7fa9\u4e00\u500b<code>Promise</code>\u7269\u4ef6\u7684\u6e05\u55ae(list),\u4e26\u5728\u5168\u90e8\u7684<code>Promise</code>\u7269\u4ef6\u90fd\u88ab\u89e3\u6c7a(all resolved)\u5f8c,\u57f7\u884c\u4e00\u4e9b\u64cd\u4f5c JavaScript<pre><code>const f1 = fetch('/something.json')\nconst f2 = fetch('/something2.json')\nPromise.all([f1, f2])\n.then(res =&gt; {\nconsole.log('Array of results', res)\n})\n.catch(err =&gt; {\nconsole.error(err)\n})\n</code></pre></li> <li>\u6211\u5011\u53ef\u4ee5\u4f7f\u7528ES6(= ES2015)\u5f15\u9032\u7684\u89e3\u69cb\u6307\u6d3e\u8a9e\u6cd5(destructuring assignment syntax)\u4f86\u9019\u6a23\u505a     JavaScript<pre><code>Promise.all([f1, f2]).then(([res1, res2]) =&gt; {\nconsole.log('Results', res1, res2)\n})\n</code></pre></li> <li>\u7576\u7136,\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528fetch() API\u4f86\u5be6\u4f5c, \u4efb\u4f55<code>Promise</code>\u7269\u4ef6\u90fd\u53ef\u4ee5\u4f7f\u7528<code>Promise.all()</code>\u65b9\u6cd5</li> </ul> </li> <li>Promise.race(iterable)<ul> <li>\u7576\u6211\u5011\u5c07\u50b3\u905e\u7d66<code>Promise.race()</code>\u65b9\u6cd5\u7684\u7b2c1\u500b<code>Promise</code>\u7269\u4ef6\u88ab\u89e3\u6c7a(resolved)\u6642,\u6703\u57f7\u884c\u8a72\u65b9\u6cd5,\u4e26\u4e14\u5b83\u53ea\u6703\u57f7\u884c\u5176\u9644\u52a0\u7684\u56de\u547c\u51fd\u5f0f(attached callback)\"\u4e00\u6b21\",\u4e26\u89e3\u6c7a\u7b2c1\u500b<code>Promise</code>\u7269\u4ef6\u7684\u7d50\u679c JavaScript<pre><code>const first = new Promise((resolve, reject) =&gt; {\nsetTimeout(resolve, 500, 'first')\n})\nconst second = new Promise((resolve, reject) =&gt; {\nsetTimeout(resolve, 100, 'second')\n})\nPromise.race([first, second]).then(result =&gt; {\nconsole.log(result) // second\n})\n</code></pre></li> </ul> </li> <li>\u5e38\u898b\u7684\u932f\u8aa4(Common errors)</li> <li>\u672a\u6355\u7372\u7684\u578b\u5225\u932f\u8aa4: <code>undefined</code>\u4e0d\u662f\u4e00\u500b<code>Promise</code>\u7269\u4ef6(Uncaught TypeError: undefined is not a promise)<ul> <li>\u5982\u679c\u5728\u63a7\u5236\u53f0(console)\u5f97\u5230\u6b64\u932f\u8aa4(error)\u6642,\u53ef\u4ee5\u53bb\u78ba\u8a8d\u4e00\u4e0b\u6211\u5011\u662f\u4f7f\u7528<code>new Promise()</code>\u8a9e\u6cd5\u4f86\u5efa\u7acb\u4e00\u500b\u65b0\u7684<code>Promise</code>\u7269\u4ef6,\u800c\"\u4e0d\u662f\"\u4f7f\u7528<code>Promise()</code>\u8a9e\u6cd5</li> </ul> </li> <li>\u672a\u8655\u7406\u7684\u88ab\u62d2\u7d55\u7684<code>Promise</code>\u7269\u4ef6\u8b66\u544a(UnhandledPromiseRejectionWarning)<ul> <li>\u9019\u500b\u932f\u8aa4\u8868\u793a\u6211\u5011\u547c\u53eb\u7684<code>Promise</code>\u7269\u4ef6\u88ab\u62d2\u7d55(rejected)\u4e86,\u4f46\u9019\u6642\u5019\u627e\u4e0d\u5230\u4efb\u4f55\u4e00\u500b<code>catch()</code>\u9673\u8ff0\u5f0f\u4f86\u8655\u7406\u9019\u500b\u932f\u8aa4(error)\u3002\u9019\u6642,\u6211\u5011\u53ef\u4ee5\u65b0\u589e\u4e00\u500b<code>catch()</code>\u9673\u8ff0\u5f0f\u5728\u5f15\u8d77\u554f\u984c(offending)\u7684<code>then()</code>\u65b9\u6cd5\u7684\u5f8c\u9762\u4f86\u9069\u7576\u5730(properly)\u8655\u7406\u9019\u500b\u932f\u8aa4(error)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#modern-asynchronous-javascript-with-async-and-await","title":"Modern Asynchronous JavaScript with Async and Await","text":"<ul> <li>\u4ecb\u7d39</li> <li>Javascript\u5728\u5f88\u77ed\u7684\u6642\u9593\u5167\u5f9e\u56de\u547c\u51fd\u5f0f(callbacks)\u767c\u5c55\u6210<code>Promise</code>\u7269\u4ef6(=&gt; \u5f9eES6\u5f15\u5165\u7684),\u518d\u6f14\u8b8a\u6210<code>async/await</code>\u8a9e\u6cd5(=&gt; \u5f9eES8\u5f15\u5165\u7684),\u4f86\u4f7fJavascript\u7684\u975e\u540c\u6b65(asynchronous)\u8a9e\u6cd5\u66f4\u7c21\u5316\u4e86</li> <li>\u975e\u540c\u6b65\u51fd\u5f0f(Async functions)\u662f\u7531<code>Promise</code>\u7269\u4ef6\u5011 &amp; \u751f\u6210\u5668(generators)\u7684\u7d50\u5408(combination)\u3002\u57fa\u672c\u4e0a,\u5b83\u5011\u7b97\u662f\u4e00\u7a2e\u66f4\u9ad8\u968e\u7684<code>Promise</code>\u7269\u4ef6\u7684\u62bd\u8c61(abstraction)</li> <li>\u8b93\u6211\u518d\u91cd\u8907\u4e00\u6b21,<code>async/await</code>\u8a9e\u6cd5\u662f\u5efa\u7acb\u5728<code>Promise</code>\u7269\u4ef6\u7684\u57fa\u790e\u4e4b\u4e0a\u7684</li> <li>\u70ba\u4ec0\u9ebc<code>async/await</code>\u8a9e\u6cd5\u6703\u88ab\u5f15\u9032(introduced)\u5462?</li> <li><code>async/await</code>\u8a9e\u6cd5\u80fd\u6e1b\u5c11\u95dc\u65bc<code>Promise</code>\u7269\u4ef6\u7684\u6a23\u677f(boilerplate),\u4e26\u4e14\u53ef\u4ee5\u6253\u7834(break) \"\u4e0d\u80fd\u7834\u58de<code>Promise</code>\u7269\u4ef6\u93c8\" \u7684\u9019\u500b\u9650\u5236(limitation)</li> <li>\u7576<code>Promise</code>\u7269\u4ef6\u5728ES6\u958b\u59cb\u5f15\u5165(introduced)\u6642,\u5b83\u5011\u65e8\u5728\u89e3\u6c7a\u975e\u540c\u6b65\u7a0b\u5f0f\u78bc(asynchronous code)\u7684\u554f\u984c,\u7576\u7136<code>Promise</code>\u7269\u4ef6\u6709\u5b8c\u6210\u9019\u500b\u76ee\u6a19\u4e86\u3002\u4f46\u662f\u5728\u63a5\u4e0b\u4f86\u76842\u5e74\u5167(=&gt; ES6~ES8),<code>Promise</code>\u7269\u4ef6\u5f88\u660e\u986f\u5730,\u4e0d\u80fd\u4f5c\u70ba\u6700\u5f8c\u7684\u89e3\u6c7a\u65b9\u6848(final solution)</li> <li><code>Promise</code>\u7269\u4ef6\u7684\u5f15\u5165(introduced)\u662f\u7528\u4f86\u89e3\u6c7a(solve)\u8457\u540d\u7684\u56de\u547c\u5730\u7344(callback hell)\u554f\u984c\u3002\u4f46\u662f<code>Promise</code>\u7269\u4ef6\u81ea\u5df1\u672c\u8eab\u4e5f\u5f15\u5165\u4e86\u8907\u96dc\u6027\u8207\u8a9e\u6cd5\u8907\u96dc\u6027(syntax complexity)<ul> <li>\u5b83\u5011\u662f\u5f88\u597d\u7684\u539f\u8a9e(primitives),\u53ef\u4ee5\u5411\u958b\u767c\u4eba\u54e1\u516c\u958b\u66f4\u597d\u7684\u8a9e\u6cd5\u3002\u56e0\u6b64,\u7576\u6642\u6a5f\u5408\u9069\u6642,\u6211\u5011\u5c31\u80fd\u958b\u59cb\u4f7f\u7528<code>async/await</code>\u8a9e\u6cd5</li> </ul> </li> <li><code>async/await</code>\u8a9e\u6cd5\u80fd\u8b93\u7a0b\u5f0f\u78bc\"\u770b\u8d77\u4f86\"\u662f\u540c\u6b65\u7684(synchronous), \u4f46\u662f\u5728\u80cc\u666f\u4e2d(behind the scenes)\u5b83\u5011\u662f\u975e\u540c\u6b65\u7684(asynchronous)\u4e14\u975e\u963b\u585e\u7684(non-blocking)</li> <li>\u9019\u662f\u5982\u4f55\u904b\u4f5c\u7684\u5462?</li> <li>\u4e00\u500b\u975e\u540c\u6b65\u51fd\u5f0f(async function)\u6703\u56de\u50b3\u4e00\u500b<code>Promise</code>\u7269\u4ef6,\u5982\u540c\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const doSomethingAsync = () =&gt; {\nreturn new Promise(resolve =&gt; {\nsetTimeout(() =&gt; resolve('I did something'), 3000)\n})\n}\n</code></pre><ul> <li>\u5982\u679c\u6211\u5011\u60f3\u8981\u547c\u53eb\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u51fd\u5f0f\u7684\u8a71,\u5c31\u8981\u524d\u7f6e(prepend) <code>await</code>\u8a9e\u6cd5\u4f86\u547c\u53eb,\u4e26\u4e14\u547c\u53eb\u7684\u7a0b\u5f0f\u78bc\u6703\u76f4\u5230\u7576\u8a72<code>Promise</code>\u7269\u4ef6\u88ab\u89e3\u6c7a(resolved)\u6216\u662f\u88ab\u62d2\u7d55(rejected)\u5f8c\u624d\u6703\u505c\u6b62</li> </ul> </li> <li>\u8b66\u544a(caveat): \u5ba2\u6236\u7aef\u51fd\u5f0f(client function)\u5fc5\u9808\u5b9a\u7fa9\u70ba(defined as)\u975e\u540c\u6b65\u51fd\u5f0f(async function) JavaScript<pre><code>const doSomething = async () =&gt; {\nconsole.log(await doSomethingAsync())\n}\n</code></pre></li> <li>\u4e00\u500b\u5feb\u901f\u7684\u7bc4\u4f8b</li> <li>\u4ee5\u4e0b\u662f\u4e00\u500b\u95dc\u65bc<code>async/await</code>\u8a9e\u6cd5\u7684\u5feb\u901f\u7bc4\u4f8b,\u4ee5\u975e\u540c\u6b65(asynchronous)\u7684\u65b9\u5f0f\u4f86\u57f7\u884c\u51fd\u5f0f(function)     JavaScript<pre><code>const doSomethingAsync = () =&gt; {\nreturn new Promise(resolve =&gt; {\nsetTimeout(() =&gt; resolve('I did something'), 3000)\n})\n}\nconst doSomething = async () =&gt; {\nconsole.log(await doSomethingAsync())\n}\nconsole.log('Before')\ndoSomething()\nconsole.log('After')\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\"\u4f9d\u5e8f\"\u56de\u50b3</li> <li>Before</li> <li>After</li> <li>I did something</li> </ul> </li> <li>Promise all the things</li> <li>\u5728\u4efb\u4f55\u51fd\u5f0f\u524d\u7f6e(prepending) <code>async</code>\u95dc\u9375\u5b57(keyword)\u8868\u793a\u8a72\u51fd\u5f0f(function)\u6703\u56de\u50b3\u4e00\u500b<code>Promise</code>\u7269\u4ef6<ul> <li>\u5373\u4f7f<code>async function</code>\u770b\u8d77\u4f86\u6c92\u6709\u660e\u78ba\u5730\u9019\u9ebc\u505a,\u4f46\u662f\u5728\u5176\u5167\u90e8(internally)\u6703\u56de\u50b3\u4e00\u500b<code>Promise</code>\u7269\u4ef6</li> </ul> </li> <li>\u9019\u4e5f\u5c31\u662f\u70ba\u4ec0\u9ebc\u4ee5\u4e0b\u7684\u9019\u6bb5\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u662f\u6709\u6548\u7684(valid)     JavaScript<pre><code>const aFunction = async () =&gt; {\nreturn 'test'\n}\naFunction().then(alert) // This will alert 'test'\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e5f\u76f8\u7576\u65bc\u4e0b\u9762\u9019\u6bb5\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>const aFunction = () =&gt; {\nreturn Promise.resolve('test')\n}\naFunction().then(alert) // This will alert 'test'\n</code></pre></li> </ul> </li> <li>\u7a0b\u5f0f\u78bc\u4e5f\u6703\u8b8a\u5f97\u66f4\u5bb9\u6613\u95b1\u8b80</li> <li>\u5982\u540c\u4e0a\u4e00\u500b\u7ae0\u7bc0\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u9019\u6b21\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u770b\u8d77\u4f86\u975e\u5e38\u7c21\u55ae\u3002\u5f9e\u7a0b\u5f0f\u78bc\u7684\u6bd4\u8f03\u4e2d\u53ef\u4ee5\u770b\u51fa,\u4f7f\u7528<code>Promise</code>\u7269\u4ef6,\u4e26\u642d\u914d<code>Promise</code>\u7269\u4ef6\u93c8\u8207\u56de\u547c\u51fd\u5f0f(callback functions)\u53ef\u4ee5\u8b93\u7a0b\u5f0f\u78bc\u8b8a\u5f97\u66f4\u7c21\u6f54</li> <li>\u4ee5\u4e0b\u662f2\u500b\u975e\u5e38\u7c21\u55ae\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u7684\u6bd4\u8f03,\u7576\u7a0b\u5f0f\u78bc\u958b\u59cb\u8b8a\u5f97\u8907\u96dc\u7684\u6642\u5019,\u4f7f\u7528<code>async/await</code>\u8a9e\u6cd5\u80fd\u5e36\u4f86\u5f88\u591a\u597d\u8655<ul> <li>\u9019\u662f\u5229\u7528<code>Promise</code>\u7269\u4ef6\u7372\u5f97\u4e00\u500b<code>JSON</code>\u8cc7\u6e90,\u89e3\u6790(parse)\u5b83   JavaScript<pre><code>const getFirstUserData = () =&gt; {\nreturn fetch('/users.json') // get users list\n.then(response =&gt; response.json()) // parse JSON\n.then(users =&gt; users[0]) // pick first user\n.then(user =&gt; fetch(`/users/${user.name}`)) // get user data\n.then(userResponse =&gt; userResponse.json()) // parse JSON\n}\ngetFirstUserData()\n</code></pre></li> <li>\u9019\u662f\u5229\u7528<code>async/await</code>\u8a9e\u6cd5\u63d0\u4f9b\u7684\u76f8\u540c\u529f\u80fd   JavaScript<pre><code>const getFirstUserData = async () =&gt; {\nconst response = await fetch('/users.json') // get users list\nconst users = await response.json() // parse JSON\nconst user = users[0] // pick first user\nconst userResponse = await fetch(`/users/${user.name}`) // get user data\nconst userData = await userResponse.json() // parse JSON\nreturn userData\n}\ngetFirstUserData()\n</code></pre></li> </ul> </li> <li>\u591a\u500b\u975e\u540c\u6b65\u51fd\u5f0f\u7684\u4e32\u9023(Multiple async functions in series)</li> <li>\u975e\u540c\u6b65\u51fd\u5f0f(async function)\u53ef\u4ee5\u5f88\u7c21\u55ae\u5730\u88ab\u4e32\u9023,\u4e26\u4e14\u8a9e\u6cd5\u4e0a\u6bd4\u8d77\u55ae\u7d14\u7684(plain)<code>Promise</code>\u7269\u4ef6\u7684\u8a9e\u6cd5\u66f4\u5bb9\u6613\u95b1\u8b80(much more readable)     JavaScript<pre><code>const promiseToDoSomething = () =&gt; {\nreturn new Promise(resolve =&gt; {\nsetTimeout(() =&gt; resolve('I did something'), 10000)\n})\n}\nconst watchOverSomeoneDoingSomething = async () =&gt; {\nconst something = await promiseToDoSomething()\nreturn something + '\\nand I watched'\n}\nconst watchOverSomeoneWatchingSomeoneDoingSomething = async () =&gt; {\nconst something = await watchOverSomeoneDoingSomething()\nreturn something + '\\nand I watched as well'\n}\nwatchOverSomeoneWatchingSomeoneDoingSomething().then(res =&gt; {\nconsole.log(res)\n})\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\"\u4f9d\u5e8f\"\u56de\u50b3</li> <li>I did something</li> <li>and I watched</li> <li>and I watched as well</li> </ul> </li> <li>\u66f4\u5bb9\u6613\u5730\u9664\u932f(Easier debugging)</li> <li>\u8981\u9664\u932f(debugging)<code>Promise</code>\u7269\u4ef6\u662f\u56f0\u96e3\u7684,\u56e0\u70ba\u9664\u932f\u5668(debugger)\u4e0d\u6703\u8df3\u904e(step over)\u975e\u540c\u6b65\u7a0b\u5f0f\u78bc(asynchronous code)</li> <li><code>async/await</code>\u8a9e\u6cd5\u8b93\u9664\u932f(debug)\u8b8a\u5f97\u66f4\u5bb9\u6613,\u56e0\u70ba\u5c0d\u65bc\u7de8\u8b6f\u5668(compiler)\u4f86\u8aaa,\u9019\u5c31\u50cf\u662f\u540c\u6b65\u7a0b\u5f0f\u78bc(synchronous code)</li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-event-emitter","title":"The Node.js Event emitter","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Events</p> <ul> <li>\u5982\u679c\u6211\u5011\u5728\u700f\u89bd\u5668\u4f7f\u7528Javascript\u5de5\u4f5c,\u5c31\u6703\u77e5\u9053\u900f\u904e\u591a\u5c11\u4e8b\u4ef6(through events)\u4f86\u8ddf\u4f7f\u7528\u8005\u9032\u884c\u4e92\u52d5(interaction),\u50cf\u662f<code>mouse click</code>, <code>keyboard button presses</code>, <code>reacting to mouse movements</code>, ...\u7b49\u7b49</li> <li>\u5728\u5f8c\u7aef(backend),Node\u70ba\u6211\u5011\u63d0\u4f9b(offer)\u4e86\u5229\u7528<code>Events</code>\u5167\u5efa\u6838\u5fc3\u6a21\u7d44\u4f86\u5efa\u69cb\u51fa\u4e00\u500b\u985e\u4f3c\u7684\u7cfb\u7d71(similar system)\u7684\u9078\u9805(option)</li> <li>\u7279\u5225\u7684\u662f,\u9019\u500b\u6a21\u7d44\u63d0\u4f9b\u4e86\u4e00\u500bEventEmitter Class\u985e\u5225,\u7528\u4f86\u8655\u7406(handle)\u6211\u5011\u7684\u4e8b\u4ef6(events)</li> <li>\u6211\u5011\u521d\u59cb\u5316\u53ef\u4ee5\u9019\u6a23\u4f7f\u7528     JavaScript<pre><code>const EventEmitter = require('events')\nconst eventEmitter = new EventEmitter()\n</code></pre><ul> <li>\u9019\u6a23\u505a\u7684\u8a71,\u8a72<code>EventEmitter</code>\u7269\u4ef6,\u9664\u4e86\u5176\u4ed6\u7684\u6771\u897f\u4e4b\u5916,\u6211\u5011\u5148\u4ecb\u7d39<code>eventEmitter.on()</code>\u65b9\u6cd5\u8207<code>eventEmitter.emit()</code>\u65b9\u6cd5</li> <li>emitter.emit(eventName[, ...args])\u65b9\u6cd5: \u53ef\u4ee5\u88ab\u7528\u4f86\u89f8\u767c(trigger)\u4e00\u500b\u4e8b\u4ef6(event)</li> <li>emitter.on(eventName, listener)\u65b9\u6cd5: \u53ef\u4ee5\u88ab\u7528\u4f86\u65b0\u589e\u4f5c\u70ba,\u7576\u4e8b\u4ef6(event)\u88ab\u89f8\u767c(triggered)\u6642,\u8981\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> </ul> </li> <li>\u8209\u500b\u4f8b\u5b50\u4f86\u8aaa,\u6211\u5011\u5efa\u7acb\u4e00\u500b<code>start</code>\u4e8b\u4ef6(event),\u4f5c\u70ba\u4e00\u500b\u7bc4\u4f8b\u800c\u8a00,\u6211\u5011\u5c0d\u8a72\u4e8b\u4ef6\u7684\u53cd\u61c9(react)\u5c31\u662f\u628a\u5b57\u4e32\u8a18\u9304(logging)\u5230\u63a7\u5236\u53f0(console)\u4e0a       JavaScript<pre><code>eventEmitter.on('start', () =&gt; {\nconsole.log('started')\n})\n</code></pre></li> <li>\u9019\u6642,\u7576\u6211\u5011\u57f7\u884c       JavaScript<pre><code>eventEmitter.emit('start')\n</code></pre><ul> <li>\u8a72\u4e8b\u4ef6\u7684\u8655\u7406\u51fd\u5f0f(the event handler function )\u5c31\u6703\u88ab\u89f8\u767c(triggered),\u4e26\u4e14\u6211\u5011\u6703\u5f97\u5230\u63a7\u5236\u53f0\u7684\u8a18\u9304(console log)</li> <li>\u6211\u5011\u5c07\u4ee5\u4e0a\u7684\u6771\u897f\u4f5c\u70ba\u984d\u5916\u7684\u53c3\u6578(additional arguments),\u50b3\u905e(passing)\u7d66\u4e8b\u4ef6\u8655\u7406\u5668(event handler),\u4e5f\u5c31\u662f\u6307\u50b3\u905e\u7d66<code>emit()</code>\u65b9\u6cd5     JavaScript<pre><code>eventEmitter.on('start', number =&gt; {\nconsole.log(`started ${number}`)\n})\neventEmitter.emit('start', 23)\n</code></pre></li> <li>\u591a\u500b\u53c3\u6578(multiple arguments)\u7684\u60c5\u6cc1     JavaScript<pre><code>eventEmitter.on('start', (start, end) =&gt; {\nconsole.log(`started from ${start} to ${end}`)\n})\neventEmitter.emit('start', 1, 100)\n</code></pre></li> </ul> </li> <li><code>EventEmitter</code>\u7269\u4ef6(object)\u4e5f\u516c\u958b(exposes)\u4e86\u8a31\u591a\u5176\u5b83\u7684\u65b9\u6cd5(method),\u4f86\u8ddf\u4e8b\u4ef6(events)\u505a\u4e92\u52d5(interact),\u50cf\u662f\u4ee5\u4e0b3\u7a2e\u65b9\u6cd5</li> <li>emitter.once(eventName, listener): \u65b0\u589e(add)\u4e00\u500b\u4e00\u6b21\u6027(one-time)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listener)</li> <li>emitter.removeListener(eventName, listener): \u5f9e\u6307\u5b9a\u7684\u4e8b\u4ef6\u4e2d\u79fb\u9664\u6307\u5b9a\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(remove an event listener from an event)<ul> <li>\u7b49\u540c\u65bcemitter.off(eventName, listener)</li> </ul> </li> <li>emitter.removeAllListeners([eventName]): \u522a\u9664\u6307\u5b9a\u7684\u4e8b\u4ef6\u4e2d\u6240\u6709\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(remove all listeners for an event)</li> </ul>"},{"location":"programming_language/nodejs/#build-an-http-server","title":"Build an HTTP Server","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44HTTP</p> <ul> <li>\u9019\u662f\u4e00\u500bHello World\u7bc4\u4f8b\u7684HTTP web server     JavaScript<pre><code>const http = require('http')\nconst port = process.env.PORT\nconst server = http.createServer((req, res) =&gt; {\nres.statusCode = 200\nres.setHeader('Content-Type', 'text/html')\nres.end('&lt;h1&gt;Hello, World!&lt;/h1&gt;')\n})\nserver.listen(port, () =&gt; {\nconsole.log(`Server running at port ${port}`)\n})\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\u6253\u5370\u51fa<code>Hello, World!</code>\u5b57\u4e32</li> </ul> </li> <li>\u8b93\u6211\u5011\u4f86\u7c21\u55ae\u5730\u5206\u6790\u4e00\u4e0b\u9019\u6bb5\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u5305\u62ecNode\u7684<code>HTTP</code>\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<ul> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528<code>HTTP</code>\u6a21\u7d44(module)\u4f86\u5efa\u7acb\u4e00\u500bHTTP \u4f3a\u670d\u5668(server)</li> <li>\u9019\u500b<code>HTTP server</code>\u88ab\u8a2d\u5b9a\u7528\u4f86\u76e3\u807d\u6307\u5b9a\u7684<code>3000</code> port\u3002\u7576\u4f3a\u670d\u5668\u6e96\u5099\u597d\u5f8c,\u5c31\u6703\u547c\u53ebserver.listen()\u9019\u500b\u56de\u547c\u51fd\u5f0f(callback function)</li> <li>\u6211\u5011\u50b3\u905e\u7684\u56de\u547c\u51fd\u5f0f\u662f\u5c07\u5728\u6536\u5230\u6bcf\u500b\u8acb\u6c42(every request)\u6642,\u7acb\u5373(upon)\u8981\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> <li>\u6bcf\u7576(whenever)\u6536\u5230(received)\u4e00\u500b\u65b0\u7684\u8acb\u6c42(new request)\u6642,\u5c31\u6703\u547c\u53ebrequest\u4e8b\u4ef6(event),\u4e26\u63d0\u4f9b2\u500b\u7269\u4ef6(objects)</li> <li>\u8acb\u6c42\u7269\u4ef6(request): \u6703\u662f\u4e00\u500bhttp.IncomingMessage\u7269\u4ef6<ul> <li>\u8a72\u7269\u4ef6\u6703\u63d0\u4f9b\u95dc\u65bc\u8acb\u6c42\u7684\u7d30\u7bc0(request details)\u3002\u900f\u904e\u9019\u500b\u7269\u4ef6,\u6211\u5011\u53ef\u4ee5\u7528\u4f86\u5b58\u53d6(access)\u8acb\u6c42\u6a19\u982d(request headers)\u8207\u8acb\u6c42\u8cc7\u6599(request data)</li> </ul> </li> <li>\u56de\u61c9\u7269\u4ef6(response): \u6703\u662f\u4e00\u500bhttp.ServerResponse\u7269\u4ef6<ul> <li>\u8a72\u7269\u4ef6\u662f\u88ab\u7528\u4f86\u7522\u751f(populate)\u51fa\u6211\u5011\u5c07\u8981\u56de\u50b3\u7d66\u5ba2\u6236\u7aef(client)\u7684\u8cc7\u6599(data)</li> </ul> </li> <li>\u5728\u9019\u6b21\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011\u6709\u8a2d\u5b9a\u4e86\u56de\u61c9\u7269\u4ef6(response)\u7684\u72c0\u614b\u78bc(statusCode)\u7684\u5c6c\u6027(property)\u503c\u70ba<code>200</code>,\u4f86\u8868\u793a\u9019\u662f\u4e00\u500b\u6210\u529f\u7684\u8acb\u6c42(successful response)     JavaScript<pre><code>res.statusCode = 200\n</code></pre></li> <li>\u5728\u9019\u6b21\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u6211\u5011\u4e5f\u6709\u8a2d\u5b9a\u4e86\u56de\u61c9\u7269\u4ef6(response)\u7684\u5167\u6587\u6a19\u984c\u5f62\u5f0f(<code>Content-Type header</code>)     JavaScript<pre><code>res.setHeader('Content-Type', 'text/plain')\n</code></pre></li> <li>\u5728\u9019\u6b21\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u7684\u7d50\u5c3e,\u6211\u5011\u4e5f\u95dc\u9589\u4e86\u56de\u61c9\u7269\u4ef6(response),\u4e26\u5c07\u5167\u5bb9\u4f5c\u70ba\u53c3\u6578(argument)\u50b3\u905e\u7d66<code>response.end()</code>\u65b9\u6cd5     JavaScript<pre><code>res.end('Hello World\\n')\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#making-http-requests-with-nodejs","title":"Making HTTP requests with Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44HTTPS</p> <ul> <li>\u5b8c\u6210\u4e00\u500b<code>GET</code>\u8acb\u6c42(Perform a <code>GET</code> Request)     JavaScript<pre><code>const https = require('https')\nconst options = {\nhostname: 'whatever.com',\nport: 443,\npath: '/todos',\nmethod: 'GET'  // \u5b8c\u6210\u4e00\u500bGET\u8acb\u6c42\n}\nconst req = https.request(options, res =&gt; {\nconsole.log(`statusCode: ${res.statusCode}`)\nres.on('data', d =&gt; {\nprocess.stdout.write(d)\n})\n})\nreq.on('error', error =&gt; {\nconsole.error(error)\n})\nreq.end()\n</code></pre></li> <li>\u5b8c\u6210\u4e00\u500b<code>POST</code>\u8acb\u6c42(Perform a <code>POST</code> Request)     JavaScript<pre><code>const https = require('https')\nconst data = JSON.stringify({\ntodo: 'Buy the milk'\n})\nconst options = {\nhostname: 'whatever.com',\nport: 443,\npath: '/todos',\nmethod: 'POST',  // \u5b8c\u6210\u4e00\u500bPOST\u8acb\u6c42 \nheaders: {\n'Content-Type': 'application/json',\n'Content-Length': data.length\n}\n}\nconst req = https.request(options, res =&gt; {\nconsole.log(`statusCode: ${res.statusCode}`)\nres.on('data', d =&gt; {\nprocess.stdout.write(d)\n})\n})\nreq.on('error', error =&gt; {\nconsole.error(error)\n})\nreq.write(data)\nreq.end()\n</code></pre></li> <li>\u5b8c\u6210\u4e00\u500b<code>PUT</code>\u8207<code>DELETE</code>\u8acb\u6c42(<code>PUT</code> and <code>DELETE</code>)</li> <li><code>PUT</code>\u8207<code>DELETE</code>\u8acb\u6c42\u8ddf<code>POST</code>\u8acb\u6c42(request)\u7684\u683c\u5f0f(format)\u76f8\u540c,\u53ea\u8981\u4fee\u6539<code>options.method</code>\u9019\u500b\u5c6c\u6027\u503c\u5c31\u53ef\u4ee5\u7528\u4e86</li> </ul>"},{"location":"programming_language/nodejs/#make-an-http-post-request-using-nodejs","title":"Make an HTTP POST request using Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44HTTP Axios\u5957\u4ef6-Make http requests from node.js</p> <ul> <li>\u6839\u64da(depending on)\u6211\u5011\u60f3\u8981\u4f7f\u7528\u7684\u62bd\u8c61\u5c64\u7d1a(abstraction level),\u6709\u591a\u7a2e\u65b9\u6cd5\u53ef\u4ee5\u5b8c\u6210\u4e00\u500b<code>HTTP</code>\u7684<code>POST</code>\u8acb\u6c42(request)</li> <li>\u6700\u7c21\u55ae\u7684\u65b9\u5f0f\u4f86\u5b8c\u6210\u4e00\u500b<code>HTTP</code>\u8acb\u6c42(request)\u5c31\u662f\u5229\u7528Node\u4f86\u642d\u914d\u4f7f\u7528Axios\u5957\u4ef6 JavaScript<pre><code>const axios = require('axios')\naxios\n.post('https://whatever.com/todos', {\ntodo: 'Buy the milk'\n})\n.then(res =&gt; {\nconsole.log(`statusCode: ${res.statusCode}`)\nconsole.log(res)\n})\n.catch(error =&gt; {\nconsole.error(error)\n})\n</code></pre></li> <li><code>axios</code>\u5957\u4ef6\u8981\u6c42(require)\u4f7f\u7528\u7b2c\u4e09\u65b9\u51fd\u5f0f\u5eab(3rd party library)</li> <li>\u5176\u5be6\u4e00\u500b<code>POST</code>\u8acb\u6c42(request)\u50c5\u55ae\u7d14\u4f7f\u7528Node\u7684\u5167\u5efa\u6a19\u6e96\u51fd\u5f0f\u5eab(standard modules)\u662f\u53ef\u884c\u7684,\u4f46\u6703\u6bd4\u5148\u524d(preceding)\u76842\u500b\u9078\u9805(options)\u4f86\u7684\u5197\u9577(verbose)     JavaScript<pre><code>const https = require('https')\nconst data = JSON.stringify({\ntodo: 'Buy the milk'\n})\nconst options = {\nhostname: 'whatever.com',\nport: 443,\npath: '/todos',\nmethod: 'POST',\nheaders: {\n'Content-Type': 'application/json',\n'Content-Length': data.length\n}\n}\nconst req = https.request(options, res =&gt; {\nconsole.log(`statusCode: ${res.statusCode}`)\nres.on('data', d =&gt; {\nprocess.stdout.write(d)\n})\n})\nreq.on('error', error =&gt; {\nconsole.error(error)\n})\nreq.write(data)\nreq.end()\n</code></pre></li> </ul>"},{"location":"programming_language/nodejs/#get-http-request-body-data-using-nodejs","title":"Get HTTP request body data using Node.js","text":"<p>Express\u6846\u67b6</p> <ul> <li>\u9019\u662f\u4ee5<code>JSON</code>\u683c\u5f0f\u4f86\u63d0\u53d6(extract)\u8acb\u6c42\u5167\u6587(request body)\u7684\u8cc7\u6599(data)\u7684\u65b9\u5f0f</li> <li>\u5982\u679c\u6211\u5011\u6b63\u5728\u4f7f\u7528Express\u6846\u67b6,\u90a3\u5f88\u7c21\u55ae,\u53ea\u8981\u4f7f\u7528Node\u7684<code>body-parser</code>\u6a21\u7d44</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u5047\u5982\u6211\u5011\u60f3\u8981\u7372\u5f97\u8acb\u6c42\u7684\u5167\u6587(request body)       JavaScript<pre><code>const axios = require('axios')\naxios.post('https://whatever.com/todos', {\ntodo: 'Buy the milk'\n})\n</code></pre></li> <li>\u9019\u6703\u8207\u4f3a\u670d\u5668\u7aef\u7684\u7a0b\u5f0f\u78bc(server-side code)\u76f8\u5c0d\u61c9(matching)       JavaScript<pre><code>const express = require('express')\nconst app = express()\napp.use(\nexpress.urlencoded({\nextended: true\n})\n)\napp.use(express.json())\napp.post('/todos', (req, res) =&gt; {\nconsole.log(req.body.todo)\n})\n</code></pre></li> <li>\u5982\u679c\u6211\u5011\u6c92\u6709\u5728\u4f7f\u7528<code>Express</code>\u6846\u67b6,\u53ea\u60f3\u8981\u4f7f\u7528\u666e\u901a\u7684Node\u4f86\u5b8c\u6210\u6b64\u64cd\u4f5c\u7684\u8a71,\u90a3\u9ebc\u5c31\u6703\u9700\u8981\u505a\u66f4\u591a\u7684\u5de5\u4f5c\u3002\u7576\u7136,\u9019\u662f\u56e0\u70ba<code>Express</code>\u6846\u67b6\u5df2\u7d93\u5e6b\u6211\u5011\u62bd\u8c61(abstracts)\u4e86\u5f88\u591a\u6b64\u985e\u7684\u6771\u897f\u4e86<ul> <li>\u8981\u7406\u89e3\u7684\u95dc\u9375\u662f,\u7576\u6211\u5011\u5229\u7528<code>http.creatServer()</code>\u65b9\u6cd5\u4f86\u521d\u59cb\u5316\u4e00\u500b<code>HTTP</code>\u4f3a\u670d\u5668(server)\u7684\u8a71,\u9019\u6642\u7576\u4f3a\u670d\u5668\u7372\u5f97(get)\u6240\u6709\u7684<code>HTTP</code>\u8acb\u6c42\u6a19\u982d(request headers)\u6642,\u800c\u4e0d\u662f\u8acb\u6c42\u6b63\u6587(request body)</li> <li>\u8acb\u6c42\u7269\u4ef6(request object)\u50b3\u905e\u7d66\u56de\u547c\u51fd\u5f0f(callback)\u7684\u95dc\u4fc2(connection)\u662f\u4e00\u7a2e\u4e32\u6d41(stream)</li> <li>\u56e0\u6b64\u6211\u5011\u5fc5\u9808\u76e3\u807d(listen)\u8981\u8655\u7406(processed)\u7684\u8acb\u6c42\u6b63\u6587\u7684\u5167\u5bb9(body content),\u4e26\u4e14\u9019\u500b\u8acb\u6c42\u6b63\u6587\u7684\u5167\u5bb9\u662f\u6210\u584a\u8655\u7406\u7684(processed in chunks)</li> <li>\u9996\u5148,\u6211\u5011\u6703\u900f\u904e\u76e3\u807d(listening)<code>data</code>\u9019\u500b\u4e8b\u4ef6\u6d41(event stream),\u7136\u5f8c\u7576<code>data</code>\u9019\u500b\u4e8b\u4ef6\u6d41\u7d50\u675f(<code>data</code> ends)\u6642,\u5c31\u6703\u547c\u53eb<code>end</code>\u9019\u500b\u4e8b\u4ef6\u6d41(event stream)\u4e00\u6b21(once)     JavaScript<pre><code>const server = http.createServer((req, res) =&gt; {\n// we can access HTTP headers\nreq.on('data', chunk =&gt; {\nconsole.log(`Data chunk available: ${chunk}`)\n})\nreq.on('end', () =&gt; {\n//end of data\n})\n})\n</code></pre></li> <li>\u56e0\u6b64,\u70ba\u4e86\u8981\u5b58\u53d6\u8cc7\u6599(access data),\u5047\u8a2d\u6211\u5011\u9810\u671f(expect)\u6703\u6536\u5230(receive)\u4e00\u500b\u5b57\u4e32(string),\u6211\u5011\u5fc5\u9808\u5c07\u5176\u653e\u5165(put into)\u9663\u5217(array)\u4e2d     JavaScript<pre><code>const server = http.createServer((req, res) =&gt; {\nlet data = '';\nreq.on('data', chunk =&gt; {\ndata += chunk;\n})\nreq.on('end', () =&gt; {\nJSON.parse(data).todo // 'Buy the milk'\n})\n})\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#working-with-file-descriptors-in-nodejs","title":"Working with file descriptors in Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44File system</p> <ul> <li>\u5728\u6211\u5011\u80fd\u5920\u4ee3\u7406(sits in)\u6a94\u6848\u7cfb\u7d71(file system)\u4f86\u8207\u6a94\u6848(file)\u4e92\u52d5(interact)\u4e4b\u524d,\u6211\u5011\u5fc5\u9808\u5148\u7372\u5f97\u4e00\u500b\u6a94\u6848\u63cf\u8ff0\u7b26\u865f(file descriptor)</li> <li>\u4e00\u500b\u6a94\u6848\u63cf\u8ff0\u7b26\u865f(file descriptor)\u5c31\u662f\u900f\u904eNode\u5167\u5efa\u7684<code>File system</code>\u6838\u5fc3\u6a21\u7d44\u4e2d\u7684fs.open()\u65b9\u6cd5\u4f86\u958b\u555f\u6a94\u6848(opening the file)\u6642,\u6240\u56de\u50b3(returned)\u7684\u6771\u897f     JavaScript<pre><code>const fs = require('fs')\nfs.open('/Users/joe/test.txt', 'r', (err, fd) =&gt; {\n//fd is our file descriptor\n})\n</code></pre><ul> <li>\u6ce8\u610f\u5230\u5728<code>fs.open()</code>\u65b9\u6cd5\u6240\u4f7f\u7528\u7684\u7b2c2\u500b\u53c3\u6578,\u4e5f\u5c31\u662f<code>r</code>\u53c3\u6578\u3002\u9019\u500b\u65d7\u5e5f(flag)\u610f\u5473\u8457(means)\u6211\u5011\u662f\u7528\u8b80\u53d6\u6a21\u5f0f(reading)\u958b\u555f(open)\u9019\u500b\u6a94\u6848(file),\u5176\u5b83\u53ef\u80fd\u6703\u5e38\u7528\u5230\u7684\u65d7\u5e5f(flags)\u6703\u6709\u4ee5\u4e0b\u5e7e\u7a2e</li> <li><code>r+</code>: \u4ee5\u8b80\u53d6(reading)+\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848</li> <li><code>w+</code>: \u4ee5\u8b80\u53d6(reading)+\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848,\u4e26\u4e14\u5c07\u4e32\u6d41(stream)\u653e\u5728(positioning)\u6a94\u6848\u7684 \u6700\u524d\u9762(beginning)\u3002\u7576\u8a72\u6a94\u6848\u4e0d\u5b58\u5728\u6642,\u5c31\u6703\u5efa\u7acb\u4e00\u4efd\u9019\u500b\u6a94\u6848</li> <li><code>a</code>: \u4ee5\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848,\u4e26\u4e14\u5c07\u4e32\u6d41(stream)\u653e\u5728(positioning)\u6a94\u6848\u7684 \u6700\u5f8c\u9762 (end)\u3002\u7576\u8a72\u6a94\u6848\u4e0d\u5b58\u5728\u6642,\u5c31\u6703\u5efa\u7acb\u4e00\u4efd\u9019\u500b\u6a94\u6848</li> <li><code>a+</code>: \u4ee5\u8b80\u53d6(reading)+\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848,\u4e26\u4e14\u5c07\u4e32\u6d41(stream)\u653e\u5728(positioning)\u6a94\u6848\u7684 \u6700\u5f8c\u9762(end)\u3002\u7576\u8a72\u6a94\u6848\u4e0d\u5b58\u5728\u6642,\u5c31\u6703\u5efa\u7acb\u4e00\u4efd\u9019\u500b\u6a94\u6848</li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u900f\u904efs.openSync()\u65b9\u6cd5\u4f86\u958b\u555f\u6a94\u6848,\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b\u6a94\u6848\u63cf\u8ff0\u7b26\u865f(file descriptor),\u800c\u4e0d\u662f(instead of)\u63d0\u4f9b(providing)\u4e00\u500b\u56de\u547c\u51fd\u5f0f(callback)     JavaScript<pre><code>const fs = require('fs')\ntry {\nconst fd = fs.openSync('/Users/joe/test.txt', 'r')\n} catch (err) {\nconsole.error(err)\n}\n</code></pre><ul> <li>\u4e00\u65e6(once)\u7372\u5f97\u90a3\u500b\u6a94\u6848\u63cf\u8ff0\u7b26\u865f(file descriptor),\u6211\u5011\u4fbf\u80fd\u904b\u7528\u4efb\u4f55(whatever)\u6211\u5011\u9078\u64c7\u4f7f\u7528\u7684\u65b9\u5f0f(way)\u4f86\u5b8c\u6210(perform)\u6240\u6709(all)\u9700\u8981(require)\u6a94\u6848\u63cf\u8ff0\u7b26\u865f(file descriptor)\u7684\u64cd\u4f5c(operations),\u50cf\u662f\u547c\u53eb(calling)<code>fs.open()</code>\u65b9\u6cd5,\u4ee5\u53ca\u8a31\u591a\u5176\u5b83\u7528\u4f86\u8ddf\u6a94\u6848\u7cfb\u7d71(file system)\u4e92\u52d5(interact with)\u7684\u64cd\u4f5c</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs-file-stats","title":"Node.js file stats","text":"<ul> <li>\u6bcf\u500b\u6a94\u6848(file)\u90fd\u6703\u5e36\u6709(comes with)\u4e00\u7d44\u7d30\u7bc0(a set of details),\u53ef\u63d0\u4f9b\u7d66Node\u7528\u4f86\u6aa2\u67e5(inspect)\u5b83\u5011\u6240\u4f7f\u7528</li> <li>\u7279\u5225\u662f\u4f7f\u7528Node\u5167\u5efa\u7684<code>File system</code>\u6838\u5fc3\u6a21\u7d44\u4e2d\u7684fs.stat(path[, options], callback)\u65b9\u6cd5\u3002\u6211\u5011\u547c\u53eb\u9019\u500b\u65b9\u6cd5\u6642,\u53ef\u4ee5\u50b3\u905e(pass)\u4e00\u500b\u6a94\u6848\u8def\u5f91(file path)\u4f5c\u70ba\u53c3\u6578,\u4e4b\u5f8c\u4e00\u65e6Node\u7372\u5f97(get)\u6a94\u6848\u8cc7\u8a0a\u7684\u7d30\u7bc0(file details)\u5f8c,\u8a72\u65b9\u6cd5\u5c31\u6703\u547c\u53eb(call)\u6211\u5011\u6307\u5b9a\u7684\u56de\u547c\u51fd\u5f0f(callback function, \u4e5f\u5c31\u662f\u8a72\u65b9\u6cd5\u7684<code>callback</code>\u53c3\u6578),\u4e26\u4e14\u518d\u63d0\u4f9b\u7d66\u9019\u500b\u56de\u547c\u51fd\u5f0f\u4ee5\u4e0b\u76842\u500b\u53c3\u6578(parameters)<ul> <li>\u4e00\u6bb5\u932f\u8aa4\u8a0a\u606f(an error message)</li> <li>\u6a94\u6848\u72c0\u614b(the file states) JavaScript<pre><code>const fs = require('fs')\nfs.stat('/Users/joe/test.txt', (err, stats) =&gt; {\nif (err) {\nconsole.error(err)\nreturn\n}\n//we have access to the file stats in `stats`\n})\n</code></pre></li> </ul> </li> <li>Node\u4e5f\u63d0\u4f9b(provides)\u4e86\u4e00\u500b\u540c\u6b65\u5730\u65b9\u6cd5(sync method, \u4e5f\u5c31\u662ffs.statSync(path[, options])\u65b9\u6cd5),\u7528\u4f86\u5728\u76f4\u5230(until)\u6a94\u6848\u72c0\u614b(file states)\u6e96\u5099\u597d(ready)\u4e4b\u524d,\u963b\u64cb\u7dda\u7a0b(block the thread)     JavaScript<pre><code>const fs = require('fs')\ntry {\nconst stats = fs.statSync('/Users/joe/test.txt')\n} catch (err) {\nconsole.error(err)\n}\n</code></pre></li> <li>\u6a94\u6848\u8cc7\u8a0a(file information)\u5c31\u6703\u88ab\u5305\u62ec(included in)\u5728\u4e0a\u8ff0\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d\u7684<code>stats</code>\u9019\u500b\u8b8a\u6578(variable)\u4e2d\u3002\u90a3\u9ebc,\u6211\u5011\u80fd\u5f9e\u9019\u500b<code>stats</code>\u9019\u500b\u8b8a\u6578\u4e2d\u63d0\u53d6(extract)\u51fa\u54ea\u4e9b\u8cc7\u8a0a(information)\u5462?<ul> <li>\u7b54\u6848\u662f\u975e\u5e38\u591a(a lot),\u5305\u62ec(including)\u4e86</li> <li>\u5982\u679c\u662f\u4e00\u500b\u8cc7\u6599\u593e\u6216\u662f\u6a94\u6848\u6642,\u8acb\u4f7f\u7528stats.isFile()\u65b9\u6cd5 &amp; stats.isDirectory()\u65b9\u6cd5</li> <li>\u5982\u679c\u662f\u4e00\u500b\u7b26\u865f\u9023\u7d50(symbolic link)\u6642,\u8acb\u4f7f\u7528stats.isSymbolicLink\u65b9\u6cd5</li> <li>\u5982\u679c\u662f\u6a94\u6848\u5927\u5c0f(\u4ee5<code>bytes</code>\u70ba\u55ae\u4f4d)\u7684\u8a71,\u8acb\u4f7f\u7528stats.size\u5c6c\u6027</li> <li>\u5176\u5be6\u9084\u6709\u8a31\u591a\u9032\u968e\u65b9\u6cd5(advanced method),\u4f46\u662f\u5927\u90e8\u5206(the bulk of)\u6211\u5011\u5728\u65e5\u5e38(day-to-day)\u7a0b\u5f0f\u958b\u767c(programming)\u4e2d\u53ea\u6703\u4f7f\u7528\u5230\u9019\u4e9b\u800c\u5df2     JavaScript<pre><code>const fs = require('fs')\nfs.stat('/Users/joe/test.txt', (err, stats) =&gt; {\nif (err) {\nconsole.error(err)\nreturn\n}\nstats.isFile() //true\nstats.isDirectory() //false\nstats.isSymbolicLink() //false\nstats.size //1024000 //= 1MB\n})\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs-file-paths","title":"Node.js File Paths","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Path</p> <ul> <li>\u7cfb\u7d71(system)\u4e2d\u7684\u6bcf\u500b\u6a94\u6848(every file)\u90fd\u6709\u4e00\u500b\u8def\u5f91(path)</li> <li>\u5728<code>Linux</code>\u6216\u662f<code>macOS</code>\u4f5c\u696d\u7cfb\u7d71(Unix-like operating system)\u6642,\u6a94\u6848\u8def\u5f91\u770b\u8d77\u4f86\u6703\u50cf\u662f\u4ee5\u4e0b\u9019\u6a23</li> <li><code>/users/joe/file.txt</code></li> <li>\u7136\u800c,<code>Windows</code>\u4f5c\u696d\u7cfb\u7d71\u537b\u662f\u4e0d\u540c\u7684,\u5b83\u7684\u6a94\u6848\u8def\u5f91\u7d50\u69cb(structure)\u6703\u50cf\u662f</li> <li><code>C:\\users\\joe\\file.txt</code></li> <li>\u56e0\u6b64,\u6211\u5011\u6703\u9700\u8981\u6ce8\u610f(pay attention),\u7576\u6211\u5011\u5728\u61c9\u7528\u7a0b\u5f0f(application)\u4e2d\u4f7f\u7528\u8def\u5f91(paths)\u6642,\u9700\u8981\u5c07\u9019\u500b\u8def\u5f91\u7d50\u69cb\u7684\u5dee\u7570(difference)\u8003\u616e\u9032\u53bb(taken into account)</li> <li>\u6211\u5011\u53ef\u4ee5\u5c07Node\u5167\u5efa\u7684<code>Path</code>\u9019\u500b\u6838\u5fc3\u6a21\u7d44,\u5305\u62ec(include)\u5230\u6211\u5011\u7684\u6a94\u6848\u4e2d,\u4e26\u4e14\u958b\u59cb\u4f7f\u7528\u9019\u500b\u6a21\u7d44\u7684\u76f8\u95dc\u65b9\u6cd5(method)     JavaScript<pre><code>const path = require('path')\n</code></pre></li> <li>\u5229\u7528\u8def\u5f91\u4f86\u4f5c\u70ba\u8cc7\u8a0a(Getting information out of a path)</li> <li>\u5047\u5982(Given)\u7d66\u5b9a\u4e00\u500b\u8def\u5f91(path),\u6211\u5011\u80fd\u900f\u904e\u9019\u500b\u9019\u500b\u8def\u5f91\u4f86\u63d0\u53d6(extract)\u8cc7\u8a0a,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u7684\u5e7e\u7a2e\u65b9\u6cd5\u4f86\u5b8c\u6210<ul> <li>path.dirname(path): \u7372\u5f97(get)\u7236\u76ee\u9304(parent folder)\u7684\u6a94\u6848(file)</li> <li>path.basename(path[, ext]): \u7372\u5f97(get)\u8a72\u6a94\u6848\u540d\u7a31(filename part)</li> <li>path.extname(path): \u7372\u5f97(get)\u8a72\u6a94\u6848\u7684\u526f\u6a94\u540d(file extension) JavaScript<pre><code>const notes = '/users/joe/notes.txt'\npath.dirname(notes) // /users/joe\npath.basename(notes) // notes.txt\npath.extname(notes) // .txt\n</code></pre></li> </ul> </li> <li>\u5982\u679c\u6211\u5011\u60f3\u8981\u5f97\u5230 \u4e0d\u5305\u542b \u526f\u6a94\u540d(file extension)\u7684\u6a94\u6848\u540d\u7a31(filename)\u7684\u8a71,\u53ef\u4ee5\u5229\u7528<code>path.basename()</code>\u65b9\u6cd5,\u4e26\u7d66\u5b9a\u9019\u500b\u65b9\u6cd5\u7684\u7b2c\u4e8c\u500b\u53c3\u6578<code>ext</code>\u7684\u503c,\u4ee5\u904e\u6ffe\u6389\u5176\u526f\u6a94\u540d       JavaScript<pre><code>path.basename(notes, path.extname(notes)) //notes\n</code></pre></li> <li>\u5229\u7528Node\u5167\u5efa\u7684<code>path</code>\u6838\u5fc3\u6a21\u7d44\u4f86\u5b8c\u6210\u5de5\u4f5c(Working with paths)</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528path.join([...paths])\u65b9\u6cd5\u4f86\u5c07\u5169\u500b\u6216\u662f\u591a\u500b\u8def\u5f91\u7247\u6bb5(parts of a path)\u7d44\u5408\u8d77\u4f86     JavaScript<pre><code>const name = 'joe'\npath.join('/', 'users', name, 'notes.txt') //'/users/joe/notes.txt'\n</code></pre></li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528path.resolve([...paths])\u65b9\u6cd5\u4f86\u628a\u76f8\u5c0d\u8def\u5f91(relative path)\u8a08\u7b97(calculation)\u6210\u70ba\u7d55\u5c0d\u8def\u5f91(absolute path)     JavaScript<pre><code>path.resolve('joe.txt') //'/Users/joe/joe.txt' if run from my home folder\n</code></pre><ul> <li>\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b(In this case),Node\u6703\u7c21\u55ae\u5730(simply)\u5c07<code>/joe.txt</code>\u9019\u500b\u6a94\u6848\u9644\u52a0(append)\u5230\u7576\u524d\u7684\u5de5\u4f5c\u76ee\u9304\u4e2d(current working directory)\u3002\u9019\u6642,\u5982\u679c\u6211\u5011\u6307\u5b9a\u4e86\u7b2c2\u500b\u76ee\u9304\u53c3\u6578(second parameter folder),<code>path.resolve()</code>\u65b9\u6cd5\u6703\u5c07\u7b2c1\u500b\u76ee\u9304(first)\u53c3\u6578\u4f5c\u70ba\u57fa\u5e95(as a base)   JavaScript<pre><code>path.resolve('tmp', 'joe.txt') //'/Users/joe/tmp/joe.txt' if run from my home folder\n</code></pre></li> <li>\u5982\u679c\u7b2c1\u500b\u53c3\u6578\u662f\u4ee5\u659c\u7dda(slash, \u4e5f\u5c31\u662f<code>/</code>)\u958b\u982d(starts with)\u7684\u8a71,\u90a3\u5c31\u4ee3\u8868\u8a72\u8def\u5f91\u662f\u4e00\u500b\"\u7d55\u5c0d\u8def\u5f91\"</li> </ul> </li> <li>path.normalize(path)\u65b9\u6cd5\u662f\u53e6\u4e00\u7a2e\u6709\u7528(useful)\u7684\u51fd\u5f0f(function)\u3002\u7576<code>path.normalize(path)</code>\u65b9\u6cd5\u4e2d\u7684<code>path</code>\u53c3\u6578\u503c\u5305\u542b\u4e86<code>.</code>or<code>..</code>or<code>//</code>...\u7b49\u7b49\u6642,\u8a72\u65b9\u6cd5\u5c31\u6703\u5617\u8a66(try)\u53bb\u8a08\u7b97(calculate)\u51fa\u771f\u5be6\u7684\u8def\u5f91\u4f4d\u7f6e(actual path)     JavaScript<pre><code>path.normalize('/users/joe/..//test.txt') //'/users/test.txt'\n</code></pre></li> <li>\u63d0\u9192! <code>path.resolve([...paths])</code>\u65b9\u6cd5\u8207<code>path.normalize(path)</code>\u65b9\u6cd5\u7686\u4e0d\u6703\u6aa2\u67e5\u5176\u5404\u81ea\u7684<code>path</code>\u53c3\u6578\u503c\u662f\u5426\u5b58\u5728\u3002\u5b83\u5011\u50c5\u6703(just)\u6839\u64da(based on)\u5b83\u5011\u5404\u81ea\u7372\u5f97\u7684\u8def\u5f91\u53c3\u6578\u8cc7\u8a0a(information)\u4f86\u505a\u8a08\u7b97(calculate)\u51fa\u4e00\u500b\u8def\u5f91(path)\u7684\u503c\u800c\u5df2</li> </ul>"},{"location":"programming_language/nodejs/#reading-files-with-nodejs","title":"Reading files with Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44File system</p> <ul> <li>\u5728Node\u4e2d,\u8981\u8b80\u53d6\u4e00\u500b\u6a94\u6848\u80fd\u4f7f\u7528\u7684\u6700\u7c21\u55ae\u7684\u65b9\u6cd5\u662ffs.readFile(path[, options], callback) ,\u4e26\u50b3\u905e\u7d66\u9019\u500b\u65b9\u6cd5</li> <li>\u4e00\u500b\u6307\u5b9a\u8981\u8b80\u53d6\u6a94\u6848\u7684\u8def\u5f91\u4f4d\u7f6e(file path)</li> <li>\u6587\u5b57\u7de8\u78bc\u898f\u5247(encoding)</li> <li>\u4e00\u500b\u5c07\u6703\u8207\u6a94\u6848\u8cc7\u6599(file data)\u4e00\u8d77\u88ab\u547c\u53eb(called with)\u7684\u56de\u547c\u51fd\u5f0f(callback function)\u8207\u932f\u8aa4(<code>error</code>)     JavaScript<pre><code>const fs = require('fs')\nfs.readFile('/Users/joe/test.txt', 'utf8' , (err, data) =&gt; {\nif (err) {\nconsole.error(err)\nreturn\n}\nconsole.log(data)\n})\n</code></pre></li> <li>\u6216\u8005(Alternatively),\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528fs.readFileSync(path[, options])\u9019\u500b\u540c\u6b65\u5316(synchronous)\u5730\u8b80\u53d6\u6a94\u6848\u7684\u7248\u672c(version)     JavaScript<pre><code>const fs = require('fs')\ntry {\nconst data = fs.readFileSync('/Users/joe/test.txt', 'utf8')\nconsole.log(data)\n} catch (err) {\nconsole.error(err)\n}\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u5169\u7a2e\u8b80\u53d6\u6a94\u6848\u7684\u65b9\u6cd5(<code>fs.readFile()</code>\u8207<code>fs.readFileSync()</code>)\u90fd\u6703\u5728\u56de\u50b3\u8cc7\u6599(returning the data)\u4e4b\u524d,\u5c07\u6574\u500b\u6a94\u6848\u5167\u5bb9(full content of the file)\u8b80\u53d6(read)\u5230\u8a18\u61b6\u9ad4\u4e4b\u4e2d(in memory)</li> <li>\u9019\u4e5f\u5c31\u610f\u5473(means)\u8457,\u5927\u6a94\u6848\u5c07\u6703\u5c0d\u6211\u5011\u7684\u8a18\u61b6\u9ad4\u6d88\u8017(memory consumption)\u8207\u7a0b\u5f0f\u7684\u57f7\u884c\u901f\u5ea6(speed of execution of the program)\u5e36\u4f86\u91cd\u5927\u7684\u5f71\u97ff(major impact)<ul> <li>\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b(In this case),\u66f4\u597d\u7684\u9078\u64c7(better option)\u662f\u900f\u904e\u4e32\u6d41(<code>streams</code>)\u4f86\u8b80\u53d6\u6a94\u6848\u5167\u5bb9(read the file content)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#writing-files-with-nodejs","title":"Writing files with Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44File system</p> <ul> <li>\u5728Node\u4e2d,\u8981\u5beb\u5165\u6a94\u6848\u7684\u6700\u7c21\u55ae\u7684\u65b9\u6cd5\u5c31\u662f\u4f7f\u7528fs.writeFile(file, data[, options], callback)\u9019\u500bAPI     JavaScript<pre><code>const fs = require('fs')\nconst content = 'Some content!'\nfs.writeFile('/Users/joe/test.txt', content, err =&gt; {\nif (err) {\nconsole.error(err)\nreturn\n}\n//file written successfully\n})\n</code></pre></li> <li>\u6216\u8005(Alternatively),\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528fs.writeFileSync(file, data[, options])\u9019\u500b\u540c\u6b65\u5316(synchronous)\u5730\u5beb\u5165\u6a94\u6848\u7684\u7248\u672c(version)     JavaScript<pre><code>const fs = require('fs')\nconst content = 'Some content!'\ntry {\nconst data = fs.writeFileSync('/Users/joe/test.txt', content)\n//file written successfully\n} catch (err) {\nconsole.error(err)\n}\n</code></pre></li> <li>\u9810\u8a2d\u60c5\u6cc1(By default),\u7576\u7d66\u5b9a\u7684\u6307\u5b9a\u8def\u5f91\u4e0b\u7684\u6a94\u6848\u5df2\u7d93\u5b58\u5728(already exist)\u6642,\u9019\u500bAPI\u5c31\u6703\u53d6\u4ee3\u6389\u9019\u500b\u6a94\u6848\u7684\u5167\u5bb9(replace the contents of the file)<ul> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904e\u6307\u5b9a(specifying)\u4e00\u500b\u65d7\u5e5f(flag)\u4f86\u4fee\u6539(modify)\u9019\u500b\u9810\u8a2d\u6a21\u5f0f(the default)   JavaScript<pre><code>fs.writeFile('/Users/joe/test.txt', content, { flag: 'a+' }, err =&gt; {})\n</code></pre></li> <li>\u4ee5\u4e0b\u662f\u6211\u5011\u53ef\u80fd\u6703\u7528\u5230\u7684\u65d7\u5e5f(flags)</li> <li><code>r+</code>: \u4ee5\u8b80\u53d6(reading)+\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848</li> <li><code>w+</code>: \u4ee5\u8b80\u53d6(reading)+\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848,\u4e26\u4e14\u5c07\u4e32\u6d41(stream)\u653e\u5728(positioning)\u6a94\u6848\u7684 \u6700\u524d\u9762(beginning)\u3002\u7576\u8a72\u6a94\u6848\u4e0d\u5b58\u5728\u6642,\u5c31\u6703\u5efa\u7acb\u4e00\u4efd\u9019\u500b\u6a94\u6848</li> <li><code>a</code>: \u4ee5\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848,\u4e26\u4e14\u5c07\u4e32\u6d41(stream)\u653e\u5728(positioning)\u6a94\u6848\u7684 \u6700\u5f8c\u9762 (end)\u3002\u7576\u8a72\u6a94\u6848\u4e0d\u5b58\u5728\u6642,\u5c31\u6703\u5efa\u7acb\u4e00\u4efd\u9019\u500b\u6a94\u6848</li> <li><code>a+</code>: \u4ee5\u8b80\u53d6(reading)+\u5beb\u5165(writing)\u6a21\u5f0f\u4f86\u958b\u555f\u9019\u500b\u6a94\u6848,\u4e26\u4e14\u5c07\u4e32\u6d41(stream)\u653e\u5728(positioning)\u6a94\u6848\u7684 \u6700\u5f8c\u9762(end)\u3002\u7576\u8a72\u6a94\u6848\u4e0d\u5b58\u5728\u6642,\u5c31\u6703\u5efa\u7acb\u4e00\u4efd\u9019\u500b\u6a94\u6848</li> <li>\u53ef\u53c3\u8003File system flags</li> </ul> </li> <li>\u9644\u52a0\u5230\u6a94\u6848\u4e2d(Append to a file)</li> <li>\u6709\u4e00\u500b\u4fbf\u5229(handy)\u7684\u65b9\u6cd5(method)\u80fd\u5c07\u5167\u5bb9(content)\u9644\u52a0(append)\u5230\u6a94\u6848(file)\u7684\u6700\u5f8c\u9762(end),\u5c31\u662f\u5229\u7528fs.appendFile(path, data[, options], callback)\u4ee5\u53ca\u5b83\u5c0d\u61c9\u7684fs.appendFileSync(path, data[, options])\u9019\u5169\u7a2e\u65b9\u6cd5,     JavaScript<pre><code>const content = 'Some content!'\nfs.appendFile('file.log', content, err =&gt; {\nif (err) {\nconsole.error(err)\nreturn\n}\n//done!\n})\n</code></pre></li> <li>\u4f7f\u7528\u4e32\u6d41(Using streams)</li> <li>\u6240\u6709\u7684\u9019\u4e9b\u65b9\u6cd5\u5011(methods)\u7686\u6703\u5148\u5c07\u6240\u6709\u7684\u5167\u5bb9(full content)\u5beb\u5165(wrtie)\u5230\u6a94\u6848(file)\u4e2d,\u7136\u5f8c\u518d\u5c07\u63a7\u5236\u6b0a(control back)\u4ea4\u9084(returning)\u7d66\u7a0b\u5f0f(program)<ul> <li>\u5728\u975e\u540c\u6b65\u5316\u7248\u672c(async version, \u4e5f\u5c31\u662f\u6307<code>fs.writeFile()</code>\u8207<code>fs.appendFile()</code>\u9019\u5169\u7a2e\u65b9\u6cd5)\u7684\u65b9\u6cd5\u4e2d,\u9019\u610f\u5473(means)\u8457\u57f7\u884c(executing)\u56de\u547c\u51fd\u5f0f(callback)</li> <li>\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b(In this case),\u4e00\u500b\u66f4\u597d\u7684\u9078\u64c7(better option)\u662f\u900f\u904e \u4e32\u6d41 (streams)\u4f86\u5beb\u5165(write)\u5230\u6a94\u6848\u5167\u5bb9(file content)\u4e2d</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#working-with-folders-in-nodejs","title":"Working with folders in Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44File system</p> <ul> <li>Node\u5167\u5efa\u6838\u5fc3(core)\u7684<code>File system</code>\u6a21\u7d44(module)\u6709\u63d0\u4f9b(provides)\u4e86\u8a31\u591a\u4fbf\u5229(handy)\u7684\u65b9\u6cd5(methods),\u8b93\u6211\u5011\u53ef\u4ee5\u8655\u7406\u6a94\u6848\u76ee\u9304(folders)</li> <li>\u6aa2\u67e5\u6a94\u6848\u76ee\u9304\u662f\u5426\u5b58\u5728(Check if a folder exists)</li> <li>\u53ef\u5229\u7528fs.access(path[, mode], callback)\u65b9\u6cd5\u4f86\u6aa2\u67e5\u6a94\u6848\u76ee\u9304\u662f\u5426\u5b58\u5728</li> <li>\u5efa\u7acb\u65b0\u7684\u6a94\u6848\u76ee\u9304(Create a new folder)</li> <li>\u53ef\u5229\u7528fs.mkdir(path[, options], callback)\u8207fs.mkdirSync(path[, options])2\u7a2e\u65b9\u6cd5\u4f86\u5efa\u7acb\u65b0\u7684\u6a94\u6848\u76ee\u9304     JavaScript<pre><code>const fs = require('fs')\nconst folderName = '/Users/joe/test'\ntry {\nif (!fs.existsSync(folderName)) {\nfs.mkdirSync(folderName)\n}\n} catch (err) {\nconsole.error(err)\n}\n</code></pre></li> <li>\u8b80\u53d6\u6a94\u6848\u76ee\u9304\u7684\u5167\u5bb9(Read the content of a directory)</li> <li>\u53ef\u5229\u7528fs.readdir(path[, options], callback)\u8207fs.readdirSync(path[, options])2\u7a2e\u65b9\u6cd5\u4f86\u8b80\u53d6\u6a94\u6848\u76ee\u9304\u7684\u5167\u5bb9</li> <li>\u4ee5\u4e0b\u9019\u6bb5\u7a0b\u5f0f\u78bc\u6703\u8b80\u53d6\u6a94\u6848\u76ee\u9304\u7684\u5167\u5bb9(\u5305\u542b\u5176\u4e2d\u7684\u6240\u6709\u6a94\u6848(files)\u8207\u5b50\u76ee\u9304(subfolders))       JavaScript<pre><code>const fs = require('fs')\nconst path = require('path')\nconst folderPath = '/Users/joe'\nfs.readdirSync(folderPath)\n</code></pre></li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u7372\u5f97\u5b8c\u6574(full)\u7684\u7d55\u5c0d\u8def\u5f91(path)       JavaScript<pre><code>fs.readdirSync(folderPath).map(fileName =&gt; {\nreturn path.join(folderPath, fileName)\n})\n</code></pre></li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u5c07\u7d50\u679c(results)\u505a\u904e\u6ffe(filter),\u50c5\u56de\u50b3(return)\u6a94\u6848(files)\u800c\u4e0d(exclude)\u56de\u50b3\u6a94\u6848\u76ee\u9304(folders)       JavaScript<pre><code>const isFile = fileName =&gt; {\nreturn fs.lstatSync(fileName).isFile()\n}\nfs.readdirSync(folderPath).map(fileName =&gt; {\nreturn path.join(folderPath, fileName)\n})\n.filter(isFile)\n</code></pre></li> <li>\u5c07\u6a94\u6848\u76ee\u9304\u91cd\u65b0\u547d\u540d(Rename a folder)</li> <li>\u53ef\u5229\u7528fs.rename(oldPath, newPath, callback)\u8207fs.renameSync(oldPath, newPath)2\u7a2e\u65b9\u6cd5\u4f86\u5c07\u6a94\u6848\u76ee\u9304\u91cd\u65b0\u547d\u540d<ul> <li>\u90192\u500b\u65b9\u6cd5\u7684\u7b2c1\u500b\u53c3\u6578(first parameter)\u662f\u7576\u524d\u7684\u8def\u5f91(current path),\u800c\u7b2c2\u500b\u53c3\u6578(second parameter)\u662f\u65b0\u7684\u8def\u5f91   JavaScript<pre><code>const fs = require('fs')\nfs.rename('/Users/joe', '/Users/roger', err =&gt; {\nif (err) {\nconsole.error(err)\nreturn\n}\n//done\n})\n</code></pre></li> </ul> </li> <li><code>fs.renameSync()</code>\u65b9\u6cd5\u662f\u540c\u6b65\u5316(synchronous)\u65b9\u6cd5\u7684\u7248\u672c(version)       JavaScript<pre><code>const fs = require('fs')\ntry {\nfs.renameSync('/Users/joe', '/Users/roger')\n} catch (err) {\nconsole.error(err)\n}\n</code></pre></li> <li>\u522a\u9664\u6a94\u6848\u76ee\u9304(Remove a folder)</li> <li>\u53ef\u5229\u7528fs.rmdir(path[, options], callback)\u8207fs.rmdirSync(path[, options])2\u7a2e\u65b9\u6cd5\u4f86\u522a\u9664\u6a94\u6848\u76ee\u9304</li> <li>\u56e0\u70ba\u522a\u9664\u4e00\u500b\u542b\u6709\u6a94\u6848\u7684\u76ee\u9304(a folder that has content)\u53ef\u80fd\u6bd4\u6211\u5011\u9700\u8981\u7684\u8907\u96dc(complicated)</li> <li>\u9019\u6642\u5019,\u6700\u4f73\u7684\u505a\u6cd5\u662f\u5b89\u88ddnpm\u4e0a\u7684fs-extra\u5957\u4ef6,\u5b83\u662f\u4e00\u500b\u975e\u5e38\u71b1\u9580\u4e14\u7dad\u8b77\u826f\u597d\u7684\u5957\u4ef6\u3002<code>fs-extra</code>\u5957\u4ef6\u662f\u4e00\u500b\u53ef\u7528\u4f86\u81e8\u6642\u66ff\u63db(drop-in replacement)Node\u5167\u5efa\u7684<code>File system</code>\u6a21\u7d44\u7684\u5957\u4ef6,\u5b83\u80fd\u57fa\u65bc<code>File system</code>\u6a21\u7d44\u4e4b\u4e0a(on top of it)\u4f86\u63d0\u4f9b\u66f4\u591a\u7684\u529f\u80fd(features)<ul> <li>\u4ee5\u9019\u6b21\u7684\u7bc4\u4f8b\u4f86\u8aaa,\u6211\u5011\u60f3\u8981\u4f7f\u7528\u7684\u529f\u80fd\u5c31\u662f<code>remove()</code>\u65b9\u6cd5\u3002\u9019\u6642\u5019,\u6211\u5011\u9700\u8981\u5148\u5b89\u88dd<code>fs-extra</code>\u5957\u4ef6</li> <li>\u5b89\u88dd\u6307\u4ee4: $ <code>npm install fs-extra</code></li> <li>\u4f7f\u7528\u5b83\u7684<code>remove()</code>\u65b9\u6cd5       JavaScript<pre><code>const fs = require('fs-extra')\nconst folder = '/Users/joe'\nfs.remove(folder, err =&gt; {\nconsole.error(err)\n})\n</code></pre></li> <li>\u5b83\u4e5f\u80fd\u8207<code>Promise</code>\u7269\u4ef6\u4e00\u8d77\u4f7f\u7528       JavaScript<pre><code>fs.remove(folder)\n.then(() =&gt; {\n//done\n})\n.catch(err =&gt; {\nconsole.error(err)\n})\n</code></pre></li> <li>\u6216\u662f\u642d\u914d<code>async/await</code>\u8a9e\u6cd5\u4f86\u4f7f\u7528       JavaScript<pre><code>async function removeFolder(folder) {\ntry {\nawait fs.remove(folder)\n//done\n} catch (err) {\nconsole.error(err)\n}\n}\nconst folder = '/Users/joe'\nremoveFolder(folder)\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-fs-module","title":"The Node.js fs module","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44File system</p> <ul> <li><code>fs</code>\u6a21\u7d44\u63d0\u4f9b(provides)\u4e86\u8a31\u591a\u975e\u5e38\u6709\u7528(useful)\u7684\u529f\u80fd(functionality)\u4f86\u5b58\u53d6(access) &amp; \u8207\u6a94\u6848\u7cfb\u7d71(file system)\u4e92\u52d5(interact)</li> <li>\u56e0\u70ba<code>fs</code>\u6a21\u7d44\u662fNode\u672c\u8eab\u5167\u5efa\u7684\u6838\u5fc3\u6a21\u7d44,\u56e0\u6b64\u6211\u5011\u4e0d\u7528\u4e8b\u5148\u5b89\u88dd\u5b83,\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u7684\u65b9\u6cd5\u4f86\u7c21\u55ae\u5730\u5f15\u7528\u5b83     JavaScript<pre><code>const fs = require('fs')\n</code></pre></li> <li>\u4e00\u65e6(Once)\u9019\u6a23\u505a,\u6211\u5011\u5c31\u53ef\u4ee5\u958b\u59cb\u5b58\u53d6(access)<code>fs</code>\u6a21\u7d44\u7684\u5176\u5b83\u65b9\u6cd5(methods)<ul> <li>fs.access(path[, mode], callback): \u6703\u6aa2\u67e5(check)\u8a72\u8def\u5f91\u5167\u7684\u6a94\u6848\u662f\u5426\u5b58\u5728(exists),\u4e26\u4e14Node\u6709\u6b0a\u9650(permissions)\u4f86\u5b58\u53d6(access)\u5b83</li> <li>fs.appendFile(path, data[, options], callback): \u9644\u52a0(append)\u8cc7\u6599(data)\u5230\u6a94\u6848(file)\u4e2d\u3002\u82e5\u8a72\u8def\u5f91\u5167\u7684\u6a94\u6848\u4e0d\u5b58\u5728(exist)\u7684\u8a71,\u5c31\u6703\u5efa\u7acb(created)\u4e00\u500b</li> <li>fs.chmod(path, mode, callback): \u66f4\u6539(change)\u6307\u5b9a(specified)\u7684\u6a94\u6848(file)\u7684\u6b0a\u9650(permissions)\u8a2d\u5b9a(\u900f\u904e\u6307\u5b9a\u4e00\u500b\u6a94\u6848\u540d\u7a31\u4f86\u5b8c\u6210\u7684)</li> <li>fs.lchmod(path, mode, callback): \u50c5<code>macOS</code>\u4f5c\u696d\u7cfb\u7d71\u53ef\u4ee5\u4f7f\u7528\u6b64\u65b9\u6cd5</li> <li>fs.fchmod(fd, mode, callback)</li> <li>fs.chown(path, uid, gid, callback): \u66f4\u6539(change)\u6307\u5b9a(specified)\u7684\u6a94\u6848(file)\u7684\u64c1\u6709\u8005(owner) &amp; \u7fa4\u7d44(group)\u8a2d\u5b9a(\u900f\u904e\u6307\u5b9a\u4e00\u500b\u6a94\u6848\u540d\u7a31\u4f86\u5b8c\u6210\u7684)</li> <li>fs.lchown(path, uid, gid, callback)</li> <li>fs.fchown(fd, uid, gid, callback)</li> <li>fs.close(fd, callback): \u95dc\u9589\u4e00\u500b\u6a94\u6848\u63cf\u8ff0\u7b26\u865f(file descriptor)</li> <li>fs.copyFile(src, dest[, mode], callback): \u8907\u88fd(copies)\u4e00\u500b\u6a94\u6848(file)</li> <li>fs.createReadStream(path[, options]): \u5efa\u7acb(create)\u4e00\u500b\u53ef\u8b80\u53d6(readable)\u7684\u6a94\u6848\u4e32\u6d41(file stream)</li> <li>fs.createWriteStream(path[, options]): \u5efa\u7acb(create)\u4e00\u500b\u53ef\u5beb\u5165(writable)\u7684\u6a94\u6848\u4e32\u6d41(file stream)</li> <li>fs.link(existingPath, newPath, callback): \u5efa\u7acb(create)\u4e00\u500b\u786c\u9023\u7d50(hard link)\u7d66\u4e00\u500b\u6307\u5b9a\u7684\u6a94\u6848(file)</li> <li>fs.mkdir(): \u5efa\u7acb(create)\u4e00\u500b\u65b0\u7684\u6a94\u6848\u76ee\u9304(folder)</li> <li>fs.mkdtemp(prefix[, options], callback): \u5efa\u7acb(create)\u4e00\u500b\u81e8\u6642(temporary)\u7684\u6a94\u6848\u76ee\u9304(directory)</li> <li>fs.open(path[, flags[, mode]], callback): \u8a2d\u5b9a(set)\u6a94\u6848\u6a21\u5f0f(file mode)</li> <li>fs.readdir(path[, options], callback): \u8b80\u53d6(read)\u8a72\u6a94\u6848\u76ee\u9304(directory)\u7684\u5167\u5bb9(contents)</li> <li>fs.readFile(): \u8b80\u53d6(read)\u8a72\u6a94\u6848(file)\u7684\u5167\u5bb9(content)</li> <li>fs.read(fd, buffer, offset, length, position, callback)</li> <li>fs.readlink(path[, options], callback): \u8b80\u53d6(read)\u7b26\u865f\u9023\u7d50(symbolic link)\u7684\u503c(value)</li> <li>fs.realpath(path[, options], callback): \u5c07\u76f8\u5c0d(relative)\u7684\u6a94\u6848\u8def\u5f91(file path)\u89e3\u6790(resolve)\u70ba\u5b8c\u6574\u8def\u5f91(full path)=&gt; \u4e5f\u5c31\u662f\u5c07<code>./</code>, <code>../</code> \u7b49\u7b49\u4e4b\u985e\u7684\u8655\u7406\u6389</li> <li>fs.rename(oldPath, newPath, callback): \u5c07\u6a94\u6848(file)\u6216\u662f\u6a94\u6848\u76ee\u9304(folder)\u91cd\u65b0\u547d\u540d(rename)</li> <li>fs.rmdir(path[, options], callback): \u79fb\u9664(remove)\u6307\u5b9a\u7684\u6a94\u6848\u76ee\u9304(folder)</li> <li>fs.stat(path[, options], callback): \u56de\u50b3(returns)\u6a94\u6848(file)\u7684\u72c0\u614b(status)</li> <li>fs.fstat(fd[, options], callback)</li> <li>fs.lstat(path[, options], callback)</li> <li>fs.symlink(target, path[, type], callback): \u5efa\u7acb(create)\u4e00\u500b\u65b0\u7684\u7b26\u865f\u9023\u7d50(symbolic link)\u7d66\u6307\u5b9a\u7684\u6a94\u6848(file)</li> <li>fs.truncate(path[, len], callback): \u5c07\u6307\u5b9a\u7684\u6a94\u6848\u540d\u7a31\u7e2e\u77ed\u70ba\u6307\u5b9a\u7684\u9577\u5ea6( specified length)=&gt; (\u900f\u904e\u6307\u5b9a\u4e00\u500b\u6a94\u6848\u540d\u7a31\u4f86\u5b8c\u6210\u7684)</li> <li>fs.ftruncate(fd[, len], callback)</li> <li>fs.unlink(path, callback): \u79fb\u9664\u4e00\u500b\u6a94\u6848\u7684\u7b26\u865f\u9023\u7d50(symbolic link)</li> <li>fs.unwatchFile(filename[, listener]): \u505c\u6b62(stop)\u67e5\u770b(watching)\u4e00\u500b\u6a94\u6848(file)\u7684\u4fee\u6539(changes)</li> <li>fs.utimes(path, atime, mtime, callback): \u66f4\u6539(change)\u4e00\u500b\u6a94\u6848\u7684\u6642\u9593\u6233\u8a18=&gt; (\u900f\u904e\u6307\u5b9a\u4e00\u500b\u6a94\u6848\u540d\u7a31\u4f86\u5b8c\u6210\u7684)(timestamp)</li> <li>fs.futimes(fd, atime, mtime, callback)</li> <li>fs.watchFile(filename[, options], listener): \u958b\u59cb(start)\u67e5\u770b(watching)\u4e00\u500b\u6a94\u6848(file)\u7684\u4fee\u6539(changes)</li> <li>fs.watch(filename[, options][, listener])</li> <li>fs.writeFile(file, data[, options], callback): \u5c07\u8cc7\u6599(data)\u5beb\u5165(write)\u6a94\u6848(file)\u4e2d</li> <li>fs.write(fd, buffer[, offset[, length[, position]]], callback)</li> </ul> </li> <li>\u95dc\u65bc<code>fs</code>\u6a21\u7d44\u6709\u4e00\u4ef6\u5947\u602a\u7684\u4e8b\u60c5\u662f\u6240\u6709\u65b9\u6cd5 \u9810\u8a2d \u90fd\u662f \u975e\u540c\u6b65\u7684 (asynchronous),\u7136\u800c\u9019\u4e9b\u65b9\u6cd5\u4e5f\u90fd\u80fd\u540c\u6b65\u5316\u5730(synchronously)\u4f7f\u7528(=&gt; \u53ea\u8981\u5728\u5404\u65b9\u6cd5\u5f8c\u9762\u52a0\u4e0a<code>Sync</code>\u8a9e\u6cd5\u5c31\u53ef\u4ee5\u4e86)</li> <li>\u4ee5\u4e0b\u7bc4\u4f8b\u8aaa\u660e</li> <li><code>fs.rename()</code><ul> <li><code>fs.renameSync()</code></li> </ul> </li> <li><code>fs.write()</code><ul> <li><code>fs.writeSync()</code></li> </ul> </li> <li>\u9019\u9ebc\u505a\u6703\u9020\u6210(makes)\u6211\u5011\u7684\u61c9\u7528\u7a0b\u5f0f(application)\u7684\u5de5\u4f5c\u6d41(flow)\u6709\u6975\u5927(huge)\u7684\u5dee\u7570(difference)     &gt; Node <code>v10.0.0</code>\u958b\u59cb,<code>fs</code>\u6a21\u7d44\u958b\u59cb\u5f15\u5165\u4e86fs Promises API<ul> <li>\u8209\u4f8b\u4f86\u8aaa,\u6211\u5011\u4f86\u6aa2\u67e5(check)\u4e00\u4e0b<code>fs.rename()</code>\u65b9\u6cd5,\u5229\u7528\u56de\u547c\u51fd\u5f0f(callback)\u7684\u65b9\u6cd5\u4f86\u4f7f\u7528\u975e\u540c\u6b65\u5316(asynchronous)\u7684API     JavaScript<pre><code>const fs = require('fs')\nfs.rename('before.json', 'after.json', err =&gt; {\nif (err) {\nreturn console.error(err)\n}\n//done\n})\n</code></pre></li> <li>\u540c\u6b65\u5316(synchronous)\u7684API\u53ef\u4ee5\u9019\u6a23\u4f86\u4f7f\u7528,\u4e26\u642d\u914d<code>try/catch</code>\u5340\u584a(block)\u4f86\u8655\u7406(handle)\u932f\u8aa4(error)     JavaScript<pre><code>const fs = require('fs')\ntry {\nfs.renameSync('before.json', 'after.json')\n//done\n} catch (err) {\nconsole.error(err)\n}\n</code></pre></li> <li>\u4ee5\u4e0a\u9019\u5169\u7a2e\u7bc4\u4f8b\u7684\u4e3b\u8981(key)\u5dee\u5225(difference)\u662f, \u7b2c2\u500b\u7bc4\u4f8b \u8173\u672c(script)\u7684 \u57f7\u884c(execution)\u5c07\u6703\u88ab\u963b\u585e(block) ,\u76f4\u5230\u6a94\u6848(file)\u64cd\u4f5c(operation)\u6210\u529f(succeeded)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-path-module","title":"The Node.js path module","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Path</p> <ul> <li>Node\u7684Path\u5167\u5efa\u6838\u5fc3\u6a21\u7d44,\u63d0\u4f9b(provides)\u4e86\u8a31\u591a\u975e\u5e38\u6709\u7528(useful)\u7684\u529f\u80fd(functionality),\u4f86\u5b58\u53d6(access) &amp; \u8207\u6a94\u6848\u7cfb\u7d71(file system)\u4e92\u52d5(interact)</li> <li><code>path</code>\u6a21\u7d44\"\u4e0d\u9700\u8981\"(no need to)\u4e8b\u5148\u5b89\u88dd(install it),\u624d\u80fd\u4f7f\u7528\u3002\u56e0\u70ba\u5b83\u672c\u8eab\u5df2\u7d93\u662fNode\u7684\u6838\u5fc3\u6a21\u7d44(core)\u7684\u4e00\u90e8\u5206(part of)\u4e86,\u5b83\u80fd\u5920\u7c21\u55ae\u5730(simply)\u900f\u904e\u5f15\u7528(=&gt; <code>require</code>\u8a9e\u6cd5)\u4f86\u4f7f\u7528<code>path</code>\u6a21\u7d44     JavaScript<pre><code>const path = require('path')\n</code></pre></li> <li><code>path</code>\u6a21\u7d44\u6709\u63d0\u4f9bpath.sep\u5c6c\u6027,\u4f86\u4f5c\u70ba\u8def\u5f91\u7684\u5206\u9694\u7b26\u865f(path segment separator)<ul> <li>\u4e5f\u5c31\u662f\u8aaa,\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u6703\u662f<code>\\</code>; \u800c\u5728Linux/macOS\u4f5c\u696d\u7cfb\u7d71\u6703\u662f<code>/</code></li> </ul> </li> <li><code>path</code>\u6a21\u7d44\u6709\u63d0\u4f9bpath.delimiter\u5c6c\u6027,\u4f86\u4f5c\u70ba\u8def\u5f91\u7684\u5b9a\u754c\u7b26(path delimiter)<ul> <li>\u4e5f\u5c31\u662f\u8aaa,\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u6703\u662f<code>;</code>; \u800c\u5728Linux/macOS\u4f5c\u696d\u7cfb\u7d71\u6703\u662f<code>:</code></li> </ul> </li> <li>\u4ee5\u4e0b\u662f<code>path</code>\u6a21\u7d44\u5e38\u6703\u7528\u5230\u7684\u65b9\u6cd5(methods)</li> <li>path.basename(path[, ext])<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u6574\u500b\u8def\u5f91(path)\u7684\u6700\u5f8c\u4e00\u500b(last)\u90e8\u5206(portion); \u800c\u8a72\u65b9\u6cd5\u7684\u7b2c2\u500b\u53c3\u6578(parameter)\u53ef\u4ee5\u7528\u4f86\u904e\u6ffe\u6389(filter out)\u526f\u6a94\u540d(file extension)   JavaScript<pre><code>require('path').basename('/test/something') //something\nrequire('path').basename('/test/something.txt') //something.txt\nrequire('path').basename('/test/something.txt', '.txt') //something\n</code></pre></li> </ul> </li> <li>path.dirname(path)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u5176\u6a94\u6848\u8def\u5f91(path)\u53c3\u6578(parameter)\u7684\u6a94\u6848\u76ee\u9304(directory)\u7684\u90e8\u5206(part)   JavaScript<pre><code>require('path').dirname('/test/something') // /test\nrequire('path').dirname('/test/something/file.txt') // /test/something\n</code></pre></li> </ul> </li> <li>path.extname(path)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u5176\u6a94\u6848\u8def\u5f91(path)\u53c3\u6578(parameter)\u7684\u526f\u6a94\u540d(file extension)\u7684\u90e8\u5206(part)   JavaScript<pre><code>require('path').extname('/test/something') // ''\nrequire('path').extname('/test/something/file.txt') // '.txt'\n</code></pre></li> </ul> </li> <li>path.isAbsolute(path)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u5176\u6a94\u6848\u8def\u5f91(path)\u53c3\u6578(parameter)\u662f\u5426\u70ba\u4e00\u7a2e\"\u7d55\u5c0d\u8def\u5f91\"\u7684\u5f62\u5f0f   JavaScript<pre><code>require('path').isAbsolute('/test/something') // true\nrequire('path').isAbsolute('./test/something') // false\n</code></pre></li> </ul> </li> <li>path.join([...paths])<ul> <li>\u8a72\u65b9\u6cd5\u6703\u7d50\u5408\u8def\u5f91(path)\u76842\u500bor\u591a\u500b\u90e8\u5206(part)   JavaScript<pre><code>const name = 'joe'\nrequire('path').join('/', 'users', name, 'notes.txt') //'/users/joe/notes.txt'\n</code></pre></li> </ul> </li> <li>path.normalize(path)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u5617\u8a66(tries to)\u53bb\u8a08\u7b97(calculate)\u5176\u6a94\u6848\u8def\u5f91(path)\u53c3\u6578(parameter)\u7684\u771f\u5be6\u8def\u5f91(actual path) (=&gt; \u7576\u9019\u500b\u6a94\u6848\u8def\u5f91\u53c3\u6578(<code>path</code>)\u6709\u5305\u542b(contains)\u4e86<code>.</code> or <code>..</code> or <code>//</code>... \u7b49\u7b49\u4e4b\u985e\u7684\u76f8\u5c0d\u8aaa\u660e\u7b26(relative specifiers))</li> </ul> </li> <li>path.parse(path)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u4ee5\u4e00\u500b\u7269\u4ef6(object)\u7684\u5f62\u5f0f,\u5c07\u5176\u6a94\u6848\u8def\u5f91(path)\u53c3\u6578(parameter)\u89e3\u6790(parses)\u70ba\u591a\u500b\u91cd\u8981\u7247\u6bb5(segments),\u4f86\u7d44\u6210(compose)\u51fa\u9019\u500b\u8def\u5f91\u7269\u4ef6</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>require('path').parse('/users/test.txt')\n</code></pre></li> <li>\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u5c07\u6703\u56de\u50b3   JavaScript<pre><code>  {\nroot: '/',\ndir: '/users',\nbase: 'test.txt',\next: '.txt',\nname: 'test'\n}\n</code></pre></li> <li><code>root</code>: \u6839\u76ee\u9304(root)</li> <li><code>dir</code>: \u5f9e\u6839\u76ee\u9304(root)\u958b\u59cb(starting from)\u7684\u6a94\u6848\u76ee\u9304\u7684\u8def\u5f91(folder path)</li> <li><code>base</code>: \u6a94\u6848\u540d\u7a31(file name)+\u526f\u6a94\u540d(file extension)</li> <li><code>name</code>: \u6a94\u6848\u540d\u7a31(file name)</li> <li><code>ext</code>: \u6a94\u6848\u7684\u526f\u6a94\u540d(file extension)</li> </ul> </li> <li>path.relative(from, to)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u63a5\u53d7(accepts)2\u500b\u6a94\u6848\u8def\u5f91(paths)\u4f5c\u70ba\u53c3\u6578(arguments),\u4e26\u4ee5(based on)\u7576\u524d(current)\u5de5\u4f5c\u76ee\u9304(working directory)\u7684\u4f4d\u7f6e\u7684\u89d2\u5ea6,\u56de\u50b3(returns)\u4e00\u500b\u5f9e\u7b2c1\u500b\u53c3\u6578(=&gt; <code>from</code>)\u5230\u7b2c2\u500b\u53c3\u6578(=&gt; <code>to</code>)\u7684\u76f8\u5c0d\u8def\u5f91(relative path)   JavaScript<pre><code>require('path').relative('/Users/joe', '/Users/joe/test.txt') //'test.txt'\nrequire('path').relative('/Users/joe', '/Users/joe/something/test.txt') //'something/test.txt'\n</code></pre></li> </ul> </li> <li>path.resolve([...paths])<ul> <li>\u6211\u5011\u5229\u7528\u6b64\u65b9\u6cd5,\u4f86\u5c07\u76f8\u5c0d\u8def\u5f91(relative path)\u8a08\u7b97(calculation)\u51fa\u7d55\u5c0d\u8def\u5f91(absolute path)     JavaScript<pre><code>path.resolve('joe.txt') //'/Users/joe/joe.txt' if run from my home folder\n</code></pre></li> <li>\u900f\u904e\u6307\u5b9a\u7b2c2\u500b\u53c3\u6578(parameter),<code>path.resolve()</code>\u65b9\u6cd5\u6703\u4f7f\u7528\u7b2c1\u500b\u53c3\u6578\u70ba\u57fa\u790e\u4f86\u89e3\u6790(resolve)\u7b2c2\u500b\u53c3\u6578     JavaScript<pre><code>path.resolve('tmp', 'joe.txt') //'/Users/joe/tmp/joe.txt' if run from my home folder\n</code></pre></li> <li>\u5982\u679c\u7b2c\u4e00\u500b\u53c3\u6578(parameter)\u662f\u4ee5\u659c\u7dda(slash)\u958b\u982d(starts with)\u7684\u8a71,\u5c31\u8868\u793a(means)\u9019\u662f\u4e00\u500b\u7d55\u5c0d\u8def\u5f91(absolute path)     JavaScript<pre><code>path.resolve('/etc', 'joe.txt') //'/etc/joe.txt'\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-os-module","title":"The Node.js os module","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44OS</p> <ul> <li>\u9019\u500b\u6a21\u7d44\u6703\u63d0\u4f9b(provides)\u8a31\u591a\u529f\u80fd(functions)\u8b93\u6211\u5011\u80fd\u5920\u8ddf\u5e95\u5c64\u4f5c\u696d\u7cfb\u7d71(underlying operating system) &amp; \u8a72\u7a0b\u5f0f\u904b\u884c\u6642\u6240\u5728\u7684\u96fb\u8166(the computer the program runs on)\u505a\u4e92\u52d5(interact)\u4e26\u6aa2\u7d22\u5176\u8cc7\u8a0a(retrieve information)</li> <li><code>js     const os = require('os')</code></li> <li>\u5728<code>os</code>\u6a21\u7d44\u4e4b\u4e2d,\u6709\u4e00\u4e9b\u6709\u7528(useful)\u7684\u5c6c\u6027(properties)\u80fd\u544a\u8a34\u6211\u5011\u4e00\u4e9b\u8207\u8655\u7406\u6a94\u6848(handling files)\u6709\u95dc\u7684(related to)\u91cd\u8981\u7684\u4e8b\u60c5(key things),\u50cf\u662f\u4ee5\u4e0b\u5c6c\u6027\u5011<ul> <li>os.EOL</li> <li>\u8a72\u5c6c\u6027\u6703\u7d66\u51fa(gives)\u5b9a\u754c\u7b26(delimiter)\u5e8f\u5217(sequence)\u3002\u5728Linux/macOS\u4f5c\u696d\u7cfb\u7d71\u4e2d\u5c31\u662f<code>\\n</code>,\u800c\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u4e2d\u6703\u662f<code>\\r\\n</code></li> <li>os.constants.signal</li> <li>\u8a72\u5c6c\u6027\u6703\u544a\u8a34\u6211\u5011\u6240\u6709\u8ddf\u8655\u7406(handling)\u9032\u7a0b(process)\u4fe1\u865f(signals)\u6709\u95dc(releated to)\u7684\u5e38\u6578(constants),\u50cf\u662f<code>SIGHUP</code>, <code>SIGKILL</code>, ...\u7b49\u7b49\u4e4b\u985e\u7684</li> <li>os.constants.errorno</li> <li>\u8a72\u5c6c\u6027\u6703\u8a2d\u5b9a(sets)\u932f\u8aa4\u5831\u544a(error reporting)\u7684\u5e38\u6578(constants),\u50cf\u662f<code>EADDRINUSE</code>, <code>EOVERFLOW</code>, ...\u7b49\u7b49\u4e4b\u985e\u7684</li> </ul> </li> <li>\u63a5\u4e0b\u4f86,\u6211\u5011\u4f86\u770b\u770b<code>os</code>\u6a21\u7d44\u4e2d\u4e3b\u8981\u6703\u7528\u5230\u7684\u65b9\u6cd5(methods)</li> <li>os.arch()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a(identifies)\u6b64\u5e95\u5c64\u4f5c\u696d\u7cfb\u7d71( underlying)\u7684\u67b6\u69cb(architecture),\u50cf\u662f<code>arm</code>, <code>x64</code>, <code>arm64</code></li> </ul> </li> <li>os.cpus()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u9663\u5217(array)\u4f86\u8868\u793a\u6211\u5011\u7684\u4f5c\u696d\u7cfb\u7d71(system)\u4e0a\u6709\u591a\u5c11\u53ef\u7528(available)\u7684\u4e2d\u592e\u8655\u7406\u5668\u5011(CPUs)\u7684\u8cc7\u6e90\u7684\u8cc7\u8a0a(information)</li> <li><code>js   [     {       model: 'Intel(R) Core(TM)2 Duo CPU     P8600  @ 2.40GHz',       speed: 2400,       times: {         user: 281685380,         nice: 0,         sys: 187986530,         idle: 685833750,         irq: 0       }     },     {       model: 'Intel(R) Core(TM)2 Duo CPU     P8600  @ 2.40GHz',       speed: 2400,       times: {         user: 282348700,         nice: 0,         sys: 161800480,         idle: 703509470,         irq: 0       }     }   ]</code></li> </ul> </li> <li>os.endianness()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a(identifying)\u6b64\u4f5c\u696d\u7cfb\u7d71\u7684\u4e2d\u592e\u8655\u7406\u5668(CPU)\u8cc7\u6e90\u7684\u5b57\u7bc0\u5e8f(endianness),\u50c5\u6703\u56de\u50b3<code>BE</code>\u6216\u662f<code>LE</code></li> <li>\u53ef\u53c3\u8003\u7dad\u57fa\u767e\u79d1\u7684Big Endian or Little Endian</li> </ul> </li> <li>os.freemem<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u6574\u6578(integer, =&gt; \u4ee5<code>bytes</code>\u70ba\u55ae\u4f4d)\u4f86\u4ee3\u8868(represent)\u6b64\u4f5c\u696d\u7cfb\u7d71\u7684\u8a18\u61b6\u9ad4(memory)\u8cc7\u6e90</li> </ul> </li> <li>os.homedir()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a\u7576\u524d(current)\u4f7f\u7528\u8005(user)\u7684\u5bb6\u76ee\u9304(home directory)</li> <li><code>bash     '/Users/joe'</code></li> </ul> </li> <li>os.hostname()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a\u8a72\u4f5c\u696d\u7cfb\u7d71(operating system)\u7684\u4e3b\u6a5f\u540d\u7a31(host name)</li> </ul> </li> <li>os.loadavg()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u9663\u5217(array)\u4f86\u8868\u793a\u8a72\u4f5c\u696d\u7cfb\u7d71(operating system)\u65bc\u7b2c<code>1</code>, <code>5</code>, <code>15</code>\u5206\u9418(\u9019\u4e09\u500b\u6642\u6bb5\u7684\u6642\u5019),\u8a08\u7b97(calculation)\u51fa\u8f09\u5165(load)\u6240\u82b1\u8cbb\u7684\u5e73\u5747\u6642\u9593(average)   JavaScript<pre><code>[3.68798828125, 4.00244140625, 11.1181640625]\n</code></pre></li> <li>\u6ce8\u610f! <code>load average</code>\u9019\u500b\u503c\u53ea\u5c0dLinux/macOS\u4f5c\u696d\u7cfb\u7d71\u624d\u6709\u7528</li> </ul> </li> <li>os.networkInterfaces()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b\u7269\u4ef6(object),\u5305\u542b\u6b64\u4f5c\u696d\u7cfb\u7d71(system)\u4e2d\u53ef\u7528(available)\u7684\u7db2\u8def\u4ecb\u9762(network interfaces)\u7684\u7d30\u7bc0\u8cc7\u8a0a(details)   JavaScript<pre><code>{ lo0:\n[ { address: '127.0.0.1',\nnetmask: '255.0.0.0',\nfamily: 'IPv4',\nmac: 'fe:82:00:00:00:00',\ninternal: true },\n{ address: '::1',\nnetmask: 'ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff',\nfamily: 'IPv6',\nmac: 'fe:82:00:00:00:00',\nscopeid: 0,\ninternal: true },\n{ address: 'fe80::1',\nnetmask: 'ffff:ffff:ffff:ffff::',\nfamily: 'IPv6',\nmac: 'fe:82:00:00:00:00',\nscopeid: 1,\ninternal: true } ],\nen1:\n[ { address: 'fe82::9b:8282:d7e6:496e',\nnetmask: 'ffff:ffff:ffff:ffff::',\nfamily: 'IPv6',\nmac: '06:00:00:02:0e:00',\nscopeid: 5,\ninternal: false },\n{ address: '192.168.1.38',\nnetmask: '255.255.255.0',\nfamily: 'IPv4',\nmac: '06:00:00:02:0e:00',\ninternal: false } ],\nutun0:\n[ { address: 'fe80::2513:72bc:f405:61d0',\nnetmask: 'ffff:ffff:ffff:ffff::',\nfamily: 'IPv6',\nmac: 'fe:80:00:20:00:00',\nscopeid: 8,\ninternal: false } ] }\n</code></pre></li> </ul> </li> <li>os.platform()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a(identifying)\u6b64\u4f5c\u696d\u7cfb\u7d71(operating system)\u7684\u88ab\u7de8\u8b6f(compiled for)\u7684\u5e73\u53f0(platform)\u3002\u4ee5\u4e0b\u662f\u53ef\u80fd\u7684\u56de\u50b3\u503c</li> <li><code>darwin</code></li> <li><code>freebsd</code></li> <li><code>linux</code></li> <li><code>openbsd</code></li> <li><code>win32</code></li> <li>...\u7b49\u7b49\u4e4b\u985e\u7684</li> </ul> </li> <li>os.release()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a(identifying)\u6b64\u4f5c\u696d\u7cfb\u7d71(operating system)\u8207\u5176\u7248\u672c\u865f(release number)</li> </ul> </li> <li>os.tmpdir()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a(identifying)\u6b64\u4f5c\u696d\u7cfb\u7d71\u7684\u81e8\u6642\u6a94\u6848\u6703\u5b58\u653e\u5728\u54ea\u500b\u6a94\u6848\u76ee\u9304(temp folder)</li> </ul> </li> <li>os.totalmem()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u6574\u6578(string)\u4f86\u4ee3\u8868(represent)\u6b64\u4f5c\u696d\u7cfb\u7d71(operating system)\u4e2d\u53ef\u7528(available)\u7684\u7e3d\u8a18\u61b6\u9ad4\u91cf(total memory, =&gt; \u4ee5<code>bytes</code>\u70ba\u55ae\u4f4d\u4f86\u8868\u793a)</li> </ul> </li> <li>os.type()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u5b57\u4e32(string)\u4f86\u8868\u793a(identifying)\u76ee\u524d\u6240\u5728\u7684\u4f5c\u696d\u7cfb\u7d71\u540d\u7a31(operating system name)\u662f\u4ec0\u9ebc\u3002\u4ee5\u4e0b\u662f\u6700\u5e38\u898b\u76843\u7a2e\u4f5c\u696d\u7cfb\u7d71\u5206\u5225\u5c0d\u61c9\u7684\u503c</li> <li><code>Linux</code>\u4f5c\u696d\u7cfb\u7d71: Linux</li> <li><code>macOS</code>\u4f5c\u696d\u7cfb\u7d71: Darwin</li> <li><code>Windows</code>\u4f5c\u696d\u7cfb\u7d71: Windows_NT</li> </ul> </li> <li>os.uptime()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u6574\u6578(integer)\u4f86\u8868\u793a\u81ea\u5f9e(since)\u4e0a\u6b21\u96fb\u8166\u91cd\u958b\u6a5f(last rebooted)\u5230\u73fe\u5728,\u5df2\u7d93\u904b\u884c(running)\u4e86\u591a\u4e45(=&gt; \u4ee5\"\u79d2\"\u70ba\u55ae\u4f4d)</li> </ul> </li> <li>os.userInfo([options])<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b\u7269\u4ef6(object)\u5305\u542b\u4e86\u7576\u524d\u7684\u4f7f\u7528\u8005\u540d\u7a31(username), \u4f7f\u7528\u8005ID(uid), \u7fa4\u7d44ID(gid), shell, \u5bb6\u76ee\u9304(homedir), ...\u7b49\u7b49\u4e4b\u985e\u7684</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-events-module","title":"The Node.js events module","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Events</p> <ul> <li><code>event</code>\u6a21\u7d44(module)\u6703\u63d0\u4f9b(provides)\u6211\u5011EventEmitter\u985e\u5225(class),\u9019\u662f\u5728Node\u4e2d\u8655\u7406\u4e8b\u4ef6\u5011(events)\u7684\u95dc\u9375(key) JavaScript<pre><code>const EventEmitter = require('events')\nconst door = new EventEmitter()\n</code></pre></li> <li>\u4e8b\u4ef6\u76e3\u807d\u5668(Event listener)\u6703\u5403(eats)\u5b83\u81ea\u5df1(its own)\u7684\u72d7\u98df(dog food),\u4e26\u4f7f\u7528(uses)\u4ee5\u4e0b\u7684\u4e8b\u4ef6(events)<ul> <li><code>newListener</code>: \u7576\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u88ab\u65b0\u589e(added)\u6642</li> <li><code>removeListener</code>: \u7576\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u88ab\u79fb\u9664(removed)\u6642</li> </ul> </li> <li>\u4ee5\u4e0b\u662f<code>event</code>\u6a21\u7d44(module)\u4e2d\u5e38\u7528\u7684\u65b9\u6cd5(methods)</li> <li>emitter.addListener(eventName, listener)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u65b0\u589e(adds)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(<code>listener</code> function)\u5230\u4e8b\u4ef6\u76e3\u807d\u5668\u9663\u5217(<code>listeners</code> array)\u7684\u6700\u5f8c\u9762(end)</li> <li>\u7b49\u540c\u65bcemitter.on(eventName, listener)</li> </ul> </li> <li>emitter.emit(eventName[, ...args])<ul> <li>\u767c\u51fa(Emits)\u4e00\u500b\u4e8b\u4ef6(event)\u3002\u8a72\u65b9\u6cd5\u6703 \u540c\u6b65\u5730 (synchronously)\u4f9d\u7167\u88ab\u8a3b\u518a(registered)\u7684\u9806\u5e8f(in the order)\u4f86 \u547c\u53eb (calls) \u6bcf\u4e00\u500b (every) \u4e8b\u4ef6\u76e3\u807d\u5668 (event listener)</li> <li><code>js     door.emit(\"slam\") // emitting the event \"slam\"</code></li> </ul> </li> <li>emitter.eventNames()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u9663\u5217(array)\u4f86\u4ee3\u8868(represent)\u6709\u8a3b\u518a(registered)\u5728\u76ee\u524d(current)\u7684<code>EventEmitter</code>\u7269\u4ef6(object)\u4e0a\u7684\u4e8b\u4ef6\u5011(events)   JavaScript<pre><code>door.eventNames()\n</code></pre></li> </ul> </li> <li>emitter.getMaxListeners()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b\u6574\u6578(integer)\u4f86\u4ee3\u8868\u7576\u524d\u7684<code>EventEmitter</code>\u7269\u4ef6(object)\"\u6700\u591a\"(maximum)\u80fd\u88ab\u65b0\u589e(add)\u5e7e\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u5728\u5176\u4e0a\u9762</li> <li>\u9810\u8a2d\u503c(default): <code>10</code></li> <li>\u4e26\u53ef\u4ee5\u900f\u904eemitter.setMaxListeners(n)\u65b9\u6cd5\u4f86\u8a2d\u5b9a\u6307\u5b9a\u7684<code>EventEmitter</code>\u7269\u4ef6(object)\"\u6700\u591a\"(maximum)\u80fd\u88ab\u65b0\u589e(add)\u5e7e\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u5230\u5176\u4e0a\u9762</li> </ul> </li> <li>emitter.listenerCount(eventName)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b\u6574\u6578(integer)\u4f86\u4ee3\u8868\u7576\u524d\u7684<code>EventEmitter</code>\u7269\u4ef6(object)\"\u4e0a\u6709\u5e7e\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)   JavaScript<pre><code>door.listenerCount('open')\n</code></pre></li> </ul> </li> <li>emitter.listeners(eventName)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b\u9663\u5217(array)\u4f86\u4ee3\u8868\u7576\u524d\u7684<code>EventEmitter</code>\u7269\u4ef6(object)\"\u4e0a\u6709\u54ea\u4e9b\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)   JavaScript<pre><code>door.listeners('open')\n</code></pre></li> </ul> </li> <li>emitter.removeListener(eventName, listener)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u5f9e\u4e8b\u4ef6\u76e3\u807d\u5668\u9663\u5217(<code>listener</code> array)\u4e0a\u79fb\u9664(removes)\u6307\u5b9a(specified)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(<code>listener</code>)</li> <li>\u5f9eNode <code>v10.0.0</code>\u7248\u672c\u958b\u59cb,\u7b49\u540c\u65bcemitter.off(eventName, listener)</li> </ul> </li> <li>emitter.on(eventName, listener)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u65b0\u589e(adds)\u4e00\u500b\u56de\u547c\u51fd\u5f0f(callback function)\u7d66\u7576\u524d\u88ab\u767c\u51fa(emitted)\u7684\u4e8b\u4ef6(event)   JavaScript<pre><code>door.on('open', () =&gt; {\nconsole.log('Door was opened')\n})\n</code></pre></li> </ul> </li> <li>emitter.once(eventName, listener)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u65b0\u589e(adds)\u4e00\u500b\u56de\u547c\u51fd\u5f0f(callback function)\u5728\u88ab\u8a3b\u518a(registered)\u4ee5\u5f8c(after),\u800c\u7b2c1\u6b21(first)\u88ab\u767c\u51fa(emitted)\u7684\u7684\u4e8b\u4ef6(event)\u3002\u9019\u500b\u65b9\u6cd5\u53ea\u6703\u88ab\u547c\u53eb(called)\u4e00\u6b21(once),\u4e0d\u6703(never)\u518d\u88ab\u547c\u53eb\u4e00\u6b21(again)   JavaScript<pre><code>const EventEmitter = require('events')\nconst ee = new EventEmitter()\nee.once('my-event', () =&gt; {\n//call callback function once\n})\n</code></pre></li> </ul> </li> <li>emitter.prependListener(eventName, listener)<ul> <li>\u7576\u6211\u5011\u4f7f\u7528<code>emitter.on()</code>\u6216\u662f<code>emitter.addListener()</code>\u90192\u7a2e\u65b9\u6cd5\u4f86\u65b0\u589e(add)\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u6642,\u5b83\u5011\u6703\u628a\u4e8b\u4ef6\u76e3\u807d\u5668\u65b0\u589e\u5230\u6574\u500b\u76e3\u807d\u5668(listeners)\u968a\u5217(queue)\u7684\u6700\u5f8c\u9762(last),\u4e26\u4e14\u6700\u5f8c(last)\u4e00\u500b\u547c\u53eb(called)\u3002\u6b64\u6642,\u5982\u679c\u6211\u5011\u60f3\u8981\u65b0\u589e\u4e8b\u4ef6\u76e3\u807d\u5668\u5230\u6574\u500b\u76e3\u807d\u5668\u968a\u5217\u7684\u6700\u524d\u9762(before)\u6642,\u5c31\u53ef\u4ee5\u900f\u904e<code>emitter.prependListener()</code>\u65b9\u6cd5\u4f86\u9054\u6210,\u4e26\u4e14\u7b2c1\u500b\u547c\u53eb(called)\u5176\u65b0\u589e\u7684\u4e8b\u4ef6\u76e3\u807d\u5668</li> </ul> </li> <li>emitter.prependOnceListener(eventName, listener)<ul> <li>\u7576\u6211\u5011\u4f7f\u7528<code>emitter.once()</code>\u65b9\u6cd5\u4f86\u65b0\u589e\u4e8b\u4ef6\u76e3\u807d\u5668\u6642,\u5b83\u6703\u628a\u4e8b\u4ef6\u76e3\u807d\u5668\u65b0\u589e\u5230\u6574\u500b\u76e3\u807d\u5668(listeners)\u968a\u5217(queue)\u7684\u6700\u5f8c\u9762(last),\u4e26\u4e14\u6700\u5f8c(last)\u4e00\u500b\u547c\u53eb(called)\u3002\u6b64\u6642,\u5982\u679c\u6211\u5011\u60f3\u8981\u65b0\u589e\u4e8b\u4ef6\u76e3\u807d\u5668\u5230\u6574\u500b\u76e3\u807d\u5668\u968a\u5217\u7684\u6700\u524d\u9762(before)\u6642,\u5c31\u53ef\u4ee5\u900f\u904e<code>emitter.prependOnceListener()</code>\u65b9\u6cd5\u4f86\u9054\u6210,\u4e26\u4e14\u7b2c1\u500b\u547c\u53eb(called)\u5176\u65b0\u589e\u7684\u4e8b\u4ef6\u76e3\u807d\u5668</li> </ul> </li> <li>emitter.removeAllListeners([eventName])<ul> <li>\u8a72\u65b9\u6cd5\u6703\u5f9e<code>EventEmitter</code>\u7269\u4ef6(object)\u4e2d\u79fb\u9664(removes) \u6307\u5b9a\u4e8b\u4ef6(specific event)\u4e2d \u6240\u6709(all)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)</li> <li><code>js     door.removeAllListeners('open')</code></li> </ul> </li> <li>emitter.removeListener(eventName, listener)<ul> <li>\u8a72\u65b9\u6cd5\u6703 \u79fb\u9664(remove)\u4e00\u500b\u6307\u5b9a(specific)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listener) \u3002\u6211\u5011\u53ef\u4ee5\u5c07\u8a72\u65b9\u6cd5\u7684\u56de\u547c\u51fd\u5f0f(callback function)\u53c3\u6578\u5132\u5b58(saving)\u70ba\u4e00\u500b\u8b8a\u6578(variable),\u4ee5\u8b93\u4e4b\u5f8c(later)\u7576\u6211\u5011\u9700\u8981\u53c3\u8003(reference)\u6642,\u53ef\u4ee5\u900f\u904e\u6b64\u8b8a\u6578\u4f86\u547c\u53eb<code>emitter.removeListener()</code>\u65b9\u6cd5   JavaScript<pre><code>const doSomething = () =&gt; {}\ndoor.on('open', doSomething)\ndoor.removeListener('open', doSomething)\n</code></pre></li> </ul> </li> <li>emitter.setMaxListeners(n)<ul> <li>\u8a72\u65b9\u6cd5\u53ef\u4ee5\u8a2d\u5b9a(set) \u6700\u591a(maximum) \u80fd\u65b0\u589e\u5e7e\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u5230<code>EventEmitter</code>\u7269\u4ef6(object)\u4e0a\u9762\u3002\u9810\u8a2d\u503c(defaults)\u70ba<code>10</code>\u500b\u4e8b\u4ef6\u76e3\u807d\u5668,\u4f46\u80fd\u8a2d\u5b9a\u8981\u589e\u52a0(increased) or \u6e1b\u5c11(lowered)   JavaScript<pre><code>door.setMaxListeners(50)\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#the-nodejs-http-module","title":"The Node.js http module","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44HTTP</p> <ul> <li><code>HTTP</code>\u6838\u5fc3\u6a21\u7d44(core module)\u662fNode\u7db2\u8def(networking)\u7684\u95dc\u9375\u6a21\u7d44(key module)</li> <li><code>HTTP</code>\u6a21\u7d44\u53ef\u4ee5\u900f\u904e\u5f15\u7528(require)\u4f86\u4f7f\u7528   JavaScript<pre><code>const http = require('http')\n</code></pre></li> <li>\u8a72\u6a21\u7d44\u6703\u63d0\u4f9b\u4e00\u4e9b\u5c6c\u6027(properties), \u65b9\u6cd5(methods), \u548c\u4e00\u4e9b\u985e\u5225(classes)</li> <li>\u5c6c\u6027(Properties)</li> <li>http.METHODS<ul> <li>\u8a72\u5c6c\u6027\u6703\u5217\u51fa(lists)\u6240\u6709\u80fd\u652f\u63f4(supported)\u7684HTTP\u65b9\u6cd5(methods) JavaScript<pre><code>&gt; require('http').METHODS\n[ 'ACL',\n'BIND',\n'CHECKOUT',\n'CONNECT',\n'COPY',\n'DELETE',\n'GET',\n'HEAD',\n'LINK',\n'LOCK',\n'M-SEARCH',\n'MERGE',\n'MKACTIVITY',\n'MKCALENDAR',\n'MKCOL',\n'MOVE',\n'NOTIFY',\n'OPTIONS',\n'PATCH',\n'POST',\n'PROPFIND',\n'PROPPATCH',\n'PURGE',\n'PUT',\n'REBIND',\n'REPORT',\n'SEARCH',\n'SUBSCRIBE',\n'TRACE',\n'UNBIND',\n'UNLINK',\n'UNLOCK',\n'UNSUBSCRIBE' ]\n</code></pre></li> </ul> </li> <li>http.STATUS_CODES<ul> <li>\u8a72\u5c6c\u6027\u6703\u5217\u51fa(lists)\u6240\u6709\u7684HTTP\u72c0\u614b\u78bc(status code)\u4ee5\u53ca\u5b83\u5011\u5206\u5225\u7684\u63cf\u8ff0(description) JavaScript<pre><code>&gt; require('http').STATUS_CODES\n{ '100': 'Continue',\n'101': 'Switching Protocols',\n'102': 'Processing',\n'200': 'OK',\n'201': 'Created',\n'202': 'Accepted',\n'203': 'Non-Authoritative Information',\n'204': 'No Content',\n'205': 'Reset Content',\n'206': 'Partial Content',\n'207': 'Multi-Status',\n'208': 'Already Reported',\n'226': 'IM Used',\n'300': 'Multiple Choices',\n'301': 'Moved Permanently',\n'302': 'Found',\n'303': 'See Other',\n'304': 'Not Modified',\n'305': 'Use Proxy',\n'307': 'Temporary Redirect',\n'308': 'Permanent Redirect',\n'400': 'Bad Request',\n'401': 'Unauthorized',\n'402': 'Payment Required',\n'403': 'Forbidden',\n'404': 'Not Found',\n'405': 'Method Not Allowed',\n'406': 'Not Acceptable',\n'407': 'Proxy Authentication Required',\n'408': 'Request Timeout',\n'409': 'Conflict',\n'410': 'Gone',\n'411': 'Length Required',\n'412': 'Precondition Failed',\n'413': 'Payload Too Large',\n'414': 'URI Too Long',\n'415': 'Unsupported Media Type',\n'416': 'Range Not Satisfiable',\n'417': 'Expectation Failed',\n'418': 'I\\'m a teapot',\n'421': 'Misdirected Request',\n'422': 'Unprocessable Entity',\n'423': 'Locked',\n'424': 'Failed Dependency',\n'425': 'Unordered Collection',\n'426': 'Upgrade Required',\n'428': 'Precondition Required',\n'429': 'Too Many Requests',\n'431': 'Request Header Fields Too Large',\n'451': 'Unavailable For Legal Reasons',\n'500': 'Internal Server Error',\n'501': 'Not Implemented',\n'502': 'Bad Gateway',\n'503': 'Service Unavailable',\n'504': 'Gateway Timeout',\n'505': 'HTTP Version Not Supported',\n'506': 'Variant Also Negotiates',\n'507': 'Insufficient Storage',\n'508': 'Loop Detected',\n'509': 'Bandwidth Limit Exceeded',\n'510': 'Not Extended',\n'511': 'Network Authentication Required' }\n</code></pre></li> </ul> </li> <li>http.globalAgent<ul> <li>\u8a72\u5c6c\u6027\u6703\u6307\u5411(points to)\u5168\u57df\u7684\u4ee3\u7406\u5668(<code>Agent</code>)\u7269\u4ef6(object)\u7684\u5be6\u4f8b(instance),\u4e5f\u5c31\u662fhttp.Agent\u985e\u5225(class)\u7684\u5be6\u4f8b(instance)</li> <li>\u8a72\u5c6c\u6027\u88ab\u7528\u4f86\u7ba1\u7406(manage)\u8207<code>HTTP</code>\u5ba2\u6236\u7aef(clients)\u7684\u9023\u63a5(connections)\u6301\u4e45\u6027(persistence) &amp; \u91cd\u7528(reuse)\u3002\u56e0\u6b64\u8a72\u5c6c\u6027\u662fNode\u7684<code>HTTP</code>\u7db2\u8def(networking)\u7684\u95dc\u9375\u5143\u4ef6(key component)</li> <li>\u95dc\u65bc<code>http.Agent</code>\u985e\u5225(class),\u5728\u7a0d\u5f8c(later on)\u7684\u63cf\u8ff0(description)\u4e2d\u6703\u6709\u66f4\u591a\u4ecb\u7d39</li> </ul> </li> <li>\u65b9\u6cd5(Methods)</li> <li>http.createServer([options][, requestListener])<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3(return)\u4e00\u500b\u65b0\u7684http.Server\u985e\u5225(class)\u7684\u5be6\u4f8b(instance)   JavaScript<pre><code>const server = http.createServer((req, res) =&gt; {\n//handle every single request with this callback\n})\n</code></pre></li> </ul> </li> <li>http.request(url[, options][, callback])<ul> <li>\u8a72\u65b9\u6cd5\u6703\u5411\u4f3a\u670d\u5668\u7aef\u767c\u51fa<code>HTTP</code>\u7684\u8acb\u6c42(<code>request</code>),\u4e26\u5efa\u7acb(creating)\u4e00\u500bhttp.ClientRequest\u985e\u5225(class)\u7684\u5be6\u4f8b(instance)</li> </ul> </li> <li>http.get(url[, options][, callback])<ul> <li>\u8207<code>http.request()</code>\u65b9\u6cd5\u985e\u4f3c(similar),\u4f46\u6703\u81ea\u52d5\u5730(automatically)\u8a2d\u5b9a(sets)<code>HTTP</code>\u7684\u8acb\u6c42(<code>request</code>)\u65b9\u6cd5\u70ba<code>GET</code>\u65b9\u6cd5,\u4e26\u4e14\u6703\u81ea\u52d5\u547c\u53ebrequest.end([data[, encoding]][, callback])\u65b9\u6cd5</li> </ul> </li> <li>\u985e\u5225(Classes)</li> <li><code>HTTP</code>\u6a21\u7d44(module)\u6703\u63d0\u4f9b\u4ee5\u4e0b5\u7a2e\u985e\u5225(classes)<ul> <li><code>http.Agent</code></li> <li><code>http.ClientRequest</code></li> <li><code>http.Server</code></li> <li><code>http.ServerResponse</code></li> <li><code>http.IncomingMessage</code></li> </ul> </li> <li>http.Agent<ul> <li>Node\u6703\u5efa\u7acb\u4e00\u500b\u5168\u57df\u7684\u4ee3\u7406\u5668(<code>Agent</code>)\u985e\u5225(class)\u7684\u5be6\u4f8b(instance),\u4ee5\u7528\u4f86\u7ba1\u7406(manage)\u8207<code>HTTP</code>\u5ba2\u6236\u7aef(clients)\u7684\u9023\u63a5(connections)\u6301\u4e45\u6027(persistence) &amp; \u91cd\u7528(reuse)\u3002\u56e0\u6b64<code>http.Agent</code>\u985e\u5225(class)\u662fNode\u7684<code>HTTP</code>\u7db2\u8def(networking)\u7684\u95dc\u9375\u5143\u4ef6(key component)</li> <li>\u9019\u500b\u7269\u4ef6\u6703\u78ba\u4fdd(make sure)\u5c0d\u65bc\u4f3a\u670d\u5668\u7aef(server)\u7684\u6bcf\u500b\u8acb\u6c42(every request)\u90fd\u662f\u6392\u968a(queued)\u7684,\u4e26\u4e14\u4efb\u4f55\u55ae\u4e00(single)\u63d2\u5ea7(socket)\u90fd\u662f\u6709\u88ab\u91cd\u8907\u4f7f\u7528(reused)\u7684</li> <li>\u6b64\u985e\u5225(class)\u4e5f\u6703\u7dad\u8b77(maintains)\u63d2\u5ea7\u6c60(a pool of sockets)\u3002\u9019\u4e5f\u5c31\u662fNode\u6548\u80fd(performance)\u597d\u7684\u95dc\u9375(key)\u539f\u56e0(reason)\u4e4b\u4e00</li> </ul> </li> <li>http.ClientRequest<ul> <li>\u7576\u547c\u53eb(called)http.request\u6216\u662fhttp.get()\u90192\u7a2e\u65b9\u6cd5\u4e4b\u4e00\u6642,\u7686\u6703\u5efa\u7acb(created)\u4e00\u500b<code>http.ClientRequest</code>\u7269\u4ef6(object)</li> <li>\u7576\u6536\u5230(received)\u56de\u61c9(response)\u6642,\u5c07\u6703\u4ee5\u4e00\u500b<code>http.IncomingMessage</code>\u5be6\u4f8b(instance)\u4f5c\u70ba\u53c3\u6578(argument),\u4f86\u547c\u53eb<code>response</code>\u4e8b\u4ef6(event)\u4f86\u4f5c\u70ba\u56de\u61c9(response)</li> <li>\u8a72\u985e\u5225(class)\u6240\u56de\u50b3(returned)\u7684\u56de\u61c9\u8cc7\u6599(data of a response),\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b2\u7a2e\u65b9\u5f0f\u4f86\u8b80\u53d6</li> <li>\u6211\u5011\u53ef\u4ee5\u547c\u53eb<code>response.read()</code>\u65b9\u6cd5</li> <li>\u5728<code>response</code>\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u4e2d,\u6211\u5011\u53ef\u4ee5\u8a2d\u5b9a(setup)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u7d66<code>data</code>\u4e8b\u4ef6(event),\u56e0\u6b64\u6211\u5011\u5c31\u80fd\u76e3\u807d(listen)\u4e32\u6d41\u9032\u53bb(streamed into)\u7684\u8cc7\u6599\u6d41(data)</li> </ul> </li> <li>http.Server<ul> <li>\u7576\u900f\u904e<code>http.createServer()</code>\u65b9\u6cd5(method)\u4f86\u5efa\u7acb(creating)\u4e00\u500b\u65b0\u7684\u4f3a\u670d\u5668(new server)\u6642,\u901a\u5e38(commonly)\u6703\u5be6\u4f8b\u5316(instantiated)\u4e26\u4e14\u56de\u50b3(returned)\u6b64\u985e\u5225(=&gt; \u4e5f\u5c31\u662f<code>http.Server</code>\u985e\u5225(class))</li> <li>\u4e00\u65e6(Once)\u6211\u5011\u64c1\u6709(have)\u4e00\u500b\u4f3a\u670d\u5668\u7269\u4ef6(server object)\u6642,\u6211\u5011\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b2\u7a2e\u65b9\u6cd5(methods)\u4f86\u5b58\u53d6(access)\u9019\u500b\u4f3a\u670d\u5668\u7269\u4ef6</li> <li>server.close([callback]): \u963b\u6b62(stop)\u4f3a\u670d\u5668(server)\u7e7c\u7e8c\u63a5\u53d7(accepting)\u65b0\u7684\u9023\u63a5(new connections)</li> <li>server.listen(): \u555f\u52d5(starts)HTTP\u4f3a\u670d\u5668(server),\u4e26\u76e3\u807d(listens)\u9023\u63a5(connections)</li> </ul> </li> <li>http.ServerResponse<ul> <li>\u6b64\u985e\u5225\u662f\u900f\u904e<code>http.Server</code>\u985e\u5225(class)\u6240\u5efa\u7acb\u7684,\u4e26\u50b3\u905e(passed)\u7d66\u4f5c\u70ba\u89f8\u767c(fires)<code>request</code>\u4e8b\u4ef6(event)\u7684\u7b2c2\u500b\u53c3\u6578(parameter)</li> <li>\u5e38\u898b(Commonly)\u4e14\u77e5\u540d(known)\u7684\u505a\u6cd5\u662f\u5728\u7a0b\u5f0f\u78bc\u4e2d\u7528\u4f5c<code>res</code> JavaScript<pre><code>const server = http.createServer((req, res) =&gt; {\n//res is an http.ServerResponse object\n})\n</code></pre></li> <li>\u5728\u4e8b\u4ef6\u8655\u7406\u5668(handler)\u4e2d,\u6211\u5011\u5e38\u6703\u547c\u53eb(call)\u7684\u6703\u662fresponse.end([data[, encoding]][, callback])\u65b9\u6cd5(method),<code>response.end()</code>\u65b9\u6cd5\u6703\u95dc\u9589(close)<code>response</code>\u7269\u4ef6,\u540c\u6642\u8a0a\u606f(message)\u5df2\u7d93\u5b8c\u6210(complete)\u4e86,\u4f3a\u670d\u5668(server)\u4e5f\u80fd\u5c07\u6b64\u8a0a\u606f\u767c\u9001(send)\u7d66\u5ba2\u6236\u7aef(client)\u3002<code>response.end()</code>\u65b9\u6cd5\u5c07\u6703\u5728\u6bcf\u6b21\u56de\u61c9(each response)\u6642,\u90fd\u6703\u88ab\u547c\u53eb(called)\u5230</li> <li>\u4ee5\u4e0b\u7684\u65b9\u6cd5(methods)\u5011\u5c07\u6703\u88ab\u7528\u4f86\u8207HTTP\u6a19\u982d(headers)\u505a\u4e92\u52d5(interact)</li> <li>response.getHeaderNames()<ul> <li>\u6b64\u65b9\u6cd5\u6703\u5f97\u5230(get)\u4e00\u500b\u5df2\u7d93(already)\u8a2d\u5b9a(set)\u597d\u7684HTTP\u6a19\u982d(headers)\u7684\u540d\u7a31\u6e05\u55ae(the list of names)</li> </ul> </li> <li>response.getHeaders()<ul> <li>\u6b64\u65b9\u6cd5\u6703\u5f97\u5230(get)\u4e00\u500b\u5df2\u7d93(already)\u8a2d\u5b9a(set)\u597d\u7684HTTP\u6a19\u982d(headers)\u7684\u62f7\u8c9d(copy, =&gt; \u6703\u4ee5\u7269\u4ef6(object)\u7684\u5f62\u5f0f\u4f86\u5c55\u793a)</li> </ul> </li> <li>response.setHeader('headername', value)<ul> <li>\u6b64\u65b9\u6cd5\u6703\u8a2d\u5b9a\u4e00\u500b(set)HTTP\u6a19\u982d(header)\u7684\u503c(value)</li> </ul> </li> <li>response.getHeader('headername')<ul> <li>\u6b64\u65b9\u6cd5\u6703\u5f97\u5230(get)\u4e00\u500b\u5df2\u7d93(already)\u8a2d\u5b9a(set)\u597d\u7684HTTP\u6a19\u982d(header)\u7684\u503c(value)</li> </ul> </li> <li>response.removeHeader('headername')<ul> <li>\u6b64\u65b9\u6cd5\u6703\u79fb\u9664(remove)\u4e00\u500b\u5df2\u7d93(already)\u8a2d\u5b9a(set)\u597d\u7684HTTP\u6a19\u982d(header)</li> </ul> </li> <li>response.hasHeader('headername')<ul> <li>\u7576\u6307\u5b9a\u7684HTTP\u6a19\u982d(header)\u5df2\u7d93(already)\u6709\u8a2d\u5b9a(set)\u904e\u7684\u503c\u6642\u5019,\u5c31\u6703\u56de\u50b3<code>true</code></li> </ul> </li> <li>response.headersSent<ul> <li>\u7576\u6307\u5b9a\u7684HTTP\u6a19\u982d(header)\u5df2\u7d93(already)\u50b3\u9001(sent)\u7d66\u5ba2\u6236\u7aef(client)\u7684\u6642\u5019,\u5c31\u6703\u56de\u50b3<code>true</code></li> </ul> </li> <li>\u5728\u8655\u7406\u5b8cHTTP\u6a19\u982d(header)\u4ee5\u5f8c,\u6211\u5011\u5c31\u53ef\u4ee5\u900f\u904eresponse.writeHead(statusCode[, statusMessage][, headers])\u65b9\u6cd5\u4f86\u5c07HTTP\u6a19\u982d(header)\u50b3\u9001\u7d66\u5ba2\u6236\u7aef(client)\u3002<code>response.writeHead()</code>\u65b9\u6cd5\u6703\u63a5\u53d7\u72c0\u614b\u78bc(statusCode)\u4f5c\u70ba\u7b2c1\u500b\u53c3\u6578(parameter),\u63a5\u8457\u662f\u9078\u64c7\u6027(optional)\u7684\u53c3\u6578(=&gt; \u72c0\u614b\u8a0a\u606f(status message)),\u6700\u5f8c\u662fHTTP\u6a19\u982d(headers)\u7269\u4ef6(object)</li> <li>\u82e5\u60f3\u8981\u5c07\u8cc7\u6599(data)\u50b3\u9001(send)\u7d66\u5ba2\u6236\u7aef(client)\u7684\u5167\u6587(<code>response body</code>)\u7684\u8a71,\u6211\u5011\u6703\u9700\u8981\u900f\u904eresponse.write(chunk[, encoding][, callback])\u65b9\u6cd5,\u800c<code>response.write()</code>\u65b9\u6cd5\u5c07\u6703\u50b3\u9001(send)\u7de9\u5b58\u8cc7\u6599(buffered data)\u7d66HTTP\u56de\u61c9\u4e32\u6d41(response stream)</li> <li>\u5982\u679c\u5c1a\u672a(not yet)\u5148\u4f7f\u7528<code>response.writeHead()</code>\u65b9\u6cd5\u4f86\u50b3\u9001(sent)HTTP\u6a19\u982d(header)\u51fa\u53bb\u7684\u8a71,\u5b83\u5c07\u6703\u5148(first)\u50b3\u9001(send)\u4f9d\u7167\u50b3\u904e\u4f86\u7684HTTP\u8acb\u6c42(<code>response</code>)\u7684\u72c0\u614b\u78bc(status code) &amp; \u72c0\u614b\u8a0a\u606f(status message)\u4f86\u50b3\u9001\u56de\u53bbHTTP\u6a19\u982d(header)\u7d66\u5ba2\u6236\u7aef(client)\u3002\u6211\u5011\u4e5f\u53ef\u4ee5\u900f\u904eresponse.statusCode\u8207response.statusMessage\u90192\u7a2e\u5c6c\u6027(properties)\u4f86\u8a2d\u5b9a\u8981\u56de\u50b3\u7d66\u5ba2\u6236\u7aef\u7684HTTP\u6a19\u982d(header)\u7684\u72c0\u614b\u78bc(status code) &amp; \u72c0\u614b\u8a0a\u606f(status message)</li> </ul> </li> <li>http.IncomingMessage<ul> <li>\u6b64\u4e00\u7269\u4ef6(object)\u53ef\u900f\u904e\u4ee5\u4e0b2\u7a2e\u65b9\u5f0f\u4f86\u5efa\u7acb(created)\u51fa\u4f86</li> <li>\u7576<code>http.Server</code>\u7269\u4ef6\u5728\u76e3\u807d(listening)<code>request</code>\u4e8b\u4ef6(event)\u6642</li> <li>\u7576<code>http.ClientRequest</code>\u7269\u4ef6\u5728\u76e3\u807d(listening)<code>response</code>\u4e8b\u4ef6(event)\u6642</li> <li><code>http.IncomingMessage</code>\u7269\u4ef6\u53ef\u4ee5\u88ab\u7528\u4f86\u5b58\u53d6\u56de\u61c9\u7269\u4ef6(<code>response</code>)</li> <li>\u5229\u7528\u5b83\u81ea\u5df1\u7684message.statusCode\u8207message.statusMessage\u90192\u7a2e\u5c6c\u6027</li> <li>\u5229\u7528\u4ed6\u81ea\u5df1\u7684HTTP\u6a19\u982d(headers)\u65b9\u6cd5\u6216\u662fmessage.rawHeaders\u5c6c\u6027</li> <li>HTTP\u65b9\u6cd5(method)\u53ef\u4ee5\u5229\u7528\u5b83\u81ea\u5df1\u7684message.method\u5c6c\u6027</li> <li>HTTP\u7248\u672c(version)\u53ef\u4ee5\u5229\u7528\u5b83\u81ea\u5df1\u7684message.httpVersion\u5c6c\u6027</li> <li><code>URL</code>\u53ef\u4ee5\u5229\u7528\u5b83\u81ea\u5df1\u7684message.url\u5c6c\u6027</li> <li>\u5e95\u5c64\u63d2\u5ea7(underlying socket)\u53ef\u4ee5\u5229\u7528\u5b83\u81ea\u5df1\u7684message.socket\u5c6c\u6027</li> <li>\u7531\u65bc(since)<code>http.IncomingMessage</code>\u7269\u4ef6\u5be6\u73fe(implements)\u4e86\u53ef\u8b80\u53d6(readable)\u4e32\u6d41(stream)\u4ecb\u9762(interface),\u56e0\u6b64\u53ef\u900f\u904e\u4e32\u6d41(streams)\u4f86\u5b58\u53d6(accessed)\u8cc7\u6599(data)</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs-buffers","title":"Node.js Buffers","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Buffer</p> <ul> <li><code>Buffer</code>\u662f\u4ec0\u9ebc? (What is a buffer?)</li> <li><code>buffer</code>(\u7de9\u5b58)\u662f\u8a18\u61b6\u9ad4(memory)\u7684\u4e00\u500b\u5340\u57df(area)\u3002Javascript\u7684\u958b\u767c\u8005(developers)\u53ef\u80fd\u6703\u4e0d\u592a\u719f\u6089\u9019\u500b\u89c0\u5ff5,\u800c\u4e0d\u50cf\u662f\u4f7f\u7528\u5176\u4ed6<code>C</code>, <code>C++</code>, <code>Go</code>\u7a0b\u5f0f\u8a9e\u8a00(\u6216\u662f\u5176\u4ed6\u4e5f\u5728\u4f7f\u7528\u7cfb\u7d71\u7a0b\u5f0f\u8a9e\u8a00(system programming language)\u7684\u4eba),\u6bcf\u5929\u9700\u8981\u8207\u8a18\u61b6\u9ad4\u4e92\u52d5(interact)\u7684\u958b\u767c\u8005,\u4f86\u5f97\u719f\u6089</li> <li><code>buffer</code>(\u7de9\u5b58)\u4ee3\u8868\u4e00\u500b\u5f9e<code>V8</code>\u9019\u500bJavascript\u5f15\u64ce(engine)\u6240\u5206\u914d(allocated)\u51fa\u4f86\u7684\u56fa\u5b9a\u5927\u5c0f(a fixed-size chunk)\u7684\u8a18\u61b6\u9ad4(memory),\u4e26\u4e14\u4e0d\u80fd\u518d\u88ab\u8abf\u6574\u5927\u5c0f(resized)</li> <li>\u6211\u5011\u53ef\u4ee5\u628a<code>buffer</code>(\u7de9\u5b58)\u60f3\u50cf(think of)\u6210\u662f\u4e00\u500b\u985e\u4f3c\u6b63\u6574\u6578\u9663\u5217(an array of integer),\u5176\u4e2d\u7684\u6bcf\u500b(each)\u6578\u5b57\u90fd\u4ee3\u8868(represent)\u8cc7\u6599\u7684\u4e00\u500b\u4f4d\u5143\u7d44(a byte of data)</li> <li><code>buffer</code>(\u7de9\u5b58)\u662f\u900f\u904eNode\u7684Buffer\u985e\u5225(class)\u4f86\u5be6\u4f5c(implemented)\u7684</li> <li>\u6211\u5011\u70ba\u4ec0\u9ebc\u6703\u9700\u8981<code>buffer</code>(\u7de9\u5b58)? (Why do we need buffer?)</li> <li>\u76f8\u6bd4\u65bc\u50b3\u7d71\u4e0a\u50c5\u8655\u7406\u5b57\u4e32(string)\u800c\u4e0d\u662f\u4e8c\u9032\u5236\u6578\u64da(binaries)\u7684\u751f\u614b\u5708(ecosystem),Node\u7684<code>Buffer</code>\u985e\u5225(class)\u662f\u88ab\u5f15\u9032(introduced)\u4f86\u5e6b\u52a9\u958b\u767c\u8005\u8655\u7406(dealt with)\u4e8c\u9032\u5236\u7684\u8cc7\u6599(binary data)</li> <li><code>Buffer</code>(\u7de9\u5b58)\u8207<code>Stream</code>(\u4e32\u6d41)\u662f\u7dca\u5bc6\u76f8\u9023(deeply linked)\u7684\u3002\u7576\u4e32\u6d41\u8655\u7406\u5668(stream processor)\u6536\u5230(receives)\u8cc7\u6599(data)\u7684\u901f\u5ea6\u6bd4\u8d77\u5b83\u80fd\u6d88\u5316(digest)\u7684\u901f\u5ea6\u5feb(faster)\u6642,\u4e32\u6d41\u8655\u7406\u5668\u5c31\u6703\u5c07\u8cc7\u6599\u653e\u5230<code>buffer</code></li> <li>\u5c0d\u65bc<code>buffer</code>(\u7de9\u5b58)\u7684\u4e00\u500b\u7c21\u55ae\u8996\u89ba\u5316(visualization)\u7684\u65b9\u5f0f\u5c31\u662f\u7576\u6211\u5011\u5728\u89c0\u770bYouTube\u5f71\u7247\u6642,\u7d05\u7dda(red line)\u6703\u8d85\u904e(beyond)\u6211\u5011\u7684\u89c0\u770b\u9ede(visualization point)---\u9019\u5c31\u4ee3\u8868YoutTube\u4e0b\u8f09\u8cc7\u6599(downloading data)\u7684\u901f\u5ea6\u6bd4\u6211\u5011\u89c0\u770b(viewing)\u5f71\u7247\u7684\u901f\u5ea6\u4f86\u5f97\u5feb(faster),\u4e26\u4e14\u7531\u6211\u5011\u7684\u700f\u89bd\u5668(browser)\u8ca0\u8cac\u8655\u7406<code>buffer</code>(\u7de9\u5b58)</li> <li>\u5982\u4f55\u5efa\u7acb<code>buffer</code>(\u7de9\u5b58)? (How to create a buffer)</li> <li><code>buffer</code>(\u7de9\u5b58)\u662f\u900f\u904eBuffer.from(), Buffer.alloc(), and Buffer.allocUnsafe()\u65b9\u6cd5\u5011\u4f86\u5efa\u7acb(created)\u7684       JavaScript<pre><code>const buf = Buffer.from('Hey!')\n</code></pre><ul> <li>Buffer.from(array)</li> <li>Buffer.from(arrayBuffer[, byteOffset[, length]])</li> <li>Buffer.from(buffer)</li> <li>Buffer.from(string[, encoding])</li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u50c5\u50b3\u905e(passing)\u4e00\u500b\u5927\u5c0f(size)\u4f86\u521d\u59cb\u5316(initialize)\u4e00\u500b<code>buffer</code>(\u7de9\u5b58)\u3002\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u6703\u5efa\u7acb\u4e00\u500b1<code>KB</code>\u5927\u5c0f\u7684<code>buffer</code> JavaScript<pre><code>const buf = Buffer.alloc(1024)\n//or\nconst buf = Buffer.allocUnsafe(1024)\n</code></pre><ul> <li>\u5118\u7ba1(While)\u4ee5\u4e0a\u76842\u7a2e\u65b9\u6cd5(=&gt; \u4e5f\u5c31\u662fBuffer.alloc()\u8207Buffer.allocUnsafe())\u7686\u5206\u914d\u7d66<code>buffer</code>(\u7de9\u5b58)\u4e00\u500b\u6307\u5b9a(specified)\u5927\u5c0f(size)\u7684\u4f4d\u5143\u7d44(bytes),\u4f46\u662f\u7531<code>Buffer.alloc()</code>\u65b9\u6cd5\u6240\u5efa\u7acb\u7684<code>buffer</code>\u6703\u88ab\u521d\u59cb\u5316(initialized)\u70ba<code>0</code>,\u800c\u7531<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5\u6240\u5efa\u7acb\u7684<code>buffer</code>\u5c07\"\u4e0d\u6703\"\u88ab\u521d\u59cb\u5316(uninitialized)\u3002\u9019\u4e5f\u610f\u5473\u8457\u5118\u7ba1\u7531<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5\u6240\u5efa\u7acb\u7684<code>buffer</code>\u5c07\u6703\u6bd4\u7531<code>Buffer.alloc()</code>\u65b9\u6cd5\u6240\u5efa\u7acb\u7684<code>buffer</code>\u4f86\u5f97\u5feb\u5f88\u591a(quite fast),\u4f46\u662f\u7531<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5\u6240\u5efa\u7acb\u7684<code>buffer</code>\u88ab\u5206\u914d(allocated)\u5230\u7684\u8a18\u61b6\u9ad4(memory)\u7247\u6bb5(segment)\u53ef\u80fd\u6703\u5305\u542b(contain)\u820a\u8cc7\u6599(old data),\u800c\u9019\u4e9b\u820a\u8cc7\u6599\u5c07\u6709\u53ef\u80fd\u662f\u654f\u611f\u6027(sensitive)\u8cc7\u6599</li> <li>\u7576\u8a18\u61b6\u9ad4(memory)\u4e2d\u5b58\u5728\u820a\u8cc7\u6599(older data),\u5c31\u53ef\u4ee5\u5728<code>buffer</code>(\u7de9\u5b58)\u8a18\u61b6\u9ad4\u88ab\u8b80\u53d6(read) or \u6d29\u6f0f(leaked)\u6642\u53ef\u4ee5\u88ab\u5b58\u53d6(accessed)\u3002\u6b63\u4e5f\u56e0\u70ba\u9019\u6a23,<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5\u624d\u6703\u88ab\u547d\u540d\u70ba\u4e0d\u5b89\u5168(unsafe)\u7684,\u4e26\u4e14\u5728\u4f7f\u7528\u6b64\u65b9\u6cd5\u6642\u9700\u8981\u66f4\u52a0\u6ce8\u610f(extra care)</li> </ul> </li> <li>\u4f7f\u7528<code>buffer</code>(\u7de9\u5b58) (Using a buffer)</li> <li>\u5b58\u53d6<code>buffer</code>(\u7de9\u5b58)\u7684\u5167\u5bb9 (Access the content of a buffer)<ul> <li><code>buffer</code>(\u7de9\u5b58)\u662f\u4e00\u500b\u7531\u4e8c\u9032\u5236\u8cc7\u6599(bytes)\u7d44\u6210\u7684\u9663\u5217(array),\u53ef\u4ee5\u7528\u5982\u540c\u9663\u5217(array)\u4e00\u6a23\u7684\u65b9\u5f0f\u4f86\u5b58\u53d6(accessed)     JavaScript<pre><code>const buf = Buffer.from('Hey!')\nconsole.log(buf[0]) //72\nconsole.log(buf[1]) //101\nconsole.log(buf[2]) //121\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u6578\u5b57\u662f\u842c\u570b\u78bc(Unicode Code),\u8868\u793a\u5b57\u5143(character)\u5728\u7de9\u885d\u5340(<code>buffer</code>)\u7684\u4f4d\u7f6e(position)\u3002<code>H</code>=&gt; 72, <code>e</code>=&gt; 101, <code>y</code>=&gt; 121</li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528buf.toString()\u65b9\u6cd5\u4f86\u5c07<code>buffer</code>(\u7de9\u5b58)\u7684\u5b8c\u6574\u5167\u5bb9(full content)\u6253\u5370(print)\u51fa\u4f86       JavaScript<pre><code>console.log(buf.toString())\n</code></pre></li> <li>\u7576\u6211\u5011\u5728\u521d\u59cb\u5316(initialize)\u4e00\u500b<code>buffer</code>(\u7de9\u5b58)\u6642,\u6709\u8a2d\u5b9a(sets)\u597d\u5b83\u7684\u5927\u5c0f(size)\u7684\u8a71,\u5247\u6211\u5011\u5c07\u80fd\u5b58\u53d6\u6703\u5305\u542b(contain)\u96a8\u6a5f\u6578\u64da(random data)\u800c\u4e0d\u662f\u7a7a(empty)\u7684<code>buffer</code>(\u7de9\u5b58)\u7684\u9810\u521d\u59cb\u5316\u8a18\u61b6\u9ad4(pre-initialized memory)</li> </ul> </li> <li>\u53d6\u5f97<code>buffer</code>(\u7de9\u5b58)\u7684\u9577\u5ea6 (Get the length of a buffer)<ul> <li>\u53ef\u5229\u7528buf.length\u5c6c\u6027   JavaScript<pre><code>const buf = Buffer.from('Hey!')\nconsole.log(buf.length)\n</code></pre></li> </ul> </li> <li>\u904d\u6b77<code>buffer</code>(\u7de9\u5b58)\u7684\u5167\u5bb9 (Iterate over the contents of a buffer)       JavaScript<pre><code>const buf = Buffer.from('Hey!')\nfor (const item of buf) {\nconsole.log(item) //72 101 121 33\n}\n</code></pre></li> <li>\u66f4\u6539<code>buffer</code>(\u7de9\u5b58)\u7684\u5167\u5bb9 (Changing the content of a buffer)<ul> <li>\u53ef\u5229\u7528buf.write(string[, offset[, length]][, encoding])\u65b9\u6cd5\u4f86\u6574\u500b(whole)\u8cc7\u6599\u5b57\u4e32(string of data)\u5beb\u5165(write)\u5230<code>buffer</code>(\u7de9\u5b58)\u4e4b\u4e2d     JavaScript<pre><code>const buf = Buffer.alloc(4)\nbuf.write('Hey!')\n</code></pre></li> <li>\u5c31\u5982\u540c\u6211\u5011\u4e5f\u53ef\u4ee5\u4f7f\u7528\u9663\u5217(array)\u8a9e\u6cd5(syntax)\u4f86\u5b58\u53d6(access)<code>buffer</code>(\u7de9\u5b58),\u6211\u5011\u4e5f\u80fd\u5229\u7528\u540c\u6a23\u7684\u65b9\u5f0f(in the same way)\u4f86\u8a2d\u5b9a(set)<code>buffer</code>(\u7de9\u5b58)\u7684\u5167\u5bb9(contents)     JavaScript<pre><code>const buf = Buffer.from('Hey!')\nbuf[1] = 111 //o\nconsole.log(buf.toString()) //Hoy!\n</code></pre></li> </ul> </li> <li>\u8907\u88fd\u4e00\u500b<code>buffer</code>(\u7de9\u5b58) (Copy a buffer)<ul> <li>\u53ef\u5229\u7528buf.copy(target[, targetStart[, sourceStart[, sourceEnd]]])\u65b9\u6cd5\u4f86\u8907\u88fd\u4e00\u500b<code>buffer</code>(\u7de9\u5b58)     JavaScript<pre><code>const buf = Buffer.from('Hey!')\nlet bufcopy = Buffer.alloc(4) //allocate 4 bytes\nbuf.copy(bufcopy)\n</code></pre></li> <li>\u5728\u9810\u8a2d\u7684\u60c5\u6cc1\u4e0b,\u6211\u5011\u5c07\u8907\u88fd\u6574\u500b<code>buffer</code>(\u7de9\u5b58)\u3002<code>buffer.copy()</code>\u65b9\u6cd5\u5167\u76843\u500b\u53c3\u6578(parameters)\u53ef\u4ee5\u8b93\u6211\u5011\u5b9a\u7fa9(define)</li> <li>\u8d77\u59cb\u4f4d\u7f6e(starting position)</li> <li>\u7d50\u675f\u4f4d\u7f6e(ending position)</li> <li>\u65b0\u7684<code>buffer</code>\u9577\u5ea6(the new buffer length)     JavaScript<pre><code>const buf = Buffer.from('Hey!')\nlet bufcopy = Buffer.alloc(2) //allocate 2 bytes\nbuf.copy(bufcopy, 0, 0, 2)\nbufcopy.toString() //'He'\n</code></pre></li> </ul> </li> <li>\u5c07<code>buffer</code>(\u7de9\u5b58)\u5207\u7247 (Slice a buffer)<ul> <li>\u5982\u679c\u6211\u5011\u60f3\u5efa\u7acb(create)\u4e00\u500b\u90e8\u5206(partial)\u53ef\u8996\u5316(visualization)\u7684<code>buffer</code>(\u7de9\u5b58),\u6211\u5011\u53ef\u4ee5\u5efa\u7acb\u4e00\u500b\u5207\u7247(slice)\u3002 \u5207\u7247(slice)\"\u4e26\u4e0d\u662f\"\u8907\u88fd(copy): \u539f\u59cb(original)<code>buffer</code>(\u7de9\u5b58)\u4ecd\u7136\u662f\u4e8b\u5be6\u4f86\u6e90(the source of truth),\u4f46\u5982\u679c\u539f\u59cb\u7de9\u5b58\u88ab\u6539\u8b8a\u6642,\u6211\u5011\u6240\u5efa\u7acb\u7684<code>buffer</code>\u5207\u7247(slice)\u4e5f\u6703\u88ab\u6539\u8b8a</li> <li>\u53ef\u5229\u7528buf.slice([start[, end]])\u65b9\u6cd5\u4f86\u5efa\u7acb\u4e00\u500b<code>buffer</code>(\u7de9\u5b58)\u5207\u7247,\u6b64\u65b9\u6cd5\u7684\u7b2c1\u500b\u53c3\u6578(parameter)\u4ee3\u8868\u8d77\u59cb\u4f4d\u7f6e(starting position),\u4ee5\u53ca\u53ef\u6307\u5b9a(specify)\u7b2c2\u500b\u9078\u64c7\u6027(optional)\u7684\u53c3\u6578(parameter)\u4f5c\u70ba\u7d50\u675f\u4f4d\u7f6e(ending position)     JavaScript<pre><code>const buf = Buffer.from('Hey!')\nbuf.slice(0).toString() //Hey!\nconst slice = buf.slice(0, 2)\nconsole.log(slice.toString()) //He\nbuf[1] = 111 //o\nconsole.log(slice.toString()) //Ho\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs-streams","title":"Node.js Streams","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Stream</p> <ul> <li>\u4ec0\u9ebc\u662f<code>streams</code>(\u4e32\u6d41)? (What are streams?)</li> <li><code>Streams</code>(\u4e32\u6d41)\u662f\u5176\u4e2d\u4e00\u500b\u70baNode\u61c9\u7528\u7a0b\u5f0f(applications)\u63d0\u4f9b\u52d5\u529b(power)\u7684\u57fa\u672c(fundamental)\u89c0\u5ff5(concept)\u4e4b\u4e00</li> <li><code>Streams</code>(\u4e32\u6d41)\u662f\u4e00\u500b\u7528\u4f86\u8655\u7406(handle)\u8b80\u5beb(reading/writing)\u6a94\u6848(files)\u3001\u7db2\u8def\u901a\u8a0a(network communications)\u3001\u6216\u662f\u4efb\u4f55(any kind of)\u7aef\u5c0d\u7aef(end-to-end)\u7684\u8cc7\u8a0a\u4ea4\u6d41(information exchange)\u7684\u4e00\u7a2e\u6709\u6548\u7387(efficient)\u7684\u65b9\u5f0f(way)</li> <li><code>Streams</code>(\u4e32\u6d41)\u4e26\u4e0d\u662fNode\u7279\u6709(unique)\u7684\u6982\u5ff5(concept)\u3002\u65e9\u5728\u5e7e\u5341\u5e74(decades)\u4ee5\u524d\u5de6\u53f3,<code>Streams</code>(\u4e32\u6d41)\u5c31\u5df2\u7d93\u88ab<code>Unix</code>\u4f5c\u696d\u7cfb\u7d71(operating system)\u6240\u5f15\u9032(introduced)\u4e86,\u56e0\u6b64\u7a0b\u5f0f(program)\u5c31\u80fd\u900f\u904e\u7ba1\u9053\u904b\u7b97\u5b50(pipe operator, =&gt; \u4e5f\u5c31\u662f<code>|</code>)\u4f86\u8207\u6bcf\u4e00\u500b\u901a\u904e(passing)\u7684<code>streams</code>(\u4e32\u6d41)\u505a\u4e92\u52d5</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u82e5\u662f\u50b3\u7d71(traditional)\u7684\u65b9\u6cd5(way),\u7576\u6211\u5011\u544a\u8a34\u7a0b\u5f0f(program)\u8981\u8b80\u53d6(read)\u4e00\u500b\u6a94\u6848(file)\u6642,\u6a94\u6848\u6703\u88ab\u8b80\u53d6\u5230\u8a18\u61b6\u9ad4(memory)\u4e2d,\u5f9e\u958b\u59cb(start)\u5230\u7d50\u675f(finish),\u7136\u5f8c\u6211\u5011\u5c31\u80fd\u8655\u7406(process)\u5b83</li> <li>\u900f\u904e<code>streams</code>(\u4e32\u6d41)\u4f86\u5c07\u6a94\u6848\u5167\u5bb9\u4e00\u90e8\u5206\u4e00\u90e8\u5206(piece by piece)\u5730\u8b80\u53d6(read),\u800c\u4e0d\u7528\u5728\u8655\u7406\u8a72\u6a94\u6848\u5167\u5bb9\u6642,\u9700\u8981\u5148\u628a\u6574\u500b(all)\u6a94\u6848\u5167\u5bb9\u4e8b\u5148\u8b80\u53d6\u5230\u8a18\u61b6\u9ad4(memory)\u4e2d</li> <li>Node\u7684Stream\u5167\u5efa\u6838\u5fc3\u6a21\u7d44\u63d0\u4f9b(provides)\u4e86\u80fd\u5efa\u69cb(built)\u51fa\u6240\u6709<code>streams</code>(\u4e32\u6d41)API\u7684\u57fa\u790e(foundation)</li> <li>\u6240\u6709\u7684<code>streams</code>(\u4e32\u6d41)\u90fd\u662fEventEmitter\u985e\u5225(class)\u7684\u5be6\u4f8b(instances)</li> <li>\u70ba\u4ec0\u9ebc\u8981\u4f7f\u7528<code>streams</code>(\u4e32\u6d41)? (Why streams?)</li> <li>\u5728\u8cc7\u6599\u8655\u7406(data handling)\u7684\u65b9\u6cd5(methods)\u9019\u65b9\u9762,<code>Streams</code>(\u4e32\u6d41)\u57fa\u672c\u4e0a\u63d0\u4f9b\u4e86\u4ee5\u4e0b2\u500b\u4e3b\u8981(major)\u7684\u512a\u9ede(advantages)<ul> <li>\u8a18\u61b6\u9ad4\u6548\u7387(Memory efficiency): \u7576\u6211\u5011\u8655\u7406(process)\u8cc7\u6599\u6642,\u4e0d\u9700\u8981\u4e8b\u5148(before)\u5c07\u5927\u91cf\u7684\u8cc7\u6599(large amounts of data)\u8b80\u53d6(load)\u5230\u8a18\u61b6\u9ad4\u4e2d(in memory)</li> <li>\u6642\u9593\u6548\u7387(Time efficiency): \u958b\u59cb\u8655\u7406(processing)\u8cc7\u6599(data)\u7684\u524d\u7f6e\u6642\u9593\u7e2e\u77ed(less time)\u3002\u5f9e(since)\u6211\u5011\u64c1\u6709\u8cc7\u6599\u5f8c,\u6211\u5011\u5c31\u53ef\u4ee5\u76f4\u63a5\u9032\u884c\u8655\u7406,\u800c\u4e0d\u662f(rather than)\u7b49\u5f85\u6574\u500b\u8cc7\u6599\u8ca0\u8f09(data payload)\u70ba\u53ef\u7528(available)\u7684\u6642\u5019\u624d\u80fd\u958b\u59cb\u8655\u7406</li> </ul> </li> <li>\u4e00\u500b<code>streams</code>(\u4e32\u6d41)\u7684\u7bc4\u4f8b (An example of stream)</li> <li>\u6709\u4e00\u500b\u5178\u578b\u7684\u7bc4\u4f8b\u5c31\u662f\u5f9e\u786c\u789f(disk)\u8b80\u53d6\u8cc7\u6599(reading file)</li> <li>\u5229\u7528Node\u7684<code>fs</code>\u6a21\u7d44,\u6211\u5011\u53ef\u4ee5\u8b80\u53d6\u4e00\u500b\u6a94\u6848,\u4e26\u5728\u7576\u6709\u65b0\u88ab\u5efa\u7acb(established)\u7684\u9023\u7dda(connection)\u8207\u6211\u5011\u7684HTTP\u4f3a\u670d\u5668(server)\u9023\u7dda\u6642,\u63d0\u4f9b\u6587\u4ef6(serve it)       JavaScript<pre><code>const http = require('http')\nconst fs = require('fs')\nconst server = http.createServer(function(req, res) {\nfs.readFile(__dirname + '/data.txt', (err, data) =&gt; {\nres.end(data)\n})\n})\nserver.listen(3000)\n</code></pre><ul> <li>fs.readFile(path[, options], callback): \u6b64\u65b9\u6cd5\u6703\u8b80\u53d6(reads)\u6574\u500b\u6a94\u6848\u5167\u5bb9(full contents of the file),\u7576\u6b64\u65b9\u6cd5\u5b8c\u6210\u6642,\u6703\u547c\u53eb(invokes)\u56de\u547c\u51fd\u5f0f(callback)</li> <li>response.end([data[, encoding]][, callback]): \u6b64\u65b9\u6cd5\u6703\u56de\u50b3(return)\u6574\u500b\u6a94\u6848\u5167\u5bb9(full contents)\u7d66HTTP\u5ba2\u6236\u7aef(client)</li> <li>\u5982\u679c\u9019\u500b\u6a94\u6848\u5f88\u5927\u7684\u8a71,\u6b64\u64cd\u4f5c\u6703\u5c07\u82b1\u8cbb\u5927\u91cf\u7684\u6642\u9593</li> </ul> </li> <li>\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u662f\u7528<code>streams</code>(\u4e32\u6d41)\u4f86\u5b8c\u6210\u540c\u6a23\u7684\u4e8b\u60c5       JavaScript<pre><code>const http = require('http')\nconst fs = require('fs')\nconst server = http.createServer((req, res) =&gt; {\nconst stream = fs.createReadStream(__dirname + '/data.txt')\nstream.pipe(res)\n})\nserver.listen(3000)\n</code></pre><ul> <li>\u6211\u5011\u6c92\u6709\u7b49\u5f85\u6574\u500b\u6a94\u6848\u88ab\u5b8c\u5168\u8b80\u53d6(fully read),\u800c\u662f\u7576\u6211\u5011\u6709\u5df2\u7d93\u6e96\u5099\u597d(ready)\u7684\u5927\u91cf\u6578\u64da(a chunk of data)\u8981\u88ab\u50b3\u9001\u6642,\u5c31\u53ef\u4ee5\u7acb\u5373\u958b\u59cb\u5229\u7528\u4e32\u6d41(streaming)\u7684\u65b9\u5f0f\u50b3\u8f38\u5230HTTP\u5ba2\u6236\u7aef(client)</li> </ul> </li> <li>readable.pipe(destination[, options])\u65b9\u6cd5\u7684\u4ecb\u7d39</li> <li>\u4e0a\u9762\u7684\u7bc4\u4f8b\u4f7f\u7528<code>stream.pipe(res)</code>\u65b9\u6cd5,\u800c\u9019\u500b\u65b9\u6cd5(method)\u6703\u5728\u6a94\u6848\u4e32\u6d41(file stream)\u4e0a\u88ab\u547c\u53eb(called)</li> <li>\u9019\u500b\u65b9\u6cd5\u662f\u7528\u4f86\u505a\u4ec0\u9ebc\u7684? \u5b83\u6703\u7372\u5f97(takes)\u6d88\u606f\u4f86\u6e90(source),\u4e26\u7528\u7ba1\u9053(<code>pipe</code>)\u7684\u65b9\u5f0f\u4f86\u50b3\u9001\u5230\u76ee\u7684\u5730(destination)</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u5728\u6d88\u606f\u4f86\u6e90\u4e32\u6d41(source stream)\u4e0a\u547c\u53eb(call)<code>stream.pipe(res)</code>\u9019\u500b\u65b9\u6cd5,\u56e0\u6b64\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b,\u6a94\u6848\u901a\u5e38\u6703\u88ab\u7528\u7ba1\u9053(<code>pipe</code>)\u7684\u65b9\u5f0f\u4f86\u50b3\u9001\u5230HTTP\u7684\u56de\u61c9\u7269\u4ef6(<code>response</code>)\u4e2d</li> <li><code>stream.pipe(res)</code>\u9019\u500b\u65b9\u6cd5\u56de\u50b3\u7684\u503c\u5c31\u662f\u76ee\u7684\u5730\u4e32\u6d41(destination stream),\u800c\u5b83\u662f\u4e00\u500b\u975e\u5e38\u65b9\u4fbf(convenient)\u7684\u6771\u897f\u4f86\u8b93\u6211\u5011\u53ef\u4ee5\u4e32\u9023(chain)\u591a\u500b(multiple)\u7ba1\u9053(<code>pipe</code>)\u547c\u53eb(calls)       JavaScript<pre><code>src.pipe(dest1).pipe(dest2)\n</code></pre><ul> <li>\u4ee5\u4e0a\u505a\u6cd5\u7684\u69cb\u60f3(construct)\u6703\u8ddf\u4ee5\u4e0b\u9019\u7a2e\u65b9\u5f0f\u662f\u76f8\u540c\u7684   JavaScript<pre><code>src.pipe(dest1)\ndest1.pipe(dest2)\n</code></pre></li> </ul> </li> <li>\u5229\u7528\u4e32\u6d41\u9a45\u52d5\u7684Node APIs (Streams-powered Node.js APIs)</li> <li>\u56e0\u70ba\u9019\u4e9b\u512a\u9ede(advantages),\u8a31\u591aNode\u7684\u5167\u5efa\u6838\u5fc3\u6a21\u7d44(core module)\u90fd\u6709\u63d0\u4f9b(provide)\u539f\u751f(native)\u7684\u4e32\u6d41(<code>stream</code>)\u8655\u7406(handling)\u80fd\u529b(capabilities),\u5c24\u5176(notably)\u662f\u4ee5\u4e0b\u5e7e\u7a2e\u65b9\u5f0f<ul> <li>process.stdin: \u6b64\u5c6c\u6027\u6703\u56de\u50b3(returns)\u4e00\u500b<code>streams</code>(\u4e32\u6d41)\u4f86\u9023\u63a5(connected)\u5230\u6a19\u6e96\u8f38\u5165(<code>stdin</code>)</li> <li>process.stdout: \u6b64\u5c6c\u6027\u6703\u56de\u50b3(returns)\u4e00\u500b<code>streams</code>(\u4e32\u6d41)\u4f86\u9023\u63a5(connected)\u5230\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)</li> <li>process.stderr: \u6b64\u5c6c\u6027\u6703\u56de\u50b3(returns)\u4e00\u500b<code>streams</code>(\u4e32\u6d41)\u4f86\u9023\u63a5(connected)\u5230\u6a19\u6e96\u932f\u8aa4(<code>stderr</code>)</li> <li>fs.createReadStream(path[, options]): \u6b64\u65b9\u6cd5\u6703\u5efa\u7acb(creates)\u4e00\u500b\u53ef\u8b80\u53d6(readable)\u7684\u6a94\u6848\u4e32\u6d41(stream to a file)</li> <li>fs.createWriteStream(path[, options]): \u6b64\u65b9\u6cd5\u6703\u5efa\u7acb(creates)\u4e00\u500b\u53ef\u5beb\u5165(writable)\u7684\u6a94\u6848\u4e32\u6d41(stream to a file)</li> <li>net.connect(): \u6b64\u65b9\u6cd5\u6703\u958b\u59cb(initiates)\u4e00\u500b\u4ee5<code>streams</code>\u70ba\u57fa\u790e(stream-based)\u7684\u9023\u7dda(connection)</li> <li>http.request(url[, options][, callback]): \u6b64\u65b9\u6cd5\u6703\u56de\u50b3(returns)\u4e00\u500b<code>http.ClientRequest</code>\u985e\u5225(class)\u7684\u5be6\u4f8b(instance),\u800c\u9019\u500b\u5be6\u4f8b\u6703\u662f\u4e00\u500b\u53ef\u5beb\u5165(writable)\u7684\u4e32\u6d41(<code>stream</code>)</li> <li>zlib.createGzip([options]): \u6b64\u65b9\u6cd5\u6703\u5229\u7528<code>gzip</code>\u9019\u7a2e\u58d3\u7e2e\u6f14\u7b97\u6cd5(compress algorithm)\u4f86\u5c07\u8cc7\u6599(data)\u58d3\u7e2e(compress)\u9032<code>streams</code>(\u4e32\u6d41)\u88e1\u9762(into)</li> <li>zlib.createGunzip([options]): \u6b64\u65b9\u6cd5\u6703\u89e3\u58d3\u7e2e(decompress)\u4e00\u500b<code>gzip</code>\u4e32\u6d41(<code>stream</code>)</li> <li>zlib.createDeflate([options]): \u6b64\u65b9\u6cd5\u6703\u5229\u7528<code>deflate</code>\u9019\u7a2e\u58d3\u7e2e\u6f14\u7b97\u6cd5(compress algorithm)\u4f86\u5c07\u8cc7\u6599(data)\u58d3\u7e2e(compress)\u9032<code>streams</code>(\u4e32\u6d41)\u88e1\u9762(into)</li> <li>zlib.createInflate([options]): \u6b64\u65b9\u6cd5\u6703\u89e3\u58d3\u7e2e(decompress)\u4e00\u500b<code>deflate</code>\u4e32\u6d41(<code>stream</code>)</li> </ul> </li> <li>\u4e0d\u540c\u985e\u578b\u7684\u4e32\u6d41(<code>stream</code>) (Different types of streams)</li> <li>\u4e32\u6d41(<code>stream</code>)\u6703\u6709\u4ee5\u4e0b4\u7a2e\u985e\u5225(classes)<ul> <li><code>Readable</code>: \u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u662f\u4e00\u500b\u6211\u5011\u53ef\u4ee5\u900f\u904e\u7ba1\u9053\u50b3\u51fa(pipe from),\u800c\u4e0d\u80fd\u50b3\u5165(pipe into)\u7684<code>stream</code>(\u4e32\u6d41); \u4e5f\u5c31\u662f\u8aaa,\u6211\u5011\u53ef\u4ee5\u5229\u7528\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u4f86\u63a5\u6536\u8cc7\u6599(receive data),\u800c\u4e0d\u80fd\u50b3\u9001\u8cc7\u6599(send data)\u7d66\u5b83\u3002\u7576\u6211\u5011\u63a8\u9001(push)\u8cc7\u6599(data)\u9032\u5165(into)\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u6642,\u9019\u4e9b\u8cc7\u6599\u662f\u7de9\u5b58(buffered)\u7684,\u76f4\u5230(until)\u4f7f\u7528\u8005(consumer)\u958b\u59cb\u8b80\u53d6(starts to read)\u9019\u4e9b\u8cc7\u6599(data)</li> <li><code>Writable</code>: \u53ef\u5beb\u5165\u4e32\u6d41(writable stream)\u662f\u4e00\u500b\u6211\u5011\u53ef\u4ee5\u900f\u904e\u7ba1\u9053\u50b3\u5165(pipe into),\u800c\u4e0d\u80fd\u50b3\u51fa(pipe from)\u7684<code>stream</code>(\u4e32\u6d41); \u4e5f\u5c31\u662f\u8aaa,\u6211\u5011\u53ef\u4ee5\u5229\u7528\u53ef\u5beb\u5165\u4e32\u6d41(writable stream)\u4f86\u50b3\u9001\u8cc7\u6599(send data),\u800c\u4e0d\u80fd\u50b3\u5165\u8cc7\u6599(receive data)\u7d66\u5b83\u3002</li> <li><code>Duplex</code>: \u96d9\u5411\u4e32\u6d41(duplex stream)\u662f\u4e00\u500b\u65e2\u80fd\u63a5\u53d7\u6211\u5011\u900f\u904e\u7ba1\u9053\u50b3\u5165(pipe into),\u4e5f\u80fd\u63a5\u53d7\u6211\u5011\u900f\u904e\u7ba1\u9053\u50b3\u51fa(pipe from)\u3002\u57fa\u672c\u4e0a\u4f86\u8aaa(basically),\u5c31\u662f\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream) &amp; \u53ef\u5beb\u5165\u4e32\u6d41(writable stream)\u7684\u7d50\u5408(combination)</li> <li><code>Transform</code>: \u8f49\u63db\u4e32\u6d41(transform stream)\u985e\u4f3c\u65bc\u96d9\u5411\u4e32\u6d41(duplex stream),\u4f46\u662f\u8f49\u63db\u4e32\u6d41(transform stream)\u7684\u8f38\u51fa(output)\u662f\u5b83\u7684\u8f38\u5165(its input)\u7684\u8f49\u63db(transform)</li> </ul> </li> <li>\u5982\u4f55\u5efa\u7acb\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)? (How to create a readable stream)</li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904eNode\u7684<code>Stream</code>\u5167\u5efa\u6838\u5fc3\u6a21\u7d44\u4f86\u7372\u5f97(get)\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream),\u63a5\u8457\u6211\u5011\u518d\u521d\u59cb\u5316(initialize)\u5b83\u4e26\u4e14\u5be6\u4f5c(implement)\u5b83\u7684readable._read(size)\u65b9\u6cd5(method)</li> <li>\u9996\u5148,\u6211\u5011\u5148\u5efa\u7acb(create)\u4e00\u500b\u4e32\u6d41\u7269\u4ef6(stream object)       JavaScript<pre><code>const Stream = require('stream')\nconst readableStream = new Stream.Readable()\n</code></pre></li> <li>\u63a5\u8457,\u5be6\u4f5c(implement)\u5b83\u7684readable._read(size)\u65b9\u6cd5(method)       JavaScript<pre><code>readableStream._read = () =&gt; {}\n</code></pre></li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u5229\u7528<code>read</code>\u9019\u500b\u9078\u9805(option)\u4f86\u5be6\u4f5c(implement)<code>readable._read(size)</code>\u65b9\u6cd5(method)       JavaScript<pre><code>const readableStream = new Stream.Readable({\nread() {}\n})\n</code></pre></li> <li>\u73fe\u5728(Now),<code>stream</code>(\u4e32\u6d41)\u662f\u88ab\u521d\u59cb\u5316\u904e\u5f8c(initialized)\u7684,\u6211\u5011\u53ef\u4ee5\u50b3\u9001\u8cc7\u6599(send data)\u7d66\u5b83       JavaScript<pre><code>readableStream.push('hi!')\nreadableStream.push('ho!')\n</code></pre></li> <li>\u5982\u4f55\u5efa\u7acb\u4e00\u500b\u53ef\u5beb\u5165\u4e32\u6d41(writable stream)? (How to create a writable stream)</li> <li>\u70ba\u4e86\u5efa\u7acb(create)\u51fa\u4e00\u500b\u53ef\u5beb\u5165\u4e32\u6d41(writable stream),\u6211\u5011\u5148\u7e7c\u627f(extend)\u57fa\u790e(base)Writable\u7269\u4ef6(object),\u63a5\u8457\u6211\u5011\u6703\u5be6\u4f5c(implement)\u9019\u500b<code>Writable</code>\u7269\u4ef6\u7684writable._write(chunk, encoding, callback)\u65b9\u6cd5(method)</li> <li>\u9996\u5148,\u6211\u5011\u5148\u5efa\u7acb(create)\u4e00\u500b\u4e32\u6d41\u7269\u4ef6(stream object)       JavaScript<pre><code>const Stream = require('stream')\nconst writableStream = new Stream.Writable()\n</code></pre></li> <li>\u63a5\u8457,\u5be6\u4f5c(implement)\u5b83\u7684writable._write(chunk, encoding, callback)\u65b9\u6cd5(method)       JavaScript<pre><code>writableStream._write = (chunk, encoding, next) =&gt; {\nconsole.log(chunk.toString())\nnext()\n}\n</code></pre></li> <li>\u73fe\u5728(Now),\u6211\u5011\u5c31\u53ef\u4ee5\u900f\u904e\u7ba1\u9053\u50b3\u5165(pipe into)\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u9032\u53bb       JavaScript<pre><code>process.stdin.pipe(writableStream)\n</code></pre></li> <li>\u5982\u4f55\u5f9e\u53ef\u8b80\u53d6\u4e32\u6d41\u4e2d(readable stream)\u7372\u5f97\u8cc7\u6599? (How to get data from a readable stream?)</li> <li><code>Question</code>: \u6211\u5011\u8a72\u5982\u4f55\u5f9e\u53ef\u8b80\u53d6\u4e32\u6d41\u4e2d(readable stream)\u7372\u5f97\u8cc7\u6599\u5462?<ul> <li><code>Answer</code>: \u5229\u7528\u53ef\u5beb\u5165\u4e32\u6d41(writable stream)   JavaScript<pre><code>const Stream = require('stream')\nconst readableStream = new Stream.Readable({\nread() {}\n})\nconst writableStream = new Stream.Writable()\nwritableStream._write = (chunk, encoding, next) =&gt; {\nconsole.log(chunk.toString())\nnext()\n}\nreadableStream.pipe(writableStream)\nreadableStream.push('hi!')\nreadableStream.push('ho!')\n</code></pre></li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5730(directly)\u6d88\u8017(consume)\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream),\u53ef\u5229\u7528<code>readable</code>\u4e8b\u4ef6(event)       JavaScript<pre><code>readableStream.on('readable', () =&gt; {\nconsole.log(readableStream.read())\n})\n</code></pre></li> <li>\u5982\u4f55\u50b3\u9001\u8cc7\u6599\u7d66\u53ef\u5beb\u5165\u4e32\u6d41(writable stream)? (How to send data to a writable stream)</li> <li>\u53ef\u5229\u7528writable.write(chunk[, encoding][, callback])\u65b9\u6cd5(method)       JavaScript<pre><code>writableStream.write('hey!\\n')\n</code></pre></li> <li>\u7576\u6211\u5011\u7d50\u675f\u5beb\u5165\u64cd\u4f5c\u6642,\u8a72\u5982\u4f55\u5c0d\u53ef\u5beb\u5165\u4e32\u6d41(writable stream)\u767c\u9001\u4e00\u500b\u4fe1\u865f\u5462? (Signaling a writable stream that you ended writing)</li> <li>\u53ef\u5229\u7528writable.end([chunk[, encoding]][, callback])\u65b9\u6cd5(method)       JavaScript<pre><code>const Stream = require('stream')\nconst readableStream = new Stream.Readable({\nread() {}\n})\nconst writableStream = new Stream.Writable()\nwritableStream._write = (chunk, encoding, next) =&gt; {\nconsole.log(chunk.toString())\nnext()\n}\nreadableStream.pipe(writableStream)\nreadableStream.push('hi!')\nreadableStream.push('ho!')\nwritableStream.end()\n</code></pre></li> </ul>"},{"location":"programming_language/nodejs/#nodejs-the-difference-between-development-and-production","title":"Node.js, the difference between development and production","text":"<ul> <li>\u6211\u5011\u53ef\u4ee5\u5c0d\u751f\u7522\u74b0\u5883(production environment)\u3001\u958b\u767c\u74b0\u5883(development environment)\u505a\u4e0d\u540c\u7684\u8a2d\u5b9a(configurations)</li> <li>Node\u6703\u5047\u8a2d(assumes)\u6211\u5011\u7e3d\u662f\u5728\u958b\u767c\u74b0\u5883\u4e2d(development environment)\u57f7\u884c\u3002\u9019\u6642,\u6211\u5011\u53ef\u4ee5\u900f\u904e\u8a2d\u5b9aNode\u7684\u74b0\u5883\u8b8a\u6578(environment variable)\u70ba\"\u751f\u7522\u74b0\u5883(production environment)\",\u4f86\u5411Node\u767c\u51fa\u6211\u5011\u5728\u751f\u7522\u74b0\u5883\u57f7\u884c(running)\u61c9\u7528\u7a0b\u5f0f\u7684\u4fe1\u865f(signal)</li> <li><code>bash       export NODE_ENV=production</code><ul> <li>\u4ee5\u4e0a\u7684\u6307\u4ee4\u662f\u5728<code>shell</code>\u4e2d\u57f7\u884c\u7684,\u4f46\u662f\u6700\u597d\u5c07\u9019\u500b\u6307\u4ee4\u52a0\u5230\u6211\u5011\u7684<code>shell</code>\u8a2d\u5b9a\u6a94(\u4f8b: <code>.bash_profile</code>)\u4e2d,\u5426\u5247\u7576\u6211\u5011\u91cd\u958b\u6a5f(system restart)\u6642,\u5728\u7d42\u7aef\u6a5f\u4e0a\u57f7\u884c\u6307\u4ee4\u6240\u7522\u751f\u7684Node\u74b0\u5883\u8b8a\u6578\u8a2d\u5b9a\u5c31\"\u4e0d\u6703\"\u88ab\u4fdd\u7559(not persist)</li> </ul> </li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u7684\u53e6\u4e00\u7a2e\u65b9\u5f0f\u4f86\u8a2d\u5b9aNode\u74b0\u5883\u8b8a\u6578(environment variable),\u5c31\u662f\u5728\u57f7\u884cNode\u61c9\u7528\u7a0b\u5f0f\u521d\u59cb\u5316(initialization)\u7684\u6307\u4ee4(command)\u524d\u9762,\u524d\u7db4(prepending)Node\u74b0\u5883\u8b8a\u6578</li> <li><code>console       NODE_ENV=production node app.js</code></li> <li>Node\u74b0\u5883\u8b8a\u6578\u7684\u8a2d\u5b9a\u662f\u4e00\u7a2e\u6163\u4f8b(convention),\u4e5f\u88ab\u5ee3\u6cdb(widely)\u5730\u88ab\u4f7f\u7528(used in)\u5728\u5916\u90e8\u51fd\u5f0f\u5eab(external libraries)\u4e2d</li> <li>\u5c07Node\u74b0\u5883\u8b8a\u6578\u8a2d\u5b9a\u70ba \u751f\u7522\u74b0\u5883 ,\u901a\u5e38(generally)\u53ef\u78ba\u4fdd(ensures)\u4ee5\u4e0b2\u4ef6\u4e8b\u60c5</li> <li>\u65e5\u8a8c\u8a18\u9304(logging)\u4fdd\u6301(kept)\u5728\u6700\u5c11(minimum)\u3001\u6700\u5fc5\u8981(essential)\u7684\u6c34\u5e73(level)</li> <li>\u6703\u767c\u751f(take place)\u66f4\u591a\u7684\u7de9\u5b58\u7d1a\u5225(caching levels),\u4ee5\u512a\u5316(optimize)\u6548\u80fd(performance)</li> <li>\u8209\u4f8b\u4f86\u8aaa,Express\u6240\u4f7f\u7528\u7684\u6a21\u677f\u51fd\u5f0f\u5eab(templating library)---&gt;pug,\u6703\u5728\u7576Node\u74b0\u5883\u8b8a\u6578 \u4e0d\u662f \u88ab\u8a2d\u5b9a\u70ba\u751f\u7522\u74b0\u5883(<code>production</code>)\u6642,\u5c31\u6703\u4ee5\u9664\u932f\u6a21\u5f0f(in debug mode)\u4f86\u7de8\u8b6f(compiles)</li> <li>\u5728\u958b\u767c\u6a21\u5f0f(development mode)\u4e2d,<code>Express</code>\u7684<code>views</code>\u6703\u5728\u6bcf\u6b21(every)\u8acb\u6c42(<code>request</code>)\u6642\u88ab\u7de8\u8b6f(compiled); \u7136\u800c\u7576\u5728\u751f\u7522\u6a21\u5f0f(production mode)\u4e2d,\u5247\u6703\u5c07\u5176\u7de9\u5b58(cached)\u3002\u4ee5\u4e0b\u6703\u6709\u66f4\u591a\u7684\u7bc4\u4f8b(examples)</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528\u689d\u4ef6\u9673\u8ff0\u53e5(conditional statements)\u4f86\u5207\u63db\u5728\u4e0d\u540c\u74b0\u5883(in different environments)\u4e2d\u57f7\u884c(execute)\u7a0b\u5f0f\u78bc       JavaScript<pre><code>if (process.env.NODE_ENV === \"development\") {\n//...\n}\nif (process.env.NODE_ENV === \"production\") {\n//...\n}\nif(['production', 'staging'].indexOf(process.env.NODE_ENV) &gt;= 0) {\n//...\n})\n</code></pre></li> <li>\u8209\u4f8b\u4f86\u8aaa,\u5728<code>Express</code>\u6846\u67b6\u61c9\u7528\u7a0b\u5f0f(app)\u4e2d,\u6211\u5011\u53ef\u4ee5\u5229\u7528\u689d\u4ef6\u9673\u8ff0\u53e5(conditional statements)\u4f86\u91dd\u5c0d\u6bcf\u500b\u74b0\u5883(per environment)\u8a2d\u5b9a(set)\u4e0d\u540c\u7684\u932f\u8aa4\u8655\u7406\u5668(error handler)       JavaScript<pre><code>if (process.env.NODE_ENV === \"development\") {\napp.use(express.errorHandler({ dumpExceptions: true, showStack: true }))\n})\nif (process.env.NODE_ENV === \"production\") {\napp.use(express.errorHandler())\n})\n</code></pre></li> </ul>"},{"location":"programming_language/nodejs/#error-handling-in-nodejs","title":"Error handling in Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Errors</p> <ul> <li>\u5728Node\u4e2d,\u662f\u900f\u904e(through)\u4f8b\u5916(<code>exceptions</code>)\u4f86\u8655\u7406(handled)\u932f\u8aa4(errors)\u7684</li> <li>\u5efa\u7acb\u4e00\u500b\u4f8b\u5916 (Creating exceptions)</li> <li>\u8981\u5efa\u7acb\u4e00\u500b\u4f8b\u5916,\u53ef\u4ee5\u900f\u904e\u62cb\u51fa(<code>throw</code>)\u95dc\u9375\u5b57(keyword)       JavaScript<pre><code>throw value\n</code></pre></li> <li>\u4e00\u65e6Javascript\u57f7\u884c(executes)\u5230\u6b64\u884c(this line)\u6307\u4ee4,\u6b63\u5e38(normal)\u7684\u7a0b\u5f0f\u6d41\u7a0b(program flow)\u5c31\u6703\u88ab\u505c\u6b62(halted),\u4e26\u4e14\u7a0b\u5f0f\u7684\u63a7\u5236\u6b0a(control)\u6703\u88ab\u4fdd\u7559(held back)\u7d66\u6700\u8fd1(nearest)\u7684\u4f8b\u5916\u8655\u7406\u5668(<code>exception handler</code>)<ul> <li>\u901a\u5e38,\u5728\u5ba2\u6236\u7aef(client-side)\u7684\u7a0b\u5f0f\u78bc(code)\u4e2d,\u4ee5\u4e0a\u7bc4\u4f8b\u4e2d\u7684<code>value</code>\u53ef\u4ee5\u662f\u4efb\u4f55(any)Javascript\u7684\u503c,\u5305\u542b\u4e00\u500b\u5b57\u4e32(<code>string</code>)\u3001\u6578\u5b57(<code>number</code>)\u3001\u6216\u662f\u7269\u4ef6(<code>object</code>)</li> <li>\u5728Node\u4e2d,\u6211\u5011\"\u4e0d\u6703\"\u62cb\u51fa(throw)\u5b57\u4e32(strings),\u6211\u5011\u53ea\u6703\u62cb\u51fa(throw)\u932f\u8aa4\u7269\u4ef6(<code>Error</code> objects)</li> </ul> </li> <li>\u932f\u8aa4\u7269\u4ef6 (Error objects)</li> <li>\u5728Node\u4e2d,\u932f\u8aa4\u7269\u4ef6(<code>error</code> object)\u53ef\u4ee5\u662f\u4e00\u500b\u932f\u8aa4\u7269\u4ef6(<code>Error</code> object)\u7684\u5be6\u4f8b(instance),\u6216\u662f\u7e7c\u627f(extends)\u81eaNode\u7684<code>Errors</code>\u5167\u5efa\u6838\u5fc3\u6a21\u7d44\u5167\u6240\u63d0\u4f9b(provided)\u7684\u932f\u8aa4\u985e\u5225(<code>Error</code> class)\u7684\u7269\u4ef6(object)       JavaScript<pre><code>throw new Error('Ran out of coffee')\n</code></pre><ul> <li>\u6216\u662f   JavaScript<pre><code>class NotEnoughCoffeeError extends Error {\n//...\n}\nthrow new NotEnoughCoffeeError()\n</code></pre></li> </ul> </li> <li>\u8655\u7406\u4f8b\u5916 (Handling exceptions)</li> <li>\u4e00\u500b\u4f8b\u5916\u8655\u7406\u5668(exception handler)\u5c31\u662f<code>try/catch</code>\u9673\u8ff0\u53e5(statement)</li> <li>\u4efb\u4f55\u5305\u5728(included)<code>try</code>\u5340\u584a(block)\u5167\u7684\u7a0b\u5f0f\u78bc\u6240\u5f15\u767c(raised in)\u7684\u4f8b\u5916(exception),\u90fd\u6703\u5728\u5176\u76f8\u5c0d\u61c9(corresponding)\u7684<code>catch</code>\u5340\u584a(block)\u4e2d\u88ab\u8655\u7406(handled)       JavaScript<pre><code>try {\n//lines of code\n} catch (e) {}\n</code></pre><ul> <li>\u5728\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,<code>e</code>\u5c31\u662f\u4f8b\u5916\u503c(<code>exception</code> value)\u3002\u6211\u5011\u53ef\u4ee5\u5728<code>catch</code>\u5340\u584a(block)\u4e2d\u65b0\u589e(add)\u591a\u500b(multiple)\u932f\u8aa4\u8655\u7406\u5668(handlers),\u9019\u4e9b\u932f\u8aa4\u8655\u7406\u5668\u5c31\u53ef\u4ee5\u7528\u4f86\u6355\u7372(<code>catch</code>)\u5404\u7a2e\u4e0d\u540c\u7684\u932f\u8aa4(different kinds of errors)</li> </ul> </li> <li>\u6355\u7372\u672a\u6355\u7372\u7684\u4f8b\u5916 (Catching uncaught exceptions)</li> <li>\u7576\u7a0b\u5f0f(program)\u6b63\u5728\u57f7\u884c\u4e2d\u6642,\u5982\u679c\u5728\u7a0b\u5f0f\u4e2d\u6709\u672a\u6355\u7372\u7684\u4f8b\u5916(uncaught exception)\u88ab\u62cb\u51fa(thrown)\u6642,\u6211\u5011\u7684\u7a0b\u5f0f\u5c07\u6703\u5d29\u6f70(crash)</li> <li>\u70ba\u4e86\u89e3\u6c7a\u9019\u500b\u554f\u984c,\u6211\u5011\u53ef\u4ee5\u76e3\u807d<code>process</code>\u7269\u4ef6\u4e0a\u7684uncaughtException\u4e8b\u4ef6       JavaScript<pre><code>process.on('uncaughtException', err =&gt; {\nconsole.error('There was an uncaught error', err)\nprocess.exit(1) //mandatory (as per the Node.js docs)\n})\n</code></pre><ul> <li>\u6211\u5011\u4e0d\u9700\u8981\u70ba\u6b64\u4e8b\u5148\u532f\u5165(import)Node\u7684<code>process</code>\u5167\u5efa\u6838\u5fc3\u6a21\u7d44(core module),\u56e0\u70ba<code>process</code>\u6a21\u7d44\u662fNode\u6703\u81ea\u52d5(automatically)\u6ce8\u5165(injected)\u7684</li> </ul> </li> <li><code>Promise</code>\u7269\u4ef6\u7684\u4f8b\u5916 (Exceptions with promises)</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528<code>Promise</code>\u7269\u4ef6\u4f86\u4e32\u9023(chain)\u4e0d\u540c\u7684\u64cd\u4f5c(different operations),\u4e26\u4e14\u5728\u6700\u5f8c(at the end)\u8655\u7406\u932f\u8aa4(handle errors) JavaScript<pre><code>doSomething1()\n.then(doSomething2)\n.then(doSomething3)\n.catch(err =&gt; console.error(err))\n</code></pre></li> <li>\u90a3\u6211\u5011\u8a72\u600e\u9ebc\u77e5\u9053\u932f\u8aa4(<code>error</code>)\u662f\u5728\u54ea\u88e1\u767c\u751f(occured)\u7684\u5462? \u5176\u5be6\u6211\u5011\u4e26\u4e0d\u9700\u8981\u771f\u7684(really)\u77e5\u9053\u9019\u4ef6\u4e8b,\u6211\u5011\u53ef\u4ee5\u5728\u6bcf\u500b(each)\u88ab\u547c\u53eb(call)\u7684\u51fd\u5f0f(functions)\u4e2d,\u90fd\u8655\u7406(handle)\u932f\u8aa4(error)(=&gt; \u4e5f\u5c31\u662f\u4ee5\u4e0a\u7bc4\u4f8b\u4e2d\u7684<code>doSomethingX</code>),\u4e26\u4e14\u5728\u932f\u8aa4\u8655\u7406\u5668\u4e2d(inside the <code>error</code> handler)\u62cb\u51fa(throw)\u4e00\u500b\u932f\u8aa4(<code>error</code>),\u800c\u9019\u500b\u88ab\u62cb\u51fa\u7684\u932f\u8aa4\u6703\u88ab\u7528\u4f86\u547c\u53eb(call)\u5916\u9762(outside)\u7684<code>catch</code>\u932f\u8aa4\u8655\u7406\u5668(handler)       JavaScript<pre><code>const doSomething1 = () =&gt; {\n//...\ntry {\n//...\n} catch (err) {\n//... handle it locally\nthrow new Error(err.message)\n}\n//...\n}\n</code></pre></li> <li>\u70ba\u4e86\u80fd\u5920(be able to)\u5728\u672c\u5730(locally)\u8655\u7406\u932f\u8aa4(handler <code>errors</code>)\u800c\u4e0d\u7528(without)\u5728\u6211\u5011\u547c\u53eb(call)\u51fd\u5f0f(function)\u6642\u624d\u8655\u7406(handling),\u6211\u5011\u53ef\u4ee5\u8df3\u51fa(break)\u4e32\u9023(chain),\u4e26\u4e14\u900f\u904e\u5728\u6bcf\u500b(each)<code>then()</code>\u51fd\u5f0f\u5f8c\u9762\u5efa\u7acb(create)\u4e00\u500b\u51fd\u5f0f(function)\u4f86\u8655\u7406(process)\u4f8b\u5916(exception)       JavaScript<pre><code>doSomething1()\n.then(() =&gt; {\nreturn doSomething2().catch(err =&gt; {\n//handle error\nthrow err //break the chain!\n})\n})\n.then(() =&gt; {\nreturn doSomething2().catch(err =&gt; {\n//handle error\nthrow err //break the chain!\n})\n})\n.catch(err =&gt; console.error(err))\n</code></pre></li> <li>\u5229\u7528<code>async/await</code>\u8a9e\u6cd5\u4f86\u8655\u7406\u4f8b\u5916 (Error handling with async/await)</li> <li>\u6211\u5011\u53ef\u4ee5\u5229\u7528<code>async/await</code>\u8a9e\u6cd5\u4f86\u8655\u7406\u4f8b\u5916(exceptions),\u4f46\u6211\u5011\u4ecd\u7136\u9700\u8981\u6355\u6293(catch)\u932f\u8aa4(<code>errors</code>),\u6211\u5011\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f(way)\u4f86\u5b8c\u6210     JavaScript<pre><code>async function someFunction() {\ntry {\nawait someOtherFunction()\n} catch (err) {\nconsole.error(err.message)\n}\n}\n</code></pre></li> </ul>"},{"location":"programming_language/nodejs/#how-to-log-an-object-in-nodejs","title":"How to log an object in Node.js","text":"<p>Node\u5167\u5efa\u6838\u5fc3\u6a21\u7d44Console</p> <ul> <li>\u7576\u6211\u5011\u5728\u700f\u89bd\u5668(in the browser)\u7684Javascript\u7a0b\u5f0f\u78bc\u4e2d\u8f38\u5165(type)<code>console.log()</code>\u8a9e\u6cd5\u6642,\u5c31\u6703\u5728\u700f\u89bd\u5668\u5f8c\u53f0(browser console)\u5efa\u7acb(create)\u4e00\u500b\u6f02\u4eae(nice)\u7684\u689d\u76ee(entry)</li> <li></li> <li>\u7576\u6211\u5011\u9ede\u64ca(click)\u7bad\u982d(arrow)\u6642,\u65e5\u8a8c(log)\u5c31\u6703\u88ab\u5c55\u958b(expanded),\u9019\u6642\u6211\u5011\u5c31\u53ef\u4ee5\u6e05\u695a\u5730(clearly)\u770b\u5230\u7269\u4ef6(object)\u7684\u5c6c\u6027\u5011(properties)</li> <li></li> <li>\u5728Node\u4e2d,\u4e5f\u6703\u767c\u751f(happens)\u76f8\u540c(same)\u7684\u4e8b\u60c5</li> <li>\u7576\u6211\u5011\u8981\u8a18\u9304(log)\u67d0\u4e9b\u5167\u5bb9\u5230\u5f8c\u53f0(console)\u6642,\u4e26\u4e0d\u80fd\u90a3\u9ebc\u5962\u4f88\u7684(luxury)\u3002\u56e0\u70ba\u5982\u679c\u6211\u5011\u662f\u624b\u52d5(manually)\u57f7\u884c(run)Node\u7a0b\u5f0f(program)\u7684\u8a71,\u5b83\u5c07\u6703\u8f38\u51fa(output)\u65e5\u8a8c\u7269\u4ef6(object)\u5230<code>shell</code>\u6216\u662f\u5230\u65e5\u8a8c\u6a94\u6848(log file)\u4e2d\u3002\u9019\u6642,\u6211\u5011\u5c07\u6703\u5f97\u5230\u7269\u4ef6\u7684\u5b57\u4e32\u8868\u73fe\u5f62\u5f0f(string representation of the object)</li> <li>\u73fe\u5728,\u76f4\u5230(until)\u4e00\u5b9a\u7684(certain)\u5de2\u72c0\u7a0b\u5ea6\u7d1a\u5225(level of nesting)\u4e4b\u524d,\u4e00\u5207\u90fd\u662f\u5f88\u597d\u7684(fine)\u3002\u4f46\u662f,\u5f9e\u7b2c\u4e8c\u5c64(two levels of)\u7684\u5de2\u72c0\u7269\u4ef6\u7d50\u69cb(nesting)\u4ee5\u5f8c(after),Node\u5c31\u6703\u653e\u68c4(gives up)\u4e26\u4e14\u6253\u5370(print)\u51fa<code>[Object]</code>\u4f5c\u70ba\u4f54\u4f4d\u7b26(placeholder)     JavaScript<pre><code>const obj = {\nname: 'joe',\nage: 35,\nperson1: {\nname: 'Tony',\nage: 50,\nperson2: {\nname: 'Albert',\nage: 21,\nperson3: {\nname: 'Peter',\nage: 23\n}\n}\n}\n}\nconsole.log(obj)\n{\nname: 'joe',\nage: 35,\nperson1: {\nname: 'Tony',\nage: 50,\nperson2: {\nname: 'Albert',\nage: 21,\nperson3: [Object]\n}\n}\n}\n</code></pre></li> <li>\u90a3\u9ebc,\u6211\u5011\u8a72\u5982\u4f55\u6253\u5370(print)\u51fa\u6574\u500b\u7269\u4ef6(whole object)\u5462?<ul> <li>\u6700\u4f73\u7684\u505a\u6cd5(best way)\u6703\u662f\u5728(while)\u7dad\u6301(preserving)\u6f02\u4eae\u7684\u6253\u5370(pretty print)\u8f38\u51fa\u7d50\u679c\u6642,\u540c\u6642\u4f7f\u7528Javascript\u53ef\u652f\u63f4\u7684JSON.stringify()\u65b9\u6cd5(method)     JavaScript<pre><code>console.log(JSON.stringify(obj, null, 2))\n</code></pre><ul> <li>\u9019\u500b<code>2</code>\u662f\u7528\u4f86\u4f5c\u70ba\u6307\u5b9a\u7e2e\u6392(indentation)\u7684\u7a7a\u683c\u6578(number of spaces)</li> </ul> </li> <li>\u53e6\u4e00\u500b\u53ef\u4f9b\u9078\u64c7(option)\u7684\u505a\u6cd5\u662f\b\u5229\u7528Node\u7684Utilities\u5167\u5efa\u6838\u5fc3\u6a21\u7d44\u4e2d\u7684util.inspect(object[, showHidden[, depth[, colors]]])\u65b9\u6cd5(method)</li> <li>\u9019\u500b\u65b9\u6cd5(method)\u53ef\u4ee5\u6307\u5b9a\u4ee5\u4e0b\u7684\u53c3\u6578\u5011<ul> <li><code>depth</code>(\u6df1\u5ea6): \u8981\u5c55\u958b\u5230\u9019\u500b\u7269\u4ef6\u7684\u7b2c\u5e7e\u5c64</li> <li>\u9810\u8a2d\u503c: <code>2</code></li> <li><code>colors</code>: \u53ef\u4ee5\u5ba2\u88fd\u5316\u5730\u8a2d\u5b9a\u6587\u5b57\u8f38\u51fa\u7684\u984f\u8272</li> </ul> </li> <li>\u4f46<code>util.inspect()</code>\u9019\u500b\u65b9\u6cd5\u6703\u9047\u5230\u7684\u554f\u984c\u662f,\u8d85\u904e(after)2\u5c64(level)\u4ee5\u4e0a\u7684\u5de2\u72c0\u7269\u4ef6(nested objects)\u6703\u88ab\u6524\u5e73(flattened),\u9019\u4e5f\u6703\u4f7f\u539f\u672c\u6709\u5c31\u6bd4\u8f03\u8907\u96dc(complex)\u7d50\u69cb\u7684\u7269\u4ef6(objects)\u6703\u8b8a\u5f97\u66f4\u8907\u96dc</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs-with-typescript","title":"Node.js with TypeScript","text":"<ul> <li>\u4ec0\u9ebc\u662f<code>Typescript</code>? (What is TypeScript)</li> <li><code>Typescript</code>\u662f\u4e00\u500b\u7531Microsoft\u958b\u767c\u8207\u7dad\u8b77\u7684\u958b\u6e90\u3001\u71b1\u9580\u7684\u7a0b\u5f0f\u8a9e\u8a00,\u5b83\u53d7\u5230\u5168\u4e16\u754c\u8a31\u591a\u8edf\u9ad4\u958b\u767c\u8005\u7684\u559c\u611b\u548c\u4f7f\u7528</li> <li>\u57fa\u672c\u4e0a(Basically), <code>Typescript</code>\u662fJavascript\u9019\u500b\u7a0b\u5f0f\u8a9e\u8a00\u7684\u4e00\u500b\u8d85\u96c6(<code>superset</code>) ,\u4e26\u65b0\u589e\u4e86\u4e00\u4e9b\u80fd\u529b(capabilities)\u7d66\u9019\u500b\u7a0b\u5f0f\u8a9e\u8a00\u3002\u6700\u8457\u540d(notable)\u7684\u65b0\u589e(addition)\u529f\u80fd\u5c31\u662f \u975c\u614b\u578b\u5225\u5b9a\u7fa9(static type definitions) ,\u800c\u9019\u662f\u4e00\u822c(plain)\u7684Javascript\u6240\u6c92\u6709\u7684\u529f\u80fd\u3002\u53d7\u578b\u5225(types)\u6240\u60e0,\u6211\u5011\u53ef\u4ee5\u5ba3\u544a(declare) \u6211\u5011\u9810\u671f\u4ec0\u9ebc\u5f62\u5f0f\u7684\u53c3\u6578 (what kind of arguments we are expecting)\u3001 \u51fd\u5f0f\u78ba\u5207\u6703\u56de\u50b3\u4ec0\u9ebc\u6771\u897f (what is returned exactly in our functions)\u3001 \u6211\u5011\u5efa\u7acb\u7684\u7269\u4ef6\u7684\u78ba\u5207\u6a23\u5b50 (what's the exact shape of the object that we are creating)</li> <li><code>Typescript</code>\u662f\u4e00\u500b\u975e\u5e38\u5f37\u5927(powerful)\u7684\u5de5\u5177(tool),\u4e26\u4e14\u5b83\u958b\u555f(opens)\u4e86Javascript\u5c08\u6848(project)\u53ef\u80fd\u6027(possibilites)\u7684\u65b0\u4e16\u754c(new world)\u3002\u5b83\u8b93\u6211\u5011\u7684\u7a0b\u5f0f\u78bc\u80fd\u5728\u63d0\u4ea4(before code is even shipped)\u4e4b\u524d\u66f4\u5b89\u5168(secure)\u3001\u7a69\u56fa(robust),\u7576(during)\u6211\u5011\u5728\u64b0\u5beb\u7a0b\u5f0f\u78bc\u6642,<code>Typescript</code>\u6703\u6355\u6293\u554f\u984c(catches problems),\u4e26\u6975\u597d\u5730(wonderfully)\u6574\u5408(integrates)\u5230\u7a0b\u5f0f\u78bc\u7de8\u8f2f\u5668(code editors)\u4e2d(\u4f8b: <code>Visual Studio Code</code>)</li> <li>\u6211\u5011\u53ef\u4ee5\u5728\u4e4b\u5f8c\u518d\u4f86\u8a0e\u8ad6(talk about)<code>Typescript</code>\u7684\u597d\u8655(benefits),\u73fe\u5728\u5148\u8b93\u6211\u5011\u5148\u770b\u770b\u4e00\u4e9b\u7bc4\u4f8b(examples)\u7a0b\u5f0f\u78bc\u5427</li> <li>\u77a7\u77a7\u4ee5\u4e0b\u7684\u7a0b\u5f0f\u78bc\u7247\u6bb5(code snippet),\u63a5\u8457\u6211\u5011\u5c31\u53ef\u4ee5\u5c07\u5b83\u5011\u62c6\u89e3(unpack)\u518d\u4e00\u8d77(together)\u4e86       JavaScript<pre><code>type User = {\nname: string;\nage: number;\n};\nfunction isAdult(user: User): boolean {\nreturn user.age &gt;= 18;\n}\nconst justine: User = {\nname: 'Justine',\nage: 23,\n};\nconst isJustineAnAdult: boolean = isAdult(justine);\n</code></pre><ul> <li>\u9996\u5148,<code>type</code>\u95dc\u9375\u5b57\u7684\u7b2c\u4e00\u90e8\u4efd\u8ca0\u8cac(responsible)\u5ba3\u544a(declaring)\u4ee3\u8868(representing)\u4f7f\u7528\u8005\u81ea\u5df1\u5ba2\u88fd\u5316(custom)\u7684\u7269\u4ef6\u578b\u5225</li> <li>\u4e4b\u5f8c,\u6211\u5011\u6703\u5229\u7528(utilize)\u9019\u500b\u65b0(newly)\u5efa\u7acb\u7684\u578b\u5225\u4f86\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u51fd\u5f0f(function)<code>isAdult()</code>,\u8a72\u51fd\u5f0f\u80fd\u63a5\u53d7(accpets)\u4e00\u500b<code>User</code>\u578b\u5225\u7684<code>user</code>\u53c3\u6578(argument),\u4e26\u56de\u50b3(returns)\u4e00\u500b\u5e03\u6797\u503c(<code>boolean</code>)</li> <li>\u63a5\u8457,\u6211\u5011\u5efa\u7acb\u4e86<code>justine</code>\u9019\u500b<code>user</code>,\u5b83\u6703\u662f\u6211\u5011\u7684\u7bc4\u4f8b\u8cc7\u6599\u4ee5\u7528\u4f86\u547c\u53eb(calling)\u4e4b\u524d(previously)\u5b9a\u7fa9(defined)\u7684\u51fd\u5f0f(function)</li> <li>\u6700\u5f8c,\u6211\u5011\u6703\u5efa\u7acb(create)\u4e00\u500b\u65b0\u7684\u5e36\u6709\u662f\u5426<code>justine</code>\u70ba\u6210\u5e74\u4eba(adult)\u7684\u9019\u500b\u8cc7\u8a0a(information)\u7684\u8b8a\u6578(vaiable)</li> <li>\u9019\u500b\u7bc4\u4f8b\u9084\u6709\u4e00\u4e9b\u6211\u5011\u4e5f\u61c9\u8a72\u9700\u8981\u984d\u5916(additional)\u77e5\u9053\u7684\u4e8b\u60c5<ul> <li>\u9996\u5148,\u5982\u679c\u6211\u5011\u6c92\u6709\u9075\u5b88(comply with)\u5ba3\u544a(declared)\u597d\u7684\u578b\u5225(types)\u6642,<code>Typescript</code>\u6703\u8b66\u544a(alarm)\u6211\u5011\u5c31\u6703\u8b66\u544a\u6211\u5011\u6709\u4e9b\u6771\u897f\u51fa\u932f(wrong)\u4e86,\u4ee5\u9632\u6b62(prevent)\u8aa4\u7528(misuse)</li> <li>\u7b2c\u4e8c\u9ede\u662f,\u4e0d\u662f\u6bcf\u500b\u6771\u897f\u90fd\u9700\u8981\u660e\u78ba\u5730(explicitly)\u5b9a\u7fa9\u578b\u5225(typed)---<code>Typescript</code>\u662f\u975e\u5e38\u8070\u660e(smart)\u7684,\u4e26\u4e14\u80fd\u70ba\u6211\u5011\u63a8\u65b7(deduce)\u578b\u5225(types)\u3002\u4f8b\u5982: \u5373\u4f7f(even if)\u6211\u5011\u6c92\u6709\u660e\u78ba\u5730(explicitly)\u8f38\u5165(type),<code>isJustineAnAdult</code>\u4e5f\u6703\u662f\u4e00\u500b\u5e03\u6797(<code>boolean</code>)\u578b\u5225,\u6216\u8005\u5373\u4f7f(even if)\u6211\u5011\u6c92\u6709\u5ba3\u544a(declare)<code>justine</code>\u70ba<code>User</code>\u578b\u5225(type),\u5b83\u4e5f\u6703\u8b8a\u6210\u4e00\u500b\u5c0d\u65bc\u51fd\u5f0f(function)\u4f86\u8aaa\u6709\u6548(valid)\u7684\u53c3\u6578(argument)</li> </ul> </li> </ul> </li> <li>Okay! \u6240\u4ee5\u6211\u5011\u5df2\u7d93\u6709\u4e00\u4e9b<code>Typescript</code>\u7a0b\u5f0f\u78bc\u4e86\u3002\u90a3\u9ebc,\u8a72\u600e\u9ebc\u4f7f\u7528\u5462?<ul> <li>\u9996\u5148,\u6211\u5011\u9700\u8981\u5728\u6211\u5011\u7684\u5c08\u6848\u4e2d\u5148\u5b89\u88ddnpm\u4e0a\u7684typescript</li> <li>$ <code>npm install typescript</code></li> <li>\u73fe\u5728,\u6211\u5011\u53ef\u4ee5\u5728\u7d42\u7aef\u6a5f(terminal)\u5229\u7528<code>tsc</code>\u6307\u4ee4\u4f86\u5c07<code>Typescript</code>\u7a0b\u5f0f\u78bc\u7de8\u8b6f(compile)\u6210Javascript\u7a0b\u5f0f\u78bc\u3002\u8b93\u6211\u5011\u958b\u59cb\u4f86\u52d5\u624b\u505a\u5427</li> <li>\u5047\u8a2d\u6211\u5011\u6709\u500b\u6a94\u6848\u7684\u540d\u7a31\u53eb\u505a<code>example.ts</code>,\u90a3\u9ebc\u5728\u7d42\u7aef\u6a5f\u7684\u6307\u4ee4\u6703\u50cf\u662f<ul> <li>$ <code>tsc example.ts</code></li> <li>\u9019\u500b\u6307\u4ee4\u6703\u5c0e\u81f4(result in)\u4e00\u500b\u65b0(new)\u7684\u6a94\u6848(file)\u53eb\u505a<code>example.js</code>,\u9019\u6a23\u6211\u5011\u5c31\u53ef\u4ee5\u4f7f\u7528Node\u4f86\u57f7\u884c\u4e86</li> </ul> </li> <li>\u73fe\u5728,\u7576\u6211\u5011\u77e5\u9053\u5982\u4f55\u7de8\u8b6f(how to compile) &amp; \u5982\u4f55\u57f7\u884c<code>Typescript</code>\u7a0b\u5f0f\u78bc(run TypeScript code)\u4e86\u4ee5\u5f8c,\u90a3\u5c31\u8b93\u6211\u5011\u4f86\u770b\u770b<code>Typescript</code>\u7684\u9632\u6b62\u932f\u8aa4\u529f\u80fd(bug-preventing capabilities)</li> <li>\u4ee5\u4e0b\u662f\u6211\u5011\u5982\u4f55\u4fee\u6539(modify)\u6211\u5011\u539f\u672c\u7684\u7a0b\u5f0f\u78bc(code)       JavaScript<pre><code>type User = {\nname: string;\nage: number;\n};\nfunction isAdult(user: User): boolean {\nreturn user.age &gt;= 18;\n}\nconst justine: User = {\nname: 'Justine',\nage: 'Secret!',\n};\nconst isJustineAnAdult: string = isAdult(justine, \"I shouldn't be here!\");\n</code></pre></li> <li>\u63a5\u4e0b\u4f86,\u4ee5\u4e0b\u6703\u662f<code>Typescript</code>\u6703\u56de\u5831\u6211\u5011\u7684\u4e8b\u60c5     JavaScript<pre><code>example.ts:12:3 - error TS2322: Type 'string' is not assignable to type 'number'.\n12   age: \"Secret!\",\n~~~\nexample.ts:3:3\n3   age: number;\n~~~\nThe expected type comes from property 'age' which is declared here on type 'User'\nexample.ts:15:7 - error TS2322: Type 'boolean' is not assignable to type 'string'.\n15 const isJustineAnAdult: string = isAdult(justine, \"I shouldn't be here!\");\n~~~~~~~~~~~~~~~~\nexample.ts:15:51 - error TS2554: Expected 1 arguments, but got 2.\n15 const isJustineAnAdult: string = isAdult(justine, \"I shouldn't be here!\");\n~~~~~~~~~~~~~~~~~~~~~~\nFound 3 errors.\n</code></pre></li> <li>\u6b63\u5982\u540c\u6211\u5011\u6240\u770b\u5230(As you can see)\u7684,<code>Typescript</code>\u6210\u529f\u5730(successfully)\u9632\u6b62(prevent)\u6211\u5011\u4ea4\u4ed8(shipping)\u7684\u7a0b\u5f0f\u78bc(code)\u7121\u6cd5\u5982\u9810\u671f\u5730(unexpectedly)\u904b\u4f5c(work)\u3002\u9019\u771f\u662f\u592a\u68d2\u4e86!</li> </ul> </li> <li>\u95dc\u65bc<code>Typescript</code>\u7684\u66f4\u591a\u4e8b\u60c5 (More about TypeScript)</li> <li><code>Typescript</code>\u63d0\u4f9b(offers)\u4e86\u5927\u91cf(a whole lot of )\u5176\u4ed6(others)\u5f88\u68d2\u7684\u6a5f\u5236(mechanisms),\u4f8b\u5982: \u4ecb\u9762(<code>interfaces</code>)\u3001\u985e\u5225(<code>classes</code>)\u3001\u5be6\u7528\u7a0b\u5e8f\u578b\u5225(<code>utility types</code>)...\u7b49\u7b49\u3002\u6b64\u5916,\u5728\u8f03\u5927\u7684\u5c08\u6848(on bigger projects)\u4e2d,\u6211\u5011\u53ef\u4ee5\u5728\u4e00\u500b\u55ae\u7368\u7684\u6a94\u6848(a separate file)\u4e2d\u5ba3\u544a(declare)\u6211\u5011\u81ea\u5df1\u7684<code>Typescript</code>\u7de8\u8b6f\u5668\u8a2d\u5b9a(compiler configuration),\u4e26\u7d30\u5316(granularly)\u8abf\u6574(adjust)\u5176\u5de5\u4f5c\u65b9\u5f0f,\u50cf\u662f\u56b4\u683c\u7a0b\u5ea6(how strict) &amp; \u6703\u5c07\u5df2\u7de8\u8b6f\u6a94\u6848\u5132\u5b58\u5728\u54ea\u88e1(where it stores compiled files for example)<ul> <li>\u6211\u5011\u53ef\u4ee5\u5230Typescript\u7684\u5b98\u65b9\u6587\u4ef6\u4ee5\u95b1\u8b80\u66f4\u591a(read more about)\u9019\u500b\u4ee4\u4eba\u9a5a\u5606(awesome)\u7684\u6771\u897f(stuff)</li> </ul> </li> <li><code>Typescript</code>\u6709\u4e00\u4e9b\u5176\u5b83\u7684\u597d\u8655(other benefits)\u662f\u503c\u5f97\u4e00\u63d0\u7684(worth mentioning),\u50cf\u662f<code>Typescript</code>\u53ef\u4ee5\u88ab\u6f38\u9032\u5f0f\u5730(progressively)\u63a1\u7528(adopted),\u5b83\u80fd\u8b93\u7a0b\u5f0f\u78bc\u8b8a\u5f97\u66f4\u6613\u8b80(readable) &amp; \u66f4\u597d\u7406\u89e3\u7684(understandable),\u4e26\u4e14\u5b83\u4e5f\u5141\u8a31(allows)\u958b\u767c\u8005(developer)\u5728\u8f03\u820a\u7684Node\u7248\u672c\u4e2d\u4ecd\u80fd\u4f7f\u7528\u73fe\u4ee3\u5316(modern)\u7684\u8a9e\u8a00\u529f\u80fd(language features)</li> <li>\u5728Node\u4e16\u754c\u4e2d\u7684<code>Typescript</code> (TypeScript in the Node.js world)</li> <li>\u5728Node\u7684\u4e16\u754c\u4e2d,<code>Typescript</code>\u5df2\u7d93\u6a39\u7acb\u4e86\u826f\u597d\u7684\u5178\u7bc4,\u4e26\u4e14\u5df2\u7d93\u88ab\u8a31\u591a\u516c\u53f8\u3001\u958b\u6e90\u8edf\u9ad4\u5c08\u6848\u3001\u5de5\u5177\u3001\u6846\u67b6...\u7b49\u7b49\u6240\u63a1\u7528</li> <li>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u8457\u540d\u7684\u958b\u6e90\u8edf\u9ad4\u5c08\u6848\u4f8b\u5b50,\u6709\u4f7f\u7528\u5230<code>Typescript</code>\u7684<ul> <li>NestJS: \u5b83\u662f\u4e00\u500b\u5065\u5168(robust)\u4e14\u529f\u80fd\u5b8c\u5584(fully-featured)\u7684\u6846\u67b6(framework),\u4e26\u4e14\u80fd\u5920\u8f15\u9b06(easy)\u3001\u6109\u5feb(pleasant)\u5730\u5efa\u7acb\u53ef\u64f4\u5c55\u7684(scalable) &amp; \u7d50\u69cb\u5b8c\u5584(well-architected)\u7684\u7cfb\u7d71(systems)</li> <li>TypeORM: \u512a\u79c0(great)\u7684<code>ORM</code>,\u5b83\u6709\u53d7\u5230\u5176\u5b83\u8a9e\u8a00(other languages)\u4f7f\u7528\u7684\u77e5\u540d\u5de5\u5177(well-known tools)(\u50cf\u662f: Java\u7684Hibernate\u3001PHP\u7684Doctrine\u3001.NET\u7684Entity Framework)\u7684\u5f71\u97ff(influenced)</li> <li>RxJS: \u5ee3\u6cdb\u5730(widely)\u88ab\u904b\u7528(used)\u5728\u4e92\u52d5\u5f0f(reactive)\u7a0b\u5f0f\u8a2d\u8a08(programming)\u7684\u51fd\u5f0f\u5eab(library)</li> <li>\u4ee5\u53ca\u8a31\u8a31\u591a\u591a\u7684\u512a\u79c0\u7684\u958b\u6e90\u8edf\u9ad4\u5c08\u6848\u4e4b\u4e2d,\u751a\u81f3(even)\u53ef\u80fd\u6211\u5011\u7684\u5c08\u6848\u5c31\u6703\u6210\u70ba\u4e0b\u4e00\u500b</li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#nodejs_2","title":"Node.js \u6838\u5fc3\u6a21\u7d44","text":""},{"location":"programming_language/nodejs/#http","title":"HTTP","text":"<ul> <li>\u8981\u4f7f\u7528HTTP server &amp; client,\u5fc5\u9808\u8981\u5148<code>require('http')</code></li> <li>Node\u7684HTTP\u4ecb\u9762(interfaces)\u65e8\u5728\u652f\u63f4HTTP\u5354\u5b9a\u7684\u8a31\u591a\u529f\u80fd ,\u56e0\u70ba\u9019\u4e9b\u529f\u80fd\u50b3\u7d71\u4e0a\u8f03\u96e3\u4f7f\u7528,\u5c24\u5176\u662f\u5728\u5927\u91cf.\u5927\u584a(chunk-encoded)\u7684\u8a0a\u606f</li> <li>\u8a72\u4ecb\u9762\u975e\u5e38\u5730\u5c0f\u5fc3,\u6c38\u9060\u4e0d\u6703\u7de9\u885d(buffer)\u6574\u500b\u8acb\u6c42(requests)\u548c\u56de\u61c9(responses),\u6240\u4ee5\u4f7f\u7528\u8005\u53ef\u4ee5\u50b3\u9001\u5be6\u6642\u8cc7\u6599\u6d41(stream data)</li> <li>HTTP\u8a0a\u606f\u6a19\u982d(message headers)\u901a\u5e38\u7528\u7269\u4ef6(object)\u4f86\u8868\u793a</li> <li>\u7bc4\u4f8b<code>HTTP message header</code>     ``` js     { 'content-length': '123',       'content-type': 'text/plain',       'connection': 'keep-alive',       'host': 'mysite.com',       'accept': '/'      }</li> <li>\u9375(keys)\u8981\u7528\u5c0f\u5beb\u8868\u793a,\u503c(values)\u662f\u6309\u7167\u539f\u672c\u7684\u4e0d\u8b8a</li> <li>\u70ba\u4e86\u80fd\u652f\u63f4\u6240\u6709\u53ef\u80fd\u7684HTTP\u61c9\u7528\u7a0b\u5f0f,Node\u7684HTTP API\u662f\u5c6c\u65bc\u975e\u5e38\u5e95\u5c64\u7684,\u5b83\u53ea\u8655\u7406\u8cc7\u6599\u6d41(stream handling),\u4f46\u662f\u4e0d\u89e3\u6790\u5be6\u969b\u7684\u6a19\u982d(headers)\u6216\u662f\u6b63\u6587(context)</li> <li>\u53ef\u53c3\u8003message.headers\u4ee5\u4e86\u89e3\u8a72\u5982\u4f55\u8655\u7406\u91cd\u8907\u6a19\u982d(duplicate headers)\u7684\u7d30\u7bc0</li> <li>\u6536\u5230\u7684\u539f\u59cb\u6a19\u982d\u6703\u4fdd\u7559\u5728message.rawHeaders\u5c6c\u6027\u503c\u4e2d,\u4e26\u4ee5\u9663\u5217(array)\u7684\u5f62\u5f0f\u4f86\u5132\u5b58\u8a72\u8cc7\u8a0a,\u50cf\u662f<code>[key, value, key2, value2, ...]</code></li> <li>\u4ee5\u4e0a\u8ff0\u7684<code>HTTP message header</code>\u70ba\u4f8b,\u5b83\u7684<code>message.rawHeaders</code>\u7684\u503c\u6703\u50cf\u662f\u4ee5\u4e0b\u7684\u9663\u5217(array)\u5f62\u5f0f     JavaScript<pre><code>[ 'ConTent-Length', '123456',\n'content-LENGTH', '123',\n'content-type', 'text/plain',\n'CONNECTION', 'keep-alive',\n'Host', 'mysite.com',\n'accepT', '*/*'\n]\n</code></pre> <p>method</p> </li> <li>http.createServer([options][, requestListener])<ul> <li>\u6703\u56de\u50b3\u4e00\u500b http.Server \u5be6\u4f8b</li> <li>options</li> <li>http.IncomingMessage</li> <li>ServerResponse</li> <li>insecureHTTPParser (Default: false)</li> <li>maxHeaderSize (Default: 16384 (16KB)</li> <li>requestListener (Function) <p>Class</p> </li> </ul> </li> <li>Class: http.IncomingMessage<ul> <li>\u9019\u500bClass\u7269\u4ef6\u6703\u7531http.server\u8207http.ClientRequest\u6240\u5efa</li> <li>\u5b83\u662f\u7528\u4f86\u4f5c\u70ba\u88ab\u50b3\u7d66request event &amp; response event\u7684\u7b2c1\u500b\u53c3\u6578</li> <li>\u5b83\u6703\u88ab\u7528\u4f86\u5b58\u53d6\u56de\u61c9\u7269\u4ef6\u7684\u72c0\u614b(response status),\u6a19\u982d(response headers),\u8cc7\u6599(response data)</li> </ul> </li> <li>Class: http.ServerResponse<ul> <li>\u9019\u500bClass\u7269\u4ef6\u6703\u7531HTTP server\u5167\u90e8\u81ea\u52d5\u5efa\u7acb,\u800c\u4e0d\u662f\u900f\u904euser\u4f86\u5efa\u7acb\u7684</li> <li>\u5b83\u662f\u7528\u4f86\u4f5c\u70ba\u88ab\u50b3\u7d66request event\u7684\u7b2c2\u500b\u53c3\u6578 <p>property</p> </li> <li>response.statusCode<ul> <li>\u7576\u4f7f\u7528\u96b1\u5f0f\u6a19\u982d(implicit headers)\u6642,\u4e5f\u5c31\u662f\u7576\u6c92\u6709\u660e\u78ba\u5730\u4f7f\u7528response.writeHead()\u6642,\u9019\u500b\u5c6c\u6027\u6703\u5728headers\u88ab\u66f4\u65b0\u6642\u6c7a\u5b9a\u8981\u50b3\u7d66client\u7aef\u4ec0\u9ebc\u72c0\u614b\u78bc(status code)</li> <li>\u7576\u56de\u61c9\u6a19\u982d(response header)\u5df2\u7d93\u50b3\u5230client\u7aef\u4e4b\u5f8c,\u9019\u500b\u5c6c\u6027\u6703\u6307\u51fa\u5df2\u7d93\u767c\u9001\u51fa\u53bb\u7684\u72c0\u614b\u78bc</li> <li>\u9810\u8a2d\u662f200 (number\u578b\u5225)</li> <li>\u4f8b: <code>response.statusCode = 404;</code> <p>method</p> </li> </ul> </li> <li>response.setHeader(name, value)<ul> <li>args</li> <li>name: (string)</li> <li>value: (any)</li> <li>Returns: http.ServerResponse </li> <li>\u56de\u50b3\u4e00\u500b\u56de\u61c9\u7269\u4ef6(response object)</li> <li>\u70ba\u96b1\u5f0f\u6a19\u982d(implicit header)\u8a2d\u5b9a\u4e00\u7b46\u55ae\u4e00\u7684\u503c,\u82e5\u6b64\u6a19\u982d\u5df2\u7d93\u5b58\u5728\u65bc\u5f85\u767c\u9001\u7684header\u4e2d,\u90a3\u9ebc\u5f85\u767c\u9001header\u7684\u503c\u5c31\u6703\u88ab\u53d6\u4ee3\u6389</li> <li>\u82e5\u8981\u767c\u9001\u70ba\u540c\u4e00\u500b\u540d\u7a31\u7684\u591a\u500bheader\u6642,\u53ef\u4ee5\u7528\u4e00\u500bArray['xxx', 'yyy']\u4f86\u5305\u4f4f\u6240\u6709\u7684header\u503c</li> <li>\u5982\u679c\u8f38\u5165\u975e\u5b57\u4e32\u578b\u5225\u7684\u503c,\u5c07\u81ea\u52d5\u88ab\u5132\u5b58\u4e0b\u4f86,\u800c\u7121\u9808\u591a\u505a\u4fee\u6539</li> <li>\u7576header\u7684name\u6216\u662fvalue\u5305\u542b\u7121\u6548\u7684\u5b57\u5143\u6642,\u5c31\u6703\u5f15\u767cTypeError\u932f\u8aa4</li> <li>\u4f8b: <code>response.setHeader('Content-Type', 'text/html');</code></li> <li>\u4f8b: <code>response.setHeader('Set-Cookie', ['type=ninja', 'language=javascript']);</code></li> <li>\u7576headers\u88ab\u8a2d\u5b9a\u70ba\u4f7f\u7528response.setHeader(),\u5b83\u5011\u5c07\u6703\u88ab\u5408\u4f75\u5230\u5176\u4ed6\u6240\u6709\u8981\u50b3\u7d66 response.writeHead()\u7684headers,\u4e26\u4e14\u6703\u81ea\u52d5\u5c07\u8981\u50b3\u7d66response.writeHead()\u7684headers\u5217\u70ba\u512a\u5148</li> <li>\u82e5\u9700\u8981\u9010\u6b65\u65b0\u589eheaders,\u8b93\u672a\u4f86\u6709\u9700\u8981\u7684\u8a71\u53ef\u4ee5\u6aa2\u7d22\u548c\u4fee\u6539,\u8acb\u4f7f\u7528response.setHeader(),\u800c\u4e0d\u8981\u4f7f\u7528response.writeHead()   JavaScript<pre><code>// Returns content-type = text/plain\nconst server = http.createServer((req, res) =&gt; {\nres.setHeader('Content-Type', 'text/html');\nres.setHeader('X-Foo', 'bar');\nres.writeHead(200, { 'Content-Type': 'text/plain' });\nres.end('ok');\n});\n</code></pre></li> </ul> </li> <li>response.end()<ul> <li>\u5b8c\u6574\u7248: response.end([data[, encoding]][, callback]) </li> <li>args</li> <li>data: (string || Buffer)</li> <li>encoding: (string)</li> <li>callback: (Function)</li> <li>Returns: (this)</li> <li>\u9019\u500b\u65b9\u6cd5\u6703\u5411server\u767c\u9001\u4fe1\u865f,\u8868\u793a\u6240\u6709\u7684\u56de\u61c9\u6a19\u982d(response header)\u548c\u5167\u6587(body)\u7686\u5df2\u767c\u9001\u51fa\u53bb,\u9019\u6642server\u61c9\u8a8d\u5b9a\u8a72\u8acb\u6c42\u6d88\u606f\u5df2\u5b8c\u6210</li> <li>response.end()\u9700\u8981\u5728\u6bcf\u500b\u56de\u61c9\u7684 \u7d50\u5c3e \u90fd\u4f7f\u7528\u5b83</li> <li>\u5982\u679cdata\u53c3\u6578\u6709\u7d66\u5b9a\u7684\u8a71,\u5b83\u5be6\u969b\u4e0a\u662f\u53bb\u547c\u53ebresponse.write(data, encoding),\u4e26\u63a5\u8457\u57f7\u884cres.end(callback)</li> <li>\u5982\u679ccallback\u51fd\u5f0f\u6709\u7d66\u5b9a\u7684\u8a71,\u8a72callback\u51fd\u5f0f\u6703\u5728\u56de\u61c9\u4e32\u6d41(response stream)\u7d50\u675f\u4e4b\u5f8c\u624d\u6703\u88ab\u547c\u53eb\u4e26\u57f7\u884c</li> </ul> </li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#process","title":"Process","text":"<ul> <li><code>process</code>\u662f\u4e00\u500b\u5168\u57df\u7684\u7269\u4ef6,\u91dd\u5c0d\u7576\u524d\u7684Node\u61c9\u7528\u7a0b\u5e8f\u7684\u9032\u7a0b(process),\u63d0\u4f9b\u8cc7\u8a0a\u8207\u63a7\u5236</li> <li>\u8b80: \u7372\u53d6process\u8cc7\u8a0a(\u8cc7\u6e90\u4f7f\u7528\u3001\u57f7\u884c\u74b0\u5883\u3001\u57f7\u884c\u72c0\u614b)</li> <li>\u5beb: \u57f7\u884cprocess\u64cd\u4f5c(\u76e3\u807d\u4e8b\u4ef6\u3001\u6392\u7a0b\u4efb\u52d9\u3001\u767c\u51fa\u8b66\u543f)</li> <li>\u56e0\u70ba<code>process</code>\u8eab\u70baglobal\u7269\u4ef6,\u6240\u4ee5\u53ef\u4ee5\u5728Node\u61c9\u7528\u7a0b\u5f0f\u4e2d\u76f4\u63a5\u4f7f\u7528,\u800c\u7121\u9700\u4e8b\u5148require()\u3002</li> <li>\u4f46\u5b83\u4e5f\u9084\u662f\u80fd\u900f\u904erequire()\u4f86\u532f\u5165\u4e26\u4f7f\u7528\u9019\u500b\u6a21\u7d44</li> <li>\u4f8b: $ <code>const process = require('process');</code> <p>Process events</p> </li> <li>Event: exit<ul> <li>args</li> <li>code: (integer)</li> <li>\u7531\u65bc\u4ee5\u4e0b\u7684\u4efb\u4e00\u500b\u539f\u56e0\u800c\u5c0e\u81f4Node\u61c9\u7528\u7a0b\u5f0f\u5373\u5c07\u9000\u51fa\u6642,\u5c07\u767c\u51fa(emitted)\u8a72\u4e8b\u4ef6</li> <li>\u660e\u78ba\u5730\u547c\u53eb<code>process.exit()</code>\u65b9\u6cd5\u6642</li> <li>Node\u7684\u4e8b\u4ef6\u5faa\u74b0(event loop)\u4e0d\u518d\u9700\u8981\u57f7\u884c\u5176\u4ed6\u984d\u5916\u7684\u5de5\u4f5c\u6642</li> <li>\u76ee\u524d\u6c92\u6709\u65b9\u6cd5\u53ef\u4ee5\u9632\u6b62\u5728\u9019\u500b\u6642\u9593\u9ede\u8981\u9000\u51fa\u4e8b\u4ef6\u5faa\u74b0(event loop),\u4e00\u65e6\u6240\u6709\u7684 exit \u76e3\u807d\u5668(listener)\u57f7\u884c\u7d50\u675f\u5f8c,\u5c31\u6703\u7d42\u6b62Node\u7684\u9032\u7a0b</li> <li>\u53ea\u8981\u6709\u7d66\u5b9a\u9000\u51fa\u78bc(\u4e0d\u7ba1\u662f\u900f\u904e<code>process.exitCode</code>\u5c6c\u6027\u6216\u662f\u73fe\u5728\u9019\u500b exit\u4e8b\u4ef6 \u7684<code>exitCode</code>\u53c3\u6578)\u4e26\u50b3\u905e\u7d66<code>process.exit()</code>\u65b9\u6cd5\u6642,\u8a72\u4e8b\u4ef6\u76e3\u807d\u56de\u547c\u51fd\u5f0f(listener callback function)\u5c31\u6703\u88ab\u547c\u53eb</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc      JavaScript<pre><code>process.on('exit', (code) =&gt; {\nconsole.log(`About to exit with code: ${code}`);\n});\n</code></pre></li> <li>\u76e3\u807d\u529f\u80fd \u5fc5\u9808\u53ea \u57f7\u884c \u540c\u6b65\u5316\u7684\u64cd\u4f5c ,\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,\u8a72Node\u9032\u7a0b\u6703\u5728\u547c\u53eb<code>exit</code>\u4e8b\u4ef6\u76e3\u807d\u5668(event listeners)\u5f8c \u5c31\u7acb\u5373\u9000\u51fa ,\u56e0\u800c\u5c0e\u81f4\u4efb\u4f55\u4ecd\u5728\u4e8b\u4ef6\u8ff4\u5708(event loop)\u4e2d\u7684\u4f47\u5217(queued)\u4e2d\u7684\u984d\u5916\u7684\u5de5\u4f5c\u90fd\u6703\u88ab\u62cb\u68c4(abandoned)</li> <li>\u4ee5\u4e0b\u7684\u7a0b\u5f0f\u78bc\u70ba\u4f8b,<code>setTimeout()</code>\u9019\u500b\u51fd\u5f0f \u6c38\u9060\u4e0d\u6703 \u88ab\u57f7\u884c\u5230</li> <li>\u60c5\u5883\u8aaa\u660e( \u932f\u8aa4\u793a\u7bc4 )       JavaScript<pre><code>process.on('exit', (code) =&gt; {\nsetTimeout(() =&gt; {\nconsole.log('This will not run');\n}, 0);\n});\n</code></pre></li> </ul> </li> <li>Event: Signal events<ul> <li>\u4fe1\u865f\u4e8b\u4ef6(Signal events)\u6703\u5728Node\u9032\u7a0b(process)\u6536\u5230\u4fe1\u865f\u6642\u767c\u51fa(emitted)</li> <li>\u4fe1\u865f(Signals)\u4e0d\u80fd\u7528\u5728Worker threads</li> <li>\u4fe1\u865f\u8655\u7406\u5668(signal handler)\u6703\u5c07\u6536\u5230\u7684\u4fe1\u865f\u540d\u7a31(signal's name)\u505a\u70ba\u7b2c\u4e00\u500b\u53c3\u6578</li> <li>\u4f8b: <code>SIGINT</code>, <code>SIGTERM</code></li> <li>\u6bcf\u500b\u4e8b\u4ef6(event)\u7684\u540d\u7a31\u5c07\u6703\u662f\u5927\u5beb\u7684\u5e38\u7528\u4fe1\u865f\u540d\u7a31</li> <li>\u4f8b: <code>SIGINT</code> =&gt; SIGINT \u4fe1\u865f\u5011   JavaScript<pre><code>// Begin reading from stdin so the process does not exit.\nprocess.stdin.resume();\nprocess.on('SIGINT', () =&gt; {\nconsole.log('Received SIGINT. Press Control-D to exit.');\n});\n// Using a single function to handle multiple signals\nfunction handle(signal) {\nconsole.log(`Received ${signal}`);\n}\nprocess.on('SIGINT', handle);\nprocess.on('SIGTERM', handle);\n</code></pre></li> <li><code>SIGTERM</code>\u8207<code>SIGINT</code>\u5728\u975eWindows\u4f5c\u696d\u7cfb\u7d71\u7684\u74b0\u5883\u4e2d,\u64c1\u6709\u9810\u8a2d\u8655\u7406\u5668\u53ef\u4ee5\u5728\u9000\u51fa\u7a0b\u5f0f\u78bc\u4e4b\u524d,\u91cd\u7f6e\u7d42\u7aef\u6a5f\u6a21\u5f0f\u70ba 128 + signal number\u3002\u5982\u679c\u9019\u4e9b\u4fe1\u865f\u4e4b\u4e00\u5df2\u5b89\u88dd\u4e86\u76e3\u807d\u5668(listener),\u5247\u5c07\u522a\u9664\u5176\u9ed8\u8a8d\u884c\u70ba(Node\u61c9\u7528\u7a0b\u5f0f\u4e5f\u4e0d\u518d\u9000\u51fa)</li> <li><code>SIGTERM</code>: \u5728Windows\u4f5c\u696d\u7cfb\u7d71\u7684\u74b0\u5883\u4e2d\u4e0d\u652f\u63f4,\u4f46\u53ef\u4ee5\u76e3\u807d\u5b83(listened on)</li> <li><code>SIGINT</code>: \u5728\u7d42\u7aef\u6a5f\u4e2d\u662f\u53ef\u88ab\u6240\u6709\u4f5c\u696d\u7cfb\u7d71\u6240\u652f\u63f4\u7684,\u5b83\u901a\u5e38\u53ef\u4ee5\u7528<code>ctrl-C</code>\u4f86\u7522\u751f</li> <li><code>SIGKILL</code>: \u4e0d\u80fd\u5b89\u88dd\u76e3\u807d\u5668(listener),\u5b83\u5c07\u7121\u689d\u4ef6\u7d42\u6b62Node\u61c9\u7528\u7a0b\u5f0f,\u7121\u8ad6\u6211\u5011\u5728\u54ea\u500b\u4f5c\u696d\u7cfb\u7d71\u7684\u74b0\u5883\u4e2d</li> <li>\u88dc\u5145: \u56e0\u70baWindows\u4f5c\u696d\u7cfb\u7d71\u4e26\u4e0d\u652f\u63f4\u4fe1\u865f(signals),\u6240\u4ee5\u4e0d\u80fd\u8aaa\u662f\u7b49\u540c\u65bc\u4fe1\u865f\u7d42\u6b62,\u4f46\u662fNode\u6709\u63d0\u4f9b\u4e86\u4e00\u4e9b\u4eff\u6548\u7684\u505a\u6cd5,\u4f8b\u5982: process.kill()\u8207subprocess.kill()</li> <li>\u767c\u9001<code>SIGINT</code>,<code>SIGTERM</code>,<code>SIGKILL</code>\u5c07\u5c0e\u81f4\u76ee\u6a19\u9032\u7a0b(target process)\u7121\u689d\u4ef6\u88ab\u7d42\u6b62\u3002\u6b64\u5f8c,\u5b50\u9032\u7a0b(subprocess)\u5c07\u56de\u5831\u8a72\u9032\u7a0b(process)\u5df2\u88ab\u4fe1\u865f(signal)\u7d42\u6b62\u4e86</li> <li>\u767c\u9001\u4fe1\u865f(signal) <code>0</code> \u53ef\u4ee5\u7528\u4f86\u505a\u70ba\u4e00\u7a2e\u7368\u7acb\u7684\u5e73\u53f0\u4ee5\u6e2c\u8a66\u9032\u7a0b(process)\u7684\u5b58\u5728   <p>method</p> </li> </ul> </li> <li>process.cpuUsage([previousValue])</li> <li>args<ul> <li>previousValue: (Object)</li> <li>\u4e0a\u4e00\u6b21\u547c\u53ebprocess.cpuUsage()\u7684\u56de\u50b3\u503c</li> </ul> </li> <li>Returns: (Object)<ul> <li>user: (integer)</li> <li>system: (integer)</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3\u4e00\u500b\u5177\u6709<code>user</code>, <code>system</code>\u7684\u7269\u4ef6(<code>Object</code>),\u4f86\u8868\u793a\u7576\u524d\u7684\u9032\u7a0b(current process)\u7684<code>user</code>\u548c<code>system</code>\u7684\u6642\u9593\u4f7f\u7528\u7387<ul> <li>\u9019\u4e9b\u503c\u90fd\u662f\u4ee5\u767e\u842c\u5206\u4e4b\u4e00\u79d2\u70ba\u55ae\u4f4d(\u5fae\u79d2)---&gt;\u6642\u9593\u55ae\u4f4d</li> <li>\u9019\u4e9b\u503c\u5206\u5225\u7528\u4f86\u6e2c\u91cf\u82b1\u5728\u4f7f\u7528\u8005\u7aef\u7684\u7a0b\u5f0f\u78bc\uff06\u7cfb\u7d71\u7aef\u7684\u7a0b\u5f0f\u78bc\u7684\u6642\u9593</li> <li>\u7576\u6709\u591a\u500bCPU\u5167\u6838\u5728\u70ba\u9019\u500b\u9032\u7a0b(process)\u57f7\u884c\u5de5\u4f5c\u6642,\u5247\u9019\u4e9b\u503c\u6700\u7d42\u53ef\u80fd\u6703\u5927\u65bc\u5be6\u969b\u7d93\u904e\u7684\u6642\u9593</li> </ul> </li> <li>\u4e0a\u4e00\u6b21\u547c\u53eb<code>process.cpuUsage()</code>\u7684\u7d50\u679c\u53ef\u4ee5\u4f5c\u70ba\u53c3\u6578\u50b3\u905e\u7d66\u51fd\u5f0f,\u4ee5\u5f97\u77e5\u5dee\u7570\u8b80\u6578(diff reading)     JavaScript<pre><code>const startUsage = process.cpuUsage();\n// { user: 38579, system: 6986 }\n// spin the CPU for 500 milliseconds\nconst now = Date.now();\nwhile (Date.now() - now &lt; 500);\nconsole.log(process.cpuUsage(startUsage));\n// { user: 514883, system: 11226 }\n</code></pre></li> <li>process.memoryUsage()</li> <li>Returns: (Object)<ul> <li>rss: (integer)</li> <li>rss =&gt; (\u5e38\u99d0\u96c6\u7684\u5927\u5c0f,Resident Set Size),\u4ee3\u8868\u8a72\u9032\u7a0b(process)\u5728\u4e3b\u8a18\u61b6\u9ad4\u88dd\u7f6e\u4e2d\u5df2\u88ab\u4f7f\u7528\u6389\u7684\u5167\u5b58\u8a18\u61b6\u9ad4\u7a7a\u9593(\u5373\u7e3d\u5206\u914d\u5167\u5b58\u7684\u5b50\u96c6); \u5305\u62ec\u6240\u6709\u7684<code>C++</code>\u8207<code>Javascript</code>\u7684\u7269\u4ef6\u548c\u7a0b\u5f0f\u78bc</li> <li>heapTotal: (integer)</li> <li>\u53c3\u8003V8 engine\u7684\u5167\u5b58\u8a18\u61b6\u9ad4\u4f7f\u7528\u60c5\u6cc1 </li> <li>heapUsed: (integer)</li> <li>\u53c3\u8003V8 engine\u7684\u5167\u5b58\u8a18\u61b6\u9ad4\u4f7f\u7528\u60c5\u6cc1 </li> <li>external: (integer)</li> <li>\u53c3\u8003\u7531V8 engine\u7ba1\u7406\u7684<code>C++\u7269\u4ef6</code>\u7d81\u5b9a\u5230<code>Javascript\u7269\u4ef6</code>\u7684\u5167\u5b58\u8a18\u61b6\u9ad4\u4f7f\u7528\u91cf </li> <li>arrayBuffers: (integer)</li> <li>\u53c3\u8003\u5206\u914d\u5230<code>ArrayBuffers</code> &amp; <code>SharedArrayBuffers</code>,\u4e5f\u5305\u542b\u6240\u6709Node\u61c9\u7528\u7a0b\u5f0f\u7684Buffer\u7269\u4ef6</li> <li><code>arrayBuffers</code>\u4e5f\u5305\u542b\u5728<code>external</code>\u7684\u503c\u4e2d</li> <li>\u7576Node\u61c9\u7528\u7a0b\u5f0f\u88ab\u7528\u4f5c\u5d4c\u5165\u5f0f\u51fd\u5f0f\u5eab\u6642,\u8a72\u503c\u53ef\u80fd\u70ba0,\u662f\u56e0\u70ba\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b<code>arrayBuffers</code>\u53ef\u80fd\u4e0d\u6703\u88ab\u8ffd\u8e64\u5230</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3\u4e00\u500b\u7269\u4ef6(<code>Object</code>)\u4f86\u63cf\u8ff0Node\u61c9\u7528\u7a0b\u5f0f\u7684\u5167\u5b58\u8a18\u61b6\u9ad4(memory)\u7528\u91cf<ul> <li>\u9019\u500b\u503c\u6703\u4ee5<code>bytes</code>\u70ba\u55ae\u4f4d\u4f86\u8868\u793a</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc<ul> <li>\u4ee5\u4e0b\u9762\u7684\u7a0b\u5f0f\u78bc\u70ba\u4f8b     JavaScript<pre><code>console.log(process.memoryUsage());\n</code></pre></li> <li>\u6703\u7522\u751f\u4e00\u500b\u7269\u4ef6</li> <li><code>{         rss: 4935680,         heapTotal: 1826816,         heapUsed: 650472,         external: 49879,         arrayBuffers: 9386       }</code></li> </ul> </li> <li>\u7576\u4f7f\u7528Worker threads\u6642,<code>rss</code>\u5c07\u6703\u662f\u4e00\u500b\u5c0d\u65bc\u6574\u500b\u9032\u7a0b(entire process)\u6709\u6548\u7684\u503c(valid),\u800c\u5176\u4ed6\u53c3\u6578\u50c5\u6703\u53c3\u8003\u5230\u7576\u524d\u7684\u9032\u7a0b</li> <li>process.resourceUsage()</li> <li>Returns: (Object)<ul> <li>userCPUTime: (integer)</li> <li>\u5c0d\u61c9\u5230<code>ru_utime</code>\u7684\u503c,\u4e26\u4ee5\u5fae\u79d2\u70ba\u55ae\u4f4d\u8868\u793a</li> <li>\u8207process.cpuUsage().user\u7684\u503c\u76f8\u540c</li> <li>systemCPUTime: (integer)</li> <li>\u5c0d\u61c9\u5230<code>ru_stime</code>\u7684\u503c,\u4e26\u4ee5\u5fae\u79d2\u70ba\u55ae\u4f4d\u8868\u793a</li> <li>\u8207process.cpuUsage().system\u7684\u503c\u76f8\u540c</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3\u4e00\u500b\u7269\u4ef6(<code>Object</code>)\u4f86\u8868\u793a\u7576\u524d\u9032\u7a0b(current process)\u7684\u8cc7\u6e90\u4f7f\u7528\u7387(resource usage); \u4ee5\u4e0a\u6240\u6709\u8a72\u65b9\u6cd5\u7684\u56de\u50b3\u503c\u90fd\u662f\u4f86\u81ea\u65bc\u547c\u53ebuv_rusage_t struct\u7684uv_getrusage()\u65b9\u6cd5\u7684\u56de\u50b3\u503c     &gt; uv_getrusage(): Gets the resource usage measures for the current process.</li> <li>process.cwd()</li> <li>Returns: (string)<ul> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3\u7576\u524d\u9032\u7a0b(current process)\u6240\u5728\u7684\u5de5\u4f5c\u76ee\u9304\u7684\u8def\u5f91(working directory)</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>console.log(Current directory:  {process.cwd()});\n</code></pre></li> <li>process.exit([code])</li> <li>args<ul> <li>code: (integer)</li> <li>\u8868\u793a\u8981\u6307\u5b9a\u7684\u9000\u51fa\u78bc</li> <li>\u9810\u8a2d\u503c: 0 (\u4ee3\u8868\u6210\u529f)</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6307\u793aNode\u61c9\u7528\u7a0b\u5f0f\u4ee5\u540c\u6b65\u5730\u65b9\u5f0f(synchronously)\u4f86\u7d42\u6b62\u9032\u7a0b(terminate the process)\u4e26\u986f\u793a\u9000\u51fa\u78bc<ul> <li>\u82e5[code]\u53c3\u6578\u88ab\u7701\u7565,\u5247\u6703\u4ee5<code>0</code>\u70ba\u9000\u51fa\u78bc\u6216\u662f<code>process.exitCode</code>\u7684\u503c\u70ba\u6e96(\u7576\u8a72\u5c6c\u6027\u5728\u4e4b\u524d\u6709\u88ab\u8a2d\u5b9a\u904e\u7684\u8a71)</li> <li>Node\u61c9\u7528\u7a0b\u5f0f\u4e0d\u6703\u5728\u6240\u6709\u7684Event: 'exit'\u4e8b\u4ef6\u76e3\u807d\u5668(event listeners)\u88ab\u547c\u53eb\u4e4b\u524d\u5c31\u7d42\u6b62\u6389</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc<ul> <li>\u4ee5\u5931\u6557(failure)\u7684\u72c0\u614b\u78bc\u4f86\u9000\u51faNode\u61c9\u7528\u7a0b\u5f0f </li> <li>$ <code>process.exit(1);</code></li> <li>\u5728\u57f7\u884c\u8a72Node\u61c9\u7528\u7a0b\u5f0f\u7684shell\u4e0a,\u6211\u5011\u6703\u770b\u5230\u9000\u51fa\u78bc(exit code)\u70ba<code>1</code></li> </ul> </li> <li>\u7576\u6211\u5011\u547c\u53eb<code>process.exit()</code>\u65b9\u6cd5\u6642,\u6703\u5f37\u8febNode\u61c9\u7528\u7a0b\u5f0f\u76e1\u5feb\u5730\u7d42\u6b62\u8a72\u9032\u7a0b,\u5373\u4fbf\u662f\u9084\u6709pending\u72c0\u614b\u4e2d\u7684\u975e\u540c\u6b65\u64cd\u4f5c\u5c1a\u672a\u5b8c\u5168\u5b8c\u6210\u7684\u60c5\u6cc1,\u5305\u62ecI/O\u64cd\u4f5c,\u50cf\u662f<code>process.stdout</code> &amp; <code>process.stderr</code><ul> <li>\u5728\u5927\u591a\u6578\u7684\u60c5\u6cc1\u4e0b,\u5176\u5be6\u6211\u5011\u4e26\u4e0d\u9700\u8981\u660e\u78ba\u5730\u547c\u53eb<code>process.exit()</code>\u65b9\u6cd5\u3002\u56e0\u70ba\u5728\u4e8b\u4ef6\u5faa\u74b0(event loop)\u7576\u4e2d\u6c92\u6709\u984d\u5916pending\u72c0\u614b\u4e2d\u7684\u5de5\u4f5c\u7684\u8a71,Node\u61c9\u7528\u7a0b\u5f0f\u5c31\u6703\u81ea\u884c\u9000\u51fa</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u900f\u904e\u8a2d\u5b9a\u597d<code>process.exitCode</code>\u5c6c\u6027\u7684\u503c,\u4f86\u544a\u77e5\u9032\u7a0b\u5728\u6b63\u5e38\u9000\u51fa\u6642,\u8981\u4f7f\u7528\u54ea\u500b\u9000\u51fa\u78bc</li> </ul> </li> <li>\u60c5\u5883\u8aaa\u660e( \u932f\u8aa4\u793a\u7bc4 )       JavaScript<pre><code>// This is an example of what *not* to do:\nif (someConditionNotMet()) {\nprintUsageToStdout();\nprocess.exit(1);\n}\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u662f\u4e00\u500b\u4f7f\u7528<code>process.exit()</code>\u7684 \u932f\u8aa4\u793a\u7bc4 ,\u53ef\u80fd\u6703\u56e0\u6b64\u5c0e\u81f4\u8981print\u5230stdout\u7684\u8cc7\u6599\u88ab\u622a\u65b7\u6216\u907a\u5931</li> <li>\u9019\u6a23\u505a\u4e4b\u6240\u4ee5\u6709\u554f\u984c\u7684\u539f\u56e0\u662f\u56e0\u70ba\u5728Node\u7684\u4e16\u754c\u4e2d\u8981\u5beb\u5165\u5230<code>process.stdout</code>\u6709\u6642\u5019\u662f\u975e\u540c\u6b65\u7684(asynchronous),\u4e5f\u53ef\u80fd\u6703\u5728Node\u7684\u4e8b\u4ef6\u8ff4\u5708(event loop)\u4e2d\u591a\u6b21\u767c\u751f</li> <li>\u6240\u4ee5\u6211\u5011\u9700\u8981\u5728\u984d\u5916\u5beb\u5165\u5230stdout\u4e4b\u5f8c,\u624d\u80fd\u547c\u53ebprocess.exit()\u4f86\u5f37\u5236\u5c07\u8a72\u9032\u7a0b\u9000\u51fa</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc( \u6b63\u78ba\u505a\u6cd5 )       JavaScript<pre><code>// How to properly set the exit code while letting\n// the process exit gracefully.\nif (someConditionNotMet()) {\nprintUsageToStdout();\nprocess.exitCode = 1;\n}\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u662f\u6b63\u78ba\u7684\u89e3\u6c7a\u65b9\u6cd5,\u6211\u5011\u61c9\u8a72\u8981\u5148\u8a2d\u5b9a\u597d<code>process.exitCode</code>\u5c6c\u6027\u7684\u503c,\u800c\u4e0d\u662f\u76f4\u63a5\u547c\u53eb<code>process.exit()</code>\u65b9\u6cd5,\u4e26\u907f\u514d\u70ba\u4e8b\u4ef6\u8ff4\u5708(event loop)\u5b89\u6392\u984d\u5916\u7684\u5de5\u4f5c\u4f86\u5141\u8a31\u8a72\u9032\u7a0b\u80fd\u81ea\u7136\u5730\u9000\u51fa</li> <li>\u5982\u679c\u662f\u56e0\u70ba\u9047\u5230\u932f\u8aa4\u60c5\u6cc1\u800c\u6709\u5fc5\u8981\u5f37\u5236\u7d42\u6b62\u8a72\u9032\u7a0b\u7684\u8a71,\u53ef\u4ee5\u62cb\u51fa\u4e00\u500b<code>uncaught error</code>,\u4e26\u6839\u64da\u9019\u500b\u932f\u8aa4\u4f86\u7d42\u6b62\u8a72\u9032\u7a0b,\u4e5f\u6703\u6bd4\u76f4\u63a5\u547c\u53eb<code>process.exit()</code>\u4f86\u5f97\u66f4\u5b89\u5168</li> </ul> </li> <li>\u5728Worker threads\u4e2d,<code>process.exit()</code>\u6703\u505c\u6b62\u7576\u524d\u7684\u7dda\u7a0b(current thread),\u800c\u4e0d\u662f\u7576\u524d\u7684\u9032\u7a0b(current process)</li> <li>process.kill(pid[ ,signal])</li> <li>args<ul> <li>pid: (number)</li> <li>\u7d66\u5b9a\u4e00\u500b\u9032\u7a0b(process) ID</li> <li>signal: (string || number)</li> <li>\u4ee5\u5b57\u4e32\u6216\u662f\u6578\u503c\u7684\u5f62\u5f0f\u4f86\u767c\u9001\u4fe1\u865f</li> <li>\u9810\u8a2d\u503c: <code>SIGTERM</code></li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u5c07\u4fe1\u865f(signal)\u767c\u9001\u7d66\u6307\u5b9a<code>pid</code>\u7684\u9032\u7a0b(process)</li> <li>\u4fe1\u865f\u7684\u540d\u7a31\u70ba\u5b57\u4e32\u578b\u5225,\u5e38\u898b\u7684\u50cf\u662f<code>SIGINT</code>, <code>SIGHUP</code></li> <li>\u7576\u7d66\u5b9a\u7684\u76ee\u6a19<code>pid</code>\u4e0d\u5b58\u5728\u6642,\u8a72\u65b9\u6cd5\u6703\u62cb\u51fa\u932f\u8aa4\u3002\u4f5c\u70ba\u7279\u6b8a\u60c5\u6cc1\u6642,\u53ef\u4ee5\u5229\u7528<code>0</code>\u4f5c\u70ba\u4fe1\u865f\u4f86\u6e2c\u8a66\u67d0\u500b<code>pid</code>\u7684\u9032\u7a0b\u662f\u5426\u5b58\u5728<ul> <li>\u7576\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u6642,\u60f3\u780d\u6389\u4e00\u500b\u9032\u7a0b\u7fa4\u7d44(kill a process group)\u6703\u62cb\u51fa\u4e00\u500b\u932f\u8aa4</li> </ul> </li> <li>\u5176\u5be6<code>process.kill()</code>\u9019\u500b\u65b9\u6cd5\u53ea\u662f\u4e00\u500b\u4fe1\u865f\u767c\u9001\u5668(signal sender),\u5c31\u5982\u540c $<code>kill</code> \u7684\u7cfb\u7d71\u6307\u4ee4\u4e00\u6a23<ul> <li>\u6bd4\u8d77\u55ae\u7d14\u7684\u7cfb\u7d71\u6307\u4ee4 $<code>kill</code>,\u767c\u9001\u4fe1\u865f\u7684\u9019\u500b\u65b9\u6cd5\u53ef\u80fd\u6703\u984d\u5916\u505a\u4e00\u4e9b\u5176\u4ed6\u7684\u4e8b,\u800c\u4e0d\u55ae\u7d14\u53ea\u662f\u780d\u6389\u76ee\u6a19\u9032\u7a0b(kill the target process)</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>process.on('SIGHUP', () =&gt; {\nconsole.log('Got SIGHUP signal.');\n});\nsetTimeout(() =&gt; {\nconsole.log('Exiting.');\nprocess.exit(0);\n}, 100);\nprocess.kill(process.pid, 'SIGHUP');\n</code></pre><ul> <li>\u7576Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9032\u7a0b\u6536\u5230<code>SIGUSR1</code>\u7684\u4fe1\u865f\u6642,Node\u6703\u555f\u52d5\u4e00\u500b\u5075\u932f\u5668(debugger)</li> <li>\u53ef\u53c3\u8003Signal events</li> </ul> </li> <li>process.nextTick(callback[ ,...args])</li> <li>args<ul> <li>callback: (Function)</li> <li>\u56de\u547c\u51fd\u5f0f </li> <li>...args: (any)</li> <li>\u7576\u6709\u547c\u53ebcallback function\u6642,\u8981\u9644\u52a0\u7d66\u8a72\u56de\u547c\u51fd\u5f0f\u7684\u53c3\u6578\u5011</li> <li>\u8a72\u65b9\u6cd5\u6703\u65b0\u589e\u4e00\u500b<code>callback function</code>\u5230\"next tick queue\"\u3002\u7576Javascript\u5806\u758a(stack)\u7576\u524d\u7684\u64cd\u4f5c\u57f7\u884c\u5b8c\u6210\u4e26\u5141\u8a31\u4e8b\u4ef6\u8ff4\u5708(event loop)\u7e7c\u7e8c\u4e4b\u524d,\u8a72\u4f47\u5217(queue)\u6703\u5b8c\u5168\u8017\u76e1(fully drained)</li> <li>\u5982\u679c\u8981\u5faa\u74b0\u5730\u91cd\u8907\u547c\u53eb<code>process.nextTick()</code>,\u53ef\u80fd\u6703\u5efa\u7acb\u4e00\u500b\u7121\u9650\u5faa\u74b0\u7684\u8ff4\u5708(infinite loop)</li> <li>\u76f8\u95dc\u80cc\u666f\u77e5\u8b58\u53ef\u53c3\u8003Event Loop\u7ae0\u7bc0\u7684\u4ecb\u7d39</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>console.log('start');\nprocess.nextTick(() =&gt; {\nconsole.log('nextTick callback');\n});\nconsole.log('scheduled');\n// Output:\n// start\n// scheduled\n// nextTick callback\n</code></pre></li> <li>process.nextTick()\u65b9\u6cd5\u5728\u958b\u767cAPI\u6642\u5f88\u91cd\u8981,\u4ee5\u4fbf\u7d66\u7528\u6236\u5728\u7269\u4ef6\u88ab\u69cb\u5efa(constructed) \u4e4b\u5f8c ,\u4f46\u662f\u5728\u4efb\u4f55I/O\u76f8\u95dc\u64cd\u4f5c\u767c\u751f \u4e4b\u524d ,\u4f86\u6307\u6d3e\u4e8b\u4ef6\u8655\u7406\u5668(assign event handlers)       JavaScript<pre><code>function MyThing(options) {\nthis.setupOptions(options);\nprocess.nextTick(() =&gt; {\nthis.startDoingStuff();\n});\n}\nconst thing = new MyThing();\nthing.getReadyForStuff();\n// thing.startDoingStuff() gets called now, not before.\n</code></pre></li> <li>\u5c0d\u65bcAPI\u4f86\u8aaa,\u8981\u99ac 100%\u540c\u6b65 or 100%\u975e\u540c\u6b65,\u662f\u5f88\u91cd\u8981\u7684\u4e8b\u60c5<ul> <li>\u60c5\u5883\u8aaa\u660e( \u932f\u8aa4\u793a\u7bc4 )     JavaScript<pre><code>// WARNING!  DO NOT USE!  BAD UNSAFE HAZARD!\nfunction maybeSync(arg, cb) {\nif (arg) {\ncb();\nreturn;\n}\nfs.stat('file', cb);\n}\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u662f\u5192\u96aa\u7684(hazardous),\u56e0\u70ba\u5047\u8a2d\u6211\u5011\u9047\u5230\u4ee5\u4e0b\u7684\u60c5\u6cc1</li> <li>\u63a5\u4e0b\u4f86\u7684\u60c5\u6cc1\u6703\u9020\u6210\u4e0d\u6e05\u695a\u5230\u5e95\u662ffoo() \u6216\u662f bar()\u5148\u88ab\u547c\u53eb</li> <li>\u60c5\u5883\u8aaa\u660e( \u932f\u8aa4\u793a\u7bc4 )     JavaScript<pre><code>const maybeTrue = Math.random() &gt; 0.5;\nmaybeSync(maybeTrue, () =&gt; {\nfoo();\n});\nbar();\n</code></pre></li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc( \u6b63\u78ba\u505a\u6cd5 )</li> <li>\u4ee5\u4e0b\u7684\u505a\u6cd5\u6703\u6bd4\u8f03\u597d      JavaScript<pre><code>function definitelyAsync(arg, cb) {\nif (arg) {\nprocess.nextTick(cb);\nreturn;\n}\nfs.stat('file', cb);\n}\n</code></pre></li> </ul> </li> <li>process.send(message[, sendHandle[, options]][, callback])</li> <li>args<ul> <li>message: (Object)</li> <li>sendHandle ([net.Server])(https://nodejs.org/api/net.html#net_class_net_server) || net.Socket)</li> <li>options: (Object)</li> <li>\u88ab\u7528\u4f5c\u5c07\u7279\u5b9a\u64cd\u4f5c\u985e\u578b\u7684\u767c\u9001\u53c3\u6578\u5316</li> <li><code>options</code>\u4e5f\u652f\u63f4\u4ee5\u4e0b\u7684\u5c6c\u6027<ul> <li><code>keepOpen</code>: (boolean)</li> <li>\u7576\u5728\u50b3\u905e<code>net.Socket</code>\u7684\u5be6\u4f8b\u5011(instances)\u6642,\u53ef\u4ee5\u7528\u4f86\u50b3\u905e\u7684\u503c</li> <li>\u9810\u8a2d\u503c: false</li> <li>\u7576<code>keepOpen</code>=true\u6642, <code>socket</code>\u6703\u5728\u767c\u9001\u904e\u7a0b(sending process)\u4e2d\u4fdd\u6301\u958b\u653e</li> </ul> </li> </ul> </li> <li>Returns: (boolean)<ul> <li>\u5982\u679c\u662f\u5229\u7528<code>IPC channel</code>\u4f86\u7522\u751fNode\u61c9\u7528\u7a0b\u5f0f\u7684\u8a71,<code>process.send()</code>\u65b9\u6cd5\u53ef\u4ee5\u7528\u4f86\u50b3\u905e\u8a0a\u606f\u7d66\u7236\u9032\u7a0b(parent process)</li> <li>\u6d88\u606f(message)\u6703\u88abparent's ChildProcess\u7269\u4ef6\u4f5c\u70bamessage event\u4f86\u63a5\u6536</li> <li>\u5982\u679c\u672a\u4f7f\u7528<code>IPC channel</code>\u4f86\u7522\u751fNode\u61c9\u7528\u7a0b\u5f0f\u7684\u8a71,\u5247<code>process.send()</code>\u56de\u50b3\u7684\u7d50\u679c\u5c07\u6703\u662f<code>undefined</code></li> <li>\u8a72\u8a0a\u606f(message)\u5df2\u7d93\u6b77\u904e\u5e8f\u5217\u5316(serialization)\u8207\u89e3\u6790(parsing)</li> <li>\u7d50\u679c\u6d88\u606f(resulting message)\u53ef\u80fd\u6703\u8ddf\u6700\u521d\u767c\u9001\u7684\u6d88\u606f\u4e0d\u592a\u4e00\u6a23</li> </ul> </li> <li>process.uptime()</li> <li>Returns: (number)</li> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3\u7576\u524dNode\u61c9\u7528\u7a0b\u5f0f\u5df2\u7d93\u904b\u884c\u591a\u4e45\u7684\u79d2\u6578<ul> <li>\u56de\u50b3\u503c\u6703\u5305\u62ec\u542b\u6709\u5c0f\u6578\u9ede\u7684\u79d2\u6578,\u53ef\u4ee5\u5229\u7528Math.floor()\u4f86\u7b97\u51fa\u5c0f\u65bc\u7b49\u65bc\u6240\u7d66\u6578\u5b57\u7684\u6700\u5927\u6574\u6578</li> <li>\u4f8b: $ <code>Math.floor(5.95)</code> =&gt; <code>5</code> <p>property</p> </li> </ul> </li> <li>process.argv</li> <li>Type: (string) </li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u4e00\u500b\u9663\u5217(array),\u8a72\u9663\u5217\u6703\u5305\u542b\u7576\u555f\u52d5Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9032\u7a0b\u7684\u6642\u5019,\u6574\u500b\u547d\u4ee4\u5217(command-line)\u8981\u50b3\u905e\u7684\u6240\u6709\u53c3\u6578<ul> <li>\u5176\u4e2d\u7684\u7b2c\u4e00\u500b\u5143\u7d20\u6703\u662fprocess.execPath</li> <li>\u7b2c\u4e8c\u500b\u5143\u7d20\u6703\u662f\u6b63\u5728\u88ab\u57f7\u884c\u7684Javascript\u6a94\u6848\u7684\u8def\u5f91\u4f4d\u7f6e</li> <li>\u5269\u4e0b\u7684\u5143\u7d20\u5c31\u662f\u4efb\u4f55\u5176\u4ed6\u7684\u547d\u4ee4\u5217\u53c3\u6578(command-line arguments)</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc<ul> <li>\u5047\u8a2d\u4ee5\u4e0b\u7bc4\u4f8b\u7a0b\u5f0f\u7684\u6a94\u6848\u540d\u7a31\u662f<code>process-args.js</code> JavaScript<pre><code>// print process.argv\nprocess.argv.forEach((val, index) =&gt; {\nconsole.log(`${index}: ${val}`);\n});\n</code></pre></li> <li>\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f\u4f86\u555f\u52d5Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9032\u7a0b(process)</li> <li>$ <code>node process-args.js one two=three four</code></li> <li>\u5c07\u6703\u56de\u50b3\u4ee5\u4e0b\u7684\u503c     JavaScript<pre><code>0: /usr/local/bin/node\n1: /Users/mjr/work/node/process-args.js\n2: one\n3: two=three\n4: four\n</code></pre></li> </ul> </li> <li>process.debugPort</li> <li>Type: (number)</li> <li>\u8a72\u5c6c\u6027\u503c\u4ee3\u8868\u7576\u555f\u7528(enabled)Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9664\u932f\u5668\u6642(dubugger),\u6240\u4f7f\u7528\u7684\u57e0\u865f(port)</li> <li>process.env</li> <li>Type: (Object) </li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u4e00\u500b\u7269\u4ef6,\u5305\u542b\u4f7f\u7528\u8005\u7684\u74b0\u5883\u8b8a\u6578<ul> <li>\u50cf\u662f\u4ee5\u4e0b\u7684<code>Object</code> JavaScript<pre><code>{\nTERM: 'xterm-256color',\nSHELL: '/usr/local/bin/bash',\nUSER: 'maciej',\nPATH: '~/.bin/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin',\nPWD: '/Users/maciej',\nEDITOR: 'vim',\nSHLVL: '1',\nHOME: '/Users/maciej',\nLOGNAME: 'maciej',\n_: '/usr/local/bin/node'\n} </code></pre></li> <li>\u53ef\u4ee5\u4fee\u6539\u9019\u500b\u74b0\u5883\u8b8a\u6578\u7684\u7269\u4ef6,\u4f46\u50c5\u9650\u65bc\u8a72Node\u61c9\u7528\u7a0b\u5f0f\u9032\u7a0b(process),\u6216\u8005\u9664\u975e\u660e\u78ba\u5730\u8981\u6c42\u4e0d\u6703\u53cd\u61c9\u5230\u5176\u4ed6Worker threads\u4e0a</li> <li>\u63db\u53e5\u8a71\u8aaa,\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u4e26\u4e0d\u6703\u5982\u9810\u671f\u5730\u904b\u4f5c</li> <li>$ <code>node -e 'process.env.foo = \"bar\"' &amp;&amp; echo $foo</code></li> <li>\u96d6\u7136\u5c07\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c     JavaScript<pre><code>process.env.foo = 'bar';\nconsole.log(process.env.foo);\n</code></pre></li> </ul> </li> <li>\u5f9eNode v10.0.0\u7684\u7248\u672c\u4ee5\u5f8c\u958b\u59cb,\u6307\u6d3e\u7d66<code>process.env</code>\u7684\u74b0\u5883\u8b8a\u6578\u7684\u503c \u4e0d\u6703 \u518d\u505a\u96b1\u6027\u8f49\u63db\u578b\u5225<ul> <li>\u6240\u4ee5\u4ee5\u4e0b\u7684\u65b9\u5f0f \u4e0d\u5efa\u8b70 \u518d\u4f7f\u7528</li> <li>\u60c5\u5883\u8aaa\u660e( \u932f\u8aa4\u793a\u7bc4 ) JavaScript<pre><code>process.env.test = null;\nconsole.log(process.env.test);\n// =&gt; 'null'\nprocess.env.test = undefined;\nconsole.log(process.env.test);\n// =&gt; 'undefined'\n</code></pre></li> </ul> </li> <li>\u5982\u679c\u8981\u5f9e<code>process.env</code>\u7684\u5c6c\u6027\u503c\u4e2d,\u522a\u9664Node\u61c9\u7528\u7a0b\u5f0f\u7684\u74b0\u5883\u8b8a\u6578\u7684\u8a71,\u53ef\u4ee5\u5229\u7528Javascript\u7684<code>delete</code>\u6307\u4ee4\u4f86\u5b8c\u6210<ul> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>process.env.TEST = 1;\ndelete process.env.TEST;\nconsole.log(process.env.TEST);\n// =&gt; undefined\n</code></pre></li> </ul> </li> <li>\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u4e2d,\u74b0\u5883\u8b8a\u6578\u6c92\u6709\u5340\u5206\u5927\u5c0f\u5beb(case-insensitive)<ul> <li>\u4ee5\u4e0b\u7bc4\u4f8b\u7a0b\u5f0f\u78bc \u50c5\u9650\u65bcWindows\u4f5c\u696d\u7cfb\u7d71\u4e2d \u53ef\u4ee5\u9019\u6a23\u4f7f\u7528   JavaScript<pre><code>process.env.TEST = 1;\nconsole.log(process.env.test);\n// =&gt; 1\n</code></pre></li> </ul> </li> <li>\u9664\u975e\u5728\u5efa\u7acbWorker\u5be6\u4f8b\u6642\u6709\u660e\u78ba\u6307\u5b9a\u74b0\u5883\u8b8a\u6578,\u4e0d\u7136\u6bcf\u500b<code>Worker thread</code>\u90fd\u6709\u81ea\u5df1\u7684\u4e00\u4efd<code>process.env</code>\u526f\u672c(copy),\u662f\u57fa\u65bc\u5b83\u5011\u5404\u81ea\u7684\u7236\u7dda\u7a0b(parent thread)\u7684\u74b0\u5883\u8b8a\u6578(<code>process.env</code>),\u6216\u662f\u4efb\u4f55\u88ab\u4f5c\u70ba<code>env</code>\u9078\u9805\u4e26\u7d66\u5b9a\u5230<code>Worker constructor</code><ul> <li><code>Worker threads</code>\u4e4b\u9593\u4e26\u7121\u6cd5\u770b\u5230<code>process.env</code>\u7684\u4fee\u6539,\u53ea\u6709\u4e3b\u7dda\u7a0b(main thread)\u624d\u80fd\u9032\u884c\u5c0d\u4f5c\u696d\u7cfb\u7d71\u6216\u662f\u672c\u6a5f\u52a0\u8f09\u9805(native add-ons)\u505a\u770b\u5f97\u898b\u7684\u4fee\u6539</li> </ul> </li> <li>process.execArgv</li> <li>Type: (string [set])</li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u7576Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9032\u7a0b\u88ab\u555f\u52d5\u6642,\u5728Node.js\u547d\u4ee4\u5217\u4e0a\u9762\u7684\u7279\u5b9a\u9078\u9805\u7684\u96c6\u5408(the set of Node.js-specific command-line options)<ul> <li>\u9019\u908a\u6240\u6307\u7684\u7279\u5b9a\u9078\u9805(options)\u4e26\u4e0d\u6703\u51fa\u73fe\u5728<code>process.argv</code>\u7684\u5c6c\u6027\u503c\u4e4b\u4e2d,\u800c\u4e14\u4e5f\u4e0d\u5305\u62ec\u53ef\u57f7\u884c\u7684(executable),\u8a72\u6e96\u5099\u8981\u57f7\u884c\u7684\u6a94\u6848\u540d\u7a31,\u4ee5\u53ca\u8a72\u6e96\u5099\u8981\u57f7\u884c\u7684\u6a94\u6848\u540d\u7a31 \u5f8c\u9762 \u7684\u4efb\u4f55\u9078\u9805(options)</li> <li>\u9019\u4e9b\u9078\u9805\u5c0d\u65bc\u4ee5\u8207\u7236\u7d1a\u76f8\u540c\u57f7\u884c\u74b0\u5883\u7684\u5b50\u9032\u7a0b(child process)\u662f\u5f88\u6709\u7528\u7684</li> <li>\u5728\u7d42\u7aef\u6a5f(CLI)\u57f7\u884c\u8a72\u4ee5\u4e0b\u7684\u6307\u4ee4\u5f8c</li> <li>\u4f8b: $ <code>node --harmony script.js --version</code></li> <li>\u6aa2\u8996<code>process.execArgv</code>\u7684\u5c6c\u6027\u503c\u6703\u5f97\u5230<ul> <li>=&gt; <code>['--harmony']</code></li> </ul> </li> <li>\u5c0d\u7167\u6aa2\u8996<code>process.argv</code>\u7684\u5c6c\u6027\u503c\u6703\u5f97\u5230<ul> <li>=&gt; <code>['/usr/local/bin/node', 'script.js', '--version']</code></li> </ul> </li> <li>\u53ef\u53c3\u8003\u6709\u95dcWorker constructor\u4e2d\u7684<code>execArgv</code>\u5c6c\u6027\u4ee5\u4e86\u89e3\u66f4\u591a\u7684\u8a0a\u606f</li> </ul> </li> <li>process.execPath</li> <li>Type: (string)</li> <li>\u8a72\u5c6c\u6027\u503c\u6703\u56de\u50b3Node\u61c9\u7528\u7a0b\u5f0f\u7684\u9032\u7a0b\u4e2d\u7684\u53ef\u57f7\u884c\u6587\u4ef6(executable)\u7684\u7d55\u5c0d\u8def\u5f91<ul> <li>\u4f8b: <code>'/usr/local/bin/node'</code> </li> <li>\u5982\u679c\u9047\u5230\u53ef\u57f7\u884c\u6587\u4ef6\u7684\u8def\u5f91\u662f<code>symbolic link</code>,\u6703\u81ea\u52d5\u89e3\u6c7a\u6389\u8a72\u554f\u984c </li> </ul> </li> <li>process.exitCode</li> <li>\u578b\u5225: (integer)</li> <li>\u7576\u9032\u7a0b\u88ab\u6b63\u5e38\u5730\u9000\u51fa\u6642,\u6216\u662f\u900f\u904e<code>process.exit()</code>\u65b9\u6cd5\u9000\u51fa\u6642\u4f46\u6c92\u6709\u7d66\u5b9a\u9000\u51fa\u78bc\u6642,<code>process.exitCode</code>\u7684\u5c6c\u6027\u503c\u4ee3\u8868\u8a72\u9032\u7a0b\u7684\u9000\u51fa\u78bc</li> <li>\u7576\u6211\u5011\u7d66\u5b9aprocess.exit([code])\u65b9\u6cd5\u7684\u9000\u51fa\u78bc\u53c3\u6578\u503c\u6642,\u6703\u63a8\u7ffb(override)\u4e4b\u524d\u7684<code>process.exitCode</code>\u7684\u5c6c\u6027\u503c\u8a2d\u5b9a</li> <li>process.pid</li> <li>Type: (integer)</li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u8a72\u9032\u7a0b\u7684ID(process ID, pid)<ul> <li>$ <code>console.log(</code>This process is pid ${process.pid}<code>);</code> </li> </ul> </li> <li>A note on process I/O</li> <li>process.stdin</li> <li>process.stdout</li> <li>process.stderr</li> <li>process.title</li> <li>Type: (string)</li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u7576\u524d\u7684\u9032\u7a0b\u6a19\u984c(current process title) =&gt; \u4e5f\u5c31\u662f\u6703\u56de\u50b3\u7576\u524d<code>ps</code>\u7684\u503c</li> <li>\u7576\u6307\u6d3e\u65b0\u7684\u503c\u7d66<code>process.title</code>\u5c6c\u6027\u6642,\u6703\u4fee\u6539\u6389\u7576\u524d<code>ps</code>\u7684\u503c</li> <li>process.version</li> <li>Type: (string)</li> <li>\u8a72\u5c6c\u6027\u503c\u4ee3\u8868Node.js\u7684\u7248\u672c\u865f(version)       JavaScript<pre><code>console.log(`Version: ${process.version}`);\n// Version: v14.8.0\n</code></pre><ul> <li>\u5982\u679c\u60f3\u8981\u53d6\u5f97\u4e0d\u5e36\u6709\u524d\u7db4v\u958b\u982d\u7684\u7248\u672c\u865f\u5b57\u4e32\u7684\u8a71,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u7684\u5c6c\u6027\u503c</li> <li>$ <code>process.versions.node</code> </li> </ul> </li> </ul> <p>Exit codes(\u9000\u51fa\u78bc) - \u5728\u6c92\u6709\u5176\u4ed6\u984d\u5916\u7684 \u975e\u540c\u6b65\u64cd\u4f5c \u8655\u65bc<code>pending\u72c0\u614b</code>\u5f8c,Node\u61c9\u7528\u7a0b\u5f0f\u901a\u5e38\u6703\u4ee5<code>0</code>\u7684\u9000\u51fa\u78bc\u4f86\u6b63\u5e38\u9000\u51fa - \u4ee5\u4e0b\u662f\u5e38\u898b\u7684\u9000\u51fa\u78bc   + <code>0</code>: \u6b63\u5e38\u9000\u51fa (\u9810\u8a2d\u503c)   + <code>1</code>: \u672a\u6355\u7372\u7684\u81f4\u547d\u932f\u8aa4(Uncaught Fatal Exception),\u4e26\u4e14\u6c92\u6709\u53d7\u5230<code>domain</code>\u6216\u662funcaughtException\u4e8b\u4ef6\u8655\u7406\u5668\u4f86\u8655\u7406   + \u4ee5\u4e0b\u7565...</p>"},{"location":"programming_language/nodejs/#console","title":"Console","text":"<ul> <li><code>console</code>\u6a21\u7d44\u63d0\u4f9b\u4e86\u4e00\u7d44\u7c21\u55ae\u7684\u9664\u932f\u63a7\u5236\u53f0(debugging console),\u985e\u4f3c\u65bc\u7db2\u9801\u700f\u89bd\u5668\u6240\u63d0\u4f9b\u7684Javascript\u63a7\u5236\u53f0\u6a5f\u5236</li> <li><code>console</code>\u6a21\u7d44\u6703\u532f\u51fa(export)\u5169\u500b\u7279\u5b9a\u7684\u5143\u4ef6(specific components)<ul> <li>\u7b2c\u4e00\u500b\u7279\u5b9a\u7684\u5143\u4ef6\u662f: Console\u985e\u5225(class)\u7684\u65b9\u6cd5,\u50cf\u662f<code>console.log()</code>&amp;<code>console.error()</code>&amp;<code>console.warn()</code>,\u5b83\u5011\u53ef\u4ee5\u88ab\u7528\u4f86\u5beb\u5165\u5230Node\u6d41(stream)\u4e2d</li> <li>\u7b2c\u4e8c\u500b\u7279\u5b9a\u7684\u539f\u4ef6\u662f: \u4e00\u500b\u5168\u57df(global)\u7684<code>console</code>\u5be6\u4f8b(instance)\u6703\u5beb\u5165\u5230process.stdout\u8207process.stderr\u3002\u5168\u57df\u7684<code>console</code>\u7269\u4ef6\u53ef\u4ee5\u76f4\u63a5\u88ab\u4f7f\u7528,\u800c \u4e0d\u7528 \u4e8b\u5148\u532f\u5165( require('console') )</li> </ul> </li> <li>\u6ce8\u610f : \u5168\u57df\u7684<code>console</code>\u7269\u4ef6\u65b9\u6cd5\u65e2\u4e0d\u80fd\u50cf\u985e\u4f3c\u5b83\u5011\u7684\u700f\u89bd\u5668API\u4e00\u6a23\u59cb\u7d42\u540c\u6b65(consistently synchronous),\u4e5f\u4e0d\u80fd\u50cfNode\u6d41(streams)\u4e00\u6a23\u59cb\u7d42\u975e\u540c\u6b65(consistently asynchronous)<ul> <li>\u53ef\u53c3\u8003<code>process</code>\u6a21\u7d44\u7684 A note on process I/O \u7ae0\u7bc0</li> </ul> </li> <li>\u4f7f\u7528\u5168\u57df\u7684<code>console\u7269\u4ef6</code>\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>console.log('hello world');\n// Prints: hello world, to stdout\nconsole.log('hello %s', 'world');\n// Prints: hello world, to stdout\nconsole.error(new Error('Whoops, something bad happened'));\n// Prints error message and stack trace to stderr:\n//   Error: Whoops, something bad happened\n//     at [eval]:5:15\n//     at Script.runInThisContext (node:vm:132:18)\n//     at Object.runInThisContext (node:vm:309:38)\n//     at node:internal/process/execution:77:19\n//     at [eval]-wrapper:6:22\n//     at evalScript (node:internal/process/execution:76:60)\n//     at node:internal/main/eval_string:23:3\nconst name = 'Will Robinson';\nconsole.warn(`Danger ${name}! Danger!`);\n// Prints: Danger Will Robinson! Danger!, to stderr\n</code></pre></li> <li>\u4f7f\u7528<code>Console\u985e\u5225</code>\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>const out = getStreamSomehow();\nconst err = getStreamSomehow();\nconst myConsole = new console.Console(out, err);\nmyConsole.log('hello world');\n// Prints: hello world, to out\nmyConsole.log('hello %s', 'world');\n// Prints: hello world, to out\nmyConsole.error(new Error('Whoops, something bad happened'));\n// Prints: [Error: Whoops, something bad happened], to err\nconst name = 'Will Robinson';\nmyConsole.warn(`Danger ${name}! Danger!`);\n// Prints: Danger Will Robinson! Danger!, to err\n</code></pre> <p>Class</p> </li> <li>Class: Console</li> <li><code>Console</code>\u985e\u5225\u53ef\u4ee5\u7528\u4f86\u5efa\u7acb\u7c21\u55ae\u4e14\u53ef\u914d\u7f6e(configurable)\u7684\u8f38\u51fa\u6d41(output streams)\u7d00\u9304\u5668(logger),\u4e26\u4e14\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u5169\u7a2e\u65b9\u5f0f\u4f86\u5b58\u53d6,\u6216\u662f\u7528\u5b83\u5011\u76f8\u4eff\u7684\u89e3\u69cb\u5c0d\u61c9\u7269\u4ef6(destructured counterparts)\u4f86\u5b58\u53d6<ul> <li>\u5b58\u53d6\u65b9\u5f0f\u4e00: <code>require('console').Console</code></li> <li>\u4f8b: <code>const { Console } = require('console');</code></li> <li>\u5b58\u53d6\u65b9\u5f0f\u4e8c: <code>console.Console</code></li> <li>\u4f8b: <code>const { Console } = console;</code> <p>method</p> </li> <li>console.clear()</li> <li>\u7576\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)\u662f<code>TTY</code>\u6642,\u547c\u53eb<code>console.clear()</code>\u7684\u6642\u5019,\u6703\u5617\u8a66\u6e05\u9664<code>TTY</code>; \u7576\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)\u4e0d\u662f<code>TTY</code>\u6642,\u5247\u8a72\u65b9\u6cd5\u4e0d\u6703\u505a\u4efb\u4f55\u4e8b\u60c5</li> <li>\u4f7f\u7528\u7279\u5b9a\u7684<code>console.clear()</code>\u64cd\u4f5c\u6642,\u6703\u56e0\u70ba\u4f7f\u7528\u7684\u4f5c\u696d\u7cfb\u7d71\u4e0d\u540cor\u7d42\u7aef\u6a5f\u985e\u578b\u4e0d\u540c,\u800c\u6709\u6240\u5dee\u7570\u3002\u5728\u5927\u90e8\u5206\u7684Linux\u4f5c\u696d\u7cfb\u7d71\u4e2d,<code>console.clear()</code>\u65b9\u6cd5\u6703\u57f7\u884c\u8207<code>clear</code>\u6307\u4ee4\u5dee\u4e0d\u591a\u7684\u64cd\u4f5c; \u5728Windows\u4f5c\u696d\u7cfb\u7d71\u4e2d,<code>console.clear()</code>\u5c07\u50c5\u6703\u6e05\u9664\u6389\u5728\u7576\u524d(current)\u7684\u7d42\u7aef\u6a5f\u8996\u53e3(terminal viewport)\u4e2d\u7684Node\u61c9\u7528\u7a0b\u5f0f\u7684\u4e8c\u9032\u5236(binary)\u6587\u4ef6\u7684\u8f38\u51fa(output)</li> <li>console.count([label])</li> <li>args<ul> <li>label: (string)</li> <li>\u53ef\u4ee5\u7d66\u5b9a\u8981\u986f\u793a\u7684\u8a08\u6578\u5668\u7684\u6a19\u7c64\u503c</li> <li>\u9810\u8a2d\u503c: <code>default</code></li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u56de\u50b3\u4e00\u500b\u5167\u90e8\u8a08\u6578\u5668(internal counter)\u7dad\u6301\u986f\u793a\u4e00\u7d44<code>\u6a19\u7c64</code>(label) &amp; <code>\u6b21\u6578</code>(times)<ul> <li><code>\u6a19\u7c64</code>(label): \u53ef\u4ee5\u900f\u904e\u547c\u53eb<code>console.count()</code>\u65b9\u6cd5\u6642,\u7531\u958b\u767c\u8005\u7d66\u5b9a\u6a19\u7c64\u503c</li> <li><code>\u6b21\u6578</code>(times): \u6307\u5b9a\u7d66\u6a19\u7c64,\u547c\u53eb<code>console.count()</code>\u65b9\u6cd5\u4e26\u8f38\u51fa\u7d66<code>stdout</code>\u7684\u6b21\u6578</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc</li> <li><code>console     &gt; console.count()     default: 1     undefined     &gt; console.count('default')     default: 2     undefined     &gt; console.count('abc')     abc: 1     undefined     &gt; console.count('xyz')     xyz: 1     undefined     &gt; console.count('abc')     abc: 2     undefined     &gt; console.count()     default: 3     undefined     &gt;</code></li> </ul> </li> <li>console.error([data][, ...args])</li> <li>args<ul> <li>data: (any)</li> <li>...args: (any)</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u7528\u65b0\u7684\u4e00\u884c(newline)\u6253\u5370(print)\u51fa\u6a19\u6e96\u932f\u8aa4(<code>stderr</code>)</li> <li>\u8a72\u65b9\u6cd5\u53ef\u4ee5\u50b3\u905e\u591a\u500b\u53c3\u6578<ul> <li>\u7b2c\u4e00\u500b\u53c3\u6578\u6703\u88ab\u7528\u4f86\u7576\u4f5c\u4e3b\u8981\u8a0a\u606f(primary message)</li> <li>\u5176\u4ed6\u984d\u5916\u7684\u53c3\u6578(additional arguments)\u6703\u88ab\u7528\u4f5c\u66ff\u63db\u503c(substitution),\u985e\u4f3c\u65bcprintf(3)</li> <li>\u5176\u4ed6\u984d\u5916\u7684\u53c3\u6578\u90fd\u6703\u88ab\u50b3\u905e\u7d66<code>util.format()</code>\u65b9\u6cd5</li> <li>\u76f8\u95dc\u8cc7\u8a0a\u53ef\u53c3\u8003util.format()\u65b9\u6cd5</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const code = 5;\nconsole.error('error #%d', code);\n// Prints: error #5, to stderr\nconsole.error('error', code);\n// Prints: error 5, to stderr\n</code></pre><ul> <li>\u82e5\u683c\u5f0f\u5316\u5143\u7d20(formatted elements),\u4f8b\u5982: <code>%d</code>\u6c92\u6709\u5728\u65b0\u7684\u4e00\u884c\u4e2d\u88ab\u767c\u73fe,\u5247util.inspect()\u65b9\u6cd5\u6703\u88ab\u547c\u53eb,\u4e26\u5728\u6bcf\u500b\u53c3\u6578\u4e0a\u547c\u53eb\u8a72\u5143\u7d20(<code>%d</code>),\u4e26\u5c07\u7d50\u679c\u7684\u5b57\u4e32\u503c\u9023\u63a5\u8d77\u4f86</li> </ul> </li> <li>console.log([data][, ...args])</li> <li>args<ul> <li>data: (any)</li> <li>...args: (any)</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u7528\u65b0\u7684\u4e00\u884c(newline)\u6253\u5370(print)\u51fa\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)</li> <li>\u8a72\u65b9\u6cd5\u53ef\u4ee5\u50b3\u905e\u591a\u500b\u53c3\u6578<ul> <li>\u7b2c\u4e00\u500b\u53c3\u6578\u6703\u88ab\u7528\u4f86\u7576\u4f5c\u4e3b\u8981\u8a0a\u606f(primary message)</li> <li>\u5176\u4ed6\u984d\u5916\u7684\u53c3\u6578(additional arguments)\u6703\u88ab\u7528\u4f5c\u66ff\u63db\u503c(substitution),\u985e\u4f3c\u65bcprintf(3)</li> <li>\u5176\u4ed6\u984d\u5916\u7684\u53c3\u6578\u90fd\u6703\u88ab\u50b3\u905e\u7d66<code>util.format()</code>\u65b9\u6cd5</li> <li>\u76f8\u95dc\u8cc7\u8a0a\u53ef\u53c3\u8003util.format()\u65b9\u6cd5</li> </ul> </li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const count = 5;\nconsole.log('count: %d', count);\n// Prints: count: 5, to stdout\nconsole.log('count:', count);\n// Prints: count: 5, to stdout\n</code></pre></li> <li>console.time([label])</li> <li>args<ul> <li>label: (string)</li> <li>\u53ef\u4ee5\u7d66\u5b9a\u8a72\u8a08\u6642\u5668\u7684\u6a19\u7c64\u503c,\u4ee5\u4f5c\u70ba\u8a08\u6642\u5668\u8b58\u5225\u7528</li> <li>\u9810\u8a2d\u503c: <code>default</code></li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u555f\u52d5\u4e00\u500b\u8a08\u6642\u5668(timer)\u88ab\u7528\u4f86\u8a08\u7b97\u8a72\u64cd\u4f5c(operation)\u7684\u6301\u7e8c\u6642\u9593</li> <li>\u8a08\u6642\u5668\u6703\u7528\u7368\u4e00\u7121\u4e8c(unique)\u7684\u6a19\u7c64(label)\u4f86\u8b58\u5225</li> <li>\u8a08\u6642\u5668\u6703\u547c\u53eb\u540c\u6a19\u7c64(same label)\u7684<code>console.timeEnd()</code>\u65b9\u6cd5\u4f86\u505c\u6b62\u8a08\u6642\u5668,\u4e26\u5c07\u7d93\u904e\u7684\u6642\u9593\u4ee5\u5408\u9069\u7684\u6642\u9593\u55ae\u4f4d\u8f38\u51fa\u5230\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)\u4e2d<ul> <li>\u8209\u4f8b\u4f86\u8aaa,\u5982\u679c\u7d93\u904e\u7684\u6642\u9593\u662f3869\u6beb\u79d2(ms),\u90a3\u9ebc<code>console.timeEnd()</code>\u65b9\u6cd5\u6703\u986f\u793a\"3.869\"\u79d2</li> </ul> </li> <li>console.timeEnd([label])</li> <li>args<ul> <li>label: (string)</li> <li>\u53ef\u4ee5\u7d66\u5b9a\u8a72\u8a08\u6642\u5668\u7684\u6a19\u7c64\u503c,\u4ee5\u4f5c\u70ba\u8a08\u6642\u5668\u8b58\u5225\u7528</li> <li>\u9810\u8a2d\u503c: <code>default</code></li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u505c\u6b62\u4e4b\u524d\u900f\u904e\u547c\u53eb<code>console.time()</code>\u65b9\u6cd5\u8a2d\u5b9a\u597d\u7684\u8a08\u6642\u5668,\u4e26\u5c07\u7d50\u679c\u6253\u5370(print)\u5230\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)\u4e2d</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>console.time('100-elements');\nfor (let i = 0; i &lt; 100; i++) {}\nconsole.timeEnd('100-elements');\n// prints 100-elements: 225.438ms\n</code></pre></li> <li>console.trace([message][, ...args])</li> <li>args<ul> <li>message: (any)</li> <li>...args: (any)</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u5c07<code>Trace:</code>\u9019\u6bb5\u5b57\u4e32\u6253\u5370(print)\u5230\u6a19\u6e96\u932f\u8aa4(<code>stderr</code>)\u4e2d,\u63a5\u8457\u900f\u904eutil.format()\u65b9\u6cd5\u6253\u5370\u51fa\u683c\u5f0f\u5316\u904e\u7684\u5b57\u4e32(formatted message),\u4e26\u5806\u68e7\u8ffd\u8e64(stack trace)\u5230\u7a0b\u5f0f\u78bc\u4e2d\u7684\u7576\u524d\u4f4d\u7f6e</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>console.trace('Show me');\n// Prints: (stack trace will vary based on where trace is called)\n//  Trace: Show me\n//    at repl:2:9\n//    at REPLServer.defaultEval (repl.js:248:27)\n//    at bound (domain.js:287:14)\n//    at REPLServer.runBound [as eval] (domain.js:300:12)\n//    at REPLServer.&lt;anonymous&gt; (repl.js:412:12)\n//    at emitOne (events.js:82:20)\n//    at REPLServer.emit (events.js:169:7)\n//    at REPLServer.Interface._onLine (readline.js:210:10)\n//    at REPLServer.Interface._line (readline.js:549:8)\n//    at REPLServer.Interface._ttyWrite (readline.js:826:14)\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#readline","title":"Readline","text":"<ul> <li><code>Readline</code>\u6a21\u7d44\u63d0\u4f9b\u4e00\u500b\u4ecb\u9762\u80fd\u5f9eReadable stream\u4e00\u6b21\u4e00\u884c\u5730\u8b80\u53d6\u6578\u64da,\u5b83\u53ef\u4ee5\u7528\u4ee5\u4e0b\u7684\u65b9\u5f0f\u4f86\u5b58\u53d6     JavaScript<pre><code>const readline = require('readline');\n</code></pre></li> <li>\u4ee5\u4e0b\u662f<code>readline</code>\u6a21\u7d44\u7684\u7c21\u6613\u7bc4\u4f8b\u7684\u5716\u89e3\u8aaa\u660e     JavaScript<pre><code>const readline = require('readline');\nconst rl = readline.createInterface({\ninput: process.stdin,\noutput: process.stdout\n});\nrl.question('What do you think of Node.js? ', (answer) =&gt; {\n// TODO: Log the answer in a database\nconsole.log(`Thank you for your valuable feedback: ${answer}`);\nrl.close();\n});\n</code></pre><ul> <li>\u4e00\u65e6\u4ee5\u4e0a\u7684\u7a0b\u5f0f\u78bc\u88ab\u547c\u53eb\u5f8c,Node\u61c9\u7528\u7a0b\u5f0f\u5c31\u4e0d\u6703\u7d42\u6b62,\u76f4\u5230readline.Interface\u9019\u500b\u4ecb\u9762\u88ab\u95dc\u9589\u70ba\u6b62,\u56e0\u70ba\u9019\u500b\u4ecb\u9762\u6703\u7b49\u5f85\u8f38\u5165\u6d41(input stream)\u63a5\u6536\u5230\u6578\u64da\u70ba\u6b62 <p>Class</p> </li> </ul> </li> <li>Class: Interface<ul> <li>\u7e7c\u627f(Extends): (EventEmitter)</li> </ul> </li> <li><code>reader.Interface</code>\u7684\u5be6\u4f8b(instances)\u662f\u900f\u904ereadline.createInterface()\u65b9\u6cd5\u5efa\u9020\u7684<ul> <li>\u6bcf\u4e00\u500b\u5be6\u4f8b\u90fd\u6703\u8207\u55ae\u4e00\u7684\u8f38\u5165\u53ef\u8b80\u53d6\u6d41(input Readable stream) &amp; \u55ae\u4e00\u7684\u8f38\u51fa\u53ef\u5beb\u5165\u6d41(output Writable stream)</li> <li>\u8f38\u51fa\u6d41\u6703\u88ab\u7528\u4f86\u5f9e\u8f38\u5165\u6d41(input stream)\u4e2d\u8b80\u53d6\u4f7f\u7528\u8005\u7684\u8f38\u5165(input)\u4e26\u6253\u5370\u51fa\u63d0\u793a(prompts) <p>method</p> </li> <li>readline.question(query, callback)<ul> <li>args</li> <li>query (string)<ul> <li>\u8981\u5beb\u5165\u5230\u8f38\u51fa(<code>output</code>)\u7684\u9673\u8ff0\u53e5(statement)\u6216\u662f\u67e5\u8a62\u8a9e\u53e5(<code>query</code>),\u4f4d\u65bc\u63d0\u793a\u4e4b\u524d(prepended to the prompt)</li> </ul> </li> <li>callback (Function)<ul> <li>\u900f\u904e\u4f7f\u7528\u8005\u5c0d\u67e5\u8a62\u8a9e\u53e5(<code>query</code>)\u7684\u56de\u61c9(response)\u4f86\u547c\u53eb\u7684\u56de\u547c\u51fd\u5f0f</li> </ul> </li> <li>\u8a72\u65b9\u6cd5\u6703\u900f\u904e\u5beb\u5165\u8f38\u51fa(<code>output</code>)\u4f86\u5c55\u793a\u67e5\u8a62\u8a9e\u53e5(<code>query</code>),\u4e26\u7b49\u5f85\u4f7f\u7528\u8005\u8f38\u5165\u5f8c\u4e26\u5c07\u8a72\u8f38\u5165\u63d0\u4f9b\u7d66\u8f38\u5165(<code>input</code>)\u3002\u63a5\u8457\u6703\u5c07\u63d0\u4f9b\u7684\u8f38\u5165(provided input)\u4f5c\u70ba\u7b2c\u4e00\u500b\u53c3\u6578,\u50b3\u905e\u7d66\u56de\u547c\u51fd\u5f0f</li> <li>\u7576\u8f38\u5165\u6d41\u88ab\u66ab\u505c(paused)\u6642,\u547c\u53eb<code>readline.question()</code>\u65b9\u6cd5\u6642,\u6703\u7e7c\u7e8c(resume)\u8f38\u5165\u6d41</li> <li>\u82e5<code>readline.createInterface()</code>\u88ab\u5efa\u7acb\u6642,\u8a72\u8f38\u51fa(<code>output</code>)\u88ab\u8a2d\u5b9a\u70ba<code>null</code>\u6216\u662f<code>undefined</code>,\u8a72\u67e5\u8a62\u8a9e\u53e5(<code>query</code>)\u4e0d\u6703\u88ab\u5beb\u5165(written)</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc</li> <li><code>js     rl.question('What is your favorite food? ', (answer) =&gt; {       console.log(`Oh, so your favorite food is ${answer}`);     });</code></li> <li>\u50b3\u905e\u7d66<code>readline.question()</code>\u7684\u56de\u547c\u51fd\u5f0f\u4e0d\u6703\u9075\u5f9e\u4e00\u822c\u63a5\u53d7<code>Error</code>\u7269\u4ef6\u6216\u662f<code>null</code>\u4f5c\u70ba\u7b2c\u4e00\u500b\u53c3\u6578\u7684\u6a21\u5f0f\u3002\u56de\u547c\u51fd\u5f0f\u6703\u4ee5\u88ab\u63d0\u4f9b\u7684\u7b54\u6848(provided answer)\u4f5c\u70ba\u552f\u4e00\u7684\u53c3\u6578</li> </ul> </li> <li>readline.close()<ul> <li>\u8a72\u65b9\u6cd5\u6703\u95dc\u9589<code>readline.createInterface()</code>\u5be6\u4f8b,\u4e26\u653e\u68c4\u5c0d\u8f38\u5165\u6d41(<code>input</code> streams)\u8207\u8f38\u51fa\u6d41(<code>output</code> streams)\u7684\u63a7\u5236(control over)\u3002\u7576\u88ab\u547c\u53eb\u6642,close\u4e8b\u4ef6\u5c31\u6703\u88ab\u767c\u51fa(emitted)</li> <li>\u547c\u53eb<code>readline.close()</code>\u65b9\u6cd5\u4e0d\u6703\u7acb\u5373\u505c\u6b62\u5176\u5b83\u88ab<code>readline.Interface</code>\u5be6\u4f8b\u6240\u767c\u51fa\u7684\u5176\u5b83\u4e8b\u4ef6(\u5305\u542bline\u4e8b\u4ef6)</li> </ul> </li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#commonjs-modules","title":"CommonJS modules","text":"<ul> <li>\u5728Node\u7684\u6a21\u7d44\u7cfb\u7d71(module system)\u4e2d,\u6bcf\u500b\u6a94\u6848\u90fd\u88ab\u8996\u70ba\u4e00\u500b\u5206\u958b\u7684\u6a21\u7d44(separate module)</li> <li>\u4ee5\u4e0b\u7684\u60c5\u5883\u8aaa\u660e,\u6211\u5011\u5047\u8a2d\u6709\u4e00\u500b\u6a94\u6848,\u5176\u6a94\u6848\u540d\u7a31\u70ba<code>foo.js</code> JavaScript<pre><code>const circle = require('./circle.js');\nconsole.log(`The area of a circle of radius 4 is ${circle.area(4)}`);\n</code></pre><ul> <li>\u5728\u9019\u500b\u6a94\u6848\u7684\u7b2c\u4e00\u884c\u4e2d,<code>foo.js</code>\u6a94\u6848\u6703\u8f09\u5165(loads) <code>circle.js</code>\u6a21\u7d44,\u9019\u5169\u500b\u6a94\u6848\u90fd\u662f\u5728\u540c\u4e00\u500b\u6a94\u6848\u76ee\u9304(directory)\u4e2d</li> </ul> </li> <li>\u4ee5\u4e0b\u662f<code>circle.js</code>\u7684\u6a94\u6848\u5167\u5bb9     JavaScript<pre><code>const { PI } = Math;\nexports.area = (r) =&gt; PI * r ** 2;\nexports.circumference = (r) =&gt; 2 * PI * r;\n</code></pre><ul> <li><code>circle.js</code>\u6a21\u7d44\u5df2\u532f\u51fa\u4e86<code>area()</code>\u8207<code>circumference()</code>\u9019\u5169\u500b\u51fd\u5f0f,\u900f\u904e\u5728\u7279\u6b8a\u7684<code>exports</code>\u7269\u4ef6\u4e0a\u6307\u5b9a(specifying)\u984d\u5916\u7684(additional)\u5c6c\u6027\u53ef\u4ee5\u5c07\u51fd\u5f0f\u8207\u7269\u4ef6\u65b0\u589e\u5230\u6a21\u7d44\u7684\u6700\u4e0a\u5c64(root of a module)</li> <li>\u9019\u6642\u8a72\u6a21\u7d44(= <code>circle.js</code>)\u7684\u5340\u57df\u8b8a\u6578\u6703\u662f\u79c1\u6709\u7684(private),\u56e0\u70baNode\u6703\u5c07\u6a21\u7d44(module)\u5305\u88dd(wrapped)\u6210\u70ba\u4e00\u500b\u51fd\u5f0f</li> <li>\u8a73\u60c5\u53ef\u53c3\u8003module wrapper</li> <li>\u5728\u4e0a\u8ff0\u7684<code>PI</code>\u7bc4\u4f8b\u4e2d,<code>PI</code>\u8b8a\u6578\u5c31\u662f<code>circle.js</code>\u7684\u79c1\u6709(private)\u8b8a\u6578</li> </ul> </li> <li><code>module.exports</code>\u5c6c\u6027\u53ef\u4ee5\u88ab\u6307\u6d3e(assigned)\u4e00\u500b\u65b0\u7684\u503c,\u50cf\u662f\u51fd\u5f0for\u7269\u4ef6</li> <li>\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc,<code>bar.js</code>\u6a94\u6848\u6703\u4f7f\u7528\u5230<code>square</code>\u6a21\u7d44,\u8a72\u6a21\u7d44\u6703\u532f\u51fa(exports)\u4e00\u500b<code>Square</code>\u985e\u5225(class)     JavaScript<pre><code>const Square = require('./square.js');\nconst mySquare = new Square(2);\nconsole.log(`The area of mySquare is ${mySquare.area()}`);\n</code></pre><ul> <li><code>square</code>\u6a21\u7d44\u662f\u5728<code>square.js</code>\u9019\u500b\u6a94\u6848\u4e2d\u5b9a\u7fa9\u7684   JavaScript<pre><code>// Assigning to exports will not modify module, must use module.exports\nmodule.exports = class Square {\nconstructor(width) {\nthis.width = width;\n}\narea() {\nreturn this.width ** 2;\n}\n};\n</code></pre></li> </ul> </li> <li>\u6a21\u7d44\u7cfb\u7d71(module system)\u6703\u5728<code>require('module')</code>\u9019\u500b\u6a21\u7d44\u4e2d\u5be6\u4f5c(implemented) <p>Core modules</p> </li> <li>Node\u6709\u8a31\u591a\u88ab\u7de8\u8b6f(compiled)\u6210\u4e8c\u9032\u5236\u6587\u4ef6(binary)\u7684\u6a21\u7d44,\u9019\u4e9bNode\u5167\u5efa\u7684\u6838\u5fc3\u6a21\u7d44\u5728\u5b98\u65b9\u6587\u4ef6\u7684\u5176\u5b83\u5730\u65b9\u90fd\u6709\u66f4\u8a73\u7d30\u7684\u4ecb\u7d39</li> <li><code>require()</code>\u65b9\u6cd5\u6703\u512a\u5148\u8b80\u53d6Node\u5167\u5efa\u7684\u6838\u5fc3\u6a21\u7d44,\u7576\u5b83\u5011\u7684\u6a19\u8b58\u7b26(identifier)\u88ab\u4f5c\u70ba\u53c3\u6578\u50b3\u5165\u7d66<code>require()</code>\u65b9\u6cd5\u6642       JavaScript<pre><code>require('http')\n</code></pre><ul> <li>\u4ee5\u4e0a\u7684\u5f15\u7528\u65b9\u5f0f\u6703\u512a\u5148\u5f15\u7528Node\u5167\u5efa\u7684\u6838\u5fc3\u6a21\u7d44-<code>HTTP</code>\u6a21\u7d44 (\u5373\u4f7f\u6709\u540c\u540d\u7a31\u7684\u6a94\u6848\u5728\u76ee\u9304\u4e2d) <p>Folders as modules</p> </li> </ul> </li> <li>\u5c07\u7a0b\u5f0f(programs)\u8207\u5957\u4ef6(libraries)\u6574\u7406\u5230\u4e00\u500b\u81ea\u7d66\u81ea\u8db3\u7684(self-contained)\u76ee\u9304\u4e2d,\u7136\u5f8c\u70ba\u9019\u4e9b\u76ee\u9304\u63d0\u4f9b\u55ae\u4e00\u500b\u5165\u53e3(single entry point)\u662f\u5f88\u65b9\u4fbf\u7684</li> <li>\u4ee5\u4e0b\u67093\u7a2e\u65b9\u5f0f\u53ef\u4ee5\u5c07\u8cc7\u6599\u593e(folder)\u4f5c\u70ba\u53c3\u6578\u50b3\u905e\u7d66<code>require()</code>\u65b9\u6cd5<ul> <li>\u65b9\u6cd5\u4e00: \u5728\u8a72\u8cc7\u6599\u593e\u7684\u6700\u4e0a\u5c64(root)\u5efa\u7acb\u4e00\u500bpackage.json\u6a94\u6848,\u4e26\u6307\u5b9a\u4e00\u500b<code>main</code>\u5c6c\u6027\u503c\u4f86\u8868\u793a\u7576\u8f09\u5165\u6b64\u5957\u4ef6(package)\u6642,\u9810\u8a2d\u8981\u5f15\u5165\u54ea\u500b\u6a21\u7d44     JavaScript<pre><code>{ \"name\" : \"some-library\",\n\"main\" : \"./lib/some-library.js\" }\n</code></pre></li> <li>\u4e0a\u8ff0\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,\u5982\u679c\u5728<code>./some-library/</code>\u76ee\u9304\u4e2d\u6709<code>./some-library/lib/some-library.js</code>\u9019\u500b\u6a94\u6848\u7684\u8a71,Node\u5c31\u6703\u5617\u8a66\u8b80\u53d6\u5b83</li> <li>\u5982\u679c\u8a72\u76ee\u9304\u4e2d\u6c92\u6709\u8a72\u6587\u4ef6,\u6216\u662fmain\u76ee\u9304\u5df2\u4e0d\u898b\u4e86(missing)\u6216\u662f\u7121\u6cd5\u627e\u5230(cannot be resolved),\u9019\u6642Node\u5c31\u6703\u5617\u8a66\u53bb\u8b80\u53d6name\u6a94\u6848\u4e2d\u7684<code>index.js</code>\u6216\u662f<code>index.node</code></li> <li>\u60c5\u5883\u8aaa\u660e( \u7576\u8a72\u76ee\u9304\u6c92\u6709package.json\u9019\u500b\u6a94\u6848,\u4e14\u53c8\u627e\u4e0d\u5230.xxx/lib/xxx.js\u6a94\u6848\u6642 ),\u7576\u6211\u5011\u5f15\u7528<code>require('./some-library')</code>\u7684\u6642\u5019,\u6703\u5617\u8a66\u53bb\u8b80\u53d6\u4ee5\u4e0b2\u7a2e\u8def\u5f91\u4e0b\u7684\u6a94\u6848</li> <li>\u7b2c1\u7a2e: <code>./some-library/index.js</code></li> <li>\u7b2c2\u7a2e: <code>./some-library/index.node</code><ul> <li>\u5982\u679c\u4ee5\u4e0a\u7684\u5617\u8a66\u90fd\u5931\u6557\u7684\u8a71,Node\u5c31\u6703\u5c07\u6574\u500b\u6a21\u7d44(entire module)\u56de\u5831(report)\u70ba\u907a\u5931(missing),\u4e26\u986f\u793a\u4e00\u500b\u9810\u8a2d\u7684\u932f\u8aa4</li> <li>\u9810\u8a2d: <code>Error: Cannot find module 'some-library'</code></li> </ul> </li> <li>\u4ee5\u4e0a\u5c31\u662f\u5c0dNode\u7684<code>package.json</code>\u6a94\u6848\u6709\u6240\u9ad4\u8a8d\u7684\u7a0b\u5ea6(the extent of the awareness)</li> <li>\u65b9\u6cd5\u4e8c: \u5982\u679c\u50b3\u905e\u7d66<code>require()</code>\u65b9\u6cd5\u7684\u6a21\u7d44\u6a19\u8b58\u7b26(module identifier)\u4e0d\u662f\u4e00\u500bNode\u5167\u5efa\u7684\u6838\u5fc3\u6a21\u7d44\u540d\u7a31,\u800c\u4e14\u4e0d\u662f\u4ee5<code>/</code>, <code>../</code>, <code>./</code> \u7684\u8def\u5f91\u958b\u982d\u7684\u8a71,Node\u5c31\u6703\u5f9e\u7576\u524d\u6a21\u7d44\u7684\u7236\u76ee\u9304(\u4e5f\u5c31\u662f\u524d\u4e00\u5c64\u76ee\u9304, parent directory)\u958b\u59cb,\u63a5\u8457\u65b0\u589e\u4e00\u500b<code>node_modules/</code>\u8cc7\u6599\u593e,\u4e26\u5617\u8a66\u5f9e\u8a72\u4f4d\u7f6e\u8b80\u53d6\u6a21\u7d44</li> <li>\u5982\u679c\u5728\u8a72\u76ee\u9304\u4e0b\u6c92\u6709\u627e\u5230\u8a72\u6a21\u7d44\u540d\u7a31\u7684\u8a71,\u5247Node\u5c07\u6703\u5f80\u524d\u4e00\u5c64\u76ee\u9304\u67e5\u770b,\u76f4\u5230\u5230\u9054\u6a94\u6848\u7cfb\u7d71(file system)\u7684\u6839\u76ee\u9304(root)\u70ba\u6b62</li> <li>\u60c5\u5883\u8aaa\u660e(\u82e5\u5728<code>/home/ry/projects/foo.js</code>\u7684\u6a94\u6848\u70ba<code>require('bar.js')</code>,\u5247Node\u6703\u6839\u64da\u4ee5\u4e0b\u7684\u9806\u5e8f\u4f9d\u5e8f\u67e5\u770b\u63a5\u4e0b\u4f86\u7684\u6a94\u6848\u8def\u5f91)<ul> <li><code>/home/ry/projects/node_modules/bar.js</code></li> <li><code>/home/ry/node_modules/bar.js</code></li> <li><code>/home/node_modules/bar.js</code></li> <li><code>/node_modules/bar.js</code></li> </ul> </li> <li>\u9019\u6a23\u505a\u4e5f\u6703\u8b93\u7a0b\u5f0f\u672c\u5730\u5316(localize)\u5b83\u5011\u81ea\u5df1\u7684\u76f8\u4f9d\u6027(dependencies),\u800c\u4e0d\u6703\u4e92\u76f8\u62b5\u89f8(clash)</li> <li>\u6211\u5011\u4e5f\u53ef\u4ee5\u900f\u904e\u660e\u78ba\u7684\u6a94\u6848\u8def\u5f91or\u8207\u8a72\u6a21\u7d44\u4e00\u8d77\u5206\u767c(distributed)\u7684\u5b50\u6a21\u7d44(sub modules)\u8def\u5f91,\u4ee5\u5f8c\u7db4(suffix)\u7684\u65b9\u5f0f\u52a0\u5728\u8a72\u6a21\u7d44\u540d\u7a31\u7684\u5f8c\u9762,\u4f86\u5f15\u7528\u5230\u6211\u5011\u7684\u7a0b\u5f0f\u78bc\u4e2d<ul> <li>\u4f8b: <code>require('example-module/path/to/file')</code></li> <li>\u8a3b: \u5f8c\u7db4\u8def\u5f91\u6703\u9075\u5f9e\u8207\u8a72\u6a21\u7d44\u76f8\u540c\u7684\u6a21\u7d44\u89e3\u6790\u8a9e\u610f(module resolution semantics)</li> </ul> </li> <li>\u65b9\u6cd5\u4e09: \u5982\u679c<code>NODE_PATH</code>\u9019\u500b\u74b0\u5883\u8b8a\u6578\u8a2d\u5b9a\u70ba\u4ee5\u5192\u865f\u5340\u9694(colon-delimited)\u7684\u7d55\u5c0d\u8def\u5f91\u7684\u8a71,\u5247Node\u5c07\u6703\u641c\u5c0b\u8a72\u6a21\u7d44\u7684\u9019\u4e9b\u7d55\u5c0d\u8def\u5f91(\u5982\u679c\u5728\u5176\u4ed6\u4f4d\u7f6e\u6c92\u6709\u627e\u5230\u7684\u8a71)</li> <li>\u5728Windows\u4f5c\u696d\u7cfb\u7d71\u4e2d,NODE_PATH\u6703\u7528\u5206\u865f(semicolon)\u505a\u5340\u9694</li> <li><code>NODE_PATH</code>\u8d77\u521d\u662f\u70ba\u4e86\u5728\u7576\u524d\u7684\u6a21\u7d44\u89e3\u6790(module resolution)\u6f14\u7b97\u6cd5\u88ab\u5b9a\u7fa9\u4e4b\u524d,\u80fd\u5920\u652f\u63f4\u5f9e\u4e0d\u540c\u8def\u5f91\u4f86\u8f09\u5165\u6a21\u7d44\u800c\u5efa\u7acb\u7684<ul> <li>\u81f3\u4eca,<code>NODE_PATH</code>\u4ecd\u7136\u652f\u63f4,\u4f46\u662fNode\u751f\u614b\u7cfb\u7d71\u5df2\u7d93\u6c7a\u5b9a\u4e86\u5b9a\u4f4d\u51fa\u6a21\u7d44\u76f8\u4f9d\u6027\u7684\u898f\u7bc4,\u800c\u986f\u5f97<code>NODE_PATH</code>\u4e0d\u518d\u662f\u90a3\u9ebc\u5fc5\u8981\u4e86</li> <li>\u6709\u6642\u5019,\u7576\u5176\u4ed6\u4eba\u4e0d\u77e5\u9053\u9019\u6b21\u7684\u90e8\u7f72(deployments)\u9700\u8981\u4f9d\u8cf4(rely on)<code>NODE_PATH</code>\u74b0\u5883\u8b8a\u6578\u6642,\u6703\u767c\u751f\u51fa\u4e4e\u610f\u6599\u7684\u884c\u70ba</li> <li>\u6709\u6642\u5019,\u4e00\u500b\u6a21\u7d44\u7684\u76f8\u4f9d\u6027\u6539\u8b8a\u4e86,\u6703\u5c0e\u81f4<code>NODE_PATH</code>\u74b0\u5883\u8b8a\u6578\u641c\u5c0b\u6642\u6703\u8f09\u5165\u5230\u4e0d\u540c\u7684\u8a72\u6a21\u7d44\u7684\u4e0d\u540c\u7248\u672c(\u751a\u81f3\u662f\u4e0d\u540c\u7684\u6a21\u7d44)</li> </ul> </li> <li>\u6b64\u5916,Node\u6703\u6839\u64da\u4ee5\u4e0b\u7684\u9806\u5e8f\u4f86\u641c\u5c0b<code>GLOBAL_FOLDERS</code>\u6e05\u55ae<ul> <li><code>$HOME/.node_modules</code></li> <li><code>$HOME/.node_libraries</code></li> <li><code>$PREFIX/lib/node</code></li> <li>\u8a3b: <code>$HOME</code>\u8868\u793a\u4f7f\u7528\u8005\u7684\u5bb6\u76ee\u9304; <code>$PREFIX</code>\u8868\u793aNode\u5df2\u5b89\u88dd<code>node_prefix</code></li> </ul> </li> <li>\u9019\u4e9b\u505a\u6cd5\u4e3b\u8981\u662f\u57fa\u65bc\u5177\u6709\u6b77\u53f2\u610f\u7fa9\u7684\u539f\u56e0</li> <li>\u5efa\u8b70 : \u5f37\u70c8\u9f13\u52f5\u5c07\u76f8\u4f9d\u7684\u6a94\u6848\u653e\u5728\u672c\u5730\u7aef\u7684<code>node_modules</code>\u8cc7\u6599\u593e,\u9019\u6703\u4f7f\u8f09\u5165\u6a21\u7d44\u7684\u901f\u5ea6\u66f4\u5feb &amp; \u66f4\u53ef\u9760(reliably) <p>The module scope</p> </li> </ul> </li> <li>__dirname<ul> <li>Returns: (string)</li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u7576\u524d\u6a21\u7d44\u7684\u8cc7\u6599\u593e\u540d\u7a31(\u4e5f\u5c31\u662f\u6240\u5728\u8def\u5f91, directory name)</li> <li>\u9019\u500b\u5c6c\u6027\u8ddfpath.dirname(path)\u8207__filename\u662f\u4e00\u6a23\u7684</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc(\u5f9e<code>/Users/mjr</code>\u7684\u5bb6\u76ee\u9304\u4e2d,\u57f7\u884c<code>node example.js</code>)   JavaScript<pre><code>console.log(__dirname);\n// Prints: /Users/mjr\nconsole.log(path.dirname(__filename));\n// Prints: /Users/mjr\n</code></pre></li> </ul> </li> <li>__filename<ul> <li>Returns: (string)</li> <li>\u8a72\u5c6c\u6027\u6703\u56de\u50b3\u7576\u524d\u6a21\u7d44\u7684\u6a94\u6848\u540d\u7a31(file name),\u4e5f\u5c31\u662f\u7576\u524d\u6a21\u7d44\u7684\u7d55\u5c0d\u8def\u5f91(\u5982\u679c\u5b58\u5728\u9023\u7d50(symlink)\u7684\u8a71,\u5df2\u89e3\u6790\u904e\u7684)</li> <li>\u5c0d\u65bc\u4e3b\u7a0b\u5f0f,<code>__filename</code>\u4e0d\u4e00\u5b9a\u8981\u8207<code>CLI</code>\u4e2d\u7684\u6a94\u6848\u540d\u7a31\u76f8\u540c</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc(\u5f9e<code>/Users/mjr</code>\u7684\u5bb6\u76ee\u9304\u4e2d,\u57f7\u884c<code>node example.js</code>)     JavaScript<pre><code>console.log(__filename);\n// Prints: /Users/mjr/example.js\nconsole.log(__dirname);\n// Prints: /Users/mjr\n</code></pre></li> <li>\u5047\u5982\u6709\u5169\u500b\u6a21\u7d44--- <code>a</code> &amp; <code>b</code>,\u7136\u5f8c<code>b</code>\u6a21\u7d44\u662f<code>a</code>\u6a21\u7d44\u7684\u76f8\u4f9d\u9805\u76ee(dependency),\u4e26\u4e14\u8cc7\u6599\u593e\u7d50\u69cb\u5982\u4e0b</li> <li><code>/Users/mjr/app/a.js</code></li> <li><code>/Users/mjr/app/node_modules/b/b.js</code></li> <li>\u95dc\u65bc\u4ee5\u4e0a\u7684\u7bc4\u4f8b,<code>b.js</code>\u6a94\u6848\u7684<code>__filename</code>\u5c6c\u6027\u503c\u6703\u662f<code>/Users/mjr/app/node_modules/b/b.js</code>; \u53e6\u5916,<code>a.js</code>\u6a94\u6848\u7684<code>__filename</code>\u5c6c\u6027\u503c\u6703\u662f<code>/Users/mjr/app/a.js</code> <p>The module object</p> </li> </ul> </li> <li>\u5728\u6bcf\u500b\u6a21\u7d44\u4e2d,<code>module</code>\u7269\u4ef6\u4e2d\u9592\u7f6e\u7684(free)\u8b8a\u6578\u4ee3\u8868\u5c0d\u65bc\u7576\u524d\u6a21\u7d44\u7269\u4ef6\u7684\u53c3\u8003\u3002\u70ba\u4e86\u65b9\u4fbf\u8d77\u898b,<code>module.exports</code>\u4e5f\u53ef\u4ee5\u900f\u904eexports\u9019\u500b\u5168\u57df\u7269\u4ef6\u4f86\u5b58\u53d6\u3002module\u7269\u4ef6\u5c0d\u65bc\u6bcf\u4e00\u500b\u6a21\u7d44\u4f86\u8aaa,\u5be6\u969b\u4e0a\u662f\u4e00\u500b\u5340\u57df\u7269\u4ef6,\u800c\u4e0d\u662f\u5168\u57df\u7269\u4ef6     &gt; object<ul> <li>module.exports<ul> <li>\u8a72\u7269\u4ef6\u662f\u7531Module system\u6240\u5efa\u7acb\u7684,\u6709\u4e9b\u6642\u5019\u9019\u6a23\u662f\u4e0d\u80fd\u88ab\u63a5\u53d7(not acceptable)\u7684,\u8a31\u591a\u4eba\u5e0c\u671b\u4ed6\u5011\u7684\u6a21\u7d44\u662f\u67d0\u500b\u985e\u5225(class)\u7684\u5be6\u4f8b(instance)</li> <li>\u70ba\u6b64,\u53ef\u4ee5\u5c07\u6240\u9700\u532f\u51fa\u7684\u7269\u4ef6\u6307\u6d3e\u7d66<code>module.exports</code>\u7269\u4ef6</li> <li>\u5c07\u6240\u9700\u7684\u7269\u4ef6\u6307\u6d3e\u7d66<code>exports</code>\u6703\u7c21\u55ae\u5730\u91cd\u65b0\u7d81\u5b9a(simply rebind)<code>exports</code>\u5340\u57df\u8b8a\u6578,\u7136\u800c\u9019\u53ef\u80fd\u4e0d\u662f\u6211\u5011\u6240\u60f3\u8981\u7684\u7d50\u679c</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc(\u5047\u8a2d\u6211\u5011\u6b63\u5728\u88fd\u4f5c\u4e00\u500b\u6a21\u7d44,\u53eb\u505a<code>a.js</code>)     JavaScript<pre><code>const EventEmitter = require('events');\nmodule.exports = new EventEmitter();\n// Do some work, and after some time emit\n// the 'ready' event from the module itself.\nsetTimeout(() =&gt; {\nmodule.exports.emit('ready');\n}, 1000);\n</code></pre></li> <li>\u9019\u6642\u6211\u5011\u5c31\u53ef\u4ee5\u5728\u53e6\u5916\u4e00\u500b\u6a94\u6848\u4e2d\u5f15\u5165\u4e0a\u8ff0\u7684\u6a21\u7d44     JavaScript<pre><code>const a = require('./a');\na.on('ready', () =&gt; {\nconsole.log('module \"a\" is ready');\n});\n</code></pre></li> <li>\u60c5\u5883\u8aaa\u660e( \u932f\u8aa4\u793a\u7bc4 )---\u4e0d\u6703\u88ab\u57f7\u884c</li> <li>\u56e0\u70ba\u6307\u6d3e\u7d66<code>module.exports</code>\u7269\u4ef6\u9700\u8981\u7acb\u5373\u5b8c\u6210\u5b83,\u4e26\u4e14\u4e0d\u80fd\u5728\u4efb\u4f55\u56de\u547c\u51fd\u5f0f(callbacks)\u4e2d\u5b8c\u6210</li> <li><code>x.js</code> JavaScript<pre><code>setTimeout(() =&gt; {\nmodule.exports = { a: 'hello' };\n}, 0);\n</code></pre></li> <li><code>y.js</code> JavaScript<pre><code>const x = require('./x');\nconsole.log(x.a);\n</code></pre></li> </ul> </li> <li>exports shortcut<ul> <li>\u8a72\u8b8a\u6578\u53ea\u6709\u5728\u6a21\u7d44\u6a94\u6848\u5c64\u7d1a(module's file-level)\u7684\u7bc4\u570d(scope)\u624d\u53ef\u7528,\u4e26\u4e14\u5728\u6a21\u7d44\u88ab\u8a55\u4f30\u4e4b\u524d(evaluated)\u5c31\u6703\u88ab<code>module.exports</code>\u7269\u4ef6\u6307\u6d3e\u5176\u503c</li> <li>\u8a72\u8b8a\u6578\u5141\u8a31\u4e00\u500b\u6377\u5f91,\u56e0\u6b64<code>module.exports.f = ...</code>\u53ef\u4ee5\u88ab\u66f4\u7c21\u6f54\u5730\u5beb\u6210<code>exports.f = ...</code></li> <li>\u7136\u800c,\u8acb\u6ce8\u610f!\u5c31\u5982\u540c\u4efb\u4f55\u7684\u8b8a\u6578\u4e00\u6a23,\u5982\u679c\u6709\u65b0\u7684\u503c\u88ab\u6307\u6d3e\u7d66<code>exports</code>\u8b8a\u6578,\u5247\u5b83\u5c31\u4e0d\u518d\u88ab\u91cd\u65b0\u7d81\u5b9a\u5230<code>module.exports</code>\u7269\u4ef6\u4e0a</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     <code>js     module.exports.hello = true; // Exported from require of module     exports = { hello: false };  // Not exported, only available in the module</code></li> <li>\u7576<code>module.exports</code>\u5c6c\u6027\u5b8c\u5168\u88ab\u4e00\u500b\u7269\u4ef6\u53d6\u4ee3(replaced)\u6642,\u901a\u5e38\u4e5f\u6703\u91cd\u65b0\u6307\u6d3e\u7d66<code>exports</code>\u8b8a\u6578</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc   JavaScript<pre><code>module.exports = exports = function Constructor() {\n// ... etc.\n};\n</code></pre></li> <li>\u70ba\u4e86\u8aaa\u660e\u4ee5\u4e0a\u7684\u9019\u7a2e\u884c\u70ba,\u8acb\u60f3\u50cf\u6709\u4e00\u500b\u5047\u8a2d\u7684(hypothetical)<code>require()</code>\u65b9\u6cd5\u5be6\u4f5c(implementation),\u8a72\u884c\u70ba\u8207\u5be6\u969b\u7684<code>require()</code>\u65b9\u6cd5\u76f8\u7576\u985e\u4f3c</li> <li>\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>function require(/* ... */) {\nconst module = { exports: {} };\n((module, exports) =&gt; {\n// Module code here. In this example, define a function.\nfunction someFunc() {}\nexports = someFunc;\n// At this point, exports is no longer a shortcut to module.exports, and\n// this module will still export an empty default object.\nmodule.exports = someFunc;\n// At this point, the module will now export someFunc, instead of the\n// default object.\n})(module, module.exports);\nreturn module.exports;\n}\n</code></pre></li> </ul> </li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#timers","title":"Timers","text":"<ul> <li><code>timer</code>\u6a21\u7d44\u6703\u516c\u958b(exposes)\u4e00\u500b\u5168\u57df\u7684API,\u7528\u4f86\u5b89\u6392\u5728\u5c07\u4f86\u7684\u67d0\u500b\u6642\u6bb5\u547c\u53eb\u8a72\u51fd\u5f0f\u6240\u4f7f\u7528\u7684\u3002\u56e0\u70ba<code>timer</code>\u6a21\u7d44\u4e2d\u7684\u65b9\u6cd5\u90fd\u662f\u5168\u57df\u7684,\u6240\u4ee5\u4e0d\u7528\u4e8b\u5148\u5f15\u7528(<code>require('timers')</code>)\u6a21\u7d44\u5f8c\u624d\u80fd\u4f7f\u7528\u9019\u4e9bAPI</li> <li>Node\u7684<code>timer</code>\u6a21\u7d44\u4e2d\u7684\u65b9\u6cd5\u6703\u5be6\u4f5c(implement)\u985e\u4f3c\u65bc\u7db2\u9801\u700f\u89bd\u5668(web browsers)\u4e2d<code>timers</code>API,\u4f46\u6703\u4f7f\u7528\u4e0d\u540c\u7684\u5be6\u4f5c\u65b9\u6cd5</li> <li>\u800cNode\u7684<code>timer</code>\u6a21\u7d44\u6703\u570d\u7e5e\u5728\u4e8b\u4ef6\u8ff4\u5708(event loop)\u7684\u57fa\u790e\u4e4b\u4e0a\u4f86\u5be6\u4f5c\u4e0d\u540c\u7684\u65b9\u6cd5 <p>method</p> </li> <li>setImmediate(callback[, ...args])<ul> <li>args</li> <li>callback: (Function)<ul> <li>\u5728\u672c\u6b21\u7684\u4e8b\u4ef6\u8ff4\u5708\u7d50\u675f\u6642,\u8981\u547c\u53eb\u7684\u51fd\u5f0f</li> </ul> </li> <li>...args: (any)<ul> <li>\u7576\u56de\u547c\u51fd\u5f0f(callback)\u88ab\u547c\u53eb\u6642,\u53ef\u4ee5\u9078\u64c7\u6027\u5730(optional)\u50b3\u905e\u53c3\u6578(arguments)</li> </ul> </li> <li>Returns: \u53ef\u4ee5\u50b3\u905e\u7d66clearImmediate()\u65b9\u6cd5\u6240\u4f7f\u7528\u7684<code>Timeout\u7269\u4ef6</code></li> <li>\u5b89\u6392\u5728<code>callback I/O\u4e8b\u4ef6</code>\u7684\u7acb\u5373\u57f7\u884c(immediate execution)\u56de\u547c\u51fd\u5f0f</li> <li>\u7576\u6709\u591a\u500b<code>setImmediate()</code>\u65b9\u6cd5\u88ab\u4f7f\u7528\u6642,\u9019\u4e9b\u56de\u547c\u51fd\u5f0f\u6703\u4f9d\u7167\u88ab\u5efa\u7acb\u7684\u9806\u5e8f\u6392\u968a\u7b49\u5f85\u88ab\u57f7\u884c(queued for execution)\u3002\u6574\u500b\u56de\u547c\u968a\u5217(callback queue)\u6703\u8655\u7406\u6bcf\u6b21\u7684\u4e8b\u4ef6\u8ff4\u5708\u8fed\u4ee3(event loop iteration)</li> <li>\u5982\u679c\u6709\u4e00\u500b\u7acb\u5373\u57f7\u884c\u8a08\u6642\u5668(immediate timer)\u6b63\u5728\u4e00\u500b\u56de\u547c\u57f7\u884c(execution callback)\u4e2d\u7684\u968a\u5217(queue)\u4e2d,\u8a72\u7acb\u5373\u57f7\u884c\u8a08\u6642\u5668(immediate timer)\u5c31\u4e0d\u6703\u88ab\u89f8\u767c,\u76f4\u5230\u4e0b\u6b21\u4e8b\u4ef6\u8ff4\u5708\u8fed\u4ee3(the next event loop iteration)\u4ee5\u524d</li> <li>\u5982\u679c<code>setImmediate()</code>\u65b9\u6cd5\u7684<code>callback</code>\u53c3\u6578\u4e0d\u662f\u4e00\u500b\u51fd\u5f0f(function)\u7684\u8a71,\u6703\u62cb\u51fa\u4e00\u500bTypeError\u932f\u8aa4</li> <li><code>setImmediate()</code>\u65b9\u6cd5\u6709\u4e00\u500b\u5ba2\u88fd\u5316\u7684<code>promises</code>\u8b8a\u5f62(custom variant for promises),\u53ef\u4ee5\u5229\u7528Node\u7684\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Util</code>\u4e2d\u7684util.promisify()\u65b9\u6cd5     JavaScript<pre><code>const util = require('util');\nconst setImmediatePromise = util.promisify(setImmediate);\nsetImmediatePromise('foobar').then((value) =&gt; {\n// value === 'foobar' (passing values is optional)\n// This is executed after all I/O callbacks.\n});\n// Or with async function\nasync function timerExample() {\nconsole.log('Before I/O callbacks');\nawait setImmediatePromise();\nconsole.log('After I/O callbacks');\n}\ntimerExample();\n</code></pre></li> </ul> </li> <li>setInterval(callback[, delay[, ...args]])<ul> <li>args</li> <li>callback: (Function)<ul> <li>\u8a2d\u5b9a\u7576\u8a08\u6642\u5668(timer)\u7d93\u904e\u8a2d\u5b9a\u597d\u7684\u9593\u9694\u6642\u9593(elapses)\u5f8c,\u8981 \u91cd\u8907\u57f7\u884c \u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> </ul> </li> <li>delay: (number)<ul> <li>\u547c\u53eb\u56de\u547c\u51fd\u5f0f(callback)\u4e4b\u524d\u8981\u9593\u9694\u7684\u6beb\u79d2\u6578</li> <li>\u9810\u8a2d\u503c: <code>1</code></li> <li>\u7576\u8a72\u53c3\u6578\u7684\u503c\u5927\u65bc<code>2147483647</code>\u6216\u662f\u5c0f\u65bc<code>1</code>\u6642,\u90fd\u6703\u88ab\u8a2d\u5b9a\u70ba<code>1</code>; \u82e5\u8a72\u53c3\u6578\u70ba\u975e\u6574\u6578\u7684\u503c,\u6703\u88ab\u7121\u689d\u4ef6\u6368\u53bb\u5f8c,\u8b8a\u6210\u6574\u6578</li> </ul> </li> <li><code>...args</code>: (any)<ul> <li>\u7576\u56de\u547c\u51fd\u5f0f(callback)\u88ab\u547c\u53eb\u6642,\u53ef\u4ee5\u9078\u64c7\u6027\u5730(optional)\u50b3\u905e\u53c3\u6578(arguments)</li> </ul> </li> <li>Returns: \u53ef\u4ee5\u50b3\u905e\u7d66clearInterval()\u65b9\u6cd5\u6240\u4f7f\u7528\u7684<code>Timeout\u7269\u4ef6</code></li> <li>\u5b89\u6392\u4e00\u500b\u6703\u6bcf<code>n</code>\u6beb\u79d2\u5f8c,\u91cd\u8907(repeated)\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> <li>\u5982\u679c<code>setInterval()</code>\u65b9\u6cd5\u7684<code>callback</code>\u53c3\u6578\u4e0d\u662f\u4e00\u500b\u51fd\u5f0f(function)\u7684\u8a71,\u6703\u62cb\u51fa\u4e00\u500bTypeError\u932f\u8aa4</li> </ul> </li> <li>setTimeout(callback[, delay[, ...args]])<ul> <li>args</li> <li>callback: (function)<ul> <li>\u8a2d\u5b9a\u7576\u8a08\u6642\u5668(timer)\u7d93\u904e\u8a2d\u5b9a\u597d\u7684\u9593\u9694\u6642\u9593(elapses)\u5f8c,\u8981 \u57f7\u884c\u4e00\u6b21 \u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> </ul> </li> <li>delay: (number)<ul> <li>\u547c\u53eb\u56de\u547c\u51fd\u5f0f(callback)\u4e4b\u524d\u8981\u7d93\u904e\u7684\u6beb\u79d2\u6578</li> <li>\u9810\u8a2d\u503c: <code>1</code></li> <li>\u7576\u8a72\u53c3\u6578\u7684\u503c\u5927\u65bc<code>2147483647</code>\u6216\u662f\u5c0f\u65bc<code>1</code>\u6642,\u90fd\u6703\u88ab\u8a2d\u5b9a\u70ba<code>1</code>; \u82e5\u8a72\u53c3\u6578\u70ba\u975e\u6574\u6578\u7684\u503c,\u6703\u88ab\u7121\u689d\u4ef6\u6368\u53bb\u5f8c,\u8b8a\u6210\u6574\u6578</li> </ul> </li> <li>...args: (any)<ul> <li>\u7576\u56de\u547c\u51fd\u5f0f(callback)\u88ab\u547c\u53eb\u6642,\u53ef\u4ee5\u9078\u64c7\u6027\u5730(optional)\u50b3\u905e\u53c3\u6578(arguments)</li> </ul> </li> <li>Returns: \u53ef\u4ee5\u50b3\u905e\u7d66clearTimeout()\u65b9\u6cd5\u6240\u4f7f\u7528\u7684<code>Timeout\u7269\u4ef6</code></li> <li>\u5b89\u6392\u4e00\u500b\u7576\u7d93\u904e<code>n</code>\u6beb\u79d2\u5f8c,\u6703\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> <li>\u6ce8\u610f: <code>setTimeout()</code>\u65b9\u6cd5\u8981\u547c\u53eb\u7684\u56de\u547c\u51fd\u5f0f\u53ef\u80fd\u4e0d\u6703\u5728\u8a2d\u5b9a\u597d\u7684\u6beb\u79d2\u6578\u5f8c,\u88ab\u7cbe\u78ba\u5730(precisely)\u547c\u53eb\u3002Node \u4e0d\u80fd\u4fdd\u8b49 \u56de\u547c\u51fd\u5f0f\u88ab\u547c\u53eb\u7684\u7cbe\u78ba\u6642\u9593(exact timing)\u4ee5\u53ca\u9806\u5e8f(ordering)\u3002\u53ea\u80fd\u76e1\u91cf\u8b93\u8981\u547c\u53eb\u7684\u56de\u547c\u51fd\u5f0f(callback)\u5728\u8a2d\u5b9a\u597d\u7684\u6642\u9593\u5f8c\u88ab\u89f8\u767c</li> <li>\u5982\u679c<code>setTimeout()</code>\u65b9\u6cd5\u7684<code>callback</code>\u53c3\u6578\u4e0d\u662f\u4e00\u500b\u51fd\u5f0f(function)\u7684\u8a71,\u6703\u62cb\u51fa\u4e00\u500bTypeError\u932f\u8aa4</li> <li><code>setTimeout()</code>\u65b9\u6cd5\u6709\u4e00\u500b\u5ba2\u88fd\u5316\u7684<code>promises</code>\u8b8a\u5f62(custom variant for promises),\u53ef\u4ee5\u5229\u7528Node\u7684\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<code>Util</code>\u4e2d\u7684util.promisify()\u65b9\u6cd5     JavaScript<pre><code>const util = require('util');\nconst setTimeoutPromise = util.promisify(setTimeout);\nsetTimeoutPromise(40, 'foobar').then((value) =&gt; {\n// value === 'foobar' (passing values is optional)\n// This is executed after about 40 milliseconds.\n});\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#events","title":"Events","text":"<ul> <li>\u5927\u90e8\u5206Node\u4e2d\u7684\u6838\u5fc3API\u90fd\u662f\u57fa\u65bc\u6163\u7528\u7684(idiomatic)\u975e\u540c\u6b65(asynchronous)\u4e8b\u4ef6\u9a45\u52d5(event-driven)\u67b6\u69cb(architecture)\u3002\u5728\u9019\u7a2e\u67b6\u69cb\u4e2d,\u67d0\u4e9b\u985e\u578b\u7684\u7269\u4ef6(\u88ab\u7a31\u70ba<code>emitters</code>)\u6703\u767c\u51fa(emit)\u88ab\u547d\u540d\u7684\u4e8b\u4ef6(named events),\u5c0e\u81f4(cause)\u51fd\u5f0f\u7269\u4ef6(<code>Function</code> object, =&gt; \u4e5f\u5c31\u662f\u76e3\u807d\u5668(listeners))\u88ab\u547c\u53eb(to be called)</li> <li>\u8209\u4f8b\u4f86\u8aaa,\u6bcf\u7576\u6709\u540c\u7d1a\u9023\u63a5(peer connects)\u6642,\u90fd\u6703\u767c\u51fa(emit)\u4e00\u6b21\u4e8b\u4ef6(event)\u5230\u4e00\u500bnet.Server\u7269\u4ef6(object); \u7576\u6a94\u6848\u88ab\u958b\u555f(opened)\u6642,\u6703\u6709\u4e00\u500bfs.ReadStream\u5be6\u4f8b(instance)\u6703\u767c\u51fa(emit)\u4e00\u500b\u4e8b\u4ef6(event); \u6bcf\u7576(whenever)\u6709\u8cc7\u6599\u53ef\u4ee5\u88ab\u8b80\u53d6\u6642,\u5c31\u6703\u767c\u51fa(emit)\u4e00\u500bstream\u4e8b\u4ef6(event)</li> <li>\u767c\u51fa\u7684\u4e8b\u4ef6(emit events)\u4e2d\u7684\u6240\u6709\u7269\u4ef6(objects)\u90fd\u662fEventEmitter\u985e\u5225(class)\u7684\u5be6\u4f8b(instances)\u3002\u9019\u4e9b\u7269\u4ef6\u6703\u516c\u958b(expose)\u4e00\u500b<code>emitter.on()</code>\u51fd\u5f0f(function),\u9019\u500b\u51fd\u5f0f\u5141\u8a31(allows)\u4e00\u500b\u6216\u591a\u500b\u51fd\u5f0f\u9644\u52a0\u5230(attached)\u7531\u8a72\u7269\u4ef6(by object)\u6240\u767c\u51fa(emitted)\u7684\u88ab\u547d\u540d\u7684\u4e8b\u4ef6(named events)\u4e0a\u3002 \u901a\u5e38,\u4e8b\u4ef6\u540d\u7a31\u90fd\u662f\u7528\u99dd\u5cf0\u547d\u540d\u6cd5(camel-cased)\u4f86\u547d\u540d\u7684\u5b57\u4e32(strings),\u4f46\u662f\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u6709\u6548\u7684(valid)Javascript\u5c6c\u6027\u9375(property key)</li> <li>\u7576<code>EventEmitter</code>\u7269\u4ef6\u767c\u51fa(emits)\u4e00\u500b\u4e8b\u4ef6(event),\u6240\u6709\u88ab\u9644\u52a0\u5230(attached)\u90a3\u500b\u7279\u5b9a\u7684(specific)\u4e8b\u4ef6\u4e0a\u7684\u51fd\u5f0f(functions)\u90fd\u6703\u88ab\u540c\u6b65\u5730\u547c\u53eb(called synchronously)\u3002\u88ab\u547c\u53eb\u7684\u76e3\u807d\u5668(the called listeners)\u6240\u8fd4\u56de(returned)\u7684\u4efb\u4f55\u503c\u90fd\u6703\u88ab\u5ffd\u7565(ignored)\u548c\u4e1f\u68c4(discarded)\u6389</li> <li>\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u6703\u5c55\u793a(shows)\u5177\u6709\u55ae\u4e00\u500b(single)\u76e3\u807d\u5668(listener)\u7684\u7c21\u55ae<code>EventEmitter</code>\u7269\u4ef6\u5be6\u4f8b(instance)\u3002<code>eventEmitter.on()</code>\u65b9\u6cd5\u662f\u7528\u4f86\u8a3b\u518a\u76e3\u807d\u5668(register listeners),\u800c<code>eventEmitter.emit()</code>\u65b9\u6cd5\u5247\u662f\u7528\u4f86\u89f8\u767c(trigger)\u4e00\u500b\u4e8b\u4ef6(event)     JavaScript<pre><code>const EventEmitter = require('events');\nclass MyEmitter extends EventEmitter {}\nconst myEmitter = new MyEmitter();\nmyEmitter.on('event', () =&gt; {\nconsole.log('an event occurred!');\n});\nmyEmitter.emit('event');\n</code></pre> <p>\u50b3\u905e\u53c3\u6578\u8207<code>this</code>\u7d66\u4e8b\u4ef6\u76e3\u807d\u5668(Passing arguments and this to listeners)</p> </li> <li><code>eventEmitter.emit()</code>\u65b9\u6cd5\u5141\u8a31\u5c07\u4efb\u610f\u4e00\u7d44\u53c3\u6578(arguments)\u50b3\u905e\u7d66\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(listener functions)\u3002</li> <li>\u8acb\u8a18\u4f4f! \u5728\u547c\u53eb\u666e\u901a\u7684(ordinary)\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(listener function)\u6642,<code>this</code>\u9019\u500b\u95dc\u9375\u5b57\u6703\u88ab\u523b\u610f\u5730(intentionally)\u88ab\u8a2d\u5b9a\u4f5c\u70ba\u5f15\u7528(reference)\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u6240\u9644\u52a0\u7684<code>EventEmitter</code>\u5be6\u4f8b(instance)       JavaScript<pre><code>const myEmitter = new MyEmitter();\nmyEmitter.on('event', function(a, b) {\nconsole.log(a, b, this, this === myEmitter);\n// Prints:\n//   a b MyEmitter {\n//     domain: null,\n//     _events: { event: [Function] },\n//     _eventsCount: 1,\n//     _maxListeners: undefined } true\n});\nmyEmitter.emit('event', 'a', 'b');\n</code></pre></li> <li>\u53ef\u4ee5\u4f7f\u7528ES6\u7684\u7bad\u982d\u51fd\u5f0f(Arrow Functions)\u4f86\u4f5c\u70ba\u4e8b\u4ef6\u76e3\u807d\u5668(listeners),\u7136\u800c\u7576\u9019\u9ebc\u505a\u6642,<code>this</code>\u95dc\u9375\u5b57\u5c31\u4e0d\u6703\u518d\u5f15\u7528(reference)<code>EventEmitter</code>\u5be6\u4f8b(instance)       JavaScript<pre><code>const myEmitter = new MyEmitter();\nmyEmitter.on('event', (a, b) =&gt; {\nconsole.log(a, b, this);\n// Prints: a b {}\n});\nmyEmitter.emit('event', 'a', 'b');\n</code></pre> <p>\u975e\u540c\u6b65\u8207\u540c\u6b65(Asynchronous vs. synchronous)</p> </li> <li><code>Eventemitter</code>\u5be6\u4f8b(instance)\u6703\u540c\u6b65\u5730(synchronously)\u4f9d\u64da\u6240\u6709\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u7684\u7167\u5e8f(in the order)\u547c\u53eb,\u9019\u6a23\u53ef\u4ee5\u78ba\u4fdd(ensures)\u4e8b\u4ef6\u7684\u6b63\u78ba\u6392\u5e8f(proper sequencing),\u4e26\u4e14\u80fd\u907f\u514d\u722d\u7528\u689d\u4ef6(race conditions)\u8207\u908f\u8f2f\u932f\u8aa4(logic error)<ul> <li>\u7b49\u5230\u9069\u7576\u6642\u6a5f(appropriate)\u6642,\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(listener functions)\u53ef\u4ee5\u5229\u7528<code>setImmediate()</code>\u65b9\u6cd5 &amp; <code>process.nextTick()</code>\u65b9\u6cd5\u4f86\u5207\u63db\u5230\u975e\u540c\u6b65\u64cd\u4f5c\u6a21\u5f0f(asynchronous mode of operation) JavaScript<pre><code>const myEmitter = new MyEmitter();\nmyEmitter.on('event', (a, b) =&gt; {\nsetImmediate(() =&gt; {\nconsole.log('this happens asynchronously');\n});\n});\nmyEmitter.emit('event', 'a', 'b');\n</code></pre> <p>\u50c5\u8655\u7406\u4e8b\u4ef6\"1\u6b21\"(Handling events only once)</p> </li> </ul> </li> <li>\u82e5\u5229\u7528<code>eventEmitter.on()</code>\u65b9\u6cd5\u4f86\u8a3b\u518a(registered)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u6642,\u5247\u7576\u6bcf\u6b21(every time)\u767c\u51fa(emitted)\u88ab\u547d\u540d\u7684\u4e8b\u4ef6(named event)\u6642,\u90fd\u6703\u547c\u53eb(invoked)\u8a72\u4e8b\u4ef6\u76e3\u807d\u5668(listener)       JavaScript<pre><code>const myEmitter = new MyEmitter();\nlet m = 0;\nmyEmitter.on('event', () =&gt; {\nconsole.log(++m);\n});\nmyEmitter.emit('event');\n// Prints: 1\nmyEmitter.emit('event');\n// Prints: 2\n</code></pre></li> <li>\u82e5\u5229\u7528<code>eventEmitter.once()</code>\u65b9\u6cd5\u7684\u8a71,\u53ef\u4ee5\u8a3b\u518a(register)\u4e00\u500b\u91dd\u5c0d\u7279\u5b9a\u4e8b\u4ef6(particular event)\u624d\u6703 \u6700\u591a\u88ab\u547c\u53eb\u4e00\u6b21(called at most once)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u3002\u800c\u4e00\u65e6\u9019\u500b\u7279\u5b9a\u4e8b\u4ef6\u88ab\u767c\u51fa(emitted)\u6642,\u8a72\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u5c31\u6703\u88ab\u53d6\u6d88\u8a3b\u518a(unregistered)\u5f8c,\u518d\u547c\u53eb(called)\u8a72\u4e8b\u4ef6\u76e3\u807d\u5668(listener)       JavaScript<pre><code>const myEmitter = new MyEmitter();\nlet m = 0;\nmyEmitter.once('event', () =&gt; {\nconsole.log(++m);\n});\nmyEmitter.emit('event');\n// Prints: 1\nmyEmitter.emit('event');\n// Ignored\n</code></pre> <p>\u932f\u8aa4\u4e8b\u4ef6(Error events)</p> </li> <li>\u7576\u67d0\u500b<code>EventEmitter</code>\u5be6\u4f8b(instance)\u767c\u751f\u932f\u8aa4(error occurs)\u6642,\u5178\u578b\u7684\u52d5\u4f5c(typical action)\u662f\u767c\u51fa(emitted)\u4e00\u500b<code>error</code>\u4e8b\u4ef6(event)\u3002\u800c\u9019\u4e9b<code>error</code>\u4e8b\u4ef6(event)\u6703\u5728Node\u4e2d\u88ab\u8996\u70ba(treated as)\u7279\u6b8a\u60c5\u6cc1(special cases)</li> <li>\u82e5\u4e00\u500b<code>Eventemitter</code>\u5be6\u4f8b(instance)\u4e4b\u4e2d,\u4e0d\u5b58\u5728\u81f3\u5c11(at least)\u4e00\u500b\u7528\u4f86\u8a3b\u518a(registered)\u7d66<code>error</code>\u4e8b\u4ef6(event)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u7684\u8a71,\u540c\u6642\u4e5f\u5df2\u7d93\u767c\u51fa(emitted)\u4e86\u4e00\u500b<code>error</code>\u4e8b\u4ef6(event),\u9019\u6642\u8a72<code>error</code>\u4e8b\u4ef6(event)\u5c31\u6703\u88ab\u62cb\u51fa(thrown),\u4e26\u4e14\u5806\u758a\u8ffd\u8e64(stack trace)\u5c31\u6703\u88ab\u6253\u5370(printed)\u51fa,\u6700\u5f8cNode\u7684\u9032\u7a0b(process)\u5c31\u6703\u9000\u51fa(exits)       JavaScript<pre><code>const myEmitter = new MyEmitter();\nmyEmitter.emit('error', new Error('whoops!'));\n// Throws and crashes Node.js\n</code></pre></li> <li>\u70ba\u4e86\u9632\u6b62(To guard against) Node\u7684\u9032\u7a0b(process)\u5d29\u6f70(crashing),\u53ef\u4ee5\u4f7f\u7528Node\u7684Domain\u5167\u5efa\u6838\u5fc3\u6a21\u7d44<ul> <li>\u8acb\u6ce8\u610f! <code>Domain</code>\u6a21\u7d44\u5df2\u68c4\u7f6e(deprecated)</li> </ul> </li> <li>\u4f5c\u70ba\u6700\u4f73\u7684\u5be6\u8e10\u505a\u6cd5(As a best practice),\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u61c9\u8a72\u7e3d\u662f\u88ab\u65b0\u589e\u5230<code>error</code>\u4e8b\u4ef6(event)\u4e0a       JavaScript<pre><code>const myEmitter = new MyEmitter();\nmyEmitter.on('error', (err) =&gt; {\nconsole.error('whoops! there was an error');\n});\nmyEmitter.emit('error', new Error('whoops!'));\n// Prints: whoops! there was an error\n</code></pre></li> <li>\u6211\u5011\u53ef\u4ee5\u900f\u904eevents.errorMonitor\u7b26\u865f(symbol)\u4f86\u5b89\u88dd\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener),\u4ee5\u7528\u4f86\u76e3\u6e2c<code>error</code>\u4e8b\u4ef6(event),\u800c\u4e0d\u7528(without)\u6d88\u8017(consuming)\u767c\u51fa\u7684\u932f\u8aa4(emitted error)       JavaScript<pre><code>const { EventEmitter, errorMonitor } = require('events');\nconst myEmitter = new EventEmitter();\nmyEmitter.on(errorMonitor, (err) =&gt; {\nMyMonitoringTool.log(err);\n});\nmyEmitter.emit('error', new Error('whoops!'));\n// Still throws and crashes Node.js\n</code></pre> <p>Class</p> </li> <li>EventEmitter<ul> <li><code>EventEmitter</code>\u985e\u5225(class)\u662f\u88ab\u7528\u4f86\u5b9a\u7fa9 &amp; \u516c\u958b<code>Events</code>\u6a21\u7d44(module)\u7684</li> <li>\u53ef\u4ee5\u9019\u6a23\u5f15\u7528<code>EvenEmitter</code>\u985e\u5225(class)     JavaScript<pre><code>const EventEmitter = require('events');\n</code></pre></li> <li>\u7576\u65b0\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(new listeners)\u88ab\u65b0\u589e\u6642,\u6240\u6709\u7684<code>EvenEmitter</code>\u985e\u5225(class)\u90fd\u6703\u767c\u51fanewListener\u9019\u500b\u4e8b\u4ef6(event); \u4e26\u4e14\u7576\u5df2\u7d93\u5b58\u5728\u7684(existed)\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u88ab\u79fb\u9664\u6642(removed),\u6703\u767c\u51faremoveListener\u9019\u500b\u4e8b\u4ef6</li> <li><code>EventEmitter</code>\u985e\u5225(class)\u53ef\u4ee5\u652f\u63f4captureRejections\u9019\u500b\u9078\u9805(option)</li> <li><code>captureRejections</code>: (boolean)<ul> <li>\u9019\u500b\u9078\u9805\u80fd\u5920\u81ea\u52d5\u5730(automatic)\u6355\u6293(capturing)\u88ab\u62d2\u7d55(rejection)\u7684<code>Promise</code>\u7269\u4ef6</li> <li>\u9810\u8a2d\u503c: <code>false</code></li> </ul> </li> </ul> </li> <li> <p>Event</p> <ul> <li>newListener</li> <li>args<ul> <li>eventName: (string) | (symbol)</li> <li>\u6b63\u5728\u76e3\u807d\u7684\u4e8b\u4ef6(event)\u7684\u540d\u7a31</li> <li>listener: (Function)</li> <li>\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u51fd\u5f0f(function)</li> </ul> </li> <li><code>EventEmitter</code>\u5be6\u4f8b(instance)\u6703\u5728\u7576\u6709\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u88ab\u52a0\u5165\u5230\u81ea\u8eab\u5167\u90e8\u7684(internal)\u4e8b\u4ef6\u76e3\u807d\u5668\u5011(listeners)\u9663\u5217(array)\u4e4b\u524d,\u5148\u767c\u51fa(emit)\u4e00\u500b\u81ea\u8eab(own)\u7684<code>newListener</code>\u4e8b\u4ef6(event)</li> <li>\u70ba\u4e86<code>newListener</code>\u4e8b\u4ef6(event)\u800c\u8a3b\u518a(registered)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668\u5011(listeners)\u5c07\u6703\u50b3\u905e(passed)\u4e8b\u4ef6\u540d\u7a31\u8207\u8981\u65b0\u589e(being added)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u7684\u53c3\u8003(reference)</li> <li>\u4e8b\u5be6\u4e0a,\u5728\u65b0\u589e\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u4e4b\u524d\u89f8\u767c(triggered)\u7684\u4e8b\u4ef6\u4e2d\u6709\u4e00\u500b\u5fae\u5999(subtle)\u537b\u5f88\u91cd\u8981(important)\u7684\u526f\u4f5c\u7528(side effect)</li> <li>\u4efb\u4f55\u7528\u4f86\u8a3b\u518a(registered)\u7d66\u540c\u540d(same <code>name</code>)\u7684<code>newListener</code>\u56de\u547c\u51fd\u5f0f(callback)\u4e4b\u5167(within)\u7684\u984d\u5916(additional)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668\u5011(listeners),\u90fd\u6703\u5728\u90a3\u4e9b\u88ab\u65b0\u589e(added)\u5230\u9032\u7a0b\u4e2d(process)\u7684\u4e8b\u4ef6\u76e3\u807d\u5668\"\u4e4b\u524d\"\u5c31\u6703\u88ab\u63d2\u5165     JavaScript<pre><code>class MyEmitter extends EventEmitter {}\nconst myEmitter = new MyEmitter();\n// Only do this once so we don't loop forever\nmyEmitter.once('newListener', (event, listener) =&gt; {\nif (event === 'event') {\n// Insert a new listener in front\nmyEmitter.on('event', () =&gt; {\nconsole.log('B');\n});\n}\n});\nmyEmitter.on('event', () =&gt; {\nconsole.log('A');\n});\nmyEmitter.emit('event');\n// Prints:\n//   B\n//   A\n</code></pre></li> <li>removeListener</li> <li>args<ul> <li>eventName: (string) | (symbol)</li> <li>\u4e8b\u4ef6(event)\u7684\u540d\u7a31</li> <li>listener: (Function)</li> <li>\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u51fd\u5f0f(function)</li> </ul> </li> <li>\u7576\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u88ab\u79fb\u9664(removed)\u5f8c,\u6703\u767c\u51fa(emitted)\u4e00\u500b<code>removeListener</code>\u4e8b\u4ef6(event)</li> </ul> </li> <li>emitter.on(eventName, listener)<ul> <li>args</li> <li>eventName: (string) | (symbol)<ul> <li>\u4e8b\u4ef6(event)\u7684\u540d\u7a31</li> </ul> </li> <li>listener: (Function)<ul> <li>\u8a72\u4e8b\u4ef6\u76e3\u807d\u5668\u8981\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> </ul> </li> <li>Returns: (<code>EventEmitter</code>)\u985e\u5225(class)</li> <li>\u5728\u6307\u5b9a\u7684\u4e8b\u4ef6(event, \u4e5f\u5c31\u662f<code>eventName</code>\u53c3\u6578\u7684\u503c)\u4e2d\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u9663\u5217(array)\u7684\u7d50\u5c3e(end)\u4e0a\u65b0\u589e\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(<code>listener</code> function, \u4e5f\u5c31\u662f<code>listener</code>\u53c3\u6578\u7684\u503c)</li> <li>\u4e0d\u6703\u53bb\u6aa2\u67e5\u662f\u5426\u6709\u8a72\u4e8b\u4ef6\u76e3\u807d\u5668\u8981\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)\u5df2\u7d93\u88ab\u65b0\u589e\u4e86</li> <li>\u82e5\u591a\u6b21\u547c\u53eb(Multiple calls)\u4e26\u50b3\u905e\u76f8\u540c\u7684<code>eventName</code>\u8207<code>listener</code>\u5169\u500b\u53c3\u6578\u503c\u7684\u7d44\u5408(combination)\u7684\u8a71,\u5c07\u5c0e\u81f4(result in)\u6b64\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u6703\u88ab\u591a\u6b21(multiple times)\u547c\u53eb(called) &amp; \u65b0\u589e(added)   JavaScript<pre><code>server.on('connection', (stream) =&gt; {\nconsole.log('someone connected!');\n});\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u770b\u51fa\u4f86,<code>emitter.on()</code>\u65b9\u6cd5\u5c07\u6703\u56de\u50b3(returns)\u4e00\u500b\u5c0d<code>EventEmitter</code>\u985e\u5225(class)\u7684\u53c3\u8003(reference),\u4ee5\u4fbf\u8b93\u9019\u500b\u547c\u53eb(calls)\u53ef\u4ee5\u88ab\u4e32\u9023\u4f7f\u7528(chained)</li> <li>\u9810\u8a2d\u60c5\u6cc1\u4e0b,\u4e8b\u4ef6\u76e3\u807d\u5668(event listeners)\u5011\u6703\u4f9d\u7167\u5b83\u5011\u88ab\u65b0\u589e\u7684\u9806\u5e8f(in the order they are added)\u547c\u53eb(invoked)</li> <li>\u53e6\u4e00\u500b\u66ff\u4ee3\u65b9\u6848(alternative)\u662f\u5229\u7528emitter.prependListener(eventName, listener)\u65b9\u6cd5\u4f86\u5c07\u4e00\u500b\u6307\u5b9a\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u65b0\u589e\u5230\u6574\u500b\u4e8b\u4ef6\u76e3\u807d\u5668\u9663\u5217(the listeners array)\u7684\u6700\u524d\u9762(beginning)     JavaScript<pre><code>const myEE = new EventEmitter();\nmyEE.on('foo', () =&gt; console.log('a'));\nmyEE.prependListener('foo', () =&gt; console.log('b'));\nmyEE.emit('foo');\n// Prints:\n//   b\n//   a\n</code></pre></li> </ul> </li> <li>emitter.emit(eventName[, ...args])<ul> <li>args</li> <li>eventName: (string) | (symbol)</li> <li>...args: (any)</li> <li>Returns: (boolean)<ul> <li>\u7576\u8a72\u6307\u5b9a\u7684\u4e8b\u4ef6\u540d\u7a31(event, \u4e5f\u5c31\u662f<code>eventName</code>\u53c3\u6578\u7684\u503c)\u6709\u4e8b\u4ef6\u76e3\u807d\u5668(listeners)\u6642,\u56de\u50b3<code>true</code>; \u53cd\u4e4b,\u5247\u56de\u50b3<code>false</code></li> </ul> </li> <li>\u540c\u6b65\u5730(Synchronously)\u547c\u53eb(calls)\u88ab\u8a3b\u518a(registered)\u7d66\u6307\u5b9a\u7684\u4e8b\u4ef6(event, \u4e5f\u5c31\u662f<code>eventName</code>\u53c3\u6578\u7684\u503c)\u4e2d\u7684\u6bcf\u4e00\u500b(each of)\u4e8b\u4ef6\u76e3\u807d\u5668(listeners),\u4e26\u4f9d\u7167\u5b83\u5011\u88ab\u8a3b\u518a(registered)\u7684\u9806\u5e8f(in the order),\u50b3\u905e(passing)\u7d66\u6bcf\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(to each)\u9700\u8981\u7684\u53c3\u6578(supplied arguments)</li> </ul> </li> <li>emitter.once(eventName, listener)<ul> <li>args</li> <li>eventName: (string) | (symbol)<ul> <li>\u4e8b\u4ef6(event)\u7684\u540d\u7a31</li> </ul> </li> <li>listener: (Function)<ul> <li>\u8a72\u4e8b\u4ef6\u76e3\u807d\u5668\u8981\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback function)</li> </ul> </li> <li>Returns: (<code>EventEmitter</code>)\u985e\u5225(class)</li> <li>\u65b0\u589e\u4e00\u500b \u4e00\u6b21\u6027(one-time) \u7684\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(<code>listener</code> function, \u4e5f\u5c31\u662f<code>listener</code>\u53c3\u6578\u7684\u503c)\u7d66\u6307\u5b9a\u7684\u4e8b\u4ef6(event, \u4e5f\u5c31\u662f<code>eventName</code>\u53c3\u6578\u7684\u503c)</li> <li>\u7576\u4e0b\u4e00\u6b21\u8a72\u6307\u5b9a\u7684<code>eventName</code>\u4e8b\u4ef6\u88ab\u89f8\u767c(triggered)\u6642,\u9019\u500b \u4e00\u6b21\u6027(one-time) \u7684\u4e8b\u4ef6\u76e3\u807d\u5668\u51fd\u5f0f(listener)\u5c31\u6703\u88ab\u547c\u53eb(invoked)\u4e26\u79fb\u9664(removed)   JavaScript<pre><code>server.once('connection', (stream) =&gt; {\nconsole.log('Ah, we have our first user!');\n});\n</code></pre></li> <li>\u4ee5\u4e0a\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u770b\u51fa\u4f86,<code>emitter.on()</code>\u65b9\u6cd5\u5c07\u6703\u56de\u50b3(returns)\u4e00\u500b\u5c0d<code>EventEmitter</code>\u985e\u5225(class)\u7684\u53c3\u8003(reference),\u4ee5\u4fbf\u8b93\u9019\u500b\u547c\u53eb(calls)\u53ef\u4ee5\u88ab\u4e32\u9023\u4f7f\u7528(chained)</li> <li>\u9810\u8a2d\u60c5\u6cc1\u4e0b,\u4e8b\u4ef6\u76e3\u807d\u5668(event listeners)\u5011\u6703\u4f9d\u7167\u5b83\u5011\u88ab\u65b0\u589e\u7684\u9806\u5e8f(in the order they are added)\u547c\u53eb(invoked)</li> <li>\u53e6\u4e00\u500b\u66ff\u4ee3\u65b9\u6848(alternative)\u662f\u5229\u7528emitter.prependListener(eventName, listener)\u65b9\u6cd5\u4f86\u5c07\u4e00\u500b\u6307\u5b9a\u7684\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u65b0\u589e\u5230\u6574\u500b\u4e8b\u4ef6\u76e3\u807d\u5668\u9663\u5217(the listeners array)\u7684\u6700\u524d\u9762(beginning)     JavaScript<pre><code>const myEE = new EventEmitter();\nmyEE.once('foo', () =&gt; console.log('a'));\nmyEE.prependOnceListener('foo', () =&gt; console.log('b'));\nmyEE.emit('foo');\n// Prints:\n//   b\n//   a\n</code></pre></li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#buffers","title":"Buffers","text":"<ul> <li><code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u88ab\u7528\u4f86\u4ee3\u8868(represent)\u4e00\u500b\u56fa\u5b9a\u9577\u5ea6(fixed-length)\u7684\u5b57\u7bc0\u5e8f\u5217(sequence of bytes)\u3002\u6709\u8a31\u591aNode\u7684\u5b98\u65b9API\u90fd\u6709\u652f\u63f4<code>Buffer</code>(\u7de9\u5b58)</li> <li><code>Buffer</code>(\u7de9\u5b58)\u985e\u5225(Class)\u662fJavascript\u7684Uint8Array\u985e\u5225\u7684\u5b50\u985e\u5225(subclass),\u4e26\u4e14<code>Buffer</code>\u985e\u5225\u6709\u7e7c\u627f(extends)\u4e86\u5b83\u7684\u8a31\u591a\u65b9\u6cd5(methods),\u9019\u4e9b\u65b9\u6cd5\u5011\u90fd\u6709\u6db5\u84cb(cover)\u4e86\u984d\u5916(additional)\u7684\u8a31\u591a\u4f7f\u7528\u60c5\u5883(use cases)</li> <li>\u56e0\u70baNode\u7684\u5b98\u65b9API\u80fd\u63a5\u53d7(accept)\u666e\u901a(plain)\u7684<code>Uint8Array</code>\u985e\u5225,\u6240\u4ee5\u5230\u4e0d\u8ad6\u5728\u54ea\u88e1(wherever)\u4e5f\u90fd\u6703\u652f\u6301(supported)<code>`Buffer</code>(\u7de9\u5b58)\u985e\u5225</li> <li><code>Buffer</code>(\u7de9\u5b58)\u985e\u5225(Class)\u662f\u5728\u5168\u57df\u7684(global)\u7bc4\u570d(scope)\u4e4b\u5167,\u56e0\u6b64\u4e0d\u592a\u53ef\u80fd(unlikely)\u6703\u9700\u8981\u5229\u7528<code>require('buffer').Buffer</code>\u7684\u8a9e\u6cd5\u4f86\u532f\u5165\u6b64\u6a21\u7d44</li> <li><code>Buffer</code>\u7de9\u5b58\u7269\u4ef6(object)\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>// Creates a zero-filled Buffer of length 10.\nconst buf1 = Buffer.alloc(10);\n// Creates a Buffer of length 10,\n// filled with bytes which all have the value `1`.\nconst buf2 = Buffer.alloc(10, 1);\n// Creates an uninitialized buffer of length 10.\n// This is faster than calling Buffer.alloc() but the returned\n// Buffer instance might contain old data that needs to be\n// overwritten using fill(), write(), or other functions that fill the Buffer's\n// contents.\nconst buf3 = Buffer.allocUnsafe(10);\n// Creates a Buffer containing the bytes [1, 2, 3].\nconst buf4 = Buffer.from([1, 2, 3]);\n// Creates a Buffer containing the bytes [1, 1, 1, 1] \u2013 the entries\n// are all truncated using `(value &amp; 255)` to fit into the range 0\u2013255.\nconst buf5 = Buffer.from([257, 257.5, -255, '1']);\n// Creates a Buffer containing the UTF-8-encoded bytes for the string 't\u00e9st':\n// [0x74, 0xc3, 0xa9, 0x73, 0x74] (in hexadecimal notation)\n// [116, 195, 169, 115, 116] (in decimal notation)\nconst buf6 = Buffer.from('t\u00e9st');\n// Creates a Buffer containing the Latin-1 bytes [0x74, 0xe9, 0x73, 0x74].\nconst buf7 = Buffer.from('t\u00e9st', 'latin1');\n</code></pre> <p><code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6\u5011\u8207\u5b57\u5143\u7de8\u78bc (Buffers and character encodings)</p> </li> <li>\u82e5\u8981\u5c07<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u8f49\u63db(converting)\u70ba\u5b57\u4e32(string)\u6216\u662f\u53cd\u904e\u4f86\u8f49\u63db\u7684\u8a71,\u53ef\u80fd\u6703\u9700\u8981\u6307\u5b9a(specified)\u4e00\u500b\u7de8\u78bc\u65b9\u5f0f\u3002\u82e5\u9019\u6642\u5019\u6c92\u6709\u6307\u5b9a\u4e00\u500b\u7de8\u78bc\u65b9\u5f0f(character encoding)\u7684\u8a71,\u9810\u8a2d(default)\u6703\u4f7f\u7528(used)<code>utf-8</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u4f86\u9032\u884c       JavaScript<pre><code>const buf = Buffer.from('hello world', 'utf8');\nconsole.log(buf.toString('hex'));\n// Prints: 68656c6c6f20776f726c64\nconsole.log(buf.toString('base64'));\n// Prints: aGVsbG8gd29ybGQ=\nconsole.log(Buffer.from('fhqwhgads', 'utf8'));\n// Prints: &lt;Buffer 66 68 71 77 68 67 61 64 73&gt;\nconsole.log(Buffer.from('fhqwhgads', 'utf16le'));\n// Prints: &lt;Buffer 66 00 68 00 71 00 77 00 68 00 67 00 61 00 64 00 73 00&gt;\n</code></pre></li> <li>\u4ee5\u4e0b\u662f\u76ee\u524d(currently)Node\u6709\u652f\u63f4(supported)\u7684\u5b57\u5143\u7de8\u78bc(character encodings)\u65b9\u5f0f<ul> <li><code>utf8</code>: \u591a\u5b57\u7bc0(Multi-byte)\u7de8\u78bc(encoded)\u7684\u842c\u570b\u78bc(Unicode)\u5b57\u5143\u5011(characters)\u3002\u6709\u8a31\u591a\u7684\u7db2\u9801(web pages) &amp; \u5176\u5b83\u7684\u6587\u4ef6(document)\u683c\u5f0f(formats)\u90fd\u662f\u4f7f\u7528utf-8\u9019\u500b\u7de8\u78bc\u65b9\u5f0f</li> <li>\u9019\u662f<code>Buffer</code>\u7269\u4ef6\u6240\u9810\u8a2d(default)\u7684\u7de8\u78bc\u65b9\u5f0f(character encoding)</li> <li>\u82e5\u5c07<code>Buffer</code>\u7269\u4ef6\u89e3\u78bc\u6210(decoding)\u5b57\u4e32\u6642,\u4e26\u4e0d\u6703\u50c5\u50c5(exclusively)\u5305\u542b(contain)\u6709\u6548\u7684(valid)<code>UTF-8</code>\u7de8\u78bc\u683c\u5f0f\u7684\u8cc7\u6599(data),\u6709\u932f\u8aa4(errors)\u7684\u842c\u570b\u78bc\u8cc7\u6599\u6703\u88ab\u4ee5<code>U+FFFD \ufffd</code>\u9019\u500b\u842c\u570b\u78bc(Unicode)\u53d6\u4ee3\u5b57\u5143(replacement character)\u4f86\u8868\u793a(represent)</li> <li><code>utf16le</code>: \u591a\u5b57\u7bc0(Multi-byte)\u7de8\u78bc(encoded)\u7684\u842c\u570b\u78bc(Unicode)\u5b57\u5143\u5011(characters)\u3002\u4e0d\u540c(Unlike)\u65bc<code>utf8</code>\u7684\u662f,\u6bcf\u4e00\u500b\u5728\u5b57\u4e32(string)\u4e2d\u7684\u5b57\u5143(each character)\u90fd\u6703\u4ee52\u6216\u662f4\u500b\u4f4d\u5143\u7d44(bytes)\u4f86\u7de8\u78bc(encoded)</li> <li>Node\u53ea\u6703\u652f\u63f4(supports)UTF-16\u7684\u8b8a\u9ad4(variant)=&gt; little-endian</li> <li><code>latin1</code>: <code>Latin-1</code>\u662f\u4ee3\u8868(stands for)ISO-8859-1\u3002\u9019\u500b\u5b57\u5143\u7de8\u78bc\u65b9\u5f0f(character encoding)\u50c5\u6703\u652f\u63f4(supports)\u5f9e\u842c\u570b\u78bc(Unicode)\u7684<code>U+0000</code>~<code>U+00FF</code>\u5b57\u5143(character)\u80fd\u7de8\u78bc(encoded)\u3002\u6bcf\u500b\u5b57\u5143(Each character)\u90fd\u6703\u7528\u55ae\u4e00\u500b\u4f4d\u5143\u7d44(single byte)\u4f86\u7de8\u78bc(encoded)\u3002\u90a3\u4e9b\u4e0d\u5728(do not fit into)\u524d\u8ff0\u7bc4\u570d(range)\u5167\u7684\u5b57\u5143\u5011(characters)\u6703\u88ab\u622a\u6389(truncated)\u5f8c,\u4e26\u6703\u95dc\u806f(mapped)\u5230\u524d\u8ff0\u7bc4\u570d\u5167\u7684\u5b57\u5143(characters)</li> </ul> </li> <li>\u82e5\u5229\u7528\u4e0a\u8ff0(above)\u63d0\u53ca(referred)\u7684\u4efb\u4f55\u4e00\u7a2e\u65b9\u5f0f,\u5c07<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u8f49\u63db\u70ba\u5b57\u4e32(string),\u90a3\u5c31\u662f \u89e3\u78bc(decoding) ; \u800c\u5982\u679c\u662f\u5c07\u5b57\u4e32(string)\u8f49\u63db\u70ba<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object),\u90a3\u5c31\u662f \u7de8\u78bc(encoding)</li> <li>Node\u4e5f\u6709\u652f\u63f4(supports)\u4ee5\u4e0b2\u7a2e\u4f4d\u5143\u7d44\u8f49\u5b57\u4e32(binary-to-text)\u7684\u7de8\u78bc\u65b9\u5f0f(encodings)\u3002 \u5c0d\u65bc\u4f4d\u5143\u7d44\u8f49\u5b57\u4e32\u7684\u7de8\u78bc\u65b9\u5f0f\u4f86\u8aaa,\u547d\u540d\u6163\u4f8b(naming convention)\u662f\u76f8\u53cd\u7684,\u4e5f\u5c31\u662f\u8aaa\u5c07<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u8f49\u63db\u70ba\u5b57\u4e32(string),\u90a3\u5c31\u662f\u7de8\u78bc(encoding); \u800c\u5982\u679c\u662f\u5c07\u5b57\u4e32(string)\u8f49\u63db\u70ba<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object),\u90a3\u5c31\u662f\u89e3\u78bc(decoding)<ul> <li><code>base64</code>: \u5c31\u662fBase64\u9019\u500b\u7de8\u78bc\u65b9\u5f0f(encoding)\u3002</li> <li>\u6bcf\u7576\u900f\u904e(from)\u5b57\u4e32\u4f86\u5efa\u7acb(creating)\u4e00\u500b<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u6642,\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u4e5f\u80fd\u6b63\u78ba\u5730(correctly)\u63a5\u53d7(accept)\u81eaRFC4648\u7684\u7b2c5\u7ae0\u7bc0\u4e2d\u6307\u5b9a(specified)\u7684\"<code>URL</code>\u8207\u6a94\u6848\u540d\u7a31\u7684\u5b89\u5168\u5b57\u6bcd( Filename Safe Alphabet)\"\u3002\u5728<code>base64</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u4e2d\u7684\u6240\u6709\u88ab\u5305\u542b(contained)\u5728\u5b57\u4e32\u4e2d(within)\u7684\u7a7a\u767d\u5b57\u5143(whitespace characters),\u50cf\u662f\u7a7a\u767d(spaces)\u3001<code>tabs</code>\u9375\u3001\u63db\u884c\u7b26(new lines)\u90fd\u6703\u88ab\u5ffd\u7565(ignored)</li> <li><code>hex</code>: \u5c07\u6bcf\u500b\u4f4d\u5143\u7d44(each bytes)\u90fd\u7de8\u78bc(encode)\u70ba2\u500b16\u9032\u4f4d(hexadecimal)\u7684\u5b57\u5143(characters)</li> <li>\u7576\u89e3\u78bc\u5b57\u4e32(decoding strings)\u50c5(exclusively)\u5305\u542b(contain)\u6709\u6548\u7684(valid)16\u9032\u4f4d(hexadecimal)\u7684\u5b57\u5143(characters)\u6642,\u5c31\u53ef\u80fd(may)\u6703\u767c\u751f(occur)\u8cc7\u6599\u622a\u65b7(data truncation)\u3002\u8acb\u898b\u4ee5\u4e0b\u7bc4\u4f8b(example)</li> </ul> </li> <li>Node\u4e5f\u53ef\u4ee5\u652f\u63f4(supported)\u4ee5\u4e0b\u7684\u50b3\u7d71(legacy)\u5b57\u5143\u7de8\u78bc\u65b9\u5f0f(character encodings)<ul> <li><code>ascii</code>: \u50c5\u9069\u7528\u65bc7\u500b\u4f4d\u5143\u7d44(=&gt; \u4e5f\u5c31\u662f7-bit)\u7684ASCII\u7de8\u78bc\u683c\u5f0f\u7684\u8cc7\u6599(data)</li> <li>\u7576\u5c07\u5b57\u4e32(string)\u7de8\u78bc(encoding)\u70ba<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u6642,\u9019\u5c31\u76f8\u7576(equivalent)\u65bc\u662f\u4f7f\u7528(using)<code>latin1</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f</li> <li>\u7576\u5c07<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u89e3\u78bc(decoding)\u70ba\u5b57\u4e32(string)\u6642,\u4f7f\u7528<code>ascii</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u5c31\u6703\u53e6\u5916(additionally)\u5c07\u6bcf\u500b\u4f4d\u5143\u7d44(each byte)\u7684\u6700\u9ad8\u4f4d\u5143(highest bit)\u79fb\u52d5(unset),\u7136\u5f8c\u518d\u89e3\u78bc(decoding)\u70ba<code>latin1</code>\u7684\u7de8\u78bc\u683c\u5f0f</li> <li>\u901a\u5e38(Generally),\u6211\u5011\u6c92\u6709\u7406\u7531(no reason)\u6703\u9700\u8981\u4f7f\u7528<code>ascii</code>\u9019\u7a2e\u7de8\u78bc\u65b9\u5f0f,\u56e0\u70ba\u5df2\u7d93\u6709<code>utf-8</code>\u7de8\u78bc\u683c\u5f0f\u4e86(\u6216\u8005,\u5982\u679c\u5c0d\u5df2\u77e5\u6578\u64da(the data is known)\u7e3d\u662f\u50c5\u80fd\u4f7f\u7528<code>ASCII</code>\u7de8\u78bc\u683c\u5f0f(ASCII-only)\u7684\u8a71 or \u5728\u7de8\u78bc(<code>encode</code>)/\u89e3\u78bc(<code>decode</code>)\u6642,\u50c5\u80fd\u4f7f\u7528<code>ASCII</code>\u7de8\u78bc\u683c\u5f0f\u7684\u6587\u5b57(ASCII-only text)\u7684\u8a71,\u5247<code>latin1</code>\u5c31\u6703\u662f\u4e00\u500b\u66f4\u597d\u7684\u9078\u64c7(better choice))</li> <li>Node\u4e4b\u6240\u4ee5\u6703\u63d0\u4f9b(provided)<code>ASCII</code>\u9019\u7a2e\u7de8\u78bc\u683c\u5f0f\u7684\u539f\u56e0\u5c31\u53ea\u662f\u70ba\u4e86\u50b3\u7d71(legacy)\u7684\u76f8\u5bb9\u6027(compatibility)\u554f\u984c</li> <li><code>binary</code>: \u70ba<code>latin1</code>\u7684\u5225\u540d(alias)\u3002\u53ef\u5148\u53c3\u8003binary strings\u4f86\u4e86\u89e3\u66f4\u591a\u95dc\u65bc\u9019\u500b\u4e3b\u984c(topic)\u7684\u80cc\u666f\u77e5\u8b58(brackground)</li> <li>\u5176\u5be6<code>binary</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u7684\u547d\u540d(name)\u5f88\u5bb9\u6613\u88ab\u8aa4\u5c0e(misleading),\u662f\u56e0\u70ba\u6240\u6709\u9019\u88e1\u6240\u5217\u51fa(listed)\u7684\u7de8\u78bc\u65b9\u5f0f(encodings)\u90fd\u662f\u8981\u5c07\u5b57\u4e32(<code>string</code>)\u8207\u4e8c\u9032\u4f4d\u5143(<code>binary</code>)\u7684\u8cc7\u6599\u4e4b\u9593\u505a\u76f8\u4e92\u8f49\u63db(convert between)\u3002 \u800c\u5c0d\u65bc\u8981\u5c07\u5b57\u4e32(<code>string</code>)\u8207<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u7684\u8cc7\u6599\u4e4b\u9593\u505a\u76f8\u4e92\u8f49\u63db(converting between),\u901a\u5e38<code>utf-8</code>\u7de8\u78bc\u65b9\u5f0f\u6703\u662f\u6b63\u78ba\u7684\u9078\u64c7(right choice)</li> <li><code>ucs2</code>: \u70ba<code>utf16le</code>\u7684\u5225\u540d(alias)\u3002\u5728\u4ee5\u524d(used to),<code>UCS-2</code>\u9019\u7a2e\u7de8\u78bc\u65b9\u5f0f\u662f\u6307\u53c3\u8003(refer to)<code>UTF-16</code>\u7de8\u78bc\u65b9\u5f0f\u800c\u7522\u751f\u7684\u8b8a\u5f62(variant),\u4e3b\u8981\u662f\u70ba\u4e86\u652f\u63f4(support)\u90a3\u4e9b\u9ede\u4f4d(code points)\u8d85\u904e(larger than)<code>U+FFFF</code>\u7684\u5b57\u5143(characters)</li> <li>\u5728Node\u4e2d,\u9019\u4e9b\u9ede\u4f4d(code points)\u7686\u7e3d\u662f\u6709\u88ab\u652f\u63f4(always supported)\u4e86   JavaScript<pre><code>Buffer.from('1ag', 'hex');\n// Prints &lt;Buffer 1a&gt;, data truncated when first non-hexadecimal value\n// ('g') encountered.\nBuffer.from('1a7g', 'hex');\n// Prints &lt;Buffer 1a&gt;, data truncated when data ends in single digit ('7').\nBuffer.from('1634', 'hex');\n// Prints &lt;Buffer 16 34&gt;, all data represented.\n</code></pre></li> </ul> </li> <li>\u73fe\u4ee3\u5316\u7db2\u9801\u700f\u89bd\u5668\u7686\u6709\u9075\u5faaWHATWG Encoding Standard,\u4e5f\u5c31\u662f<code>latin1</code>\u3001<code>ISO-8859-1</code>\u7686\u70ba<code>win-1252</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u7684\u5225\u540d(alias)\u3002\u9019\u4e5f\u610f\u5473(means)\u8457\u7576\u57f7\u884c\u50cf\u662f<code>http.get()</code>\u65b9\u6cd5\u7684\u6642\u5019,\u5982\u679c\u56de\u50b3(returned)\u7684\u5b57\u5143\u7de8\u78bc\u683c\u5f0f(charset)\u70ba<code>WHATWG</code>\u898f\u683c(specification)\u4e2d\u5217\u51fa(listed)\u7684\u5176\u4e2d\u4e00\u7a2e\u6642,\u5f88\u6709\u53ef\u80fd(possible)\u5176\u5be6\u4f3a\u670d\u5668(server)\u5be6\u969b\u4e0a(actually)\u662f\u56de\u50b3(returned)\u4ee5<code>win-1252</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u6240\u7de8\u78bc\u904e\u5f8c\u7684\u8cc7\u6599(=&gt; \u4e5f\u5c31\u662f<code>win-1252</code>-encoded data),\u6240\u4ee5\u9019\u6642\u5019\u5982\u679c\u4f7f\u7528<code>latin1</code>\u9019\u500b\u7de8\u78bc\u65b9\u5f0f\u4f86\u89e3\u78bc(decode)\u5b57\u5143(characters)\u7684\u8a71,\u6703\u9020\u6210\u932f\u8aa4(incorrectly) <p><code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object) &amp; \u8fed\u4ee3 (Buffers and iteration)</p> </li> <li><code>Buffers</code>(\u7de9\u5b58)\u5be6\u4f8b(instances)\u662f\u80fd\u5920\u5229\u7528(using)<code>for...of</code>\u8a9e\u6cd5(syntax)\u4f86\u8fed\u4ee3(iterated over)\u7684       JavaScript<pre><code>const buf = Buffer.from([1, 2, 3]);\nfor (const b of buf) {\nconsole.log(b);\n}\n// Prints:\n//   1\n//   2\n//   3\n</code></pre></li> <li>\u6b64\u5916(Additionally),buf.values()\u3001buf.keys()\u3001buf.entries()\u65b9\u6cd5(methods)\u7686\u53ef\u4ee5\u88ab\u7528\u4f86(used to)\u5efa\u7acb(create)\u8fed\u4ee3(iterators) <p>Class</p> </li> <li>Buffer<ul> <li><code>Buffers</code>(\u7de9\u5b58)\u985e\u5225(class)\u662f\u4e00\u500b\u5168\u57df(global)\u7684\u578b\u5225(type)\u4ee5\u7528\u4f86\u66f4\u76f4\u63a5(directly)\u5730\u8655\u7406(dealing)\u4e8c\u9032\u4f4d\u5236\u4f4d\u5143(binary)\u7684\u8cc7\u6599(data)\u3002\u5b83\u80fd\u900f\u904e\u8a31\u591a\u7a2e\u65b9\u5f0f(in a variety of ways)\u4f86\u5efa\u69cb(constructed)\u51fa\u4f86</li> </ul> </li> <li> <p>Static method</p> <ul> <li>Buffer.alloc(size[, fill[, encoding]])</li> <li>args<ul> <li>size: (integer)</li> <li>\u6e34\u671b(desired)\u65b0(new)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u9577\u5ea6(length)\u662f\u591a\u5c11</li> <li>fill: (string) | (Buffer) | Unit8Array | integer</li> <li>\u8981\u9810\u5148\u586b\u9032(pre-fill)\u65b0(new)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u7684\u503c(value)</li> <li>\u9810\u8a2d\u503c: <code>0</code></li> <li>encoding: (string)</li> <li>\u5982\u679c<code>fill</code>\u53c3\u6578\u7684\u503c\u662f\u5b57\u4e32(string)\u578b\u5225\u7684\u8a71,\u90a3\u9ebc\u6b64<code>encoding</code>\u53c3\u6578\u7684\u503c\u5c31\u6703\u662f\u9019\u500b\u5b57\u4e32\u53c3\u6578\u7684\u7de8\u78bc\u683c\u5f0f(encoding)</li> <li>\u9810\u8a2d\u503c: <code>utf8</code></li> </ul> </li> <li>\u6703\u5206\u914d(allocates)\u4e00\u500b\u7b26\u5408<code>size</code>\u53c3\u6578\u503c\u6307\u5b9a\u5927\u5c0f\u7684\u65b0(new)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u3002\u5982\u679c<code>fill</code>\u53c3\u6578\u7684\u503c\u662f<code>undefined</code>\u7684\u8a71,\u5247<code>Buffer</code>\u7269\u4ef6\u7684\u503c\u5c07\u6703\u662f<code>0</code>(zero-filled)       JavaScript<pre><code>const buf = Buffer.alloc(5);\nconsole.log(buf);\n// Prints: &lt;Buffer 00 00 00 00 00&gt;\n</code></pre></li> <li>\u82e5<code>size</code>\u53c3\u6578\u7684\u503c\u6bd4buffer.constants.MAX_LENGTH\u5c6c\u6027\u7684\u503c\u9084\u8981\u5927(larger)\u6216\u662f<code>size</code>\u53c3\u6578\u7684\u503c\u6bd4<code>0</code>\u9084\u8981\u5c0f(smaller)\u7684\u8a71,\u5c31\u6703\u62cb\u51fa(thrown)ERR_INVALID_ARG_VALUE\u9019\u500b\u932f\u8aa4(<code>error</code>)<ul> <li>\u88dc\u5145: <code>buffer.constants.MAX_LENGTH</code>\u5c6c\u6027\u7684\u503c\u6703\u8996\u4f5c\u696d\u7cfb\u7d71(operating system)\u7684\u4f4d\u5143\u67b6\u69cb(architectures)\u800c\u5b9a,\u4f8b\u5982: <code>32-bit</code>\u7684\u4f5c\u696d\u7cfb\u7d71\u5927\u7d04\u5c31\u662f1GB\u5de6\u53f3; \u800c<code>64-bit</code>\u7684\u4f5c\u696d\u7cfb\u7d71\u5927\u7d04\u5c31\u662f2GB\u5de6\u53f3</li> </ul> </li> <li>\u82e5<code>fill</code>\u53c3\u6578\u7684\u503c\u6709\u7d66\u5b9a(specified)\u7684\u8a71,\u5247\u9019\u500b\u65b0\u88ab\u5206\u914d(allocated)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u5c31\u6703\u900f\u904e\u547c\u53eb(calling)buf.fill(fill)\u65b9\u6cd5(method)\u4f86\u521d\u59cb\u5316(initialized)       JavaScript<pre><code>const buf = Buffer.alloc(5, 'a');\nconsole.log(buf);\n// Prints: &lt;Buffer 61 61 61 61 61&gt;\n</code></pre></li> <li>\u82e5<code>fill</code>\u8207<code>encoding</code>\u53c3\u6578\u7684\u503c\u90fd\u6709\u7d66\u5b9a(specified)\u7684\u8a71,\u5247\u9019\u500b\u65b0\u88ab\u5206\u914d(allocated)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u5c31\u6703\u900f\u904e\u547c\u53eb(calling)buf.fill(fill, encoding)\u65b9\u6cd5(method)\u4f86\u521d\u59cb\u5316(initialized)       JavaScript<pre><code>const buf = Buffer.alloc(11, 'aGVsbG8gd29ybGQ=', 'base64');\nconsole.log(buf);\n// Prints: &lt;Buffer 68 65 6c 6c 6f 20 77 6f 72 6c 64&gt;\n</code></pre></li> <li>\u96d6\u7136\u547c\u53ebBuffer.alloc()\u65b9\u6cd5\u53ef\u9810\u898b(measurably)\u5730\u6703\u6bd4\u5b83\u7684\u66ff\u4ee3\u65b9\u6cd5(alternative)(=&gt; \u4e5f\u5c31\u662fBuffer.allocUnsafe()\u65b9\u6cd5)\u4f86\u5f97\u6162(slower),\u4f46\u662f<code>Buffer.alloc()</code>\u65b9\u6cd5\u80fd\u78ba\u4fdd(ensures)\u5176\u6240\u65b0(newly)\u5efa\u7acb(created)\u51fa\u4f86\u7684<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)\u7684\u5167\u5bb9(contents)\u5c07\u6c38\u9060\u4e0d\u6703(never)\u5305\u542b(contain)\u4e4b\u524d\u5206\u914d\u904e(previous allocations)\u7684\u654f\u611f\u6027\u8cc7\u6599(sensitive data),\u800c\u9019\u4e5f\u5305\u62ec(including)\u4e86\u90a3\u4e9b\u5c1a\u672a\u88ab\u5206\u914d(not have been allocated)\u7d66<code>Buffers</code>\u5be6\u4f8b(instance)\u7684\u8cc7\u6599(data)</li> <li>Buffer.allocUnsafe(size)</li> <li>args<ul> <li>size: (integer)</li> <li>\u6e34\u671b(desired)\u65b0(new)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u9577\u5ea6(length)\u662f\u591a\u5c11</li> </ul> </li> <li>\u6703\u5206\u914d(allocates)\u4e00\u500b\u7b26\u5408<code>size</code>\u53c3\u6578\u503c\u6307\u5b9a\u5927\u5c0f\u7684\u65b0(new)\u7684<code>Buffers</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u3002\u5982\u679c<code>fill</code>\u53c3\u6578\u7684\u503c\u662f<code>undefined</code>\u7684\u8a71,\u5247<code>Buffer</code>\u7269\u4ef6\u7684\u503c\u5c07\u6703\u662f<code>0</code>(zero-filled)</li> <li>\u900f\u904e<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5(method)\u6240\u5efa\u7acb(created)\u7684<code>Buffers</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)\u7684\u57fa\u672c\u8a18\u61b6\u9ad4(underlying memory)\u5c07\u4e0d\u6703\u88ab\u521d\u59cb\u5316(initialized)\u3002\u800c\u9019\u500b\u65b0\u5efa\u7acb\u51fa\u4f86\u7684<code>Buffer</code>\u5be6\u4f8b\u7684\u5167\u5bb9(contents)\u5c07\u6703\u662f\u672a\u77e5(unknown)\u7684,\u4e26\u4e14\u53ef\u80fd(may)\u6703\u5305\u542b(contain)\u654f\u611f\u6027\u8cc7\u6599(sensitive data)<ul> <li>\u53ef\u4f7f\u7528<code>Buffer.alloc()</code>\u65b9\u6cd5\u4f86\u5efa\u7acb\u4e00\u500b\u521d\u59cb\u5316(initialize)\u7684<code>Buffer</code>\u5be6\u4f8b(instance),\u4e26\u9810\u5148\u586b\u9032\u503c\u70ba<code>0</code>(zeros)   JavaScript<pre><code>const buf = Buffer.allocUnsafe(10);\nconsole.log(buf);\n// Prints (contents may vary): &lt;Buffer a0 8b 28 3f 01 00 00 00 50 32&gt;\nbuf.fill(0);\nconsole.log(buf);\n// Prints: &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;\n</code></pre></li> <li>\u5982\u679c<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5(method)\u4e2d\u7684<code>size</code>\u53c3\u6578\u7684\u503c,\u82e5\u4e0d\u662f\u6578\u5b57(number)\u7684\u8a71\u5c31\u6703\u62cb\u51fa(thrown)<code>TypeError</code>\u932f\u8aa4(error)</li> </ul> </li> <li><code>Buffer</code>(\u7de9\u5b58)\u6a21\u7d44(module)\u6703\u5728Buffer.poolsize())\u4e4b\u4e2d\u7684\u4e00\u500b\u5167\u90e8(internal)<code>Buffer</code>\u5be6\u4f8b(instance)\u88e1\u9762,\u9810\u5148\u5206\u914d(pre-allocates)\u597d\u4e00\u500b\u6307\u5b9a\u5927\u5c0f(<code>size</code>)\u7684\u5340\u584a\u3002\u800c<code>Buffer.poolsize()</code>\u985e\u5225(class)\u662f\u7528\u4f86(used as)\u63d0\u4f9bBuffer.allocUnsafe()\u65b9\u6cd5\b\u3001Buffer.from(array)\u65b9\u6cd5\u3001Buffer.concat()\u65b9\u6cd5,\u4ee5\u53ca\u53ea\u6709(only)\u7576<code>size</code>\u9019\u500b\u53c3\u6578\u7684\u503c\u5c0f\u65bc(less than) or \u7b49\u65bc(equal to) <code>Buffer.poolSize &gt;&gt; 1</code>(=&gt; \u4e5f\u5c31\u662fBuffer.poolSize()\u9664\u4ee5(divided)2\u5f8c\u7684\u6700\u5927\u6574\u6578\u503c(floor))\u7684\u6642\u5019,\u624d\u6703\u7528\u5230\u7684\u5df2\u7d93\u88ab\u68c4\u7f6e\u7684<code>new Buffer(size)</code>\u5efa\u69cb\u5b50(constructor)\u4f86\u5728\u5171\u7528\u6c60(pool)\u4e4b\u4e2d\u5feb\u901f\u5206\u914d(fast allocation)\u8a18\u61b6\u9ad4\u4f4d\u7f6e\u7d66\u65b0(new)\u7684<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)</li> <li>\u5229\u7528\u6b64\u9810\u5206\u914d(pre-allocated)\u597d\u7684\u5167\u90e8\u5171\u7528\u6c60\u4e2d\u7684\u8a18\u61b6\u9ad4(internal memory pool)\u662f\u5728\u547c\u53eb(calling)<code>Buffer.alloc(size, fill)</code>\u65b9\u6cd5\u3001<code>Buffer.allocUnsafe(size).fill(fill)</code>\u65b9\u6cd5\u4e4b\u9593\u7684\u4e00\u500b\u95dc\u9375\u7684\u5340\u5225<ul> <li>\u7279\u5225\u7684\u662f(Specifically),<code>Buffer.alloc(size, fill)</code>\u65b9\u6cd5(method)\u6c38\u9060\u4e0d\u6703(never)\u7528\u5230(use)\u5167\u90e8(internal)<code>Buffer</code>(\u7de9\u5b58)\u5171\u7528\u6c60(pool)\u4e2d\u7684\u8a18\u61b6\u9ad4; \u800c<code>Buffer.allocUnsafe(size).fill(fill)</code>\u65b9\u6cd5\u5247\u6703\u5728<code>size</code>\u53c3\u6578\u7684\u503c\u5c0f\u65bc or \u7b49\u65bc <code>Buffer.poolSize</code>\u7684\u4e00\u534a(half)\u6642,\u5c31\u6703\u7528\u5230\u5167\u90e8<code>Buffer</code>(\u7de9\u5b58)\u5171\u7528\u6c60(pool)\u4e2d\u7684\u8a18\u61b6\u9ad4\u3002\u96d6\u7136\u9019\u500b\u5dee\u7570\u662f\u975e\u5e38\u7d30\u5fae(subtle)\u7684,\u4f46\u5176\u5be6\u5f88\u91cd\u8981(important)\u7684,\u5c24\u5176\u662f\u7576\u6211\u5011\u7684\u61c9\u7528\u7a0b\u5f0f(application)\u8981\u6c42(requires)\u984d\u5916(additional)\u7684\u6548\u80fd(performance)\u6642,\u9019\u6642\u5019\u5c31\u6b63\u662f<code>Buffer.allocUnsafe()</code>\u65b9\u6cd5(method)\u6240\u80fd\u63d0\u4f9b(provides)\u7684\u4e86</li> </ul> </li> <li>Buffer.concat(list[, totalLength])</li> <li>args<ul> <li>list: (Buffer) | (Unit8Array)</li> <li>totalLength: (integer)</li> <li>\u4e32\u9023\u5728<code>list</code>\u53c3\u6578\u503c\u4e2d\u7684\u6240\u6709<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)\u5f8c\u7684\u7e3d\u9577\u5ea6</li> <li>Returns: (Buffer)</li> </ul> </li> <li>\u6b64\u65b9\u6cd5\u6703\u56de\u50b3\u5df2\u4e32\u9023<code>list</code>\u53c3\u6578\u503c\u4e2d\u7684\u6240\u6709<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)\u904e\u5f8c\u7684\u7684\u4e00\u500b\u65b0\u7684<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6<ul> <li>\u5982\u679c<code>list</code>\u53c3\u6578\u503c\u4e2d,\u6c92\u6709\u4efb\u4f55\u6771\u897f(item); \u6216\u662f<code>totalLength</code>\u53c3\u6578\u503c\u70ba<code>0</code>\u7684\u8a71,\u9019\u5169\u7a2e\u60c5\u6cc1\u90fd\u6703\u56de\u50b3(returned)\u4e00\u500b\u65b0(new)\u7684\u96f6\u9577\u5ea6(zero-length)\u7684<code>Buffer</code>\u7269\u4ef6</li> <li>\u82e5\u6c92\u6709\u63d0\u4f9b(provided)<code>totalLength</code>\u9019\u500b\u53c3\u6578\u503c\u7684\u8a71,\u5c31\u6703\u900f\u904e<code>list</code>\u4e2d\u7684<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b\u5011(instances)\u4f86\u8a08\u7b97(calculated)\u5b83\u5011\u7684\u52a0\u7e3d(adding)\u5f8c\u7684\u7e3d\u9577\u5ea6(their lengths)</li> <li>\u82e5\u6709\u63d0\u4f9b<code>totalLength</code>\u9019\u500b\u53c3\u6578\u503c\u7684\u8a71,\u5c31\u6703\u5f37\u8feb(coerced)\u8b8a\u6210\u4e00\u500b\u672a\u6307\u6d3e(unsigned)\u7684\u6574\u6578(integer)\u3002\u5982\u679c\u5c07<code>list</code>\u5167\u7684\u6240\u6709Buffer<code>(\u7de9\u5b58)</code>\u5be6\u4f8b\u5011(instances)\u5408\u4f75(combined)\u5f8c\u5df2\u8d85\u904e(exceeds)<code>totalLength</code>\u53c3\u6578\u503c\u7684\u8a71,\u90a3<code>Buffer.concat()</code>\u65b9\u6cd5(method)\u6240\u56de\u50b3\u7684<code>Buffer</code>\u5be6\u4f8b\u5c31\u6703\u88ab\u622a\u65b7(truncated)\u5230\u7b26\u5408<code>totalLength</code>\u53c3\u6578\u503c\u6240\u898f\u7bc4\u7684\u9577\u5ea6\u9650\u5236 JavaScript<pre><code>// Create a single `Buffer` from a list of three `Buffer` instances.\nconst buf1 = Buffer.alloc(10);\nconst buf2 = Buffer.alloc(14);\nconst buf3 = Buffer.alloc(18);\nconst totalLength = buf1.length + buf2.length + buf3.length;\nconsole.log(totalLength);\n// Prints: 42\nconst bufA = Buffer.concat([buf1, buf2, buf3], totalLength);\nconsole.log(bufA);\n// Prints: &lt;Buffer 00 00 00 00 ...&gt;\nconsole.log(bufA.length);\n// Prints: 42\n</code></pre></li> </ul> </li> <li><code>Buffer.concat()</code>\u65b9\u6cd5(method)\u4e5f\u53ef\u4ee5\u50cfBuffer.allocUnsafe()\u65b9\u6cd5\u4e00\u6a23\u80fd\u4f7f\u7528(use)\u5167\u90e8(internal)<code>Buffer</code>(\u7de9\u5b58)\u5171\u7528\u6c60(pool)</li> <li>Buffer.from(array)</li> <li>args<ul> <li>array: (integer[])</li> </ul> </li> <li>\u6b64\u65b9\u6cd5\u6703\u5229\u7528<code>array</code>\u53c3\u6578\u503c\u7684\u4f4d\u5143\u7d44(bytes)(=&gt; \u5fc5\u9808\u5728<code>0</code>~<code>255</code>\u7684\u7bc4\u570d\u5167)\u4f86\u5206\u914d(allocates)\u4e00\u500b\u65b0(new)\u7684<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b       JavaScript<pre><code>// Creates a new Buffer containing the UTF-8 bytes of the string 'buffer'.\nconst buf = Buffer.from([0x62, 0x75, 0x66, 0x66, 0x65, 0x72]);\n</code></pre></li> <li>\u82e5<code>array</code>\u53c3\u6578\u7684\u503c\u4e0d\u662f\u4e00\u500bJavascript\u7684<code>Array</code>\u578b\u5225 or \u53e6\u4e00\u500b(another)\u9069\u7528(appropriate)\u65bc<code>Buffer.from()</code>\u65b9\u6cd5\u7684\u8b8a\u5f62(variants)\u7684\u578b\u5225(type)\u7684\u8a71,\u5c31\u6703\u62cb\u51fa(thrown)\u4e00\u500b<code>TypeError</code>\u932f\u8aa4(error)</li> <li><code>Buffer.from(array)</code>\u65b9\u6cd5(method)\u8207Buffer.from(string)\u65b9\u6cd5(method)\u4e5f\u53ef\u4ee5\u50cfBuffer.allocUnsafe()\u65b9\u6cd5\u4e00\u6a23\u80fd\u4f7f\u7528(use)\u5167\u90e8(internal)<code>Buffer</code>(\u7de9\u5b58)\u5171\u7528\u6c60(pool)</li> <li>Buffer.from(buffer)</li> <li>args<ul> <li>buffer: (Buffer) | (Unit8Array)</li> <li>\u6307\u5b9a\u8981\u5f9e\u5df2\u7d93\u5b58\u5728(existing)\u7684\u54ea\u500b<code>Buffer</code>\u7269\u4ef6 or <code>Unit8Array</code>\u985e\u5225\u4f86\u8907\u88fd\u8cc7\u6599(copy data)</li> </ul> </li> <li>\u6b64\u65b9\u6cd5(method)\u6703\u5c07\u50b3\u905e(passed)\u7d66\u9019\u500b\u65b9\u6cd5\u7684<code>buffer</code>\u53c3\u6578\u8907\u88fd(copies)\u4e00\u4efd\u8cc7\u6599(data)\u7d66\u65b0(new)\u7684<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)       JavaScript<pre><code>const buf1 = Buffer.from('buffer');\nconst buf2 = Buffer.from(buf1);\nbuf1[0] = 0x61;\nconsole.log(buf1.toString());\n// Prints: auffer\nconsole.log(buf2.toString());\n// Prints: buffer\n</code></pre></li> <li>\u82e5<code>Buffer.from(buffer)</code>\u65b9\u6cd5(method)\u7684<code>buffer</code>\u53c3\u6578\u7684\u503c\u4e0d\u662f\u4e00\u500bJavascript\u7684<code>Buffer</code>\u7269\u4ef6 or \u53e6\u4e00\u500b(another)\u9069\u7528(appropriate)\u65bc<code>Buffer.from()</code>\u65b9\u6cd5\u7684\u8b8a\u5f62(variants)\u7684\u578b\u5225(type)\u7684\u8a71,\u5c31\u6703\u62cb\u51fa(thrown)\u4e00\u500b<code>TypeError</code>\u932f\u8aa4(error)</li> <li>Buffer.from(string[, encoding])</li> <li>args<ul> <li>string: (string)</li> <li>\u8981\u7de8\u78bc\u70ba<code>Buffer</code>\u7269\u4ef6\u7684\u5b57\u4e32(string)</li> <li>encoding: (string)</li> <li>\u53ef\u6307\u5b9a\u8981\u4f7f\u7528\u54ea\u7a2e\u7de8\u78bc\u683c\u5f0f(encoding)\u4f86\u7de8\u78bc\u5b57\u4e32(string)</li> <li>\u9810\u8a2d\u503c: <code>utf8</code></li> </ul> </li> <li>\u6b64\u65b9\u6cd5\u6703\u5efa\u7acb\u4e00\u500b\u65b0\u7684<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6,\u4e26\u4e14\u9019\u500b<code>Buffer</code>\u7269\u4ef6\u7684\u5167\u5bb9\u6703\u5305\u62ec(containing)\u5b57\u4e32(<code>string</code>)\u53c3\u6578\u7684\u503c<ul> <li>\u800c\u6b64\u65b9\u6cd5(method)\u7684<code>encoding</code>\u53c3\u6578\u662f\u7528\u4f86\u78ba\u8a8d(identifies)\u6211\u5011\u5c07\u8981\u4f7f\u7528(used)\u54ea\u7a2e\u7de8\u78bc\u683c\u5f0f(character encoding)\u4f86\u5c07\u5b57\u4e32(string)\u8f49\u63db(converting)\u70ba\u4f4d\u5143\u7d44(<code>bytes</code>)   JavaScript<pre><code>const buf1 = Buffer.from('this is a t\u00e9st');\nconst buf2 = Buffer.from('7468697320697320612074c3a97374', 'hex');\nconsole.log(buf1.toString());\n// Prints: this is a t\u00e9st\nconsole.log(buf2.toString());\n// Prints: this is a t\u00e9st\nconsole.log(buf1.toString('latin1'));\n// Prints: this is a t\u00c3\u00a9st\n</code></pre></li> </ul> </li> <li>\u82e5<code>Buffer.from(string)</code>\u65b9\u6cd5(method)\u7684<code>string</code>\u53c3\u6578\u7684\u503c\u4e0d\u662f\u5c6c\u65bcJavascript\u7684<code>string</code>\u578b\u5225 or \u53e6\u4e00\u500b(another)\u9069\u7528(appropriate)\u65bc<code>Buffer.from()</code>\u65b9\u6cd5\u7684\u8b8a\u5f62(variants)\u7684\u578b\u5225(type)\u7684\u8a71,\u5c31\u6703\u62cb\u51fa(thrown)\u4e00\u500b<code>TypeError</code>\u932f\u8aa4(error)</li> </ul> </li> <li> <p>method</p> <ul> <li>buf.toJSON()</li> <li>Returns: (object)</li> <li>\u6b64\u65b9\u6cd5(method)\u6703\u56de\u50b3(returns)\u4e00\u500b<code>JSON</code>\u7269\u4ef6\u4f86\u4ee3\u8868(representation)\u7576\u8981\u5c07<code>Buffer</code>(\u7de9\u5b58)\u5be6\u4f8b(instance)\u8f49\u63db\u70ba\u5b57\u4e32(stringifying)\u6642,JSON.stringify()\u65b9\u6cd5\u6709\u4e0d\u660e\u78ba\u5730(implicitly)\u547c\u53eb<code>buf.JSON()</code>\u65b9\u6cd5</li> <li><code>Buffer.from()</code>\u65b9\u6cd5(method)\u80fd\u63a5\u53d7(accepts)\u5f9e<code>buf.JSON()</code>\u65b9\u6cd5\u6240\u56de\u50b3(returned)\u51fa\u4f86\u7684<code>JSON</code>\u7269\u4ef6(objects)\u7684\u683c\u5f0f(format)</li> <li>\u5c24\u5176\u662f(In particular),<code>buf.toJSON()</code>\u65b9\u6cd5(method)\u57f7\u884c\u8d77\u4f86\u5c31\u6703\u50cf(works like)\u662f<code>Buffer.from(buf)</code>\u65b9\u6cd5\u4e00\u6a23     JavaScript<pre><code>const buf = Buffer.from([0x1, 0x2, 0x3, 0x4, 0x5]);\nconst json = JSON.stringify(buf);\nconsole.log(json);\n// Prints: {\"type\":\"Buffer\",\"data\":[1,2,3,4,5]}\nconst copy = JSON.parse(json, (key, value) =&gt; {\nreturn value &amp;&amp; value.type === 'Buffer' ?\nBuffer.from(value) :\nvalue;\n});\nconsole.log(copy);\n// Prints: &lt;Buffer 01 02 03 04 05&gt;\n</code></pre></li> <li>buf.toString([encoding[, start[, end]]])</li> <li>args<ul> <li>encoding: (string)</li> <li>\u53ef\u6307\u5b9a\u8981\u4f7f\u7528\u54ea\u7a2e\u7de8\u78bc\u683c\u5f0f(encoding)\u4f86\u7de8\u78bc\u5b57\u4e32(string)</li> <li>\u9810\u8a2d\u503c: <code>utf8</code></li> <li>start: (integer)</li> <li>\u53ef\u6307\u5b9a\u8981\u5f9e\u504f\u79fb(offset)\u591a\u5c11\u4f4d\u5143\u7d44(byte)\u5f8c\u624d\u958b\u59cb(start)\u89e3\u78bc(decoding)</li> <li>\u9810\u8a2d\u503c: <code>0</code></li> <li>end: (integer)</li> <li>\u53ef\u6307\u5b9a\u8981\u5f9e\u504f\u79fb(offset)\u591a\u5c11\u4f4d\u5143\u7d44(byte)\u5f8c\u624d\u505c\u6b62(stop)\u89e3\u78bc(decoding)(=&gt; \u4e5f\u5c31\u662f\u4e0d\u8981\u5305\u542b\u7684(not inclusive))</li> <li>\u9810\u8a2d\u503c: buf.length</li> </ul> </li> <li>\u6b64\u65b9\u6cd5(method)\u6703\u6839\u64da(according)\u6307\u5b9a(specified)\u7684\u7de8\u78bc\u65b9\u5f0f(character encoding)\u4f86\u89e3\u78bc(decodes)<code>buf</code>\u7269\u4ef6(\u4e5f\u5c31\u662f=&gt; <code>encoding</code>\u7684\u53c3\u6578\u503c)<ul> <li>\u800c<code>start</code>\u8207<code>end</code>\u53c3\u6578\u53ef\u4ee5\u50c5\u5728\u9700\u8981\u89e3\u78bc(decode only)<code>buf</code>\u7269\u4ef6\u7684\u5b50\u96c6(subset)\u6642\u624d\u50b3\u905e(passed)\u5230<code>buf.toString()</code>\u65b9\u6cd5(method)\u88e1\u9762,\u4f5c\u70ba\u53c3\u6578</li> <li>\u82e5<code>encoding</code>\u53c3\u6578\u7684\u503c\u662f<code>utf8</code>,\u4e26\u4e14\u8f38\u5165(input)\u7684\u4f4d\u5143\u7d44\u5e8f\u5217(a byte sequence)\u4e0d\u662f\u6709\u6548\u7684(not valid)<code>UTF-8</code>\u683c\u5f0f\u7684\u8a71,\u90a3\u9ebc(then)\u9019\u4e9b\u6bcf\u4e00\u500b(each)\u7121\u6548(invalid)\u7684\u4f4d\u5143\u7d44(byte)\u5c31\u6703\u88ab<code>U+FFFD</code>\u9019\u500b\u66ff\u4ee3\u5b57\u5143(replacement character)\u4f86\u53d6\u4ee3(replaced)</li> </ul> </li> <li>\u5b57\u4e32\u5be6\u4f8b(string instance)(=&gt; \u5fc5\u9808\u662f\u4ee5<code>UTF-16</code>\u4ee3\u78bc(code)\u70ba\u55ae\u4f4d(unit))\u7684\u6700\u5927\u9577\u5ea6(maximum length)\u5fc5\u9808\u662f\u7b26\u5408buffer.constants.MAX_STRING_LENGTH\u5c6c\u6027\u503c\u7684\u9650\u5236     JavaScript<pre><code>const buf1 = Buffer.allocUnsafe(26);\nfor (let i = 0; i &lt; 26; i++) {\n// 97 is the decimal ASCII value for 'a'.\nbuf1[i] = i + 97;\n}\nconsole.log(buf1.toString('utf8'));\n// Prints: abcdefghijklmnopqrstuvwxyz\nconsole.log(buf1.toString('utf8', 0, 5));\n// Prints: abcde\nconst buf2 = Buffer.from('t\u00e9st');\nconsole.log(buf2.toString('hex'));\n// Prints: 74c3a97374\nconsole.log(buf2.toString('utf8', 0, 3));\n// Prints: t\u00e9\nconsole.log(buf2.toString(undefined, 0, 3));\n// Prints: t\u00e9\n</code></pre></li> <li>buf.write(string[, offset[, length]][, encoding])</li> <li>args<ul> <li>string: (string)</li> <li>\u6307\u5b9a\u8981\u5beb\u5165(write)\u5230<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u88e1\u9762\u7684\u5b57\u4e32(<code>string</code>)</li> <li>offset: (integer)</li> <li>\u8981\u5148\u8df3\u904e(skip)\u591a\u5c11\u6578\u91cf\u7684\u4f4d\u5143\u7d44(number of bytes)\u5f8c\u624d\u958b\u59cb(starting)\u5c07\u6307\u5b9a\u7684\u5b57\u4e32(<code>string</code>)\u5beb\u5165(write)\u5230<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u4e2d</li> <li>length: (integer)</li> <li>\u53ef\u9650\u5236\u6700\u5927(maximum)\u80fd\u5beb\u5165(write)\u591a\u5c11\u6578\u91cf\u7684\u4f4d\u5143\u7d44(number of bytes)(\u4e26\u4e14\u9019\u500b\u6307\u5b9a\u5927\u5c0f\u7684\u6578\u503c\"\u4e0d\u80fd\"\u8d85\u904e(not exceed)<code>buf.length - offset</code>\u7684\u503c)</li> <li>\u9810\u8a2d\u503c: <code>buf.length - offset</code></li> <li>encoding: (string)</li> <li>\u53ef\u6307\u5b9a\u8981\u7528\u54ea\u7a2e\u5b57\u5143\u7de8\u78bc\u683c\u5f0f(character encoding)\u4f86\u5c07<code>string</code>\u7de8\u78bc(encoding)\u70ba<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)</li> <li>Returns: (integer)</li> <li>\u6b64\u65b9\u6cd5(method)\u6703\u56de\u50b3\u6709\u591a\u5c11\u6578\u91cf\u7684\u4f4d\u5143\u7d44(number of bytes)\u5df2\u7d93\u88ab\u5beb\u5165(written)\u4e86</li> </ul> </li> <li>\u6b64\u65b9\u6cd5(method)\u6703\u5c07<code>string</code>(\u5b57\u4e32)\u5beb\u5165\u5230<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u4e2d\b,\u4e26\u6839\u64da(according to)<code>encoding</code>(\u5b57\u5143\u7de8\u78bc\u683c\u5f0f)\u4f86\u7de8\u78bc(encoding)<ul> <li>\u6b64\u65b9\u6cd5(method)\u7684<code>length</code>\u53c3\u6578(parameter)\u503c\u662f\u7528\u4f86\u4ee3\u8868\u8981\u5beb\u5165(write)\u7684<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u6703\u7528\u6389\u591a\u5c11\u6578\u91cf\u7684\u4f4d\u5143\u7d44(number of bytes)\u3002\u82e5<code>buf</code>\u7269\u4ef6(object)\u6c92\u6709\u5305\u542b(contain)\u8db3\u5920(enough)\u7684\u7a7a\u9593(space)\u80fd\u586b\u5165\u6574\u500b(entire)\u6307\u5b9a\u7684<code>string</code>(\u5b57\u4e32)\u7684\u8a71,\u90a3\u9ebc\u5c31\u53ea\u6703\u6709\u90e8\u5206(part)\u7684\u6307\u5b9a\u7684<code>string</code>(\u5b57\u4e32)\u6703\u88ab\u5beb\u5165(written)\u3002\u7136\u800c(However),\u9019\u6a23\u5c31\u4e0d\u6703\u5c07\u90a3\u4e9b\u90e8\u5206(partially)\u7684\u7de8\u78bc\u904e\u5f8c\u7684\u5b57\u5143(encoded characters)\u4e86\u5beb\u5165\u5230<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object)\u4e2d\u4e86   JavaScript<pre><code>const buf = Buffer.alloc(256);\nconst len = buf.write('\\u00bd + \\u00bc = \\u00be', 0);\nconsole.log(`${len} bytes: ${buf.toString('utf8', 0, len)}`);\n// Prints: 12 bytes: \u00bd + \u00bc = \u00be\nconst buffer = Buffer.alloc(10);\nconst length = buffer.write('abcd', 8);\nconsole.log(`${length} bytes: ${buffer.toString('utf8', 8, 10)}`);\n// Prints: 2 bytes : ab\n</code></pre></li> </ul> </li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#stream","title":"Stream","text":"<ul> <li><code>stream</code>(\u4e32\u6d41)\u662f\u5728Node\u4e2d\u7528\u4f86\u8655\u7406(working with)\u6578\u64da\u4e32\u6d41(streaming data)\u7684\u62bd\u8c61(abstract)\u4ecb\u9762(interface)</li> <li>Node\u5167\u5efa\u7684<code>stream</code>(\u4e32\u6d41)\u6a21\u7d44(module)\u5c31\u662f\u7528\u4f86\u63d0\u4f9bAPI\u4f86\u5be6\u4f5c(implementing)<code>stream</code></li> <li>Node\u6709\u63d0\u4f9b\u8a31\u591a\u7684<code>stream</code>(\u4e32\u6d41)\u7269\u4ef6(objects)\u3002\u8209\u4f8b\u4f86\u8aaa,\u4ee5\u4e0b2\u7a2e\u90fd\u7b97\u662f<code>stream</code>\u5be6\u4f8b(instances)</li> <li>\u5f80\u4f3a\u670d\u5668\u7aef\u767c\u9001\u7684\u8acb\u6c42(a request to an HTTP server)</li> <li>\u9023\u63a5(connected)\u5230\u6a19\u6e96\u8f38\u51fa(<code>stdout</code>)\u7684\u4e32\u6d41(process.stdout)</li> <li><code>stream</code>(\u4e32\u6d41)\u662f\u53ef\u8b80\u53d6\u7684(readable) &amp; \u53ef\u5beb\u5165\u7684(writable)</li> <li>\u6240\u6709\u7684<code>stream</code>(\u4e32\u6d41)\u90fd\u662fEventEmitter\u7684\u5be6\u4f8b(instances)</li> <li>\u5982\u679c\u60f3\u8981\u5b58\u53d6(access)<code>stream</code>(\u4e32\u6d41)\u6a21\u7d44(module)\u7684\u8a71,\u80fd\u900f\u904e\u4ee5\u4e0b\u7bc4\u4f8b\u7a0b\u5f0f\u78bc     JavaScript<pre><code>const stream = require('stream');\n</code></pre></li> <li><code>stream</code>(\u4e32\u6d41)\u6a21\u7d44(module)\u5c0d\u65bc\u60f3\u8981\u5efa\u7acb\u65b0\u7684\u4e32\u6d41\u5be6\u4f8b\u578b\u5225\u7684\u8a71\u662f\u975e\u5e38\u6709\u7528\u7684</li> <li>\u901a\u5e38\u4e0d\u9700\u8981(not necessary)\u5229\u7528(use)<code>stream</code>(\u4e32\u6d41)\u6a21\u7d44(module)\u4f86\u6d88\u5316(consume)<code>stream</code>(\u4e32\u6d41) <p>\u6b64\u6587\u4ef6\u7684\u7de8\u6392 (Organization of this document)</p> </li> <li>\u6b64\u6587\u4ef6(document)\u5305\u542b(contains)\u4e862\u500b\u4e3b\u8981(primary)\u7684\u90e8\u5206(sections)\u4ee5\u53ca\u7b2c3\u90e8\u5206\u70ba\u8a3b\u89e3(notes)<ul> <li>\u7b2c1\u500b\u90e8\u5206(section)\u662f\u5728\u8aaa\u660e(explains)\u8981\u5982\u4f55\u5728\u4e00\u500b\u61c9\u7528\u7a0b\u5f0f(application)\u4e2d(within)\u4f7f\u7528(use)\u5df2\u7d93\u5b58\u5728(existing)\u7684<code>streams</code>(\u4e32\u6d41)</li> <li>\u7b2c2\u90e8\u5206(section)\u662f\u5728\u8aaa\u660e(explains)\u8a72\u5982\u4f55\u5efa\u7acb(create)\u65b0\u985e\u578b(new types)\u7684<code>streams</code>(\u4e32\u6d41) <p><code>Streams</code>(\u4e32\u6d41)\u7684\u985e\u578b (Types of streams)</p> </li> </ul> </li> <li>\u5728Node\u4e2d,\u6703\u67094\u7a2e\u57fa\u790e\u7684<code>streams</code>(\u4e32\u6d41)\u7684\u985e\u578b(types)<ul> <li>Writable: \u53ef\u4ee5\u5411\u5176\u5beb\u5165(written)\u6578\u64da(data)\u7684<code>streams</code>(\u4e32\u6d41)</li> <li>\u4f8b: fs.createWriteStream()</li> <li>Readable: \u53ef\u4ee5\u5f9e\u5176\u4e4b\u4e2d\u8b80\u53d6(read)\u6578\u64da(data)\u7684<code>streams</code>(\u4e32\u6d41)</li> <li>\u4f8b: fs.createReadStream()</li> <li>Duplex: \u540c\u6642\u53ef\u4ee5\u5beb\u5165(Writable) &amp; \u8b80\u53d6(Readable)\u7684<code>streams</code>(\u4e32\u6d41)</li> <li>\u4f8b: net.Socket</li> <li>Transaform: \u5c31\u662f\u4e00\u7a2e\u80fd\u5728\u5beb\u5165(written) or \u8b80\u53d6(read)\u6642,\u53ef\u4ee5\u4fee\u6539(modify)\u6216\u662f\u8f49\u63db(transform)\u7684<code>streams</code>(\u4e32\u6d41)</li> <li>\u4f8b: zlib.createDeflate()</li> </ul> </li> <li>\u6b64\u5916(Additionally),<code>stream</code>(\u4e32\u6d41)\u6a21\u7d44(module)\u5305\u62ec(includes)\u4e86\u4e00\u4e9b\u5be6\u7528(utility)\u7684\u529f\u80fd(functions),\u50cf\u662f\u4ee5\u4e0b\u9019\u5e7e\u7a2e<ul> <li>stream.pipeline()</li> <li>stream.finished()</li> <li>stream.Readable.from()</li> <li>stream.addAbortSignal()</li> </ul> </li> <li> <p><code>Stream</code>(\u4e32\u6d41)\u7684<code>Promise</code>API (Streams Promises API)</p> <ul> <li><code>stream</code>/<code>promise</code>API\u6703\u63d0\u4f9b(provides)\u4e00\u500b\u80fd\u56de\u50b3(return)<code>Promise</code>\u7269\u4ef6(objects)\u800c\u4e0d\u662f(rather than)\u4f7f\u7528\u56de\u547c\u51fd\u5f0f(callbacks)\u7684\u4e00\u7d44(set)\u975e\u540c\u6b65(asynchronous)\u5be6\u7528\u529f\u80fd(utility functions)\u7684<code>stream</code>(\u4e32\u6d41)</li> <li>\u9019\u7d44<code>Promsie</code>API\u80fd\u900f\u904e(via)\u4ee5\u4e0b2\u7a2e\u65b9\u5f0f\u4f86\u4f7f\u7528(accessible)   JavaScript<pre><code>require('stream/promises')\n</code></pre> JavaScript<pre><code>require('stream').promises.\n</code></pre></li> </ul> </li> <li> <p>\u7269\u4ef6\u6a21\u5f0f (Object mode)</p> <ul> <li>\u6240\u6709\u900f\u904eNode\u7684APIs\u64cd\u4f5c(operate)\u4e0b,\u6240\u5efa\u7acb(created)\u7684<code>streams</code>(\u4e32\u6d41)\u90fd\u50c5(exclusively)\u662f\u5b57\u4e32(strings)\u3001<code>Buffer</code>(\u7de9\u5b58)\u3001\u6216\u662f<code>Unit8Array</code>\u7269\u4ef6(objects)</li> <li>\u7136\u800c(however),\u8981\u5229\u7528\u5176\u5b83Javascript\u7684\u503c(values)\u4f86\u5be6\u73fe(implementations)<code>stream</code>(\u4e32\u6d41)\u662f\u6709\u53ef\u80fd(possible)\u7684(=&gt; \u4f46\u662f\u4e0d\u5305\u542b<code>null</code>,\u56e0\u70ba<code>null</code>\u5728<code>streams</code>(\u4e32\u6d41)\u4e2d\u662f\u6709\u5176\u5b83\u7279\u6b8a\u7528\u9014(special purpose)\u7684),\u800c\u4ee5\u4e0a\u9019\u7a2e\u60c5\u6cc1\u7684<code>stream</code>(\u4e32\u6d41)\u5c31\u6703\u88ab\u8996\u70ba(considered to)\u4ee5\"\u7269\u4ef6\u6a21\u5f0f(object mode)\"\u4f86\u64cd\u4f5c(operate)</li> </ul> </li> <li> <p>\u7de9\u5b58 (Buffering)</p> <ul> <li>Writable\u8207Readable<code>streams</code>(\u4e32\u6d41)\u90fd\u53ef\u4ee5\u5c07\u8cc7\u6599\u5132\u5b58(store data)\u5728\u5167\u90e8(internal)<code>buffer</code>(\u7de9\u5b58)\u4e2d</li> <li>\u53ef\u80fd(potentially)\u7de9\u5b58(buffered)\u7684\u8cc7\u6599\u91cf(data)\u662f\u53d6\u6c7a\u65bc(depends on)\u50b3\u5165(passed into)\u5230<code>stream</code>(\u4e32\u6d41)\u5efa\u69cb\u5b50(constructor)\u4e2d\u7684\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u7684\u9078\u9805(option)</li> <li>\u5c0d\u65bc\u6b63\u5e38(normal)\u7684<code>streams</code>(\u4e32\u6d41)\u800c\u8a00,\u6240\u8b02\u7684\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u7684\u9078\u9805(option)\u5c31\u662f\u6307\u53ef\u4ee5\u6307\u5b9a(specifies)\u4f4d\u5143\u7d44\u7684\u7e3d\u6578\u91cf(total number of bytes)</li> <li>\u5c0d\u65bc\u5728\u7269\u4ef6\u6a21\u5f0f(object mode)\u64cd\u4f5c(operating)\u7684<code>streams</code>(\u4e32\u6d41)\u800c\u8a00,\u6240\u8b02\u7684\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u7684\u9078\u9805(option)\u5c31\u662f\u6307\u53ef\u4ee5\u6307\u5b9a(specifies)\u7269\u4ef6\u7684\u7e3d\u6578\u91cf(<code>total number of objects</code>)</li> <li>\u7576\u900f\u904e\u547c\u53eb(calls)stream.push(chunk)\u65b9\u6cd5\u4f86\u5be6\u73fe(implementation)\u7de9\u5b58\u6642,\u8cc7\u6599(data)\u6703\u88ab\u7de9\u5b58(buffered in)\u5230\u53ef\u8b80\u53d6\u4e32\u6d41\u4e2d(<code>Readable streams</code>)</li> <li>\u9019\u6642,\u5982\u679c\u6b64<code>streams</code>(\u4e32\u6d41)\u7684\u6d88\u8cbb\u8005(consumer) \u6c92\u6709\u547c\u53eb (call)stream.read()\u65b9\u6cd5\u7684\u8a71,\u90a3\u9ebc\u8a72\u8cc7\u6599(data)\u5c31\u6703\u4ee3\u7406(sit in)\u5167\u90e8\u968a\u5217(internal queue)\u76f4\u5230(until)\u8a72\u8cc7\u6599\u88ab\u6d88\u5316\u6389(consumed)\u70ba\u6b62</li> <li>\u4e00\u65e6(Once)\u5167\u90e8\u53ef\u8b80\u53d6\u7de9\u5b58(internal read <code>buffer</code>)\u7684\u7e3d\u5927\u5c0f(total size) \u5230\u9054 (reaches)\u4e86\u6307\u5b9a(specified)\u7684\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u9580\u6abb(threshold)\u6642,\u9019\u6642\u8a72<code>stream</code>(\u4e32\u6d41)\u5c31\u6703\u5c31\u6703\u505c\u6b62(stop)\u5f9e\u57fa\u790e\u8cc7\u6e90(underlying resource)\u4e2d\u8b80\u53d6(reading)\u8cc7\u6599(data),\u76f4\u5230\u7576\u524d(currently)\u7684\u7de9\u5b58\u8cc7\u6599(the data currently buffered)\u80fd\u88ab\u6d88\u5316(consumed)\u6642\u624d\u6703\u7e7c\u7e8c\u8b80\u53d6</li> <li>\u4e5f\u5c31\u662f\u8aaa,\u8a72<code>stream</code>(\u4e32\u6d41)\u6703\u505c\u6b62\u547c\u53eb\u5167\u90e8\u7684readable._read()\u65b9\u6cd5(method),\u800c\u9019\u500b\u65b9\u6cd5\u5c31\u662f\u88ab\u7528\u4f86(used to)\u586b\u6eff(fill)\u53ef\u8b80\u53d6\u4e32\u6d41(read buffer)</li> <li>\u7576writable.write(chunk)\u65b9\u6cd5(method)\u88ab\u91cd\u8907\u5730\u547c\u53eb(called repeatedly)\u6642,\u8cc7\u6599(data)\u5c31\u6703\u88ab\u7de9\u5b58(buffered in)\u5230\u53ef\u5beb\u5165\u4e32\u6d41(<code>Writable streams</code>)\u4e2d\u3002\u7576(while)\u5167\u90e8\u53ef\u5beb\u5165\u7de9\u5b58(internal write buffer)\u7684\u7e3d\u5927\u5c0f(total size) \u4f4e\u65bc (below)\u8a2d\u5b9a(set)\u597d\u7684\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u9580\u6abb(threshold)\u6642,\u9019\u6642\u547c\u53eb(calls)<code>writable.write()</code>\u65b9\u6cd5(method)\u5c31\u6703\u56de\u50b3(return)<code>true</code>\u3002\u800c\u4e00\u65e6(Once)\u5167\u90e8\u53ef\u5beb\u5165\u7de9\u5b58(internal write buffer)\u7684\u7e3d\u5927\u5c0f(total size) \u5230\u9054 (reaches) or \u8d85\u904e (exceeds)\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u9580\u6abb(threshold)\u6642,\u5247\u6703\u56de\u50b3(returned)<code>false</code></li> <li><code>Stream API</code>\u7684\u5176\u4e2d\u4e00\u500b\u95dc\u9375\u76ee\u6a19(key goal),\u5c24\u5176(particularly)\u662fstream.pipe()\u65b9\u6cd5(method),\u5c31\u662f\u9650\u5236(limit)\u8cc7\u6599(data)\u7684\u7de9\u5b58(buffering)\u5728\u4e00\u500b\u53ef\u63a5\u53d7(acceptable)\u7684\u7a0b\u5ea6(levels)\u4e4b\u5167,\u4ee5\u4f7f\u8cc7\u6e90(resources) &amp; \u4e0d\u540c\u901f\u5ea6\u7684\u76ee\u6a19(destinations of differing speeds)\u80fd\u5920\u4e0d\u6703\u6df9\u6c92(overwhelm)\u6389\u53ef\u7528(available)\u7684\u8a18\u61b6\u9ad4\u7a7a\u9593(memory)</li> <li>\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u9078\u9805(option)\u662f\u4e00\u500b\u9580\u6abb(threshold),\u800c\u4e0d\u662f\u4e00\u7a2e\u9650\u5236(limit)\u3002\u5b83\u4ee3\u8868\u5728\u8acb\u6c42(asking)\u66f4\u591a\u7684\u8cc7\u6599\u4e4b\u524d,\u8a72\u7de9\u5b58\u4e32\u6d41(<code>stream buffers</code>)\u6240\u64c1\u6709\u7684\u8cc7\u6599\u91cf(the amount of data)</li> <li>\u901a\u5e38(in general),\u5b83\u4e26\u4e0d\u6703\u5f37\u5236\u57f7\u884c(enforce)\u56b4\u683c(strict)\u7684\u8a18\u61b6\u9ad4(memory)\u9650\u5236(limitation)\u3002\u6211\u5011\u53ef\u4ee5\u5728\u7279\u5b9a(specific)\u7684<code>stream</code>(\u4e32\u6d41)\u5be6\u4f5c(implementations)\u4e2d\u9078\u64c7(choose to)\u5be6\u65bd(enforce)\u66f4\u56b4\u683c(stricter)\u7684\u8a18\u61b6\u9ad4\u9650\u5236(limits),\u4f46\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>)\u9019\u500b\u9078\u9805\u4ecd\u7136\u662f\u9078\u64c7\u6027(optional)\u7684\u64cd\u4f5c</li> <li>\u56e0\u70baDuplex\u3001Transform\u90fd\u662f\u53ef\u4ee5\u88ab\u8b80\u53d6(<code>Readable</code>)\u4e5f\u53ef\u4ee5\u88ab\u5beb\u5165(<code>Writable</code>)\u7684,\u6bcf\u4e00\u500b<code>stream</code>(\u4e32\u6d41)\u6703\u7dad\u8b77(maintains)2\u500b\u7528\u4f86\u8b80\u53d6(reading) &amp; \u5beb\u5165(writing)\u7684\u5206\u958b(separate)\u7684\u5167\u90e8\u7684\u7de9\u5b58(internal <code>buffers</code>),\u5f9e\u800c\u5141\u8a31(allowing)\u6bcf\u4e00\u7aef(each side)\u7368\u7acb(independently)\u65bc\u53e6\u4e00\u7aef(the other)\u9032\u884c\u64cd\u4f5c(operate),\u540c\u6642\u4fdd\u6301(maintaining)\u9069\u7576(appropriate)\u4e14\u6709\u6548\u7387(efficient)\u7684\u6578\u64da\u6d41(flow of data)</li> <li>\u8209\u4f8b\u4f86\u8aaa,net.Socket\u5be6\u4f8b(instances)\u662f\u96d9\u5411\u4e32\u6d41(Duplex <code>streams</code>),\u800c\u5b83\u7684\u53ef\u8b80\u53d6\u9019\u7aef(<code>Readable</code> side)\u5141\u8a31(allows)\u6d88\u5316(consumption)\u6389\u5f9e\u63d2\u5ea7(<code>socket</code>)\u63a5\u6536(received)\u5230\u7684\u8cc7\u6599\u3002\u53e6\u5916,\u5b83\u7684\u53ef\u5beb\u5165\u9019\u7aef(<code>Writable</code> side)\u5141\u8a31(allows)\u5c07\u8cc7\u6599\u5beb\u5165(writing data)\u5230\u8a72\u63d2\u5ea7(<code>socket</code>)\u4e2d</li> <li>\u9019\u9ebc\u505a\u662f\u56e0\u70ba\u8cc7\u6599\u5beb\u5165\u5230\u63d2\u5ea7(data may be written to <code>socket</code>)\u7684\u901f\u7387(rate)\u6709\u53ef\u80fd\u6703\u6bd4\u6536\u5230\u7684\u6642\u9593\u4f86\u5f97\u5feb(faster) or \u6162(slower),\u56e0\u6b64\u6bcf\u4e00\u7aef(each side)\u61c9\u8a72\u8981\u7368\u7acb\u5730(independently)\u64cd\u4f5c(operate) &amp; <code>buffer</code>(\u7de9\u5b58)\u65bc\u53e6\u4e00\u7aef(the other)</li> <li>\u5167\u90e8\u7de9\u5b58\u6a5f\u5236(The mechanics of the internal buffering)\u662f\u4e00\u500b\u5167\u90e8\u5be6\u4f5c(internal implementation)\u7684\u7d30\u7bc0(detail),\u800c\u9019\u500b\u7d30\u7bc0\u53ef\u80fd\u6703\u5728\u4efb\u4f55\u4e00\u500b\u6642\u9593(at any time)\u88ab\u6539\u8b8a(changed)\u6389<ul> <li>\u7136\u800c(However),\u5c0d\u65bc\u67d0\u4e9b\u9032\u968e(certain advanced)\u7684\u5be6\u4f5c(implementations)\u800c\u8a00,\u5167\u90e8\u7de9\u5b58(<code>internal buffers</code>)\u53ef\u4ee5\u900f\u904e<code>writable.writableBuffer</code>\u3001<code>readable.readableBuffer</code>\u5c6c\u6027\u4f86\u5f97\u5230(retrieved)\u3002\u4f46\u662f\u4f7f\u7528\u50cf\u9019\u6a23\u6c92\u6709\u88ab\u6b63\u5f0f\u6587\u4ef6\u5316(undocumented)\u7684\u5c6c\u6027(properties),\u662f\u4e0d\u88ab\u9f13\u52f5(discouraged)\u9019\u9ebc\u505a\u7684 <p><code>stream</code>(\u4e32\u6d41)\u6d88\u8cbb\u8005\u7684API (API for stream consumers)</p> </li> </ul> </li> </ul> </li> <li>\u5e7e\u4e4e\u6240\u6709\u7684Node\u61c9\u7528\u7a0b\u5f0f(applications),\u4e0d\u7ba1\u662f\u591a\u7c21\u55ae,\u90fd\u6703\u4ee5\u67d0\u7a2e\u65b9\u5f0f(manner)\u4f86\u4f7f\u7528<code>streams</code>(\u4e32\u6d41)\u3002\u63a5\u4e0b\u4f86\u7684\u5c31\u662f\u4e00\u500b\u5728Node\u61c9\u7528\u7a0b\u5f0f\u4e2d\u4f7f\u7528<code>streams</code>(\u4e32\u6d41)\u4f86\u5be6\u4f5c(implements)\u4e00\u500b<code>HTTP</code>\u4f3a\u670d\u5668(server)\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc       JavaScript<pre><code>const http = require('http');\nconst server = http.createServer((req, res) =&gt; {\n// `req` is an http.IncomingMessage, which is a readable stream.\n// `res` is an http.ServerResponse, which is a writable stream.\nlet body = '';\n// Get the data as utf8 strings.\n// If an encoding is not set, Buffer objects will be received.\nreq.setEncoding('utf8');\n// Readable streams emit 'data' events once a listener is added.\nreq.on('data', (chunk) =&gt; {\nbody += chunk;\n});\n// The 'end' event indicates that the entire body has been received.\nreq.on('end', () =&gt; {\ntry {\nconst data = JSON.parse(body);\n// Write back something interesting to the user:\nres.write(typeof data);\nres.end();\n} catch (er) {\n// uh oh! bad json!\nres.statusCode = 400;\nreturn res.end(`error: ${er.message}`);\n}\n});\n});\nserver.listen(1337);\n// $ curl localhost:1337 -d \"{}\"\n// object\n// $ curl localhost:1337 -d \"\\\"foo\\\"\"\n// string\n// $ curl localhost:1337 -d \"not json\"\n// error: Unexpected token o in JSON at position 1\n</code></pre><ul> <li>\u53ef\u5beb\u5165\u4e32\u6d41(Writable streams)(=&gt; \u5c31\u50cf\u662f\u4e0a\u9762\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d\u7684<code>res</code>\u4e00\u6a23)\u6703\u516c\u958b(expose)\u4e00\u4e9b\u65b9\u6cd5(methods),\u4f8b\u5982:<code>res.write()</code>\u3001<code>res.end()</code>\u9019\u4e9b\u65b9\u6cd5\u662f\u7528\u4f86\u5c07\u8cc7\u6599\u5beb\u5165(write data)\u5230<code>stream</code>(\u4e32\u6d41)\u4e2d\u7684</li> <li>\u53ef\u8b80\u53d6\u4e32\u6d41(Readable streams)\u6703\u5728\u7576\u8cc7\u6599(data)\u53ef\u4ee5\u5f9e<code>stream</code>(\u4e32\u6d41)\u4e2d\u88ab\u8b80\u53d6(read off)\u6642,\u4f7f\u7528EventEmitterAPI\u4f86\u901a\u77e5(notifying)\u61c9\u7528\u7a0b\u5f0f\u7684\u7a0b\u5f0f\u78bc(application code)</li> <li>\u800c\u8a72\u53ef\u5f9e<code>stream</code>(\u4e32\u6d41)\u4e2d\u8b80\u53d6\u7684\u8cc7\u6599(available data)\u53ef\u4ee5\u5229\u7528\u591a\u7a2e\u65b9\u5f0f(multiple ways)\u4f86\u8b80\u53d6(read from)</li> <li>Writable streams\u3001Readable streams\u90fd\u53ef\u4ee5\u900f\u904e\u591a\u7a2e\u65b9\u5f0f(in various ways)\u4f86\u4f7f\u7528(use)EventEmitterAPI\u4f86\u50b3\u9054(communicate)\u7576\u524d<code>stream</code>(\u4e32\u6d41)\u7684\u72c0\u614b(state)</li> <li>Duplex\u3001Transform\u90fd\u662f\u53ef\u5beb\u5165\u4e32\u6d41(Writable streams) &amp; \u53ef\u8b80\u53d6\u4e32\u6d41(Readable streams)</li> <li>\u5f9e<code>stream</code>(\u4e32\u6d41)\u4e2d\u5beb\u5165\u8cc7\u6599(writing data) or \u6d88\u5316\u8cc7\u6599(consuming data)\u7684\u61c9\u7528\u7a0b\u5f0f(applications)\u4e0d\u6703\u88ab\u8981\u6c42(not required)\u8981\u76f4\u63a5(directly)\u5730\u5be6\u4f5c(implement)\u4e32\u6d41\u4ecb\u9762(<code>stream</code> interfaces),\u4e26\u4e14\u901a\u5e38(generally)\u6c92\u6709\u7406\u7531(have no reason)\u6703\u9700\u8981\u547c\u53eb(call)<code>require('stream')</code>\u8a9e\u6cd5</li> <li>\u60f3\u8981\u5be6\u4f5c(implement)\u65b0(new)\u7684<code>streams</code>\u985e\u578b(types)\u7684\u958b\u767c\u8005(developers)\u5011\u53ef\u4ee5\u53c3\u8003(refer to)API for stream implementers\u7ae0\u7bc0(section)</li> </ul> </li> <li> <p>\u53ef\u5beb\u5165\u4e32\u6d41 (Writable streams)</p> <ul> <li>\u53ef\u5beb\u5165\u4e32\u6d41(writable streams)\u662f\u4e00\u500b\u7d66\u8cc7\u6599(data)\u5beb\u5165(written)\u7684\u62bd\u8c61(abstraction)\u76ee\u7684\u5730(destination)</li> <li>\u4ee5\u4e0b\u662f\u5e38\u898b\u7684\u53ef\u5beb\u5165\u4e32\u6d41(writable streams)\u7684\u7bc4\u4f8b,\u5305\u62ec\u4e86</li> <li>HTTP requests, on the client</li> <li>HTTP responses, on the server</li> <li>fs write streams</li> <li>zlib streams</li> <li>crypto streams</li> <li>TCP sockets</li> <li>child process stdin</li> <li>process.stdout &amp; process.stderr</li> <li>\u4ee5\u4e0a\u7bc4\u4f8b\u4e2d\u7684\u5176\u4e2d\u4e00\u4e9b\u5be6\u969b(actually)\u4e0a\u662f\u96d9\u5411\u4e32\u6d41(Duplex streams)\u4f86\u5be6\u73fe\u53ef\u5beb\u5165\u4ecb\u9762Writable interface\u7684</li> <li>\u6240\u6709\u7684\u53ef\u5beb\u5165\u4e32\u6d41(Writable streams)\u6703\u5be6\u4f5c(implement)\u7531stream.writable\u985e\u5225(class)\u6240\u5b9a\u7fa9(defined)\u7684\u4ecb\u9762(interface)</li> <li>\u7136\u800c(While)\u7279\u5b9a(specific)\u7684\u53ef\u5beb\u5165\u4e32\u6d41(Writable streams)\u5be6\u4f8b(instances)\u6703\u5728\u4e0d\u540c\u65b9\u9762\u4e0b(various ways)\u6709\u6240\u4e0d\u540c(differ in),\u4f46\u662f\u6240\u6709\u53ef\u5beb\u5165\u4e32\u6d41(<code>Writable streams</code>)\u90fd\u6703\u90fd\u6703\u9075\u5f9e(follow)\u76f8\u540c(same)\u7684\u57fa\u790e(fundamental)\u7528\u6cd5(usage)\u6a21\u5f0f(pattern),\u5c31\u5982\u540c\u4ee5\u4e0b\u7684\u7bc4\u4f8b\u8aaa\u660e(illustrate)     JavaScript<pre><code>const myStream = getWritableStreamSomehow();\nmyStream.write('some data');\nmyStream.write('some more data');\nmyStream.end('done writing data');\n</code></pre></li> <li> <p>Class</p> </li> <li>stream.Writable</li> <li> <p>Event</p> <ul> <li>pipe</li> <li>args<ul> <li>src: stream.Readable</li> <li>\u8981\u50b3\u905e(piping to)\u7d66\u6b64\u53ef\u5beb\u5165(writable)\u7684\u6e90\u982d\u4e32\u6d41(source <code>stream</code>)</li> </ul> </li> <li><code>pipe</code>\u4e8b\u4ef6(event)\u6703\u5728\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u547c\u53eb(called)stream.pipe()\u65b9\u6cd5(method)\u6642\u88ab\u767c\u51fa(emitted),\u4e26\u53ef\u4ee5\u5c07\u9019\u500b\u53ef\u5beb\u5165\u4e32\u6d41(writable stream)\u6dfb\u52a0(adding)\u5230\u5176\u8a2d\u5b9a\u597d(its set of)\u7684\u76ee\u7684\u5730(destination)<ul> <li><code>js     const writer = getWritableStreamSomehow();     const reader = getReadableStreamSomehow();     writer.on('pipe', (src) =&gt; {       console.log('Something is piping into the writer.');       assert.equal(src, reader);     });     reader.pipe(writer);</code></li> </ul> </li> </ul> </li> <li> <p>method</p> <ul> <li>writable.end([chunk[, encoding]][, callback])</li> <li>args<ul> <li>chunk: (string | Buffer | Unit8Array) | any)</li> <li>\u8981\u5beb\u5165(write)\u7684\u53ef\u9078\u64c7\u6027(optional)\u8cc7\u6599(data)\u3002\u5c0d\u65bc\u90a3\u4e9b\"\u4e0d\u662f\"\u5728\u7269\u4ef6\u6a21\u5f0f(object mode)\u4e0b\u64cd\u4f5c(operating)\u7684<code>streams</code>(\u4e32\u6d41)\u4f86\u8aaa,<code>chunk</code>\u53c3\u6578\u503c\u7684\u578b\u5225\u5fc5\u9808\u70ba\u5b57\u4e32(string) or <code>Buffer</code>(\u7de9\u5b58) or <code>Unit8Array</code>\u4e09\u8005\u4e4b\u4e00\u3002\u800c\u5c0d\u65bc\u7269\u4ef6\u6a21\u5f0f(object mode)\u7684<code>streams</code>\u4f86\u8aaa,<code>chunk</code>\u53c3\u6578\u503c\u7684\u578b\u5225\u53ef\u4ee5\u662f\u4efb\u4f55Javascript\u4e2d\u7684\u4efb\u4f55\u578b\u5225(<code>any</code>) or <code>null</code></li> <li>encoding: (string)</li> <li>\u5982\u679c<code>chunk</code>\u53c3\u6578\u7684\u503c\u662f\u5b57\u4e32(string)\u578b\u5225\u7684\u8a71,\u53ef\u4ee5\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u7de8\u78bc\u683c\u5f0f(encoding)</li> <li>callback: (function)</li> <li>\u7576<code>stream</code>(\u4e32\u6d41)\u7d50\u675f(finished)\u6642,\u8981\u57f7\u884c\u7684\u56de\u547c\u51fd\u5f0f(callback)</li> <li>Returns: (this)</li> </ul> </li> <li>\u7576\u547c\u53eb(calling)\u6b64<code>writable.end()</code>\u65b9\u6cd5(method)\u6642,\u5c31\u662f\u4ee5\u4fe1\u865f\u767c\u51fa(signals)\u5df2\u7d93\u6c92\u6709\u66f4\u591a(no more)\u7684\u8cc7\u6599(data)\u8981\u5beb\u5165(written)\u5230\u53ef\u5beb\u5165\u4e32\u6d41(Writable)\u4e2d<ul> <li>\u800c\u53ef\u9078\u64c7\u6027(optional)\u8f38\u5165\u7684<code>chunk</code> &amp; <code>encoding</code> \u90192\u500b\u53c3\u6578(arguments)\u53ef\u5141\u8a31(allow)\u5728\u95dc\u9589(closing)<code>stream</code>(\u4e32\u6d41)\u4e4b\u524d,\u7acb\u5373(immediately)\u5beb\u5165(written)\u6700\u5f8c\u4e00\u500b(one final)\u984d\u5916(additional)\u7684\u8cc7\u6599\u584a(chunk of data)</li> </ul> </li> <li>\u82e5\u5728\u547c\u53eb(calling)stream.end()\u65b9\u6cd5(method)\u4e4b\u5f8c(after)\u624d\u547c\u53eb(calling)stream.write()\u65b9\u6cd5(method)\u7684\u8a71,\u6703\u5f15\u767c\u932f\u8aa4(raise an error)     JavaScript<pre><code>// Write 'hello, ' and then end with 'world!'.\nconst fs = require('fs');\nconst file = fs.createWriteStream('example.txt');\nfile.write('hello, ');\nfile.end('world!');\n// Writing more now is not allowed!\n</code></pre></li> <li>writable.write(chunk[, encoding][, callback])</li> <li>args<ul> <li>chunk: (string | Buffer | Unit8Array) | any)</li> <li>\u8981\u5beb\u5165(write)\u7684\u53ef\u9078\u64c7\u6027(optional)\u8cc7\u6599(data)\u3002\u5c0d\u65bc\u90a3\u4e9b\"\u4e0d\u662f\"\u5728\u7269\u4ef6\u6a21\u5f0f(object mode)\u4e0b\u64cd\u4f5c(operating)\u7684<code>streams</code>(\u4e32\u6d41)\u4f86\u8aaa,<code>chunk</code>\u53c3\u6578\u503c\u7684\u578b\u5225\u5fc5\u9808\u70ba\u5b57\u4e32(string) or <code>Buffer</code>(\u7de9\u5b58) or <code>Unit8Array</code>\u4e09\u8005\u4e4b\u4e00\u3002\u800c\u5c0d\u65bc\u7269\u4ef6\u6a21\u5f0f(object mode)\u7684<code>streams</code>\u4f86\u8aaa,<code>chunk</code>\u53c3\u6578\u503c\u7684\u578b\u5225\u53ef\u4ee5\u662f\u4efb\u4f55Javascript\u4e2d\u7684\u4efb\u4f55\u578b\u5225(<code>any</code>) or <code>null</code></li> <li>encoding: (string)</li> <li>\u5982\u679c<code>chunk</code>\u53c3\u6578\u7684\u503c\u662f\u5b57\u4e32(string)\u578b\u5225\u7684\u8a71,\u53ef\u4ee5\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u7de8\u78bc\u683c\u5f0f(encoding)</li> <li>\u9810\u8a2d\u503c: <code>utf8</code></li> <li>callback: (function)</li> <li>\u53ef\u6307\u5b9a\u7576\u5237\u65b0(flushed)\u6b64\u8cc7\u6599\u584a(chunk of data)\u7684\u6642\u5019\u8981\u547c\u53eb\u7684\u56de\u547c\u51fd\u5f0f(callback)</li> <li>Returns: (boolean)</li> <li>\u82e5<code>stream</code>(\u4e32\u6d41)\u5e0c\u671b(wishes)\u5728\u7e7c\u7e8c(continuing)\u5beb\u5165(write)\u984d\u5916(additional)\u7684\u8cc7\u6599(data)\u4e4b\u524d,\u5148\u7b49\u5f85(wait for)<code>drain</code>\u4e8b\u4ef6(event)\u88ab\u767c\u51fa(emitted)\u5f8c,\u518d\u4f86\u547c\u53eb(calling)\u7a0b\u5f0f\u78bc(code),\u5247\u8a72\u65b9\u6cd5\u6703\u56de\u50b3<code>false</code>; \u5426\u5247(otherwise),\u5c31\u662f<code>true</code></li> </ul> </li> <li>\u6b64\u65b9\u6cd5(method)\u6703\u5beb\u5165(writes)\u4e00\u4e9b\u8cc7\u6599(data)\u5230<code>stream</code>(\u4e32\u6d41)\u4e2d,\u4e26\u5728\u8cc7\u6599\u88ab\u5b8c\u5168\u8655\u7406(fully handled)\u5f8c,\u624d\u6703\u547c\u53eb\u6211\u5011\u6240\u63d0\u4f9b(supplied)\u7684\u56de\u547c\u51fd\u5f0f(callback)<ul> <li>\u82e5\u6709\u767c\u751f(occurs)\u932f\u8aa4(error)\u7684\u8a71,\u5247\u56de\u547c\u51fd\u5f0f(callback)\u53ef\u4ee5\u9078\u64c7\u8981\u4e0d\u8981\u4ee5<code>errors</code>(\u932f\u8aa4)\u70ba\u7b2c1\u500b\u53c3\u6578(argument)\u3002\u70ba\u4e86\u53ef\u9760(reliably)\u5730\u5075\u6e2c(detect)\u5230\u932f\u8aa4(errors),\u6211\u5011\u53ef\u4ee5\u65b0\u589e(add)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u7d66error(\u932f\u8aa4)\u4e8b\u4ef6(event),\u800c\u56de\u547c\u51fd\u5f0f(callback)\u6703\u5728<code>error</code>\u4e8b\u4ef6\u88ab\u767c\u51fa(emitted)\u4e4b\u524d(before),\u4ee5\u975e\u540c\u6b65(asynchronously)\u7684\u65b9\u5f0f\u88ab\u547c\u53eb(called)</li> </ul> </li> <li>\u82e5\u5167\u90e8\u7de9\u5b58(internal <code>buffer</code>)\u5c0f\u65bc(less than)\u6211\u5011\u6240\u914d\u7f6e(configured)\u7684\u9ad8\u6c34\u4f4d\u7dda(<code>highWaterMark</code>),\u4e26\u4e14\u7576<code>stream</code>\u4e32\u6d41\u88ab\u5efa\u7acb(created)\u6642\u5df2\u7d93\u5141\u8a31(admitted)<code>chunk</code>\u4e86\u7684\u8a71,\u5247\u6b64\u65b9\u6cd5\u6703\u56de\u50b3<code>true</code><ul> <li>\u82e5\u6b64\u65b9\u6cd5\u56de\u50b3<code>false</code>,\u5247\u61c9\u505c\u6b62(stop)\u9032\u4e00\u6b65(further)\u5617\u8a66(attempts)\u8981\u5c07\u8cc7\u6599(data)\u5beb\u5165(write)<code>stream</code>\u4e32\u6d41,\u76f4\u5230drain\u4e8b\u4ef6(event)\u88ab\u767c\u51fa(emitted)\u5f8c</li> </ul> </li> <li>\u7576<code>stream</code>\u4e32\u6d41\u6c92\u6709\u8017\u76e1(not draining)\u6642,\u547c\u53eb<code>writable.write()</code>\u65b9\u6cd5(method)\u6703\u7de9\u5b58<code>chunk</code>,\u4e26\u4e14\u6b64\u65b9\u6cd5\u6703\u56de\u50b3<code>false</code>\u3002\u7576\u76ee\u524d(currently)\u6240\u6709(all)\u7684\u7de9\u5b58\u8cc7\u6599\u584a(buffered chunks)\u90fd\u8017\u76e1(drained)\u6642(=&gt; \u7531\u4f5c\u696d\u7cfb\u7d71(operating system)\u8ca0\u8cac\u63a5\u53d7(accepted)\u50b3\u905e(delivery)),drain\u4e8b\u4ef6(event)\u5c31\u6703\u88ab\u767c\u51fa(emitted)<ul> <li>\u5efa\u8b70\u7576\u6b64\u65b9\u6cd5\u56de\u50b3(returns)<code>false</code>\u6642,\u5c31\u4e0d\u8981\u518d(no more)\u5beb\u5165\u4efb\u4f55\u7684\u8cc7\u6599\u584a(chunks),\u76f4\u5230drain\u4e8b\u4ef6(event)\u88ab\u767c\u51fa(emitted)\u5f8c,\u624d\u80fd\u7e7c\u7e8c\u5beb\u5165\u8cc7\u6599\u584a</li> <li>\u7136\u800c,\u547c\u53eb<code>write()</code>\u65b9\u6cd5\u5728\u4e00\u500b\u9084\u6c92\u6709\u8017\u76e1(not draining)\u7684<code>stream</code>\u4e32\u6d41\u4e0a\u662f\u53ef\u5141\u8a31(allowed)\u7684,Node\u6703\u7de9\u5b58(buffer)\u6240\u6709\u5beb\u5165(writter)\u7684\u8cc7\u6599\u584a(chunks),\u76f4\u5230\u5230(until)\u9054\u6700\u5927\u8a18\u61b6\u9ad4\u4f7f\u7528\u91cf(maximum memory usage)\u9650\u5236\u767c\u751f(occurs)\u70ba\u6b62,\u5728\u9019\u6642\u5c07\u6703\u7121\u689d\u4ef6(unconditionally)\u5730\u7d42\u6b62(abort)\u3002\u5373\u4f7f(even)\u5728\u7d42\u6b62(abort)\u4e4b\u524d(before),\u9ad8\u8a18\u61b6\u9ad4\u4f7f\u7528\u7387(high memory usage)\u6703\u9020\u6210\u8ca7\u4e4f(poor)\u7684\u5783\u573e\u56de\u6536\u6548\u80fd(garbage collector performance)\u3001RSS(\u4e00\u822c\u4f86\u8aaa\u4e0d\u6703\u88ab\u91cb\u653e(released back)\u56de\u4f5c\u696d\u7cfb\u7d71\u4e2d(system),\u5373\u4f7f(even)\u5728\u90a3\u4e9b\u8a18\u61b6\u9ad4(memory)\u5df2\u7d93\u4e0d\u518d(no longer)\u88ab\u9700\u8981(required)\u5f8c)\u3002\u82e5\u9060\u7aef(remote)\u5c0d\u7b49\u65b9(peer)\u4e0d\u8b80\u53d6(not read)\u8cc7\u6599(data)\u7684\u8a71,\u5247<code>TCP</code>\u63d2\u5ea7(sockets)\u53ef\u80fd\u6c38\u9060\u4e0d\u6703\u8017\u76e1(drain),\u56e0\u6b64\u5beb\u5165(writing)\u4e00\u500b\u4e0d\u6703\u88ab\u8017\u76e1(not draining)\u7684\u63d2\u5ea7(socket),\u53ef\u80fd\u6703\u5c0e\u81f4(lead to)\u9060\u7aef(remotely)\u53ef\u88ab\u5229\u7528(exploitable)\u7684\u5f31\u9ede(vulnerability)</li> </ul> </li> <li>\u7576<code>stream</code>\u4e32\u6d41\u6c92\u6709\u88ab\u8017\u76e1\u6642,\u5c31\u5beb\u5165\u8cc7\u6599\u5c0dTransform stream\u4f86\u8aaa\u662f\u5c24\u5176\u6709\u554f\u984c(particularly problematic)\u7684,\u56e0\u70ba<code>Transform streams</code>\u5728\u9ed8\u8a8d(default)\u60c5\u6cc1\u4e0b\u662f\u6703\u66ab\u505c(paused)\u7684,\u76f4\u5230(until)\u5b83\u5011\u88ab\u900f\u904e\u7ba1\u9053\u50b3\u905e(piped) or \u4e00\u500b<code>data</code> or <code>readable</code>\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u88ab\u65b0\u589e(added)\u5f8c\u624d\u6703\u7e7c\u7e8c\u958b\u59cb</li> <li>\u5982\u679c\u8981\u5beb\u5165(written)\u7684\u8cc7\u6599(data)\u80fd\u5920\u6309\u7167\u9700\u6c42(on demand)\u751f\u6210(generated) or \u7372\u53d6(fetched),\u5247\u5efa\u8b70(recommended)\u5c07\u908f\u8f2f(logic)\u5c01\u88dd(encapsulate)\u9032\u53ef\u8b80\u53d6\u4e32\u6d41(Readable)\u4e2d,\u4e26\u5229\u7528stream.pipe()\u65b9\u6cd5(method)\u4f86\u5b8c\u6210<ul> <li>\u7136\u800c(However),\u82e5\u547c\u53eb<code>writable.write()\b</code>\u65b9\u6cd5\u662f\u512a\u5148\u4f7f\u7528(preferred)\u7684\u8a71,\u9019\u662f\u6709\u53ef\u80fd(possible)\u7684\u8981\u5c0a\u91cd\u80cc\u58d3(respect backpressure)\u4e14\u907f\u514d(avoid)\u8a18\u61b6\u9ad4\u554f\u984c(memory issues),\u4e26\u4f7f\u7528drain\u4e8b\u4ef6(event)   JavaScript<pre><code>function write(data, cb) {\nif (!stream.write(data)) {\nstream.once('drain', cb);\n} else {\nprocess.nextTick(cb);\n}\n}\n// Wait for cb to be called before doing any other write.\nwrite('hello', () =&gt; {\nconsole.log('Write completed, do more writes now.');\n});\n</code></pre></li> </ul> </li> <li>\u88dc\u5145: \u4e00\u500b\u7269\u4ef6\u6a21\u5f0f(object mode)\u4e0b\u7684\u53ef\u5beb\u5165\u4e32\u6d41(Writable stream),\u5c07\u7e3d\u662f(always)\u6703\u5ffd\u7565(ignore)\u6389<code>encoding</code>\u9019\u500b\u53c3\u6578(argument)</li> </ul> </li> <li> <p>properties</p> <ul> <li>writable.writable</li> <li>Returns: (boolean)</li> <li>\u5982\u679c\u6b64\u5c6c\u6027(<code>writable.writable</code>)\u7684\u503c\u662f<code>true</code>\u7684\u8a71,\u90a3\u5c31\u80fd\u5b89\u5168\u5730\u547c\u53ebwritable.write()\u65b9\u6cd5(method)\u4e86,\u4e5f\u5c31\u662f\u4ee3\u8868\u8a72<code>stream</code>(\u4e32\u6d41)\u6c92\u6709\u88ab\u6d88\u6ec5(destroyed)\u6389 or \u767c\u751f\u932f\u8aa4(errored) or \u7d50\u675f(ended)</li> </ul> </li> </ul> </li> <li> <p>\u53ef\u8b80\u53d6\u4e32\u6d41 (Readable streams)</p> <ul> <li>\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u662f\u4e00\u500b\u6d88\u8017(consumed)\u6389\u8cc7\u6599(data)\u7684\u62bd\u8c61(abstraction)\u4f86\u6e90(source)</li> <li>\u4ee5\u4e0b\u662f\u5e38\u898b\u7684\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u7684\u7bc4\u4f8b,\u5305\u62ec\u4e86</li> <li>HTTP responses, on the client</li> <li>HTTP requests, on the server</li> <li>fs read streams</li> <li>zlib streams</li> <li>crypto streams</li> <li>TCP sockets</li> <li>child process stdout and stderr</li> <li>process.stdin</li> <li>\u6240\u6709\u7684\u53ef\u8b80\u53d6\u4e32\u6d41(Readable streams)\u90fd\u662f\u900f\u904estream.readable\u985e\u5225(class)\u4f86\u5be6\u4f5c(implement)\u4ecb\u9762(interface)\u7684</li> <li> <p>2\u7a2e\u53ef\u8b80\u53d6\u4e32\u6d41\u7684\u6a21\u5f0f (Two reading modes)</p> </li> <li>\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u53ef\u4ee5\u7528\u4ee5\u4e0b2\u7a2e\u6709\u6548\u7387(effective)\u7684\u6a21\u5f0f(modes)\u4e4b\u4e00\u4f86\u64cd\u4f5c(operate)<ul> <li>\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code>)</li> <li>\u66ab\u505c\u6a21\u5f0f(<code>paused</code>)</li> </ul> </li> <li>\u4ee5\u4e0a\u90192\u7a2e\u6a21\u5f0f\u90fd\u662f\u5f9e\u7269\u4ef6\u6a21\u5f0f(object mode)\u4e0b\u7684\u4e32\u6d41\u4e2d\u5206\u96e2\u51fa\u4f86(separate from)\u7684\u3002\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u53ef\u4ee5\u662f\u7269\u4ef6\u6a21\u5f0f(object mode)\u4e5f\u53ef\u4ee5\u4e0d\u662f,\u4e0d\u7ba1\u5b83\u662f\u5728\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode) or \u66ab\u505c\u6a21\u5f0f(<code>paused</code> mode)</li> <li>\u5728\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u4e2d,\u8cc7\u6599(data)\u662f\u5f9e\u5e95\u5c64\u7cfb\u7d71(underlying system)\u8b80\u53d6\u9032\u4f86(read from)\u7684,\u4e26\u4f7f\u7528\u4e8b\u4ef6(events)\u81ea\u52d5(automatically)\u4e14\u76e1\u5feb(as quickly as possible)\u5730\u900f\u904eEventEmitter\u4ecb\u9762(interface)\u4f86\u5c07\u8cc7\u6599\u63d0\u4f9b(provided)\u7d66\u61c9\u7528\u7a0b\u5f0f(application)</li> <li>\u5728\u66ab\u505c\u6a21\u5f0f(<code>paused</code> mode)\u4e2d,stream.read()\u65b9\u6cd5(method)\u5fc5\u9808\u88ab\u660e\u78ba(explicitly)\u5730\u547c\u53eb(called)\u4f86\u8b80\u53d6(reads)<code>stream</code>(\u4e32\u6d41)\u4e2d\u7684\u8cc7\u6599\u584a(chunks of data)</li> <li>\u6240\u6709\u7684\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u90fd\u662f\u5f9e\u66ab\u505c\u6a21\u5f0f(<code>paused</code> mode)\u958b\u59cb(begin)\u7684,\u4f46\u662f\u90fd\u80fd\u900f\u904e\u4ee5\u4e0b\u76843\u7a2e\u65b9\u5f0f\u4f86\u5207\u63db(switched to)\u70ba\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)<ul> <li>\u65b0\u589e(Adding)data\u9019\u500b\u4e8b\u4ef6\u8655\u7406\u5668(event handler)</li> <li>\u547c\u53ebstream.resume()\u65b9\u6cd5(method)</li> <li>\u547c\u53ebstream.pipe()\u65b9\u6cd5(method)</li> </ul> </li> <li>\u6240\u6709\u7684\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u4e5f\u90fd\u80fd\u900f\u904e\u4ee5\u4e0b\u76842\u7a2e\u65b9\u5f0f\u4f86\u5f9e\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u5207\u63db(switch back to)\u70ba\u66ab\u505c\u6a21\u5f0f(<code>paused</code> mode)<ul> <li>\u82e5\"\u6c92\u6709\"\u7ba1\u9053(pipe)\u50b3\u9001\u7684\u76ee\u7684\u5730(destinations)\u7684\u8a71,\u5247\u547c\u53eb(calling)stream.pause()\u65b9\u6cd5(method)</li> <li>\u82e5\u6709\u7ba1\u9053(pipe)\u50b3\u9001\u7684\u76ee\u7684\u5730(destinations)\u7684\u8a71,\u5247\u8981\u79fb\u9664(removing)\u6240\u6709(all)\u7684\u7ba1\u9053(pipe)\u50b3\u9001\u76ee\u7684\u5730(destination)</li> <li>\u591a\u6578\u7684\u7ba1\u9053(pipe)\u50b3\u9001\u76ee\u7684\u5730(destinations)\u90fd\u53ef\u4ee5\u900f\u904e\u547c\u53ebstream.umpipe()\u65b9\u6cd5(method)\u4f86\u79fb\u9664(removing)\u6389</li> </ul> </li> <li>\u6709\u4e00\u500b\u8981\u8a18\u4f4f\u7684\u91cd\u8981\u89c0\u5ff5\u5c31\u662f,\u5728\u76f4\u5230(until)\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u63d0\u4f9b\u4e00\u7a2e\u6d88\u8017(consuming) or \u5ffd\u7565(ignoring)\u8cc7\u6599(data)\u7684\u6a5f\u5236(mechanism)\u4e4b\u524d,\u90fd\u4e0d\u6703\u751f\u6210(generate)\u8cc7\u6599(data)\u3002\u5982\u679c\u6d88\u8017\u6a5f\u5236\u662f\u88ab\u7981\u7528(disable)\u7684 or \u53d6\u6d88(taken away)\u7684\u8a71,\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u5c07\u5617\u8a66(attempt to)\u505c\u6b62(stop)\u751f\u6210(generating)\u8cc7\u6599(data)</li> <li>\u57fa\u65bc\u5411\u5f8c(backward)\u76f8\u5bb9(compatibility)\u7684\u539f\u56e0(reasons),\u79fb\u9664(removing)data\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u5c07 \u4e0d\u6703\u81ea\u52d5(autmatically)\u5730\u66ab\u505c(pause)\u6389stream(\u4e32\u6d41)<ul> <li>\u540c\u6a23\u5730,\u5982\u679c\u6709\u7ba1\u9053(piped)\u50b3\u9001\u7684\u76ee\u7684\u5730(destinations)\u7684\u8a71,\u5247\u4e00\u65e6(once)\u90a3\u4e9b\u7ba1\u9053\u76ee\u7684\u5730\u8017\u76e1(drain)\u4e26\u8981\u6c42(ask)\u66f4\u591a\u7684\u8cc7\u6599(more data)\u6642,\u9019\u6642\u518d\u547c\u53ebstream.pause()\u65b9\u6cd5(method)\u5c07\u4e0d\u80fd\u4fdd\u8b49(guarantee)<code>stream</code>(\u4e32\u6d41)\u5c07\u6703\u4fdd\u6301(remain)\u66ab\u505c(paused)\u7684</li> </ul> </li> <li>\u5982\u679c\u5c07\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u88ab\u5207\u63db\u70ba\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode),\u5247\u5c07\u4e0d\u6703\u6709\u6d88\u8cbb\u8005(consumers)\u80fd\u5920(available)\u8655\u7406(handle)\u9019\u4e9b\u8cc7\u6599(data),\u800c\u9019\u4e9b\u8cc7\u6599\u4e5f\u5c31\u6703\u907a\u5931(lost)\u6389\u3002\u8209\u4f8b\u4f86\u8aaa(for instance),\u7576\u5728\u6c92\u6709(without)\u9644\u52a0(attached)data\u4e8b\u4ef6(event) or \u7576\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u5df2\u7d93\u5f9e<code>stream</code>(\u4e32\u6d41)\u4e2d\u79fb\u9664(removed from)\u7684\u60c5\u6cc1\u4e0b\u6642,\u547c\u53eb(called)readable.resume()\u65b9\u6cd5(method)\u7684\u8a71,\u9019\u6a23\u7684\u60c5\u6cc1\u5c31\u6703\u767c\u751f(oocur)</li> <li>\u65b0\u589e\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(Readable)\u7684\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u6703\u81ea\u52d5(automatically)\u5730\u8b93<code>stream</code>(\u4e32\u6d41)\u505c\u6b62(stop)\u6d41\u52d5(<code>flowing</code>),\u4e26\u4e14\u8cc7\u6599\u6703\u7e7c\u7e8c\u900f\u904ereadable.read()\u65b9\u6cd5(method)\u4f86\u6d88\u8017(consumed)\u6389<ul> <li>\u82e5readable\u9019\u500b\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u5df2\u7d93\u88ab\u79fb\u9664(removed)\u6389,\u4e26\u4e14\u6709data\u9019\u500b\u4e8b\u4ef6\u8655\u7406\u5668(event handler)\u7684\u8a71,\u90a3\u9ebc<code>stream</code>(\u4e32\u6d41)\u5c07\u6703\u518d(again)\u958b\u59cb(start)\u6d41\u52d5(<code>flowing</code>)\u4e0b\u53bb</li> </ul> </li> <li> <p>3\u7a2e\u53ef\u8b80\u53d6\u4e32\u6d41\u7684\u72c0\u614b (Three states)</p> </li> <li>\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u76842\u7a2e\u6a21\u5f0f(tow modes)\u7684\u64cd\u4f5c(operation),\u5176\u5be6\u662f\u5c0d\u65bc\u53ef\u8b80\u53d6\u4e32\u6d41(readable streams)\u5728\u5be6\u4f5c(implementation)\u767c\u751f(happening)\u4e2d\u7684\u6642\u5019,\u5176\u66f4\u8907\u96dc(more complicated)\u7684\u5167\u90e8(internal)\u72c0\u614b(state)\u7ba1\u7406(management)\u7684\u4e00\u7a2e\u7c21\u6613(simplified)\u62bd\u8c61(abstraction)</li> <li>\u5177\u9ad4\u4f86\u8aaa(Specifically),\u5728\u4efb\u4f55(any)\u4e00\u500b\u5047\u5b9a(given)\u7684\u6642\u9593\u9ede(point in time),\u6bcf\u4e00\u500b\u53ef\u8b80\u53d6\u4e32\u6d41(<code>Readable</code>)\u90fd\u6703\u662f\u4ee5\u4e0b3\u7a2e\u53ef\u80fd(possible)\u7684\u72c0\u614b(states)\u4e4b\u4e00<ul> <li><code>readable.readableFlowing === null</code></li> <li><code>readable.readableFlowing === false</code></li> <li><code>readable.readableFlowing === true</code></li> <li>\u53ef\u53c3\u8003readable.readableFlowing#\u7ae0\u7bc0\u7684\u4ecb\u7d39</li> </ul> </li> <li>\u7576<code>readable.readableFlowing</code>\u5c6c\u6027\u7684\u503c\u662f<code>null</code>\u7684\u8a71,\u5247\u5c07\u4e0d\u6703\u63d0\u4f9b(provided)\u6d88\u8017(consuming)\u8cc7\u6599\u6d41(stream's data)\u7684\u6a5f\u5236(mechanism)\u3002\u56e0\u6b64(Therefore),<code>stream</code>(\u4e32\u6d41)\u5c07\u4e0d\u6703\u751f\u6210(generate)\u8cc7\u6599(data)\u3002\u7576\u5728\u9019\u500b\u72c0\u614b(state)\u4e0b\u6642,\u9644\u52a0(attaching)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u7d66data\u9019\u500b\u4e8b\u4ef6(event),\u518d\u547c\u53ebreadable.pipe()\u65b9\u6cd5(method),\u6216\u662f\u547c\u53ebreadable.resume()\u65b9\u6cd5(method),\u5247\u6703\u5c07<code>readable.readableFlowing</code>\u9019\u500b\u5c6c\u6027\u7684\u503c\u5207\u63db(switch)\u70ba<code>true</code>,\u5c0e\u81f4(causing)\u53ef\u8b80\u53d6\u4e32\u6d41(Reable)\u6703\u5728\u8cc7\u6599(data)\u751f\u6210(generated)\u6642,\u4e3b\u52d5(actively)\u5730\u767c\u51fa(emitting)\u4e8b\u4ef6(events)</li> <li>\u547c\u53eb(Calling)readable.pause()\u65b9\u6cd5(method) or readable.unpipe()\u65b9\u6cd5(method) or \u63a5\u53d7(receiving)\u80cc\u58d3(backpressure)\u5c07\u6703\u5c0e\u81f4(cause)<code>readable.readableFlowing</code>\u9019\u500b\u5c6c\u6027\u7684\u503c\u88ab\u8a2d\u5b9a(set)\u70ba<code>false</code>,\u9019\u5c07\u6703\u66ab\u6642(temporarily)\u5730\u7d42\u6b62(halting)\u63a5\u4e0b\u4f86(following)\u7684\u4e8b\u4ef6\u5011(events),\u4f46\u662f\"\u4e0d\u6703\"\u7d42\u6b62(halting)\u751f\u6210(generating)\u8cc7\u6599(data)\u3002\u7576\u8655\u65bc\u9019\u7a2e\u72c0\u614b(state)\u6642,\u9644\u52a0(attaching)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u7d66data\u9019\u500b\u4e8b\u4ef6(event)\u7684\u8a71,\u5c07\u4e0d\u6703\u628a<code>readable.readableFlowing</code>\u9019\u500b\u5c6c\u6027\u7684\u503c\u5207\u63db(switch)\u70ba<code>true</code> JavaScript<pre><code>const { PassThrough, Writable } = require('stream');\nconst pass = new PassThrough();\nconst writable = new Writable();\npass.pipe(writable);\npass.unpipe(writable);\n// readableFlowing is now false.\npass.on('data', (chunk) =&gt; { console.log(chunk.toString()); });\npass.write('ok');  // Will not emit 'data'.\npass.resume();     // Must be called to make stream emit 'data'.\n</code></pre><ul> <li>\u7576<code>readable.readableFlowing</code>\u9019\u500b\u5c6c\u6027\u7684\u503c\u70ba<code>false</code>\u7684\u8a71,\u8cc7\u6599(data)\u5c07\u53ef\u4ee5(may)\u88ab\u7d2f\u7a4d(accumulating)\u5728<code>stream</code>(\u4e32\u6d41)\u7684\u5167\u90e8\u7de9\u5b58(internal buffer)\u4e4b\u4e2d(within)</li> </ul> </li> <li> <p>\u9078\u64c7\u4e00\u500bAPI\u985e\u578b (Choose one API style)</p> </li> <li>\u53ef\u8b80\u53d6\u4e32\u6d41(Readable) API\u5df2\u7d93\u767c\u5c55(evolved)\u6210\u80fd\u8de8(accross)\u591a\u500b(multiple)Node\u7248\u672c(versions)\u4e26\u63d0\u4f9b(provides)\u591a\u500b(multiple)\u6d88\u8017(consuming)\u8cc7\u6599\u6d41(stream data)\u7684\u65b9\u6cd5(method)<ul> <li>\u901a\u5e38\u4f86\u8aaa(In general),\u958b\u767c\u8005(developers)\u61c9\u8a72\u8981\u9078\u64c7(choose)\u4e00\u500b\u6d88\u8017(consuming)\u8cc7\u6599(data)\u7684\u65b9\u6cd5(method)\u4e26\u4e14\u61c9\u8a72\u6c38\u9060(never)\u4e0d\u8981\u5728\u55ae\u4e00(single)\u500b<code>stream</code>(\u4e32\u6d41\u4e2d)\u4f7f\u7528(use)\u591a\u500b(multiple)\u65b9\u6cd5(methods)\u4f86\u6d88\u8017(consume)\u8cc7\u6599(data)</li> <li>\u5177\u9ad4\u4f86\u8aaa(Specifically),\u4f7f\u7528<code>on('data')</code> &amp; <code>on('readable')</code> &amp; <code>pipe()</code>\u7684\u7d44\u5408,\u6216\u662f\u975e\u540c\u6b65(asynchronous)\u7684\u8fed\u4ee3\u5668(iterators)\u53ef\u80fd\u6703\u5c0e\u81f4\u4e0d\u76f4\u89ba(unintuitive)\u7684\u884c\u70ba(behavior)</li> </ul> </li> <li>\u5efa\u8b70\u5927\u591a\u6578\u7684\u4f7f\u7528\u8005\u53ef\u4ee5\u5229\u7528readable.pipe()\u65b9\u6cd5(method),\u56e0\u70ba\u5b83\u80fd\u63d0\u4f9b(provide)\u6d88\u8017(consuming)\u8cc7\u6599\u6d41(stream data)\u7684\u6700\u7c21\u55ae(easiest)\u7684\u5be6\u4f5c(implemented)\u65b9\u5f0f<ul> <li>\u958b\u767c\u8005\u82e5\u8981\u6c42(require)\u66f4\u7d30\u7dfb(fine-grained)\u5730\u63a7\u5236(control over)\u8f49\u63db(transform) &amp; \u751f\u6210\u8cc7\u6599(generation of data)\u7684\u8a71,\u80fd\u4f7f\u7528EventEmitter\u985e\u5225(class)\u4ee5\u53ca<code>readable.on('readable')</code>/<code>readable.read()</code> or <code>readable.pause()/readable.resume()</code> APIs</li> </ul> </li> <li> <p>Class</p> </li> <li>stream.readable</li> <li> <p>Event</p> <ul> <li>data</li> <li>args<ul> <li>chunk (Buffer) | (String) | (any)</li> <li>\u8cc7\u6599\u584a(The chunk of data)\u3002\u5c0d\u65bc\u90a3\u4e9b\u4e0d\u662f\u4ee5\u7269\u4ef6\u6a21\u5f0f(object mode)\u4f86\u64cd\u4f5c(operating in)\u7684<code>streams</code>(\u4e32\u6d41)\u4f86\u8aaa,\u8cc7\u6599\u584a(chunk)\u5c07\u6703\u662f\u5b57\u4e32(string) or <code>Buffer</code>(\u7de9\u5b58)\u90192\u7a2e\u578b\u5225\u4e4b\u4e00\u3002\u800c\u5c0d\u65bc\u662f\u4ee5\u7269\u4ef6\u6a21\u5f0f(object mode)\u4f86\u64cd\u4f5c(operating in)\u7684<code>streams</code>(\u4e32\u6d41)\u4f86\u8aaa,\u8cc7\u6599\u584a(chunk)\u5c07\u80fd\u662f\u9664\u4e86<code>null</code>\u4ee5\u5916\u7684Javascript\u4e2d\u7684\u4efb\u4f55\u503c(any value)</li> </ul> </li> <li>\u6bcf\u7576(whenever)<code>stream</code>(\u4e32\u6d41)\u5c07\u8cc7\u6599\u584a(a chunk of data)\u7684\u64c1\u6709\u6b0a(ownership)\u8f49\u79fb(relinquishing)\u7d66\u6d88\u8cbb\u8005(consumer)\u6642,\u90fd\u6703\u767c\u51fa(emitted)<code>data</code>\u4e8b\u4ef6(event)</li> <li>\u6bcf\u7576(whenever)\u900f\u904e\u547c\u53eb(calling)readable.pipe()\u65b9\u6cd5 or readable.resume()\u65b9\u6cd5 or \u9644\u52a0(attaching)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u7684\u56de\u547c\u51fd\u5f0f(callback)\u5728<code>data</code>\u9019\u500b\u4e8b\u4ef6(event)\u4e0a\u6642,\u4f86\u8b93<code>stream</code>(\u4e32\u6d41)\u88ab\u5207\u63db(switched)\u70ba\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u7684\u6642\u5019,\u90fd\u6709\u53ef\u80fd(may)\u6703\u767c\u751f(occur)\u767c\u51fa(emitted)<code>data</code>\u9019\u500b\u4e8b\u4ef6(event)</li> <li>\u6bcf\u7576(whenever)\u547c\u53eb(called)readable.read()\u65b9\u6cd5(method)\u6642,\u4e26\u4e14\u8cc7\u6599\u584a(a chunk of data)\u662f\u80fd\u5920(available)\u88ab\u56de\u50b3(returned)\u7684\u60c5\u6cc1\u4e0b\u6642,\u4e5f\u53ef\u80fd\u6703\u767c\u51fa(emitted)<code>data</code>\u9019\u500b\u4e8b\u4ef6(event)</li> <li>\u9644\u52a0(Attaching)\u4e00\u500b\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u5230\u90a3\u4e9b\u9084\u5c1a\u672a(has not been)\u88ab\u660e\u78ba(explicitly)\u5730\u66ab\u505c(paused)\u7684<code>stream</code>(\u4e32\u6d41)\u4e0a\u6642,\u5c07\u6703\u628a<code>stream</code>(\u4e32\u6d41)\u5207\u63db\u70ba\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u3002\u9019\u6642,\u8cc7\u6599(data)\u5c07\u6703\u5728\u5176\u80fd\u5920(available)\u4f7f\u7528\u6642\u76e1\u5feb(as soon as)\u5730\u50b3\u905e(passed)\u51fa\u53bb</li> <li>\u82e5\u8a72<code>stream</code>(\u4e32\u6d41)\u7684\u9810\u8a2d(default)\u7de8\u78bc\u683c\u5f0f(encoding)\u5df2\u7d93\u6709\u900f\u904ereadable.setEncoding()\u65b9\u6cd5(method)\u4f86\u6307\u5b9a(specified)\u904e\u7684\u8a71,\u4e8b\u4ef6\u76e3\u807d\u5668(listener)\u56de\u547c\u51fd\u5f0f(callback)\u5c07\u6703\u628a\u8cc7\u6599\u584a(the chunk of data)\u4ee5\u5b57\u4e32(string)\u578b\u5225\u7684\u65b9\u5f0f\u50b3\u905e(passed)\u51fa\u53bb; \u5426\u5247(otherwise),\u8cc7\u6599(data)\u5c07\u6703\u4ee5<code>Buffer</code>(\u7de9\u5b58)\u578b\u5225\u7684\u65b9\u5f0f\u4f86\u50b3\u905e(passed)\u51fa\u53bb     JavaScript<pre><code>const readable = getReadableStreamSomehow();\nreadable.on('data', (chunk) =&gt; {\nconsole.log(`Received ${chunk.length} bytes of data.`);\n});\n</code></pre></li> <li>pause</li> <li>\u7576\u547c\u53eb(called)stream.pause()\u65b9\u6cd5(method)\u6642,\u4e26\u4e14readable.redableFlowing\u7684\u5c6c\u6027\u503c\"\u4e0d\u70ba\"<code>false</code>\u7684\u8a71,<code>pause</code>\u4e8b\u4ef6(event)\u5c31\u6703\u88ab\u767c\u51fa(emitted)</li> <li> <p>method</p> </li> <li>readable.pause()<ul> <li>Returns: (this)</li> <li><code>readable.pause()</code>\u65b9\u6cd5(method)\u6703\u5c0e\u81f4(cause)\u8655\u65bc\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u7684<code>stream</code>(\u4e32\u6d41)\u505c\u6b62(stop)\u767c\u51fa(emitting)data\u9019\u500b\u4e8b\u4ef6(events),\u4e26\u5f9e\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u4e2d\u5207\u63db\u51fa\u4f86(switching out of)\u3002\u4efb\u4f55(any)\u8b8a\u6210(becomes)\u53ef\u7528(available)\u7684\u8cc7\u6599(data)\u90fd\u5c07\u6703\u4fdd\u6301(remain)\u5728\u5167\u90e8\u7de9\u5b58(internal buffer)\u4e2d   JavaScript<pre><code>const readable = getReadableStreamSomehow();\nreadable.on('data', (chunk) =&gt; {\nconsole.log(`Received ${chunk.length} bytes of data.`);\nreadable.pause();\nconsole.log('There will be no additional data for 1 second.');\nsetTimeout(() =&gt; {\nconsole.log('Now data will start flowing again.');\nreadable.resume();\n}, 1000);\n});\n</code></pre></li> <li>\u88dc\u5145: \u82e5\u6709\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u7684\u8a71,<code>readable.pause()</code>\u65b9\u6cd5(method)\u5c07\u6703 \u7121\u6548 (no effect)</li> </ul> </li> <li>readable.read([size])<ul> <li>args</li> <li>size: (Number)<ul> <li>\u9019\u662f\u4e00\u500b\u53ef\u9078\u64c7\u6027(optional)\u8981\u4e0d\u8981\u7d66\u7684\u53c3\u6578(argument),\u662f\u7528\u4f86\u6307\u5b9a(specify)\u6709\u591a\u5c11\u6578\u91cf\u7684\u8cc7\u6599(data)\u8981\u88ab\u8b80\u53d6(read)</li> </ul> </li> <li>Returns: (string) | (Buffer) | (null) | (any)</li> <li>\u6b64<code>readable.read()</code>\u65b9\u6cd5(method)\u6703\u5f9e\u5167\u90e8\u7de9\u5b58\u5340(internal buffers)\u62c9\u51fa(pull)\u4e00\u4e9b\u8cc7\u6599(data)\u4e26\u4e14\u56de\u50b3(returns)\u9019\u4e9b\u8cc7\u6599\u3002\u82e5\u6c92\u6709\u8cc7\u6599\u80fd\u5920(available)\u8b80\u53d6\u7684\u8a71,\u5c31\u6703\u56de\u50b3(returned)<code>null</code></li> <li>\u9810\u8a2d\u60c5\u6cc1(default)\u4e0b,\u56de\u50b3(returned)\u7684\u8cc7\u6599\u6703\u662f<code>Buffer</code>(\u7de9\u5b58)\u7269\u4ef6(object),\u9664\u975e(unless)\u6211\u5011\u6709\u900f\u904ereadable.setEncoding()\u65b9\u6cd5(method)\u4f86\u6307\u5b9a(specify)\u60f3\u8981\u7684\u7de8\u78bc\u683c\u5f0f(encoding),\u6216\u662f<code>stream</code>(\u4e32\u6d41)\u662f\u4ee5\u7269\u4ef6\u6a21\u5f0f(object mode)\u4f86\u904b\u4f5c(operating)\u7684</li> <li>\u6b64\u65b9\u6cd5(method)\u4e2d\u7684\u53ef\u9078\u6027(optional)\u586b\u5165\u7684\u53c3\u6578(argument)<code>size</code>\u53ef\u4ee5\u7528\u4f86\u6307\u5b9a(specifies)\u8981\u8b80\u53d6(read)\u591a\u5c11\u7279\u5b9a(specific)\u6578\u91cf(number)\u7684\u4f4d\u5143\u7d44(bytes)\u3002\u82e5<code>size</code>\u53c3\u6578\u4e0d\u662f\u6709\u6548(available)\u7684\u8a71,\u90a3\u9ebc\u5c31\u6703\u56de\u50b3<code>null</code>,\u9664\u975e(unless)<code>stream</code>(\u4e32\u6d41)\u5df2\u7d93\u7d50\u675f(ended)\u4e86\u7684\u8a71,\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b(in which case),\u5c31\u6703\u5c07\u6240\u6709\u5728\u5167\u90e8\u7de9\u5b58(internal buffer)\u4e2d\u5269\u4e0b(remaining)\u7684\u8cc7\u6599(data)\u90fd\u56de\u50b3(returned)\u51fa\u4f86</li> <li>\u82e5\u6b64\u65b9\u6cd5\u4e2d\u7684<code>size</code>\u53c3\u6578\u6c92\u6709\u88ab\u6307\u5b9a(specified)\u7684\u8a71,\u5c07\u56de\u50b3(returned)\u6240\u6709\u5305\u542b(contained)\u5728\u5167\u90e8\u7de9\u5b58\u5340(internal buffer)\u4e2d\u7684\u8cc7\u6599(data)</li> <li><code>size</code>\u53c3\u6578\u7684\u503c\u5fc5\u9808\u5c0f\u65bc or \u7b49\u65bc 1 <code>Gib</code></li> <li><code>readable.read()</code>\u65b9\u6cd5(method)\u61c9\u53ea\u80fd\u5728\u4ee5\u66ab\u505c\u6a21\u5f0f(<code>paused</code> mode)\u904b\u4f5c(operating)\u4e26\u5728\u53ef\u8b80\u53d6\u4e32\u6d41(Readable)\u4e2d\u547c\u53eb(called)\u6b64\u65b9\u6cd5\u3002\u5728\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u4e2d,\u76f4\u5230(until)\u5167\u90e8\u7de9\u5b58(internal buffer)\u88ab\u5b8c\u5168\u8017\u76e1(fully drained)\u6642,\u5c31\u6703\u81ea\u52d5\u5730\u547c\u53eb<code>readable.read()</code>\u65b9\u6cd5   JavaScript<pre><code>const readable = getReadableStreamSomehow();\n// 'readable' may be triggered multiple times as data is buffered in\nreadable.on('readable', () =&gt; {\nlet chunk;\nconsole.log('Stream is readable (new data received in buffer)');\n// Use a loop to make sure we read all currently available data\nwhile (null !== (chunk = readable.read())) {\nconsole.log(`Read ${chunk.length} bytes of data...`);\n}\n});\n// 'end' will be triggered once when there is no more data available\nreadable.on('end', () =&gt; {\nconsole.log('Reached end of stream.');\n});\n</code></pre></li> <li>\u6bcf\u4e00\u6b21(Each)\u547c\u53eb(call)<code>readable.read()</code>\u65b9\u6cd5\u90fd\u6703\u56de\u50b3(returns)\u4e00\u500b\u8cc7\u6599\u584a(a chunk of data), \u6216\u662f<code>null</code>\u3002\u800c\u9019\u4e9b\u8cc7\u6599\u584a(chunks)\u4e26\u4e0d\u662f\u4e32\u9023(concatenated)\u7684</li> <li>\u5728\u4e0a\u9762\u7684\u7bc4\u4f8b\u7a0b\u5f0f\u78bc\u4e2d,<code>while</code>\u8ff4\u5708(loop)\u662f\u5fc5\u8981(necessary)\u5730\u7528\u4f86\u6d88\u8017(consume)\u7576\u524d(currently)<code>buffer</code>(\u7de9\u5b58)\u4e2d\u7684\u6240\u6709\u8cc7\u6599(data)</li> <li>\u7576\u8b80\u53d6(reading)\u4e00\u500b\u6bd4\u8f03\u5927(large)\u7684\u6a94\u6848(file)\u6642,<code>readable.read()</code>\u65b9\u6cd5\u5c07\u6703\u56de\u50b3<code>null</code>,\u5230\u76ee\u524d\u70ba\u6b62(so far)\u5df2\u7d93\u6d88\u8017(consumed)\u6389\u6240\u6709\u7684\u7de9\u5b58(buffered)\u5167\u5bb9(content)\u4e86,\u4f46\u662f\u4ecd\u7136\u6709\u66f4\u591a\u8cc7\u6599\u5c1a\u672a\u88ab\u7de9\u5b58(buffered)\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b(In this case),\u7576\u4ecd\u7136\u6709\u66f4\u591a\u8cc7\u6599\u9084\u5728<code>buffer</code>(\u7de9\u5b58)\u6642,\u5c31\u6703\u767c\u51fa(emitted)\u4e00\u500b\u65b0(new)\u7684readable\u4e8b\u4ef6(event)\u3002\u6700\u5f8c(Finally),\u7576\u6c92\u6709\u66f4\u591a(no more)\u7684\u8cc7\u6599(data)\u8981\u50b3\u4f86\u6642,\u5c31\u6703\u767c\u51fa(emitted)end\u4e8b\u4ef6(event)</li> <li>\u56e0\u6b64(Therefore),\u82e5\u8981\u5f9e\u53ef\u8b80\u53d6\u4e32\u6d41(<code>readable</code>)\u4e2d\u8b80\u53d6(read)\u4e00\u500b\u6a94\u6848(file)\u7684\u5168\u90e8\u5167\u5bb9(whole contents)\u7684\u8a71,\u8de8\u591a\u500breadable\u4e8b\u4ef6(event)\u4f86\u6536\u96c6(collect)\u8cc7\u6599\u584a(chunks)\u662f\u5fc5\u8981(necessary)\u7684 JavaScript<pre><code>const chunks = [];\nreadable.on('readable', () =&gt; {\nlet chunk;\nwhile (null !== (chunk = readable.read())) {\nchunks.push(chunk);\n}\n});\nreadable.on('end', () =&gt; {\nconst content = chunks.join('');\n});\n</code></pre></li> <li>\u5728\u7269\u4ef6\u6a21\u5f0f(object mode)\u4e2d\u7684\u53ef\u8b80\u53d6\u4e32\u6d41(<code>Readable</code>)\u5c07\u7e3d\u662f\u5728\u547c\u53eb(call)<code>readable.read(size)</code>\u65b9\u6cd5\u6642,\u56de\u50b3(return)\u55ae\u4e00(single)\u500b\u9805\u76ee(item),\u800c\u4e0d\u7ba1(regardless of)\u6b64\u65b9\u6cd5\u4e2d\u7684<code>size</code>\u53c3\u6578(argument)\u503c\u662f\u88ab\u6307\u5b9a\u70ba\u591a\u5c11</li> <li>\u82e5<code>readable.read()</code>\u65b9\u6cd5(method)\u56de\u50b3(returns)\u4e00\u500b\u8cc7\u6599\u584a(a chunk of data),\u90a3\u9ebc\u5c31\u6703\u767c\u51fa(emitted)\u4e00\u500bdata\u4e8b\u4ef6(event)</li> <li>\u82e5\u5728end\u4e8b\u4ef6(event)\u5df2\u88ab\u767c\u51fa(emitted)\u4e4b\u5f8c\u624d\u547c\u53ebstream.read(size)\u65b9\u6cd5(method)\u7684\u8a71,\u5c07\u6703\u56de\u50b3(return)<code>null</code>\u3002\u9019\u9ebc\u505a\u4e26\u4e0d\u6703\u5f15\u767c(raised)\u904b\u884c\u932f\u8aa4(<code>runtime error</code>)</li> </ul> </li> <li>readable.resume()<ul> <li>Returns: (this)</li> <li><code>readable.resume()</code>\u65b9\u6cd5(method)\u5c07\u6703\u5c0e\u81f4\u660e\u78ba(explicitly)\u5730\u986f\u793a\u66ab\u505c(paused)\u7684\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u6703 \u7e7c\u7e8c (resume)\u767c\u51fa(emitting)data\u4e8b\u4ef6(events),\u4e26\u5c07<code>stream</code>(\u4e32\u6d41)\u5207\u63db(switching)\u5230\u6d41\u52d5\u6a21\u5f0f(<code>flowing</code> mode)\u4e2d</li> <li><code>readable.resume()</code>\u65b9\u6cd5(method)\u53ef\u4ee5\u88ab\u7528\u4f86(used to)\u5b8c\u5168(fully)\u5730\u6d88\u8017(consume)\u5f9e<code>stream</code>(\u4e32\u6d41)\u50b3\u905e\u904e\u4f86\u7684\u8cc7\u6599(data),\u800c\u7121\u9700(without)\u5be6\u969b(actually)\u5730\u8655\u7406(processing)\u4efb\u4f55\u90a3\u6a23\u7684\u8cc7\u6599(any of that data)   JavaScript<pre><code>getReadableStreamSomehow()\n.resume()\n.on('end', () =&gt; {\nconsole.log('Reached the end, but did not read anything.');\n});\n</code></pre></li> <li>\u88dc\u5145: \u82e5\u6709\u53ef\u8b80\u53d6\u4e32\u6d41(readable stream)\u4e8b\u4ef6\u76e3\u807d\u5668(event listener)\u7684\u8a71,<code>readable.resume()</code>\u65b9\u6cd5(method)\u5c07\u6703 \u7121\u6548 (no effect)</li> </ul> </li> </ul> </li> </ul> </li> </ul>"},{"location":"programming_language/nodejs/#_2","title":"\u53c3\u8003\u8cc7\u6599\u4f86\u6e90","text":""},{"location":"programming_language/nodejs/#_3","title":"\u5b98\u65b9\u6587\u4ef6","text":"<ul> <li>Node.js</li> <li>Node Package Manager(NPM)</li> <li>Yarn</li> <li>Node Version Manager(NVM)</li> <li>Express.js</li> </ul>"},{"location":"programming_language/nodejs/#_4","title":"\u7db2\u8def\u6587\u7ae0","text":"<ul> <li>Understanding Worker Threads in Node.js</li> <li>\u6df1\u5165\u7406\u89e3 Node.js \u7684\u8a2d\u8a08\u932f\u8aa4 \u2014 \u5f9e Ryan Dahl \u7684\u6f14\u8b1b\u4e2d\u53cd\u601d</li> <li>\u5e38\u898b\u7684\u4e94\u500b\u958b\u6e90\u5c08\u6848\u6388\u6b0a\u689d\u6b3e,\u4f7f\u7528\u8edf\u9ad4\u66f4\u81ea\u7531</li> </ul>"},{"location":"programming_language/nodejs/#_5","title":"\u7db2\u8def\u5f71\u7247","text":"<ul> <li>10 Things I Regret About Node.js - Ryan Dahl - JSConf EU</li> </ul>"},{"location":"version_control/git/","title":"Git Learn","text":""},{"location":"version_control/git/#git","title":"\u81ea\u4e3b\u5b78\u7fd2 Git \u7684\u89c0\u5ff5\u548c\u6307\u4ee4\u5f8c\u505a\u7684\u7d71\u6574 &amp; \u5b78\u7fd2\u7b46\u8a18","text":""},{"location":"version_control/git/#_1","title":"\u5b89\u88dd\u65b9\u5f0f","text":""},{"location":"version_control/git/#windows","title":"Windows\u7cfb\u7d71","text":"<ul> <li>\u9023\u7d50: https://git-scm.com/download/win</li> <li>\u5b89\u88dd\u5b8c\u5f8c,\u4f7f\u7528Git Bash\u5c31\u53ef\u4ee5\u64cd\u4f5cGit\u4e86</li> <li>$ <code>which git</code>    // /mingw/bin/git</li> <li>$ <code>git --version</code>   // git version 2.28.0.windows.1</li> <li>GUI client\u63a8\u85a6: SourceTree, GitHub Desktop<ul> <li>\u4e0b\u8f09\u9023\u7d50: https://git-scm.com/downloads/guis</li> </ul> </li> <li>\u88dc\u5145: Git Bash\u4e0d\u540c\u65bcWindows\u5167\u5efa\u7684\"\u547d\u4ee4\u63d0\u793a\u5b57\u5143\",\u5b83\u672c\u8eab\u6a21\u64ec\u4e86Linux\u7684 Bash</li> </ul>"},{"location":"version_control/git/#macos","title":"MacOS\u7cfb\u7d71","text":"<ul> <li>\u9023\u7d50: https://git-scm.com/download/mac</li> <li>\u6216\u662f\u5229\u7528Homebrew\u5b89\u88dd</li> <li>$ <code>brew install git</code></li> <li>\u88dc\u5145: Homebrew\u662f\u4e00\u500bMacOS\u5c08\u5c6c\u7684\u5957\u4ef6\u7ba1\u7406\u5305\u5de5\u5177,\u6709\u9ede\u50cf\u662fLinux\u7684apt-get\u4e4b\u985e\u7684\u5b89\u88dd\u5de5\u5177,\u901a\u5e38\u53ea\u8981\u4e00\u884c\u6307\u4ee4\u5c31\u53ef\u4ee5\u5b8c\u6210\u4e0b\u8f09.\u7de8\u8b6f.\u5b89\u88dd</li> <li>GUI client\u63a8\u85a6: SourceTree, GitHub Desktop<ul> <li>\u4e0b\u8f09\u9023\u7d50: https://git-scm.com/downloads/guis</li> </ul> </li> </ul>"},{"location":"version_control/git/#linux","title":"Linux\u7cfb\u7d71","text":"<ul> <li>\u9023\u7d50: https://git-scm.com/download/linux</li> <li>\u5229\u7528apt-get\u5b89\u88dd</li> <li>$ <code>sudo apt-get install git</code>    // \u5728Linux\u7cfb\u7d71\u4e2d\u8981\u5b89\u88dd\u8edf\u9ad4\u8981\u5148\u5207\u63db\u6210root\u6b0a\u9650</li> <li>GUI client\u63a8\u85a6: gitk<ul> <li>$ <code>sudo apt-get install gitk</code></li> </ul> </li> </ul>"},{"location":"version_control/git/#git_1","title":"\u8a2d\u5b9aGit","text":"<p><code>git config</code> - Get and set repository or global options <code>git log</code> - Show commit logs</p> <ul> <li>\u6240\u6709Git\u76f8\u95dc\u7684\u8a2d\u5b9a\u90fd\u6703\u5132\u5b58\u5728 <code>~/.gitconfig</code> \u9019\u500b\u6a94\u6848\u88e1</li> <li>\u8a2d\u5b9a\u4f7f\u7528\u8005\u7684Email\uff06username</li> <li>$ <code>git config --global user.name \"Hans-Tsai\"</code></li> <li>$ <code>git config --global user.email \"lgs840522@gmail.com\"</code></li> <li>\u6aa2\u8996\u76ee\u524d\u7684\u8a2d\u5b9a</li> <li>$ <code>cat ~/.gitconfig</code></li> <li>$ <code>git config --list</code></li> <li>\u8a2d\u5b9aGit\u8981\u4f7f\u7528\u7684\u7de8\u8f2f\u5668(\u9810\u8a2d\u662f\u4f7f\u7528Vim)</li> <li>$ <code>git config --global core.editor emacs</code></li> <li>\u8a2d\u5b9aGit\u5ba2\u88fd\u5316\u7e2e\u5beb\u6307\u4ee4</li> <li>$ <code>git config --global alias.co checkout</code> </li> <li>$ <code>git config --global alias.br branch</code></li> <li>$ <code>git config --global alias.st status</code></li> <li>$ <code>git config --global alias.ls 'log --graph --pretty=format:\"%h &lt;%an&gt; %ar %s\"'</code></li> </ul>"},{"location":"version_control/git/#git_2","title":"Git \u57fa\u790e\u5e38\u7528\u6307\u4ee4","text":"<p><code>git init</code> - Create an empty Git repository or reinitialize an existing one <code>git status</code> - Show the working tree status <code>git add</code> - Add file contents to the index <code>git commit</code> - Record changes to the repository <code>git log</code> - Show commit logs <code>git rm</code> - Remove files from the working tree and from the index <code>git mv</code> - Move or rename a file, a directory, or a symlink <code>gitignore</code> - Specifies intentionally untracked files to ignore <code>git clean</code> - Remove untracked files from the working tree <code>git blame</code> - Show what revision and author last modified each line of a file <code>git checkout</code> - Switch branches or restore working tree files <code>git switch</code> - Switch branches <code>git restore</code> - Restore working tree files <code>git reset</code> - Reset current HEAD to the specified state <code>git reflog</code> - Manage reflog information <code>git tag</code> - Create, list, delete or verify a tag object signed with GPG <code>git merge</code> - Join two or more development histories together <code>git rebase</code> - Reapply commits on top of another base tip <code>git revert</code> - Revert some existing commits</p>"},{"location":"version_control/git/#git_3","title":"\u521d\u59cb\u5316\u8a72\u76ee\u9304,\u4e3b\u8981\u76ee\u7684\u662f\u8b93Git\u958b\u59cb\u5c0d\u9019\u500b\u76ee\u9304\u9032\u884c\u7248\u672c\u63a7\u5236","text":"<ul> <li>$ <code>git init</code></li> <li>\u6703\u5728\u8a72\u76ee\u9304\u88e1\u9762\u5efa\u7acb\u4e00\u500b <code>.git/</code> \u96b1\u85cf\u6a94\u76ee\u9304,\u6574\u500bGit\u7684\u7cbe\u83ef\u90fd\u6703\u5728\u9019\u500b\u76ee\u9304\u88e1\u9762</li> <li>\u5982\u679c\u8a72\u76ee\u9304\u4e0d\u60f3\u518d\u88abGit\u505a\u7248\u672c\u63a7\u5236,\u53ea\u8981\u5c07<code>.git/</code>\u76ee\u9304\u6574\u500b\u522a\u9664\u5c31\u53ef\u4ee5 </li> <li>$ <code>rm -rf .git/</code> </li> <li>\u6ce8\u610f:\u6574\u500b\u5c08\u6848\u76ee\u9304\u88e1,\u4ec0\u9ebc\u6a94\u6848\u6216\u76ee\u9304\u522a\u4e86\u90fd\u6551\u5f97\u56de\u4f86,\u4f46 <code>.git/</code> \u76ee\u9304\u53ea\u8981\u522a\u4e86\u5c31\u6c92\u8fa6\u6cd5\u4e86 !</li> <li>\u67e5\u8a62\u73fe\u5728\u9019\u500b\u76ee\u9304\u7684\"\u72c0\u614b\"</li> <li>$ <code>git status</code></li> <li>Untracked files =&gt; \u4ee3\u8868\u9019\u500b\u6a94\u6848\u5c1a\u672a\u88ab\u52a0\u5230Git\u7248\u63a7\u7cfb\u7d71\u88e1,\u9084\u6c92\u958b\u59cb\u6b63\u5f0f\u88ab\"\u8ffd\u8e64\",\u5b83\u53ea\u662f\u525b\u525b\u624d\u52a0\u5165\u5230\u9019\u500b\u76ee\u9304\u88e1\u800c\u5df2</li> <li></li> </ul>"},{"location":"version_control/git/#git_4","title":"\u628a\u9019\u500b\u6a94\u6848\u4ea4\u7d66Git\u4f86\u63a7\u7ba1","text":"<ul> <li>$ <code>git add welcome.html</code></li> <li>\u525b\u624d\u7684\u6a94\u6848 <code>welcome.html</code>\u5f9eUntracked\u8b8a\u6210new file\u72c0\u614b =&gt; \u8868\u793a\u9019\u500b\u6a94\u6848\u5df2\u7d93\u88ab\u5b89\u7f6e\u5230\u66ab\u5b58\u5340(Staging Area),\u7b49\u5f85\u7a0d\u5f8c\u8ddf\u5176\u4ed6\u6a94\u6848\u4e00\u8d77\u88ab\u5b58\u5230\u5132\u5b58\u5eab\u88e1\u9762</li> <li></li> <li>\u5982\u679c\u60f3\u5c07\u5168\u90e8\u6a94\u6848\u4e00\u53e3\u6c23\u52a0\u5165\u66ab\u5b58\u5340,\u53ef\u4ee5\u4f7f\u7528--all\u53c3\u6578;\u4e0d\u8ad6\u6a94\u6848\u72c0\u614b\u662fUntracked files\u6216\u662fChanges not staged for commit,\u90fd\u6703\u4e00\u53e3\u6c23\u8b8a\u6210Changes to committed<ul> <li>$ <code>git add --all</code> or $ <code>git add -A</code> </li> <li>$ <code>git add --all</code> =&gt;\u6703\u5c07\u6574\u500b\u5c08\u6848\u88e1\u7684\u5168\u90e8\u7570\u52d5\u6a94\u6848\u52a0\u5230\u66ab\u5b58\u5340,\u4e0d\u53d7\u9650\u9019\u500b\u6307\u4ee4\u5728\u54ea\u4e00\u5c64\u76ee\u9304\u57f7\u884c</li> <li>$ <code>git add .</code>=&gt;\u53ea\u6703\u628a\u7576\u524d\u57f7\u884ccommand\u7684\u90a3\u500b\u76ee\u9304\u4ee5\u53ca\u5b83\u7684\u5b50\u76ee\u9304\u7684\u7570\u52d5\u6a94\u6848\u52a0\u5230\u66ab\u5b58\u5340,\u6240\u4ee5\u5728\u54ea\u4e00\u5c64\u76ee\u9304\u57f7\u884c\u9019\u500bcommand\u5f88\u91cd\u8981</li> </ul> </li> <li>\u5982\u679c\u60f3\u8981\u53d6\u6d88\u525b\u525b\u52a0\u5165\u5230\u66ab\u5b58\u5340(Staging Area)\u7684\u6a94\u6848\u7684\u8a71,\u4e26\u5c07\u8a72\u6a94\u6848\u4e1f\u56de\u5230\u5de5\u4f5c\u76ee\u9304(Working Directory)\u4e2d,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u6307\u4ee4<ul> <li>$ <code>git restore --staged &lt;\u8981\u5f9e\u66ab\u5b58\u5340\u9000\u56de\u5230\u5de5\u4f5c\u76ee\u9304\u7684\u6a94\u6848&gt;</code>: \u9019\u6a23\u5c31\u53ef\u4ee5\u628a\u525b\u525b\u52a0\u5165\u5230\u66ab\u5b58\u5340(Staging Area)\u7684\u6a94\u6848\u4e1f\u56de\u5230\u5de5\u4f5c\u76ee\u9304(Working Directory)\u4e2d</li> <li><code>-S</code> (=&gt; <code>--staged</code>): \u6307\u5b9a\u8981\u5f9e\u54ea\u500b\u4f4d\u7f6e(location)<code>\u56de\u5fa9</code>(Restore)\u5230\u5de5\u4f5c\u76ee\u9304(Working Directory)\u4e2d</li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#staging-area","title":"\u628a\u66ab\u5b58\u5340(staging area)\u7684\u6a94\u6848\u63d0\u4ea4\u5230\u5009\u5eab\u5b58\u6a94","text":"<ul> <li>$ <code>git commit -m \"git commit\u7df4\u7fd2\"</code></li> <li>-m = (--messge)\u53c3\u6578:\u4ee3\u8868\u5728\u9019\u6b21commit\u505a\u4e86\u4ec0\u9ebc\u4e8b\u60c5\u7684\u8aaa\u660e\u5b57\u4e32,\u4e2d\u82f1\u6587\u7686\u53ef,\u8a00\u7c21\u610f\u8cc5\u5c31\u597d; $ <code>git commit</code>\u9810\u8a2d-m\u53c3\u6578\u662f\u5fc5\u586b\u7684</li> <li></li> <li>\u53ef\u4ee5\u4e0d\u7528\u4e8c\u6bb5\u5f0fcommit,\u4e5f\u53ef\u4ee5\u7528$ <code>git commit -a -m \"update content\"</code> \u4f86\u9054\u5230$ <code>git add</code> <ul> <li>$ <code>git commit -m</code></li> </ul> </li> <li>Git\u6bcf\u6b21commit\u90fd\u53ea\u6703\u8655\u7406\u66ab\u5b58\u5340(staging area)\u88e1\u7684\u5167\u5bb9,\u4e5f\u5c31\u662f\u8aaa,\u5982\u679c\u5728\u57f7\u884c $ <code>git commit</code> \u4e4b\u524d\u9084\u6c92\u88ab\u52a0\u5230\u66ab\u5b58\u5340\u88e1\u7684\u6a94\u6848,\u5c31\u4e0d\u6703\u88abcommit\u5230\u5132\u5b58\u5eab\u4e86</li> <li>\u63d0\u9192:\u8981\u5b8c\u6210commit\u624d\u7b97\u662f\u5b8c\u6210\u6574\u500b\u6d41\u7a0b\u5594!</li> </ul>"},{"location":"version_control/git/#git_5","title":"\u60f3\u6aa2\u8996Git\u7d00\u9304","text":"<ul> <li>\u4f7f\u7528$ <code>git log</code>\u6307\u4ee4,\u8d8a\u65b0\u7684\u8cc7\u8a0a\u6703\u5728\u8d8a\u4e0a\u9762,\u4e26\u6703\u5f97\u5230\u4ee5\u4e0b\u4e09\u500b\u8cc7\u8a0a</li> <li>Commit\u4f5c\u8005\u662f\u8ab0? =&gt; \u4eba\u662f\u8ab0\u6bba\u7684?</li> <li>\u4ec0\u9ebc\u6642\u5019commit\u7684? =&gt; \u4ec0\u9ebc\u6642\u5019\u6bba\u7684?</li> <li>\u6bcf\u6b21\u7684commit\u5927\u6982\u505a\u4e86\u54ea\u4e9b\u4e8b? =&gt; \u600e\u9ebc\u6bba\u7684?</li> <li></li> <li>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u53c3\u6578\u5c07$ <code>git log</code>\u8f38\u51fa\u6210\u4e0d\u540c\u7684\u5f62\u5f0f<ul> <li>$ <code>git log --oneline --graph</code> </li> <li><code>--oneline</code>:\u6bcf\u500bcommit\u7269\u4ef6\u50c5\u986f\u793a\u6210\u4e00\u884c</li> <li><code>--graph</code>:\u7528\u5716\u8868\u4f86\u8868\u793acommit\u7269\u4ef6\u4e4b\u9593\u7684\u7dda\u6027\u95dc\u4fc2</li> <li></li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git log</code>\u5c0b\u627e\u7279\u5b9aauthor\u7684commit\u7269\u4ef6<ul> <li>$ <code>git log --oneline --author=\"Hans\"</code></li> <li>\u4f5c\u8005(author)\u662f\u6700\u521d\u4fee\u6539\u7684\u4eba</li> <li>\u63d0\u4ea4\u8005(committer)\u662f\u6700\u5f8c\u5957\u7528\u8a72\u5de5\u4f5c\u6210\u679c\u7684\u4eba</li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git log</code>\u5c0b\u627e\u7b26\u5408\u7279\u5b9a\u5b57\u4e32\u7684commit\"\u8a0a\u606f(-m)\"<ul> <li>$ <code>git log --oneline --grep=\"initial\"</code></li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git log</code>\u641c\u5c0b\u5728\u6240\u6709commit\u7269\u4ef6\u4e2d,\u6709\u54ea\u4e9b\u7b26\u5408\u7279\u5b9a\u689d\u4ef6\u7684<ul> <li>$ <code>git log -S \"Ruby\"</code></li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git log</code>\u642d\u914d\u53c3\u6578\u4f86\u67e5\u8a62\u7279\u5b9a\u6642\u9593\u5167\u7684commit\u7269\u4ef6<ul> <li>$ <code>git log --oneline --since \"9am\" --until \"12am\" --after=\"2017-01\"</code></li> <li><code>--since</code>:\"hham/pm\"</li> <li><code>--until</code>:\"hham/pm\"</li> <li><code>--after</code>:\"yyyy-mm\"</li> </ul> </li> </ul>"},{"location":"version_control/git/#git_6","title":"\u522a\u9664Git\u6a94\u6848","text":"<ul> <li>\u522a\u9664\u6a94\u6848\u5c0dGit\u4f86\u8aaa\u90fd\u662f\u4e00\u7a2e\"\u4fee\u6539\" </li> <li>\u53ef\u4ee5\u900f\u904e\u7cfb\u7d71\u6307\u4ee4\u522a\u9664\u6a94\u6848$ <code>rm welcome.html</code><ul> <li>\u9019\u6642\u5019\u7684\u6a94\u6848\u6703\u662fdeleted\u72c0\u614b</li> <li></li> <li>\u9084\u9700\u8981\u518d\u57f7\u884c$ <code>git add xxx.txt</code> \u624d\u6703\u5c07\u9019\u500b\"\u522a\u9664\"\u52a0\u5230\u66ab\u5b58\u5340</li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git rm welcome.html</code><ul> <li>$ <code>git rm</code> = <code>rm xxx.txt</code> + <code>git add xxx.txt</code></li> <li>$ <code>git rm</code> \u76f8\u7576\u65bc\u5148$ <code>rm</code>\u522a\u9664\u6a94\u6848\u5f8c\u518d$ <code>git add</code> \u52a0\u5165\u66ab\u5b58\u5340\u7684\u5169\u6bb5\u5f0f\u52d5\u4f5c</li> <li></li> <li>\u4e0d\u7ba1\u662f\u7cfb\u7d71\u6307\u4ee4\u7684$ <code>rm</code>\u6216\u662f$ <code>git rm</code>\u90fd\u771f\u7684\u6703\u628a\u6a94\u6848\u5f9e\u5de5\u4f5c\u76ee\u9304\u522a\u6389,\u4f46\u5982\u679c\u53ea\u662f\u4e0d\u60f3\u8b93\u6a94\u6848\u518d\u88abGit\u63a7\u7ba1,\u53ef\u4ee5\u52a0\u4e0a<code>--cached</code>\u53c3\u6578</li> <li>$ <code>git rm xxx.html --cached</code></li> <li><code>--cached</code>:\u4e0d\u6703\u771f\u7684\u5c07\u6a94\u6848\u522a\u9664\u6389,\u50c5\u5c07\u6a94\u6848\u812b\u96e2Git\u63a7\u7ba1,\u6210\u70baUntracked file</li> </ul> </li> </ul>"},{"location":"version_control/git/#_2","title":"\u8b8a\u66f4\u6a94\u540d","text":"<ul> <li>\u8ddf\"\u522a\u9664\"\u6a94\u6848\u4e00\u6a23,\u8b8a\u66f4\u6a94\u540d\u4e5f\u662f\u4e00\u7a2e\"\u4fee\u6539\"</li> <li></li> <li>\u96d6\u7136\u53ea\u662f\u900f\u904e\u7cfb\u7d71\u6307\u4ee4$ <code>rm</code> \u4f86\u6539\u540d,\u4f46\u5c0dGit\u4f86\u8aaa\u6703\u88ab\u8a8d\u70ba\u662f\u5169\u500b\u52d5\u4f5c,\u5f8c\u7e8c\u4ecd\u9808\u4f7f\u7528$ <code>git add world.html</code>\u6307\u4ee4\u4f86\u628a\u9019\u4e9b\u7570\u52d5\u52a0\u5165\u66ab\u5b58\u5340<ul> <li>\u522a\u9664~hello.html~\u6a94\u6848</li> <li>\u65b0\u589eworld.html\u6a94\u6848(\u8b8a\u6210Untracked file)</li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git mv world.html hans_world.html</code><ul> <li>$ <code>git mv</code> = <code>mv \u65b0\u6a94\u540d.html</code> + <code>git add \u65b0\u6a94\u540d.html</code></li> <li>$ <code>git mv</code> \u76f8\u7576\u65bc\u5148$ <code>mv</code>\u4fee\u6539\u6a94\u540d\u5f8c\u518d$ <code>git add</code> \u52a0\u5165\u66ab\u5b58\u5340\u7684\u5169\u6bb5\u5f0f\u52d5\u4f5c</li> <li></li> <li>\u9019\u6a23<code>hans_world.html</code>\u5c31\u6703\u76f4\u63a5\u8b8a\u6210<code>renamed file</code></li> </ul> </li> <li>\u5176\u5be6Git\u662f\u6839\u64da\u6a94\u6848\u7684\"\u5167\u5bb9\"\u53bb\u7b97\u51faSHA-1\u7684\u503c,\u6240\u4ee5Git\u4e0d\u662f\u5f88\u5728\u4e4e\u4f60\u7684\u6a94\u6848\u53eb\u4ec0\u9ebc\u540d\u7a31,\u53ea\u5728\u4e4e\u6a94\u6848\u7684\u5167\u5bb9\u662f\u4ec0\u9ebc\u3002\u6240\u4ee5\u7576\u9032\u884c\u66f4\u6539\u6a94\u540d\u7684\u6642\u5019,Git\u4e26\u6c92\u6709\u70ba\u6b64\u505a\u51fa\u4e00\u500b\u65b0\u7684Blob\u7269\u4ef6,\u800c\u50c5\u662f\u6307\u5411\u539f\u4f86\u820a\u7684\u90a3\u9846Blob\u7269\u4ef6;\u4f46\u56e0\u70ba\u6a94\u6848\u540d\u7a31\u6539\u8b8a\u4e86,\u6240\u4ee5\u6703\u505a\u51fa\u4e00\u9846\u65b0\u7684Tree\u7269\u4ef6\u5594!</li> </ul>"},{"location":"version_control/git/#commit","title":"\u4fee\u6539Commit\u7d00\u9304","text":"<ul> <li>\u60f3\u4fee\u6539commit\u7d00\u9304\u6709\u4ee5\u4e0b4\u7a2e\u65b9\u6cd5<ul> <li>\u628a<code>.git/</code>\u76ee\u9304\u6574\u500b\u522a\u9664 -&gt; \u4e0d\u5efa\u8b70,\u7b49\u65bc\u780d\u6389\u91cd\u7df4</li> <li>\u4f7f\u7528$ <code>git rebase</code> \u4f86\u4fee\u6539\u6b77\u53f2</li> <li>\u5148\u628acommit\u7528$ <code>git reset</code>\u62c6\u6389,\u6574\u7406\u5f8c\u518d\u91cd\u65b0commit</li> <li>\u4f7f\u7528<code>git commit --amend</code>\u53c3\u6578\u4f86\u4fee\u6539\u6700\u5f8c\u4e00\u6b21\u7684commit\u7269\u4ef6 -&gt; \u8f03\u63a8\u85a6\u6b64\u4f5c\u6cd5!</li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e$ <code>git commit --amend -m \"\u65b0\u7684commit message\"</code>\u4f86\u4fee\u6539commit\u7d00\u9304<ul> <li><code>--amend</code>:\u53ea\u80fd\u4fee\u6539\"\u6700\u8fd1\u4e00\u6b21\"\u7684commit\u7d00\u9304</li> <li></li> </ul> </li> <li>\u5982\u679c\u5728\u5b8c\u6210commit\u5f8c,\u537b\u767c\u73fe\u6709\u4e00\u500b\u6a94\u6848\u5fd8\u4e86\u52a0\u5230\u9019\u6b21\u7684commit\u4e2d,\u4f46\u4e0d\u60f3\u56e0\u70ba\u9019\u500b\u6a94\u6848\u518d\u91cd\u65b0\u767c\u9001\u4e00\u6b21commit,\u60f3\u628a\u9019\u500b\u6a94\u6848\u52a0\u5165\u6700\u8fd1\u4e00\u6b21commit,\u6b64\u6642\u6709\u5169\u500b\u505a\u6cd5<ul> <li>\u4f7f\u7528$ <code>git reset</code> \u628a\u6700\u5f8c\u4e00\u6b21\u7684commit\u62c6\u6389,\u52a0\u5165\u65b0\u6a94\u6848\u5f8c\u518d\u91cd\u65b0commit</li> <li>\u4f7f\u7528<code>--amend</code>\u53c3\u6578\u9032\u884ccommit</li> <li>$ \u5148 <code>git add pizza.html</code>,\u5c07Untracked file \u52a0\u5165\u8ffd\u8e64</li> <li>$ \u518d <code>git commit --amend --no-edit</code>,\u628a\u9019\u500b\u6a94\u6848\u4f75\u5165\u6700\u5f8c\u4e00\u6b21\u7684commit\u4e2d,\u800c\u5f8c\u9762\u7684<code>--no-edit</code>\u53c3\u6578\u5c31\u662f\u4e0d\u8981\u958b\u555fvim\u7de8\u8f2f\u8996\u7a97\u4f86\u7de8\u8f2fcommit message\u7684\u610f\u601d</li> <li></li> </ul> </li> <li>\u63d0\u9192:\u5373\u4fbf\"\u53ea\u662f\u4fee\u6539commit message\",\u4ecd\u7136\u6703\u7522\u751f\u65b0\u7684commit id,\u56e0\u70ba\u9019\u6a23\u5c0dGit\u4f86\u8aaacommit\u7269\u4ef6\u7684\u5167\u5bb9\u662f\u6709\"\u8b8a\u52d5\"\u7684,\u6240\u4ee5Git\u6703\u91cd\u65b0\u8a08\u7b97\u4e26\u7522\u751f\u4e00\u9846\u65b0\u7684Commit\u7269\u4ef6,\u4e5f\u5c31\u662f\u8aaa\u9019\u5176\u5be6\u7b97\u662f\u4e00\u6b21\u5168\u65b0\u7684commit</li> <li>\u5982\u679c\u60f3\u4fee\u6539\u66f4\u65e9\u7684commit\u7d00\u9304,\u5c31\u5fc5\u9808\u4f7f\u7528$ <code>git rebase</code> \u6307\u4ee4\u4e86<ul> <li>\u53ef\u53c3\u8003\u5206\u652f(branch)\u64cd\u4f5c\u7684 $ <code>git rebase -i</code> \u7ae0\u7bc0 </li> </ul> </li> <li>\u5718\u968a\u958b\u767c\u5b88\u5247:\u5373\u4fbf\u53ea\u662f\u4fee\u6539commit message,\u4e0d\u7ba1\u5982\u4f55\u5b83\u5c31\u662f\u4fee\u6539\u4e86\u4e00\u6b21\u6b77\u53f2,\u6240\u4ee5\u8acb\u76e1\u91cf\"\u4e0d\u8981\"\u5728\u5df2\u7d93<code>push</code>\u51fa\u53bb\u4e4b\u5f8c\u518d\u4fee\u6539,\u5426\u5247\u53ef\u80fd\u6703\u9020\u6210\u5176\u4ed6\u4eba\u7684\u56f0\u64fe</li> </ul>"},{"location":"version_control/git/#gitgit-server-gitignore","title":"\u5982\u679c\u6709\u7279\u5b9a\u6a94\u6848\u4e0d\u60f3\u653e\u5728Git\u88e1\u9762\u4e00\u8d77\u5099\u4efd\u6216\u662f\u4e0a\u50b3\u5230Git Server\u7684\u8a71,\u4f8b\u5982:\u8cc7\u6599\u5eab\u5bc6\u78bc,\u96f2\u7aef\u4f3a\u670d\u5668\u7684\u91d1\u9470...\u53ef\u4ee5\u52a0\u5165 <code>.gitignore</code>\u4e2d","text":"<ul> <li>\u53ef\u4ee5\u5728\u5c08\u6848\u4e2d\u5efa\u7acb\u4e00\u500b <code>.gitignore</code> \u7684\u6a94\u6848,\u88e1\u9762\u53ef\u4ee5\u8a2d\u5b9a\u60f3\u8981\u5ffd\u7565\u7684\u898f\u5247</li> <li><code>.gitignore</code>\u53ea\u8981\u4e00\u88ab\u5efa\u7acb\u4e26\u7b26\u5408\u898f\u5247\u5c31\u6703\u751f\u6548,\u5373\u4f7f\u9019\u500b\u6a94\u6848\u9084\u6c92\u88abcommit\u6216\u662f\u9084\u6c92\u88abpush\u5230Git Server,\u9019\u8981\u4e00\u4f86\u6574\u500b\u5c08\u6848\u7684\u4eba\u90fd\u53ef\u4ee5\u5171\u4eab\u9019\u500b\"\u5ffd\u7565\u898f\u5247\"\u7684\u8a2d\u5b9a</li> <li>\u60f3\u67e5\u8a62\u5728\u4f7f\u2f64\u7684\u2f2f\u5177\u6216\u7a0b\u5f0f\u8a9e\u2f94\u901a\u5e38\u6703\u5ffd\u7565\u54ea\u4e9b\u6a94\u6848,\u53ef\u4ee5\u5230GitHub\u4e0a\u6709\u6574\u7406\u4e86\u2f00\u4efd\u5404\u7a2e\u7a0b\u5f0f\u8a9e\u2f94\u5e38\u2f92\u7684 <code>.gitignore</code> \u6a94\u6848<ul> <li>github/gitignore repository\u9023\u7d50:https://github.com/github/gitignore</li> </ul> </li> <li>\u53ef\u4ee5\u5229\u7528<code>-f</code>\u53c3\u6578,\u4f86\u7121\u8996 <code>.gitignore</code>\u7684\u5ffd\u7565,\u5f37\u5236\u5c07\u6a94\u6848\u52a0\u5165Git\u8ffd\u8e64\u7bc4\u570d\u4e2d<ul> <li>$ <code>git add -f xxx.tmp</code></li> <li></li> <li>\u63d0\u9192: <code>.gitignore</code> \u6a94\u6848\u8a2d\u5b9a\u7684\u898f\u5247,\u53ea\u5c0d\"\u5728\u898f\u5247\u8a2d\u5b9a\u4e4b\u5f8c\"\u7684\u6a94\u6848\u6709\u6548</li> </ul> </li> <li>\u60f3\u4e00\u6b21\u5c07\u88ab <code>.gitignore</code> \u5ffd\u7565\u7684\u6a94\u6848\u5011\u4e00\u6b21\u522a\u9664,\u53ef\u4ee5\u4f7f\u7528$ <code>git clean</code>\u4f86\u5b8c\u6210<ul> <li>$ <code>git clean</code> \u53ef\u4ee5\u5c07\u5de5\u4f5c\u76ee\u9304(working directory)\u4e2d\u7684\u6240\u6709Untracked files\u90fd\u4e00\u6b21\u522a\u9664</li> <li>$ <code>git clean -fX</code></li> <li>-f: \u5f37\u5236\u57f7\u884c</li> <li>-X: \u53ea\u79fb\u9664\u88abGit\u5ffd\u7565\u7684\u6a94\u6848(\u6709\u5728.gitignore\u4e2d\u63d0\u5230\u7684)</li> </ul> </li> </ul>"},{"location":"version_control/git/#commit_1","title":"\u6aa2\u8996\u7279\u5b9a\u6a94\u6848\u7684commit\u7d00\u9304","text":"<ul> <li>$ <code>git log -p xxx.html</code><ul> <li>-p: \u53ef\u4ee5\u66f4\u8a73\u7d30\u7684\u6aa2\u8996\u6bcf\u4e00\u6b21\u7684commit\u5230\u5e95\u505a\u4e86\u54ea\u4e9b\u4fee\u6539</li> <li>\u88dc\u5145: \u524d\u9762\u7684\"+\"\u662f\u65b0\u589e,\"-\"\u662f\u522a\u9664</li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#_3","title":"\u60f3\u8981\u77e5\u9053\u67d0\u500b\u6a94\u6848\u7684\u67d0\u4e00\u884c\u662f\u8ab0\u5beb\u7684","text":"<ul> <li>$ <code>git blame xxx.html</code></li> <li>\u53ef\u4ee5\u8a73\u7d30\u5730\u770b\u51fa\u4f86\u6bcf\u4e00\u884c\u662f\u8ab0\u5728\u4ec0\u9ebc\u6642\u5019\u5beb\u7684</li> <li>\u6bcf\u4e00\u884c\u524d\u9762\u7684SHA-1\u503c\u5c31\u662f\u6bcf\u4e00\u500bCommit\u7269\u4ef6\u7684\u8b58\u5225\u4ee3\u78bc</li> <li></li> <li>$ <code>git blame -L xxx.html</code><ul> <li>-L ,: \u53ef\u4ee5\u53ea\u986f\u793a\u6307\u5b9a\u884c\u6578\u7684\u5167\u5bb9"},{"location":"version_control/git/#working-directory-rm","title":"\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u60f3\u8981\u5fa9\u539f\u4e0d\u5c0f\u5fc3\u900f\u904e <code>rm</code> \u6307\u4ee4\u522a\u9664\u7684\u6a94\u6848","text":"<ul> <li>$ <code>git checkout</code>\u53ef\u4ee5\u7528\u4f86 (\u5728Git <code>Version 2.23.0</code> \u4e4b\u5f8c)<ul> <li>\u5207\u63db\u5206\u652f(= $ <code>git switch</code>)</li> <li>\u6062\u5fa9\u5de5\u4f5c\u76ee\u9304(working directory)\u88e1\u7684\u6587\u4ef6(= $ <code>git restore</code>)</li> <li>\u7576$ <code>git checkout \"\u5206\u652f\u540d\u7a31\"</code> \u6642,\u5c31\u6703\u5207\u63db\u5230\u6307\u5b9a\u7684\u5206\u652f</li> <li>\u4f8b\u5982:$ <code>git checkout -b tiger</code>: \u5207\u63db\u5230<code>tiger</code>\u5206\u652f,\u5982\u679c\u6c92\u6709\u8a72\u5206\u652f\u7684\u8a71,\u5c31\u65b0\u589e\u4e00\u500b<code>tiger</code>\u5206\u652f<ul> <li><code>-b &lt;\u65b0\u7684\u5206\u652f\u540d\u7a31&gt;</code>: (=&gt; <code>branch</code>): \u5207\u63db\u5230<code>&lt;\u65b0\u7684\u5206\u652f\u540d\u7a31&gt;</code>,\u5982\u679c\u6c92\u6709\u7684\u8a71,\u5c31\u65b0\u589e\u4e00\u500b<code>&lt;\u8a72\u5206\u652f&gt;</code></li> </ul> </li> <li>\u7576$ <code>git checkout \"\u6a94\u6848\u540d\u7a31 or \u8def\u5f91\"</code> \u6642,Git\u5c31\u6703\u5230 <code>.git/</code> \u76ee\u9304\u88e1\u62c9\u4e00\u4efd\u5230\u76ee\u524d\u7684\u5de5\u4f5c\u76ee\u9304(working directory)</li> </ul> </li> <li>$ <code>git checkout xxx.html</code> \u53ef\u4ee5\u5c07\u5de5\u4f5c\u76ee\u9304(working directory)\u4e2d\u4e0d\u5c0f\u5fc3\u522a\u9664(<code>rm</code>)\u6389\u7684\u6307\u5b9a\u6a94\u6848\u5fa9\u539f\u56de\u4f86</li> <li>\u4f8b\u5982: <code>pizza.html</code> \u5f9edeleted status\u8b8a\u56de\u539f\u672c\u7684\u72c0\u614b</li> <li>\u4e5f\u53ef\u4ee5\u5229\u7528 $ <code>git checkout .</code> \u4e00\u53e3\u6c23\u628a\u6240\u6709\u5de5\u4f5c\u76ee\u9304(working directory)\u4e2d\u88ab\u522a\u6389\u7684\u6a94\u6848\u6551\u56de\u4f86</li> <li></li> <li>$ <code>git checkout HEAD~2 yyy.html</code><ul> <li>\u9019\u6a23\u5c31\u6703\u5230 <code>.git/</code> \u88e1\u62ff\u8ddd\u96e2\u73fe\u5728\u5169\u500b\u7248\u672c\u4ee5\u524d\u7684 yyy.html \u4f86\u8986\u84cb\u73fe\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u7684 yyy.html ,\u4f46\u8981\u6ce8\u610f\u7684\u662f,\u9019\u540c\u6642\u4e5f\u6703\u66f4\u65b0\u66ab\u5b58\u5340(staging area)\u7684\u72c0\u614b\u5594 </li> </ul> </li> <li>\u4ee5\u6b64\u985e\u63a8, $ <code>git checkout HEAD~2</code><ul> <li>\u9019\u6a23\u5c31\u6703\u62ff\u8ddd\u96e2\u73fe\u5728\u5169\u500b\u7248\u672c\u4ee5\u524d\u7684\u6a94\u6848\u4f86\u8986\u84cb\u73fe\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u88e1\u7684\u6a94\u6848,\u540c\u6642\u4e5f\u66f4\u65b0\u66ab\u5b58\u5340(staging area)\u88e1\u7684\u72c0\u614b</li> </ul> </li> </ul>"},{"location":"version_control/git/#commit_2","title":"\u5982\u679c\u60f3\u91cd\u65b0\u7de8\u8f2f\u525b\u624d\u7684commit","text":"<ul> <li>$ <code>git log --oneline</code> \u986f\u793a\u7684\u6b77\u53f2commit\u7d00\u9304\u662f\u7531\u65b0\u5230\u820a(\u4e0a\u5230\u4e0b)<ul> <li></li> </ul> </li> <li>\u5229\u7528 $ <code>git reset f06546a</code> \u4f86\u56de\u6eaf\u5230\u904e\u53bb\u6307\u5b9a\u7684Commit\u7269\u4ef6\u4e2d<ul> <li>\u53ef\u4ee5\u4f7f\u7528\"\u76f8\u5c0d\"\u6216\u662f\"\u7d55\u5c0d\"\u7684\u8868\u793a\u65b9\u5f0f</li> <li><code>^</code> : \u524d\u4e00\u6b21</li> <li><code>~\u6b21\u6578</code> : \u8981\u5012\u9000\u81f3\u5e7e\u6b21commit\u4ee5\u524d</li> <li><code>SHA-1\u503c</code>: \u7d55\u5c0d\u7684\u8868\u793a\u65b9\u5f0f</li> <li>\u6240\u4ee5$ <code>git reset f06546a^^</code> = $ <code>git reset f06546a~2</code></li> <li>\u4f8b\u5982: $ <code>git reset f06546a^</code> =&gt;\u4ee3\u8868\u56de\u5230\u8a72commit\u7684\u524d\u4e00\u6b21commit\u7d00\u9304\u4e2d</li> <li>\u4f8b\u5982: $ <code>git reset master^</code> =&gt;\u4ee3\u8868\u56de\u5230master\u5206\u652f\u7684\u524d\u4e00\u6b21commit\u7d00\u9304\u4e2d</li> <li>\u4f8b\u5982: $ <code>git reset HEAD^</code> =&gt;\u4ee3\u8868\u56de\u5230HEAD\u76ee\u524d\u6307\u5411\u7684\u5206\u652f(\u8a72\u5206\u652f\u6307\u5411\u7684commit)\u7684\u524d\u4e00\u6b21commit\u7d00\u9304\u4e2d</li> </ul> </li> <li>$ <code>git reset &lt;\u6a21\u5f0f&gt;</code> ,\u6709\u4e09\u7a2e\u6a21\u5f0f\u53ef\u4ee5\u9078\u64c7,\u9810\u8a2d\u70ba <code>mixed</code>\u6a21\u5f0f<ul> <li><code>mixed</code> \u6a21\u5f0f: \u9019\u6a21\u5f0f\u4e0b\u7684<code>reset</code>\u6703\u628a\u66ab\u5b58\u5340(staging area)\u7684\u6a94\u6848\u4e1f\u6389,\u4f46\u4e0d\u6703\u52d5\u5230\u5de5\u4f5c\u76ee\u9304(working directory)\u7684\u6a94\u6848,\u4e5f\u5c31\u662f\u8aaacommit\u62c6\u51fa\u4f86\u7684\u6a94\u6848\u6703\u7559\u5728\u5de5\u4f5c\u76ee\u9304,\u4f46\u4e0d\u6703\u7559\u5728\u66ab\u5b58\u5340</li> <li><code>soft</code> \u6a21\u5f0f: \u9019\u6a21\u5f0f\u4e0b\u7684<code>reset</code>,\u5de5\u4f5c\u76ee\u9304(working directory)\u548c\u66ab\u5b58\u5340(staging area)\u7684\u6a94\u6848\u90fd\u4e0d\u6703\u88ab\u4e1f\u6389,\u56e0\u6b64\u770b\u8d77\u4f86\u5c31\u53ea\u6709<code>HEAD</code>\u5728\u79fb\u52d5\u800c\u5df2; \u6240\u4ee5commit\u62c6\u51fa\u4f86\u7684\u6a94\u6848\u90fd\u6703\u76f4\u63a5\u88ab\u5b58\u653e\u5728\u66ab\u5b58\u5340</li> <li><code>hard</code> \u6a21\u5f0f: \u9019\u6a21\u5f0f\u4e0b\u7684<code>reset</code>,\u4e0d\u7ba1\u662f\u66ab\u5b58\u5340(staging area)\u548c\u5de5\u4f5c\u76ee\u9304(working directory)\u90fd\u6703\u88ab\u4e1f\u6389</li> <li>\u5c0f\u7d71\u6574:           \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/</li> <li><code>mixed</code> \u6a21\u5f0f=&gt; <code>index\u79fb\u9664staged\u6a19\u8a18</code>,\u8b8a\u6210Modified\u6216\u662fUntracked file,\u5167\u5bb9\u662f\u65b0\u7248\u7684</li> <li><code>soft</code> \u6a21\u5f0f=&gt; <code>\u50c5\u79fb\u9664commit\u8b8a\u6210\u65b0\u7248\"\u672a\"commit</code>,\u5167\u5bb9\u4ecd\u662f\u65b0\u7248\u7684</li> <li><code>hard</code> \u6a21\u5f0f=&gt; \u56de\u5230\u4e0a\u4e00\u7248\u672c,<code>\u9019\u671f\u9593\u7684\u6240\u6709\u8b8a\u66f4\u5b8c\u5168\u79fb\u9664</code>,\u5167\u5bb9\u53ca\u72c0\u614b\u7686\u662f\u4e0a\u4e00\u7248</li> </ul> </li> </ul>"},{"location":"version_control/git/#tagcommmit","title":"\u65b0\u589e<code>Tag\u7269\u4ef6</code>\u5230<code>Commmit\u7269\u4ef6</code>","text":"<ul> <li>$ <code>git tag -a wow -m \"Tag\u7269\u4ef6-annotated tag \u7df4\u7fd2\"</code><ul> <li>$ <code>git cat-file -t &lt;</code>Tag\u7269\u4ef6<code>\u7684SHA-1\u503c&gt;</code></li> <li></li> </ul> </li> <li>\u7d71\u6574: <code>Tag\u7269\u4ef6</code>\u4e2d\u7684\u6709\u9644\u8a3bTag(Annotated Tag)\u6703\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code></li> </ul>"},{"location":"version_control/git/#branch","title":"\u5206\u652f(branch)\u64cd\u4f5c","text":"<ul> <li>\u5206\u652f\u57fa\u790e\u64cd\u4f5c\u53ef\u53c3\u8003</li> <li> <p>\u5408\u4f75\u5206\u652f\u7684\u5169\u7a2e\u65b9\u5f0f($ <code>git merge</code> &amp; $ <code>git rebase</code>)</p> <ul> <li>\u65b9\u6cd5\u4e00 : $ <code>git merge</code></li> <li>$ <code>git merge &lt;\u8981\u5408\u4f75\u5230\u7684\u5206\u652f\u540d\u7a31&gt;</code>: \u53ef\u4ee5\u7528\u4f86\u5c07\u76ee\u524d\u6240\u5728\u7684\u5206\u652f(branch)\u5408\u4f75\u5230 <code>&lt;\u8981\u5408\u4f75\u5230\u7684\u5206\u652f\u540d\u7a31&gt;</code></li> <li>\u82e5\u8981\u5408\u4f75\u6389\u5225\u4eba\u7684\u5206\u652f\u662f\u5f9e\u8981\u88ab\u5408\u4f75\u6389\u7684\u5206\u652f\u7684\u958b\u51fa\u4f86\u7684,\u82e5\u8981\u88ab\u5408\u4f75\u6389\u7684\u5206\u652f\u6c92\u6709\u4fee\u6539\u7684\u8a71,Git\u6703\u9810\u8a2d\u4f7f\u7528\u5feb\u8f49\u6a21\u5f0f(fast-forward)\u4f86\u505a\u5408\u4f75 <ul> <li>$ <code>git merge --ff &lt;\u8981\u5408\u4f75\u5230\u7684\u5206\u652f\u540d\u7a31&gt;</code></li> <li><code>--ff</code> (=&gt; \u6b64\u70baGit\u9810\u8a2d<code>fast-forward</code>\u6a21\u5f0f)</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655: https://backlog.com/git-tutorial/tw/stepup/stepup1_4.html</li> </ul> </li> <li>\u4f46\u82e5\u539f\u672c\u7684\u90a3\u500b\u5206\u652f\u6709\u4fee\u6539\u904e\u7684\u8a71,\u9019\u6642\u5019Git\u5c31\u4e0d\u6703\u4f7f\u7528\u5feb\u8f49\u6a21\u5f0f(<code>fast-forward</code>),\u6b64\u6642Git\u6703\u984d\u5916\u518d\u505a\u51fa\u4e00\u500b\u65b0\u7684<code>Commit\u7269\u4ef6</code>\u4f86\u5408\u4f75\u9019\u5169\u500b\u5206\u652f<ul> <li>$ <code>git merge --no-ff &lt;\u8981\u5408\u4f75\u5230\u7684\u5206\u652f\u540d\u7a31&gt;</code></li> <li><code>--no-ff</code> (=&gt; \u5f37\u5236\"\u4e0d\u8981\"\u4f7f\u7528fast-forward\u6a21\u5f0f)</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655: https://backlog.com/git-tutorial/tw/stepup/stepup1_4.html</li> </ul> </li> <li>$ <code>git merge --ff-only &lt;\u8981\u5408\u4f75\u5230\u7684\u5206\u652f\u540d\u7a31&gt;</code><ul> <li><code>--ff-only</code> (=&gt; \u76e1\u53ef\u80fd\u7684\u512a\u5148\u4f7f\u7528fast-forward\u6a21\u5f0f\u5408\u4f75,\u6b64\u6642\u5982\u679c\u7121\u6cd5\u505a\u5230\u4f7f\u7528fast-forward\u6a21\u5f0f\u5408\u4f75\u7684\u8a71,Git\u5c31\u6703\u62d2\u7d55\u9019\u6b21\u7684\u6307\u4ee4\u4e26\u56de\u50b3\u4e00\u500b\"\u5931\u6557\"\u7684\u932f\u8aa4\u72c0\u614b) </li> </ul> </li> <li><code>\u60c5\u5883\u8aaa\u660e</code>(\u8981\u7528<code>master\u5206\u652f</code>\u4f86\u5408\u4f75<code>pig\u5206\u652f</code>)</li> <li>\u5148\u65b0\u589e\u4e00\u500b\u5206\u652f(branch): <code>pig</code></li> <li>\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u6a94\u6848,\u4e26commit: <code>pig.html</code></li> <li>\u65b0\u589e\u4e00\u884c\u6587\u5b57\u5f8c,\u518dcommit\u4e00\u6b21: <code>hello, pig</code></li> <li>$ <code>git log</code>: \u6aa2\u8996\u4e00\u4e0b\u76ee\u524d\u7684commit\u6b77\u53f2\u7d00\u9304(\u78ba\u8a8d\u76ee\u524d\u662f\u5728<code>pig\u5206\u652f</code>\u4e26\u4e14\u6709<code>\u5169\u6b21commit\u7684\u7d00\u9304</code>)</li> <li></li> <li>\u8981\u5148\u5207\u56de<code>master\u5206\u652f</code></li> <li>$ <code>git checkout master</code></li> <li>$ <code>git merge pig</code>: \u5c07<code>pig\u5206\u652f</code>\u5408\u4f75\u56de\u5230<code>master\u5206\u652f</code></li> <li>\u672c\u4f86\u843d\u5f8c<code>pig\u5206\u652f</code>\u5169\u6b21commit\u7d00\u9304\u7684<code>master\u5206\u652f</code>,\u73fe\u5728\u4e5f\u5df2\u7d93\u8ddf\u4e0a<code>pig\u5206\u652f</code>\u7684\u9032\u5ea6\u4e86 </li> <li> <p></p> </li> <li> <p>\u65b9\u6cd5\u4e8c : $ <code>git rebase</code></p> </li> <li>$ <code>git rebase &lt;\u8981\u88abrebase\u7684\u5206\u652f\u540d\u7a31&gt;</code></li> <li>\u53ef\u4ee5\u91cd\u65b0\u5b9a\u7fa9<code>\u5206\u652f(branch)</code>\u53c3\u8003\u7684\u57fa\u6e96</li> <li>\u53ef\u4ee5\u7528\u4f86\u5c07\u76ee\u524d\u6240\u5728\u7684\u5206\u652f(branch)\u5408\u4f75\u5230 <code>&lt;\u8981\u88abrebase\u7684\u5206\u652f\u540d\u7a31&gt;</code></li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655: https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1?fbclid=IwAR22RpLWxsCk1qKLdJynK4BCMyD5FSTvRHta8GvAyJO2ALi4WObsdQ-UWNU</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u5f9e<code>master</code>\u5206\u652f\u62c6\u5206\u51fa\u5169\u500b\u5206\u652f(<code>elephant</code>,<code>zebra</code>),\u4e26\u5206\u5225\u5404commit\u5169\u6b21</li> <li></li> <li>\u8a18\u5f97\u8981\u5148\u5207\u63db\u5230<code>elephant\u5206\u652f</code>(\u8981rebase\u5230\u5225\u4eba\u7684\u5206\u652f)!<ul> <li>$ <code>git checkout elephant</code> </li> </ul> </li> <li>$ <code>git rebase zebra</code>: \u5c07<code>elephant\u5206\u652f</code>rebase\u5230<code>zebra\u5206\u652f</code>\u4e0a\u9762</li> <li></li> <li>$ <code>git rebase -i &lt;HEAD\u7684\u76f8\u5c0d\u4f4d\u7f6e&gt;</code></li> <li>\u4f8b\u5982: $ <code>git rebase -i HEAD~3</code></li> <li>\u53ef\u4ee5\u5148\u5728\u4e92\u52d5\u5f0f\u6a21\u5f0f\u7de8\u8f2f\u54ea\u4e9b<code>Commit\u7269\u4ef6</code>\u8981\u88ab<code>Rebase</code><ul> <li>\u53ef\u4ee5\u4f7f\u7528\u50cf\u662f<code>pick</code>\u3001<code>edit</code>\u3001<code>squash</code>\u3001<code>drop</code> \u7b49\u76f8\u95dcGit\u6307\u4ee4\u4f86\u7de8\u8f2f\u9019\u4e9b<code>Commit\u7269\u4ef6</code> </li> </ul> </li> <li><code>-i</code> (=&gt; <code>--interactive</code>): \u5229\u7528\u4e92\u52d5\u5f0f\u6a21\u5f0f\u4f86\"\u9810\u5148\"\u7de8\u8f2f\u8981<code>\u88abrebased\u7684\u90a3\u4e9bCommit\u7269\u4ef6</code></li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655: https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1?fbclid=IwAR22RpLWxsCk1qKLdJynK4BCMyD5FSTvRHta8GvAyJO2ALi4WObsdQ-UWNU</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655: https://dev.to/lydiahallie/cs-visualized-useful-git-commands-37p1?fbclid=IwAR22RpLWxsCk1qKLdJynK4BCMyD5FSTvRHta8GvAyJO2ALi4WObsdQ-UWNU</li> <li>$ <code>git rebase</code> \u662f\u4e00\u7a2e\u6703\u4fee\u6539\u5230\u6b77\u53f2\u7d00\u9304\u7684\u6307\u4ee4,\u76e1\u91cf\u4e0d\u8981\u96a8\u4fbf\u5c0d\u5df2\u7d93\u63a8\u51fa\u53bb\u7d66\u5225\u4eba\u5167\u5bb9\u9032\u884c<code>rebase</code>,\u9019\u6a23\u5f88\u5bb9\u6613\u9020\u6210\u5176\u4ed6\u4eba\u7684\u56f0\u64fe</li> <li>\u7528$ <code>git rebase</code> \u7684\u65b9\u5f0f\u5408\u4f75\u5206\u652f &amp; \u7528$ <code>git merge</code> \u7684\u65b9\u5f0f\u5408\u4f75\u5206\u652f,\u6709\u4e00\u500b\u5f88\u660e\u986f\u7684\u5dee\u5225\u662f\u7528<code>Rebase\u65b9\u5f0f</code>\u5408\u4f75\u5206\u652f\u7684\u8a71,Git\u4e26\u4e0d\u6703\u7279\u5225\u505a\u51fa\u4e00\u500b\u5c08\u9580\u7528\u4f86\u5408\u4f75\u5206\u652f\u7684<code>Commit\u7269\u4ef6</code></li> <li>$ <code>git rebase</code> \u7684\u539f\u7406\u5176\u5be6\u662f\u505a\u591a\u6b21\"Apply\"\u5230<code>\u65b0\u7684\u57fa\u6e96\u9edebranch</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u4e0a</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655: https://gitbook.tw/chapters/branch/merge-with-rebase.html</li> <li>\u7528<code>Rebase\u5408\u4f75\u5206\u652f</code>\u904e\u5f8c,\u539f\u4f86\u820a\u7684\u90a3\u500b\u5206\u652f\u539f\u672c\u6240\u7528\u5230\u7684\u90a3\u4e9bCommit\u7269\u4ef6,\u4e26\"\u4e0d\u6703\u7acb\u5373\u88abGit\u522a\u9664\"; \u53ea\u662f\u56e0\u70ba\u90a3\u4e9b<code>Commit\u7269\u4ef6</code>\u6c92\u6709<code>\u5206\u652f(branch)</code>\u6307\u5411\u4ed6\u5011,\u6240\u4ee5\u5982\u679c\u6211\u5011\u4e5f\u6c92\u7279\u5225\u53bb\u8a18\u4e0b\u9019\u4e9b<code>Commit\u7269\u4ef6\u7684id</code>\u7684\u8a71,\u9019\u4e9b<code>Commit\u7269\u4ef6</code>\u5c31\u6703\u6162\u6162\u5730\u88ab\u908a\u7de3\u5316,\u76f4\u5230\u6709\u4e00\u5929\u88abGit\u7684\u5167\u5efa\u8cc7\u6e90\u56de\u6536\u6a5f\u5236\u5e36\u8d70</li> <li>\u5176\u5be6\u8ab0Rebase\u8ab0\u4ee5\u7d50\u679c\u4f86\u770b\u662f\u6c92\u4ec0\u9ebc\u5dee\u5225\u7684,\u4f46\u4ee5\u6b77\u53f2\u7d00\u9304\u4f86\u8aaa\u7684\u8a71,\u88abrebase\u7684\u5206\u652f\u6703\u5beb\u5728\u5f8c\u9762</li> <li>\u60f3\u53d6\u6d88\u5408\u4f75\u5206\u652f\u7684\u8a71,\u6709\u4ee5\u4e0b\u5169\u7a2e\u65b9\u5f0f</li> <li>\u5982\u679c\u662f\u7528 $ <code>git merge</code> \u4f86\u5408\u4f75\u5206\u652f\u7684\u8a71: \u7528 $ <code>git reset HEAD~2 --hard</code> =&gt; \u4e5f\u5c31\u662f\u62c6\u6389\u9019\u500b\u5408\u4f75\u7684Commit\u7269\u4ef6,\u5927\u5bb6\u5c31\u6703\u9000\u56de\u5230\u5408\u4f75\u524d\u7684\u72c0\u614b</li> <li>\u5982\u679c\u662f\u7528 $ <code>git rebase</code> \u4f86\u5408\u4f75\u5206\u652f\u7684\u8a71,\u56e0\u70ba\u9019\u500b\u65b9\u6cd5Git\u4e26\u4e0d\u6703\u7279\u5225\u505a\u51fa\u4e00\u500b<code>Commit\u7269\u4ef6</code>\u4f86\u5408\u4f75\u5206\u652f,\u6240\u4ee5\u4e0d\u80fd\u7528\u4e0a\u8ff0\u7684\u65b9\u6cd5;\u4f46\u53ef\u4ee5\u7528\u4ee5\u4e0b\u5169\u7a2e\u65b9\u5f0f\u4f86\u53d6\u6d88\u5408\u4f75\u5206\u652f<ul> <li>\u5148\u6aa2\u8996\u76ee\u524d\u7684<code>Reflog\u7d00\u9304</code></li> <li>$ <code>git reflog</code><ul> <li></li> <li>\u627e\u51fa\u5c0d\u61c9\u5230\u6700\u4e45\u4ee5\u524d\u7684 <code>rebase\u95dc\u9375\u5b57</code>\u7684\u524d\u4e00\u6b21<code>Commit\u7269\u4ef6</code>\u7684id</li> <li>\u4ee5\u9019\u500b\u4f8b\u5b50\u662f: <code>ce76004</code>\u9019\u500b<code>Commit\u7269\u4ef6id</code></li> </ul> </li> <li>\u7528 $ <code>git reset &lt;\u8981\u56de\u5230\u904e\u53bb\u7684\u54ea\u500bCommit\u7269\u4ef6id&gt; --hard</code></li> <li>\u9019\u6a23\u5c31\u53ef\u4ee5\u56de\u5230<code>Rebase</code>\u4ee5\u524d\u7684\u72c0\u614b\u4e86</li> <li>\u5148\u6aa2\u8996\u76ee\u524d\u7684<code>ORIG_HEAD</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6\u7684id</code></li> <li>\u53ef\u5148\u53c3\u8003<code>ORIG_HEAD</code>\u662f\u4ec0\u9ebc?</li> <li>$ <code>cat .git/ORIG_HEAD</code>: <code>\u56de\u50b3Git\u5371\u96aa\u64cd\u4f5c\u4ee5\u524d\u7684</code>ORIG_HEAD<code>\u6307\u5411\u7684</code>Commit\u7269\u4ef6`\u7684id</li> <li></li> </ul> </li> <li>\u4f7f\u7528<code>Rebase</code>\u65b9\u5f0f\u4f86\u5408\u4f75\u5206\u652f\u7684\u512a\u7f3a\u9ede\u5206\u6790</li> <li>\u597d\u86551: \u4e0d\u6703\u7279\u5225\u7522\u751f\u4e00\u500b\u70ba\u4e86\u5408\u4f75\u5206\u652f\u7684<code>Commit\u7269\u4ef6</code></li> <li>\u597d\u86552: \u5408\u4f75\u7684\u6b77\u53f2\u9806\u5e8f\u53ef\u4ee5\u81ea\u7531\u6c7a\u5b9a(\u4f9d\u7167<code>\u8ab0Rebase\u8ab0</code>\u800c\u5b9a)</li> <li>\u7f3a\u9ede1: \u76f8\u5c0d\u4f86\u8aaa,\u6bd4\u8d77<code>Merge</code>\u65b9\u5f0f\u4f86\u5408\u4f75\u5206\u652f,\u4e26\u6c92\u6709\u90a3\u9ebc\u76f4\u89ba</li> <li>\u7f3a\u9ede2: \u5982\u679c\u4e00\u500b\u4e0d\u5c0f\u5fc3\u53ef\u80fd\u6703\u5f04\u58de\u6389\u800c\u4e14\u9084\u4e0d\u77e5\u9053\u8a72\u600e\u9ebc<code>Reset</code>\u56de\u4f86</li> <li>\u5efa\u8b70: \u53ef\u4ee5\u5728\u9084\u6c92\u63a8\u51fa\u53bb\u524d(<code>Push</code>),\u5982\u679c\u89ba\u5f97<code>Commit\u7269\u4ef6</code>\u5011\u592a\u51cc\u4e82or\u7463\u788e,\u53ef\u4ee5\u5148\u7528<code>Rebase\u5408\u4f75\u5206\u652f\u7684\u65b9\u5f0f</code>\u4f86\u6574\u7406\u9019\u4e9b<code>Commit\u7269\u4ef6</code>,\u518d\u63a8\u51fa\u53bb</li> <li>\u63d0\u9192: <code>Rebase</code>\u7b49\u65bc\u662f\u4fee\u6539\u6b77\u53f2\u7d00\u9304,\u5982\u679c\u4fee\u6539\u5df2\u7d93\u63a8\u51fa\u53bb(<code>Push</code>)\u7684\u6b77\u53f2\u7d00\u9304\u53ef\u80fd\u6703\u9020\u6210\u5176\u4ed6\u4eba\u7684\u56f0\u64fe,\u6240\u4ee5\u5982\u679c\u662f\u5df2\u7d93\u63a8\u51fa\u53bb(<code>Push</code>)\u7684\u5167\u5bb9,\u975e\u5fc5\u8981\u76e1\u91cf\u4e0d\u8981\u4f7f\u7528<code>Rebase</code></li> <li>$ <code>git rebase -i &lt;\u904e\u53bb\u7684\u4e00\u500bCommit\u7269\u4ef6id&gt;</code></li> <li>\u53ef\u4ee5\u4f7f\u7528\u50cf\u662f<code>pick</code>\u3001<code>edit</code>\u3001<code>squash</code>\u3001<code>drop</code> \u7b49\u76f8\u95dcGit\u6307\u4ee4\u4f86\u7de8\u8f2f\u9019\u4e9b<code>Commit\u7269\u4ef6</code></li> <li><code>Rebase\u6307\u4ee4</code>\u7684\u4e92\u52d5\u6a21\u5f0f(<code>-i</code>)\u4e5f\u53ef\u4ee5\u7528\u4f86\u7de8\u8f2f\u904e\u53bb\u7684\u6240\u6709<code>Commit\u7269\u4ef6</code></li> <li><code>-p</code> (=&gt; <code>--pick</code>): use commit</li> <li><code>-r</code> (=&gt; <code>reword</code>): use commit, but edit the commit message(\u7576\u60f3\u4fee\u6539\u904e\u53bb\u6b77\u53f2\u7d00\u9304\u4e2d\u7684<code>commit message</code>\u6642)</li> <li><code>-e</code> (=&gt; <code>edit</code>): use commit, but stop for amending(\u9069\u7528\u4ee5\u4e0b\u60c5\u5883)<ul> <li>\u7576\u60f3\u628a\u4e00\u500b<code>commit\u7d00\u9304</code>\u62c6\u89e3\u6210\u591a\u500b<code>commit\u7d00\u9304</code>\u6642</li> <li>\u7576\u60f3\u5728\u67d0\u4e9bcommit\u4e4b\u9593\u518d\u52a0\u65b0\u7684<code>commit\u7d00\u9304</code></li> <li>\u7576\u60f3\u8981\u522a\u9664\u67d0\u5e7e\u500bcommit\u7d00\u9304</li> <li>\u7576\u60f3\u8981\u8abf\u6574\u904e\u53bbcommit\u7d00\u9304\u7684\u9806\u5e8f</li> <li>Git\u6703\u518d\u91cd\u65b0\u57f7\u884c\u4e00\u6b21<code>Rebase</code>\u6642,\u505c\u5728<code>edit</code>\u90a3\u884c\u7684<code>Commit\u7269\u4ef6</code>\u4e0a</li> <li>\u9019\u6642Git\u7684\u72c0\u614b\u61c9\u8a72\u6703\u985e\u4f3c\u9019\u6a23</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655: https://gitbook.tw/chapters/rewrite-history/split-one-commit-to-many-commits.html</li> <li>\u9019\u6642Git\u6703\u8a62\u554f\u8981\u5982\u4f55\u4fee\u6539\u9019\u500b<code>Commit\u7269\u4ef6</code>,\u901a\u5e38\u9019\u6642\u5019\u8981\u5148\u628a\u8981\u505a\"\u4fee\u6539\"\u7684<code>Commit\u7269\u4ef6</code>\u7684\u8abf\u6574\u597d,\u63a5\u8457\u7e7c\u7e8c<code>Rebase</code>\u4e0b\u53bb</li> <li>$ <code>git commit --amend</code>: \"\u4fee\u6539\"\u8a72<code>Commit\u7269\u4ef6</code></li> <li><code>$ git rebase --continue</code>: \u7e7c\u7e8c<code>Rebase</code>\u4e0b\u53bb</li> <li>\u5982\u679c\u9019\u6642\u5019\u4e0d\u662f\u8981\u4fee\u6539\u8a72<code>Commit\u7269\u4ef6</code>,\u800c\u662f\u60f3\u8981\u5c07\u8a72<code>Commit\u7269\u4ef6</code>\u62c6\u5206\u6210\u5169\u500b<code>Commit\u7269\u4ef6</code>\u7684\u8a71,\u53ef\u4ee5\u7528<code>Reset</code>\u6307\u4ee4\u4f86\u5b8c\u6210</li> <li>\u53ef\u5148\u53c3\u8003\u5982\u679c\u4e0d\u5c0f\u5fc3\u4f7f\u7528$ <code>git reset --hard</code> \u6a21\u5f0f,\u80fd\u6551\u56de\u4f86\u55ce?</li> <li>$ <code>git reset HEAD^</code> : \u56de\u5230<code>HEAD</code>\u76ee\u524d\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u7684\u524d\u4e00\u6b21<code>commit\u7d00\u9304</code>\u4e0a</li> <li>$ <code>git status</code>: \u5148\u6aa2\u8996\u4e00\u4e0b\u76ee\u524d\u7684Git\u72c0\u614b<ul> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655: https://gitbook.tw/chapters/rewrite-history/split-one-commit-to-many-commits.html</li> </ul> </li> <li>\u53ef\u4ee5\u770b\u5230<code>cat3.html</code> &amp; <code>cat4.html</code>\u90fd\u88ab\u62c6\u51fa\u4f86\u653e\u5728\u5de5\u4f5c\u76ee\u9304\u4e26\u4e14\u662f\u8655\u65bc<code>Untracked File</code>\u72c0\u614b</li> <li>\u63a5\u8457\u5c31\u6309\u7167\u5e73\u5e38\u7684\u6d41\u7a0b($ <code>git add &lt;\u4e00\u500b\u6a94\u6848\u7684\u6a94\u540d&gt;</code> + <code>$ git commit -m \"xxxx\"</code>),\u5c31\u53ef\u4ee5\u62c6\u89e3\u6210\u5169\u6b21<code>commit\u7d00\u9304</code>\u51fa\u4f86\u4e86</li> <li>\u6700\u5f8c\u9084\u662f\u8981\u8a18\u5f97\u76ee\u524d\u4ecd\u4f9d\u7136\u8655\u65bc<code>Rebase\u72c0\u614b</code>,\u6240\u4ee5\u8981\u8b93<code>Rebase\u6d41\u7a0b</code>\u7e7c\u7e8c\u8dd1\u5b8c\u624d\u7b97\u5b8c\u6210\u5594!<ul> <li>$ <code>git rebase --continue</code> </li> </ul> </li> </ul> </li> <li><code>-s</code> (=&gt; <code>squash</code>): use commit, but meld into previous commit(\u7576\u60f3\u628a\u591a\u500b<code>commit\u7d00\u9304</code>\u5408\u4f75\u6210\u4e00\u500b<code>c</code>ommit\u7d00\u9304`\u6642)</li> <li><code>-d</code> (=&gt; <code>drop</code>): remove commit</li> <li>\u6ce8\u610f! $ <code>git rebase -i</code> \u8207 $ <code>git log</code> \u986f\u793acommit\u7d00\u9304\u7684\u9806\u5e8f\u662f\u76f8\u53cd\u7684,\u82e5\u90fd\u662f\"\u5f9e\u4e0a\u5230\u4e0b\"\u6aa2\u8996\u7684\u8a71</li> <li>$ <code>git rebase -i</code>: \u5f9e\u820a-&gt;\u65b0</li> <li>$ <code>git log</code>: \u5f9e\u65b0-&gt;\u820a</li> <li>$ <code>git reflog</code>: \u5f9e\u65b0-&gt;\u820a</li> <li></li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>$ <code>git rebase -i &lt;ca7a70e&gt;</code></li> <li><code>ca7a70e</code>: \u70ba\u5c08\u6848\u6700\u521d\u59cb\u7684<code>Commit\u7269\u4ef6\u7684id</code></li> <li>\u627e\u5230\u8981\u7de8\u8f2f<code>commit message</code>\u7684<code>Commit\u7269\u4ef6</code>,\u5c07<code>pick</code>\u4fee\u6539\u70ba<code>reword</code>,\u5c31\u6703\u8df3\u9032\u53bb\u8a72<code>Commit\u7269\u4ef6</code>\u88e1\u9762,\u53ef\u4ee5\u5229\u7528 Vim\u6a21\u5f0f \u4f86\u7de8\u8f2f\u8a72\u7269\u4ef6\u7684<code>commit message</code>\u5f8c,\u4e26\u5b58\u6a94 &amp; \u96e2\u958b \u5373\u53ef</li> <li></li> <li>\u63d0\u9192: \u7d93\u904e<code>Rebase\u6a21\u5f0f</code>\u4fee\u6539\u5f8c,\u56e0\u70ba\u524d\u5f8c\u8981\u63a5\u7684Commit\u7269\u4ef6\u90fd\u4e0d\u540c(\u5176\u5be6\u6642\u9593\u4e5f\u4e0d\u540c),\u6240\u4ee5\u6703\u91cd\u65b0\u8a08\u7b97\u4e26\u505a\u51fa\u4e00\u9846\u65b0\u7684Commit\u7269\u4ef6;  \u800c\u56e0\u70ba\u5728Git\u6b77\u53f2\u7d00\u9304\u4e0a\u7684\u9019\u5169\u9846Commit\u7269\u4ef6\u88ab\u63db\u6389\u4e86,\u5728\u5b83\u5011\u5169\u500b\u4e4b\u5f8c\u7684\u4e00\u6574\u4e32Commit\u7269\u4ef6\u5168\u90e8\u90fd\u5fc5\u9808\u505a\u51fa\u65b0\u7684Commit\u7269\u4ef6\u51fa\u4f86\u66ff\u4ee3\u820a\u7684Commit\u7269\u4ef6\u5011</li> <li>\u76f8\u95dc\u89c0\u5ff5\u53ef\u53c3\u8003</li> <li>\u5206\u652f(branch)\u64cd\u4f5c\u7684   $ <code>git rebase</code> \u7684\u539f\u7406\u5176\u5be6\u662f\u505a\u591a\u6b21\"Apply\"\u5230<code>\u65b0\u7684\u57fa\u6e96\u9edebranch</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u4e0a\u539f\u7406 &amp; \u5716\u89e3\u8aaa\u660e</li> <li>SHA-1(\u5b89\u5168\u6563\u5217\u6f14\u7b97\u6cd5) \u4ecb\u7d39\u7684 <code>Blob</code>\u7269\u4ef6\u7684<code>SHA-1</code>\u503c\u8a08\u7b97\u516c\u5f0f \u7ae0\u7bc0</li> <li>\u63d0\u9192: \u5728\u57f7\u884c<code>Rebase\u64cd\u4f5c</code>\u6642,\u8981\u591a\u6ce8\u610f\"\u76f8\u4f9d\u6027\u554f\u984c\", \u5426\u5247\u4e00\u5b9a\u6703\u51fa\u554f\u984c\u7684</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u67d0\u6b21<code>commit\u7d00\u9304</code>\u4fee\u6539\u4e86<code>zebra.html</code>,\u7d50\u679c\u537b\u4e0d\u5c0f\u5fc3\u628a\u9019\u6b21<code>commit\u7d00\u9304</code>\u79fb\u52d5\u5230\u5efa\u7acb<code>zebra.html</code>\u7684\u90a3\u6b21<code>commit\u7d00\u9304</code>\u4e4b\u524d</li> <li>\u522a\u9664\u4e86\u67d0\u6b21\u5efa\u7acb<code>sheep.html</code>\u7684<code>commit\u7d00\u9304</code>,\u4f46\u5f8c\u9762\u7684<code>commit\u7d00\u9304</code>\u90fd\u9700\u8981\u7528\u5230<code>sheep.html</code>\u9019\u500b\u6a94\u6848</li> </ul> </li> </ul>"},{"location":"version_control/git/#commit_3","title":"\u8a72\u5982\u4f55\u56de\u5fa9\u5230\u4e0a\u4e00\u6b21<code>commit\u7d00\u9304</code>\u7684\u72c0\u614b?","text":"<ul> <li>$ <code>git revert HEAD --no-edit</code>: \u6703\u53d6\u6d88\u6700\u5f8c\u4e00\u6b21\u7684<code>commit\u7d00\u9304</code>,\u4e26\"\u56de\u5fa9\"\u5230\u524d\u4e00\u6b21<code>commit\u7d00\u9304</code>\u7684\u72c0\u614b</li> <li><code>--no-edit</code>: \u6307\u5b9a<code>Revert</code>\u6307\u4ee4\u4e0d\u8981\u958b\u555f<code>commit message</code>\u7de8\u8f2f\u5668</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u7de8\u8f2f<code>pig.html</code>,\u4e26\u65b0\u589e\"abc\"\u5b57\u4e32</li> <li></li> <li><code>git revert HEAD --no-edit</code>: \u6703\u53d6\u6d88\u6700\u5f8c\u4e00\u6b21\u7684<code>commit\u7d00\u9304</code>,\u4e26\u56de\u5fa9\u5230<code>HEAD</code>\u7684\u524d\u4e00\u6b21commit\u7d00\u9304</li> <li></li> <li>\u900f\u904eSourcetree\u53ef\u4ee5\u767c\u73fe,Git\u6703\u70ba\u4e86<code>Revert\u64cd\u4f5c</code>,\u65b0\u589e\u4e00\u500b<code>Commit\u7269\u4ef6</code></li> <li></li> <li>\u90a3\u8981\u5982\u4f55\u53d6\u6d88<code>Revert</code>\u5462? \u6709\u4ee5\u4e0b2\u7a2e\u65b9\u6cd5</li> <li>$ <code>git revert HEAD --no-edit</code>: \u9019\u6a23\u4e00\u4f86\u525b\u525b\u88ab\u522a\u9664\u7684<code>pig.html</code>\u4e2d\u7684\"abc\"\u5b57\u4e32\u53c8\u5fa9\u6d3b\u4e86; \u4f46\u540c\u6642Git\u53c8\u6703\u65b0\u589e\u4e00\u500b<code>Revert_\"Revert\" xxxxx</code> \u7684<code>Commit\u7269\u4ef6</code>,\u6703\u9020\u6210<code>Commit\u7269\u4ef6</code>\u8d8a\u4f86\u8d8a\u591a</li> <li> </li> <li>$ <code>git reset HEAD^ --hard</code>: \u9069\u7528\u65bc\u76f4\u63a5\u653e\u68c4<code>HEAD</code>\u7684\u524d\u4e00\u6b21<code>commit\u7d00\u9304</code>\u7684\u6240\u6709\u64cd\u4f5c(\u5305\u62ec\u5de5\u4f5c\u76ee\u9304 \u548c \u66ab\u5b58\u5340)</li> <li>\u53ef\u53c3\u8003 \u5982\u679c\u60f3\u91cd\u65b0\u7de8\u8f2f\u525b\u624d\u7684commit</li> <li>\u8f03\u63a8\u85a6\u6b64\u4f5c\u6cd5!</li> <li><code>Revert\u6307\u4ee4</code>\u7684\u5efa\u8b70\u4f7f\u7528\u60c5\u5883</li> <li>\u5982\u679c\u662f\u500b\u4eba\u958b\u767c\u7684\u5c08\u6848,\u5176\u5be6\u53ef\u4ee5\u76f4\u63a5\u7528<code>Reset</code>\u5207\u56de\u53bb\u5c31\u597d</li> <li>\u4f46\u5982\u679c\u662f\u591a\u4eba\u5171\u540c\u5354\u4f5c\u7684\u5c08\u6848,\u5c31\u4e0d\u4e00\u5b9a\u6709\u6a5f\u6703\u53ef\u4ee5\u4f7f\u7528<code>Reset</code>\u6307\u4ee4,\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u7528<code>Revert</code>\u6307\u4ee4\u4f86\u505a\u51fa\u4e00\u500b\"\u53d6\u6d88\"\u7684<code>Commit\u7269\u4ef6</code>; \u9019\u6a23\u5c0d\u5176\u4ed6\u4eba\u4f86\u8aaa\u4e5f\u4e0d\u7b97\u662f\"\u4fee\u6539\u6b77\u53f2\",\u53ea\u662f\u5efa\u7acb\u4e00\u500b\u8ddf\u67d0\u500b<code>commit\u7d00\u9304</code>\u53cd\u5411\u7684\u64cd\u4f5c\u7684<code>Commit\u7269\u4ef6</code>\u800c\u5df2</li> </ul>"},{"location":"version_control/git/#_4","title":"\u89c0\u5ff5\u4ecb\u7d39","text":"<p><code>The HEAD</code>: HEAD is the pointer to the current branch reference, which is in turn a pointer to the last commit made on that branch. That means HEAD will be the parent of the next commit that is created. It\u2019s generally simplest to think of HEAD as the snapshot of your last commit on that branch. <code>ORIG_HEAD</code>: Git\u5728\u5371\u96aa\u64cd\u4f5c\u4ee5\u524d,\u6703\u5148\u81ea\u52d5\u8a18\u9304\u7576\u4e0b<code>HEAD</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6\u7684id</code> <code>git branch</code> - List, create, or delete branches <code>git cat-file</code> - Provide content or type and size information for repository object <code>git count-objects</code> - Count unpacked number of objects and their disk consumption <code>git tag</code> - Create, list, delete or verify a tag object signed with GPG <code>git show</code> - Show various types of objects <code>git prune</code> - Prune all unreachable objects from the object database</p>"},{"location":"version_control/git/#git_7","title":"Git \u5176\u5be6\u662f\u4e00\u7a2e\u5206\u6563\u5f0f\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7d71","text":"<ul> <li>Git\u662f\u4e00\u7a2e\u5206\u6563\u5f0f\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7d71,\u800c\u6240\u8b02\u7684\"\u7248\u672c\u63a7\u5236\u7cfb\u7d71\"\u5c31\u662f\u6307\u6703\u5e6b\u4f60\u8a18\u9304\u6240\u6709\u7684\u72c0\u614b\u8b8a\u5316,\u96a8\u6642\u53ef\u4ee5\u5207\u63db\u5230\u904e\u53bb\u67d0\u500b\u7248\u672c\u7684\u72c0\u614b</li> </ul>"},{"location":"version_control/git/#git_8","title":"Git \u7684\u512a\u9ede","text":"<ul> <li>Git\u7684\u512a\u9ede</li> <li>\u514d\u8cbb.\u958b\u6e90</li> <li>Git\u662f\u8a18\u9304\u6a94\u6848\u5167\u5bb9\u7684\u5feb\u7167(snapshot),\u800c\u4e0d\u662f\u8a18\u9304\u7248\u672c\u4e4b\u9593\u7684\u5dee\u7570,\u5b83\u53ef\u4ee5\u8b93Git\u66f4\u5feb\u901f\u5730\u5207\u63db\u7248\u672c</li> <li>Git\u662f\u4e00\u6b3e\u5206\u6563\u5f0f\u7684\u7248\u63a7\u7cfb\u7d71(Distributed Version Control),\u96d6\u7136\u4e5f\u6703\u6709\u5171\u540c\u7684\u4f3a\u670d\u5668,\u4f46\u5373\u4f7f\u5728\u6c92\u6709\u4f3a\u670d\u5668\u6216\u662f\u6c92\u6709\u7db2\u8def\u7684\u74b0\u5883,\u4f9d\u820a\u53ef\u4ee5\u4f7f\u7528Git\u4f86\u9032\u884c\u7248\u63a7,\u5f85\u4f3a\u670d\u5668\u6062\u5fa9\u6b63\u5e38\u904b\u4f5c\u6216\u662f\u5728\u6709\u7db2\u8def\u7684\u74b0\u5883\u5f8c\u518d\u540c\u6b65,\u4e0d\u6703\u53d7\u5f71\u97ff</li> <li>\u8a3b: Git\u548cSVN\u76f8\u6bd4,\u6700\u5927\u7684\u4e0d\u540c\u9ede\u5c31\u662f,Git\u53ef\u4ee5\u5728local\u7aef\u505a\u4e00\u4e9b\u4fee\u6539,\u7136\u5f8ccommit\u5230\u672c\u5730\u7684\u7248\u672c\u5eab,\u6700\u5f8cpush\u5230\u4f3a\u670d\u5668; \u800cSVN\u53ea\u8981\u4e00commit,\u66f4\u6539\u5c31\u5df2\u7d93\u63d0\u4ea4\u5230\u4f3a\u670d\u5668\u4e86</li> </ul>"},{"location":"version_control/git/#git-snapshot","title":"Git \u662f\u7528\u5feb\u7167(snapshot)\u5728\u505a\u7248\u672c\u63a7\u5236\u7684","text":"<ul> <li>Git\u5728\u6bcf\u6b21\u7248\u672c\u8b8a\u5316\u7684\u6642\u5019,\u6709\u9ede\u50cf\u62cd\u7167(snapshot)\u4e00\u6a23,Git\u6703\u66f4\u65b0\u4e26\u8a18\u9304\u6574\u500b\u76ee\u9304\u8ddf\u6a94\u6848\u7684\u6a39\u72c0\u7d50\u69cb</li> </ul>"},{"location":"version_control/git/#git-blobtreecommittag","title":"Git \u7684\u56db\u5927\u7269\u4ef6(<code>Blob</code>,<code>Tree</code>,<code>Commit</code>,<code>Tag</code>)\u89c0\u5ff5\u4ecb\u7d39","text":"<ul> <li>Git\u7684\u56db\u5927\u7269\u4ef6\u7d50\u69cb: \u5728<code>.git/</code> \u7684\u8cc7\u6599\u7d50\u69cb\u88e1\u9762\u6703\u6709</li> <li>Blob\u7269\u4ef6<ul> <li><code>\u60c5\u5883\u8aaa\u660e</code> </li> <li>\u7576\u6a94\u6848\u88ab\u52a0\u5165\u66ab\u5b58\u5340(staging area)\u6642,Git\u4fbf\u6703\u5728<code>.git/</code>\u76ee\u9304\u88e1\u7522\u751f\u4e00\u500b<code>Blob</code>(Binary large object)\u7269\u4ef6,\u4e26\u4e14\u4f9d\u7167\u5b83\u7684\"\u898f\u5247\"\u64fa\u653e\u5230\u5b83\u7684\u76ee\u9304\u88e1,\u9019\u500b<code>Blob\u7269\u4ef6</code>\u662f\u7528\u4f86\u5b58\u653e\u8a72\u6a94\u6848\u7684\"\u5167\u5bb9\"</li> <li>\u63a5\u4e0b\u4f86,\u5c31\u6703\u5230 <code>.git/objects/</code>\u76ee\u9304\u88e1\u5b58\u653e\u8a72\u6a94\u6848,Git\u6703\u7528<code>SHA-1</code>\u768440\u500b\u5b57\u4e2d\u7684<code>\u524d2\u500b\u5b57</code>\u4f5c\u70ba\u76ee\u9304,\u5269\u9918\u768438\u500b\u5c31\u662f\u6a94\u6848\u540d\u7a31</li> <li></li> <li>\u900f\u904e$ <code>git cat-file</code>\u4f86\u6aa2\u8996Git repository\u5167\u5404\u7269\u4ef6\u7684 <code>\u503c</code> or <code>\u578b\u614b</code> or <code>\u5927\u5c0f</code> or <code>\u76f8\u95dc\u8a73\u7d30\u8cc7\u8a0a</code></li> <li>-t: \u986f\u793a\u8a72\u7269\u4ef6\u7684\u578b\u614b(type)</li> <li>-p: \u986f\u793a\u8a72\u7269\u4ef6\u7684\u5167\u5bb9(content)</li> <li>-s: \u986f\u793a\u8a72\u7269\u4ef6\u7684\u5927\u5c0f(size)</li> <li></li> <li>\u7d71\u6574: </li> <li>\u6b65\u9a5f\u4e00: \u7576\u4f7f\u7528$ <code>git add</code>\u628a\u6a94\u6848\u52a0\u5165\u81f3\u66ab\u5b58\u5340\u6642,Git\u6703\u6839\u64da\u9019\u500b\u7269\u4ef6\u7684\"\u5167\u5bb9\"\u8a08\u7b97\u51fa<code>SHA-1</code>\u503c</li> <li>\u6b65\u9a5f\u4e8c: Git\u63a5\u8457\u6703\u7528\u9019\u500b<code>SHA-1</code>\u503c\u7684\u524d<code>2</code>\u500b\u5b57\u7576\u4f5c<code>\u76ee\u9304\u540d\u7a31</code>,\u5f8c38\u500b\u5b57\u7576\u4f5c\u6a94\u6848\u540d\u7a31;\u63a5\u8457Git\u6703\u628a\u76ee\u9304\u53ca\u6a94\u6848\u5efa\u7acb\u5728<code>.git/objects/</code> \u76ee\u9304\u88e1\u9762</li> <li>\u6b65\u9a5f\u4e09: \u8a72\u6a94\u6848\u7684\u5167\u5bb9\u5247\u662fGit\u4f7f\u7528\u58d3\u7e2e\u6f14\u7b97\u6cd5,\u628a\u539f\u672c\u7684\"\u5167\u5bb9\"\u58d3\u7e2e\u4e4b\u5f8c\u7684\u7d50\u679c</li> <li>\u88dc\u5145: <code>Blob\u7269\u4ef6</code>\u7684<code>\u6a94\u540d</code>\u662f\u7531<code>SHA-1</code>\u6f14\u7b97\u6cd5\u6c7a\u5b9a\u7684,Blob\u7269\u4ef6\u7684<code>\u5167\u5bb9</code>\u5247\u662f\u58d3\u7e2e\u6f14\u7b97\u6cd5\u6c7a\u5b9a\u7684</li> </ul> </li> <li>Tree\u7269\u4ef6<ul> <li><code>Tree\u7269\u4ef6</code>\u6703\u6307\u5411<code>\u67d0\u500b</code>\u6216\u662f<code>\u67d0\u4e9bBlob\u7269\u4ef6</code>,\u6216\u662f\u5176\u4ed6<code>Tree\u7269\u4ef6</code></li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655: https://git-scm.com/book/zh-tw/v2/Git-Internals-Git-Objects </li> <li></li> <li>\u7d71\u6574:</li> <li>\u6b65\u9a5f\u4e00: <code>\u6a94\u6848</code>\u5728Git\u88e1\u6703\u4ee5<code>Blob\u7269\u4ef6</code>\u7684\u65b9\u5f0f\u5b58\u653e</li> <li>\u6b65\u9a5f\u4e8c: <code>\u76ee\u9304</code>\u53ca\u6a94\u6848\u540d\u7a31\u6703\u4ee5<code>Tree\u7269\u4ef6</code>\u7684\u5f62\u5f0f\u5b58\u653e</li> <li>\u6b65\u9a5f\u4e09: <code>Tree\u7269\u4ef6</code>\u6703\u6307\u5411<code>\u67d0\u500b</code>\u6216\u662f<code>\u67d0\u4e9bBlob\u7269\u4ef6</code>,\u6216\u662f\u5176\u4ed6<code>Tree\u7269\u4ef6</code></li> </ul> </li> <li>Commit\u7269\u4ef6<ul> <li>\u901a\u5e38\u5305\u542b\u4ee5\u4e0b 4 \u9805\u8cc7\u8a0a </li> <li>\u67d0\u500b<code>Tree\u7269\u4ef6</code></li> <li>parent: \u6703\u6307\u5411\u524d\u4e00\u6b21\u7684Commit\u7269\u4ef6</li> <li>\u4f5c\u8005\u8ddf\u9019\u6b21commit\u7684\u4eba&amp;\u8a72\u6b21\u7684commit\u6642\u9593</li> <li>\u672c\u6b21\u7684commit\u8a0a\u606f($ <code>git commit -m</code>)</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655: https://git-scm.com/book/en/v2/Git-Internals-Git-Objects</li> <li>\u7d71\u6574<code>Commit\u7269\u4ef6</code>\u7684\u898f\u5247:</li> <li><code>Commit\u7269\u4ef6</code>\u6703\u6307\u5411\u67d0\u500b<code>Tree\u7269\u4ef6</code></li> <li><code>Tree\u7269\u4ef6</code>\u6703\u6307\u5411<code>\u67d0\u500b</code>\u6216\u662f<code>\u67d0\u4e9bBlob\u7269\u4ef6</code>,\u6216\u662f\u5176\u4ed6<code>Tree\u7269\u4ef6</code></li> <li>\u9664\u4e86\u7b2c\u4e00\u500b<code>Commit\u7269\u4ef6</code>\u4ee5\u5916,\u6240\u6709\u7684<code>Commit\u7269\u4ef6</code>\u90fd\u6703\u6307\u5411\u5b83\u7684\u524d\u4e00\u6b21\u7684<code>Commit\u7269\u4ef6</code></li> </ul> </li> <li>Tag\u7269\u4ef6<ul> <li>$ <code>git tag -a wow -m \"Tag\u7269\u4ef6 annotated tag \u7df4\u7fd2\"</code></li> <li>$ <code>git cat-file -t &lt;</code>Tag\u7269\u4ef6<code>\u7684SHA-1\u503c&gt;</code></li> <li></li> <li>\u7d71\u6574:</li> <li><code>Tag\u7269\u4ef6</code>\u4e2d\u7684\u6709\u9644\u8a3bTag(Annotated Tag)\u6703\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code></li> </ul> </li> <li>Git\u56db\u5927\u7269\u4ef6(<code>Blob</code>,<code>Tree</code>,<code>Commit</code>,<code>Tag</code>)\u89c0\u5ff5\u6574\u5408:<ul> <li>\u628a\u6a94\u6848\u52a0\u5165Git\u4e4b\u5f8c,\u6a94\u6848\u7684\u5167\u5bb9\u6703\u88ab\u8f49\u6210<code>Blob\u7269\u4ef6</code>\u5132\u5b58</li> <li>\u76ee\u9304\u4ee5\u53ca\u6a94\u540d\u6703\u5b58\u653e\u5728<code>Tree\u7269\u4ef6</code>\u5167,<code>Tree\u7269\u4ef6</code>\u6703\u6307\u5411<code>Blob\u7269\u4ef6</code>,\u6216\u662f\u5176\u5b83\u7684<code>Tree\u7269\u4ef6</code></li> <li><code>Commit\u7269\u4ef6</code>\u6703\u6307\u5411\u67d0\u500b<code>Tree\u7269\u4ef6</code>;\u9664\u4e86\u7b2c\u4e00\u500b<code>Commit\u7269\u4ef6</code>\u4ee5\u5916,\u5176\u5b83\u7684commit\u90fd\u6703\u6307\u5411\u524d\u4e00\u6b21\u7684<code>Commit\u7269\u4ef6</code></li> <li><code>Tag\u7269\u4ef6</code>(Annotated Tag)\u6703\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code></li> <li><code>\u5206\u652f</code>(branch)\u96d6\u7136\u4e0d\u5c6c\u65bc\u56db\u500b\u7269\u4ef6\u4e4b\u4e00,\u4f46\u5b83\u6703\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code></li> <li>\u7576\u958b\u59cb\u5f80Git Server\u4e0a\u63a8\u9001\u4e4b\u5f8c,\u5728 <code>.git/refs/</code> \u5e95\u4e0b\u5c31\u6703\u591a\u51fa\u4e00\u500b <code>remote/\u76ee\u9304</code>,\u88e1\u9762\u653e\u7684\u662f\u9060\u7aef\u7684\u5206\u652f,\u57fa\u672c\u4e0a\u8ddf\u672c\u5730\u7684\u5206\u652f\u662f\u5dee\u4e0d\u591a\u7684\u6982\u5ff5,\u540c\u6a23\u4e5f\u6703\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code></li> <li> </li> <li><code>HEAD</code>\u4e5f\u4e0d\u5c6c\u65bcGit\u56db\u5927\u7269\u4ef6\u4e4b\u4e00,\u5b83\u6703\u6307\u5411\u67d0\u500b<code>\u5206\u652f</code>(branch)</li> </ul> </li> </ul>"},{"location":"version_control/git/#git-count-objects","title":"$ <code>git count-objects</code>: \u53ef\u4ee5\u6aa2\u8996\u76ee\u524d\u6709\u591a\u5c11\u7269\u4ef6\u548c\u7528\u6389\u591a\u5c11\u5132\u5b58\u7a7a\u9593","text":"<ul> <li>$ <code>git count-objects</code>: \u53ef\u4ee5\u6aa2\u8996\u76ee\u524d\u6709\u591a\u5c11\u7269\u4ef6\u548c\u7528\u6389\u591a\u5c11\u5132\u5b58\u7a7a\u9593</li> <li></li> <li><code>-v</code> (=&gt; <code>--verbose</code>): \u986f\u793a\u9019\u500bGit\u7ba1\u63a7\u7684\u5c08\u6848\u4e2d\u6240\u6709\u7269\u4ef6\u7684\u66f4\u591a\u8a73\u7d30\u8cc7\u8a0a</li> <li><code>-H</code> (=&gt; <code>--human-readable</code>): \u5c07\u6240\u6709\u5728\u9019\u500bGit\u7ba1\u63a7\u7684\u5c08\u6848\u4e2d\u6240\u6709\u7269\u4ef6\u6240\u4f54\u7528\u7684\u5132\u5b58\u7a7a\u9593\u7528\u4eba\u985e\u53ef\u95b1\u8b80\u7684\u683c\u5f0f\u4f86\u986f\u793a(MB)</li> </ul>"},{"location":"version_control/git/#git_9","title":"\u5728\u4f7f\u7528Git\u6642,\u6307\u4ee4\u8981\u5728\u6b63\u78ba\u7684\u76ee\u9304\u4e0b\u624d\u80fd\u6b63\u5e38\u904b\u4f5c","text":"<ul> <li>\u5728\u4f7f\u7528Git\u6642,\u6307\u4ee4\u8981\u5728\u6b63\u78ba\u7684\u76ee\u9304\u4e0b\u624d\u80fd\u6b63\u5e38\u904b\u4f5c</li> </ul>"},{"location":"version_control/git/#gitstaging-areaindex","title":"\u5728Git\u8853\u8a9e\u4e2d,\u66ab\u5b58\u5340(staging area)=\u7d22\u5f15(index)","text":"<ul> <li>\u66ab\u5b58\u5340(Staging Area)\u53c8\u53ef\u7a31\u70ba\u7d22\u5f15(index)</li> </ul>"},{"location":"version_control/git/#git-working-directorystaging-arearepository","title":"Git \u4e16\u754c\u88e1\u7684\u7684\u4e09\u5927\u5340\u57df---<code>\u5de5\u4f5c\u76ee\u9304(working directory)</code>,<code>\u66ab\u5b58\u5340(staging area)</code>,<code>\u5132\u5b58\u5eab(repository)</code>","text":"<ul> <li>\u5728Git\u88e1,\u4e3b\u8981\u53ef\u4ee5\u5206\u6210\u4e09\u500b\u5340\u57df,\u900f\u904e\u4e0d\u540c\u7684git\u6307\u4ee4\u53ef\u4ee5\u628a\u6a94\u6848\u79fb\u52d5\u5f80\u4e0d\u540c\u7684\u5340\u57df</li> <li>\u5de5\u4f5c\u76ee\u9304(Working Directory)</li> <li>\u66ab\u5b58\u5340\u57df(Staging Area) or (index)</li> <li>\u5132\u5b58\u5eab(Repository)</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/</li> </ul>"},{"location":"version_control/git/#git-add-git-commit","title":"\u70ba\u4ec0\u9ebc\u6bcf\u6b21\u90fd\u8981\u5148$ <code>git add</code> \u518d $ <code>git commit</code>","text":"<ul> <li>\u53ef\u4ee5\u60f3\u50cf\u4f60\u6709\u4e00\u500b\u5009\u5eab,\u5009\u5eab\u9580\u53e3\u6709\u500b\u5c0f\u5ee3\u5834,\u9019\u500b\u5ee3\u5834\u7684\u6982\u5ff5\u5c31\u50cf\u8ddf\u66ab\u5b58\u5340\u4e00\u6a23,\u4f60\u628a\u8981\u5b58\u653e\u5230\u5009\u5eab\u7684\u8ca8\u7269\u5148\u653e\u5230\u9019\u908a($ <code>git add</code>),\u7136\u5f8c\u7b49\u6536\u96c6\u7684\u5dee\u4e0d\u591a\u4e86\u5c31\u53ef\u4ee5\u6253\u958b\u5009\u5eab\u9580,\u628a\u653e\u5728\u5ee3\u5834\u4e0a\u7684\u8ca8\u7269\u9001\u9032\u5009\u5eab\u88e1($ <code>git commit -m</code>,\u4e26\u8a18\u9304\u4e0b\u4f86\u9019\u6279\u8ca8\u662f\u4ec0\u9ebc\u7528\u9014\u7684? &amp; \u8ab0\u9001\u4f86\u7684?)</li> </ul>"},{"location":"version_control/git/#gitid-sha-1","title":"Git\u7269\u4ef6\u7684id\u662f\u600e\u9ebc\u8a08\u7b97\u51fa\u4f86\u7684? (<code>SHA-1\u6f14\u7b97\u6cd5</code>)","text":"<ul> <li>\u5728Git\u7684Commit\u7269\u4ef6\u88e1\u6bcf\u4e32\u770b\u8d77\u4f86\u50cf\u4e82\u78bc\u7684\u6587\u5b57,\u90fd\u662f\u900f\u904eSHA-1\u6f14\u7b97\u6cd5\u8a08\u7b97\u51fa\u4f86\u7684\u7d50\u679c,\u662f\u4e00\u7a2e\u91cd\u8907\u7387\u6975\u4f4e\u7684\u6f14\u7b97\u6cd5;Git\u4f7f\u7528\u9019\u6a23\u7684\u5b57\u4e32\u4f5c\u70ba\u8b58\u5225,\u6bcf\u500bCommit\u7269\u4ef6\u90fd\u6709\u4e00\u500b\u9019\u6a23\u7684\u503c,\u4f60\u53ef\u4ee5\u628a\u5b83\u60f3\u50cf\u6210\u662f\u6bcf\u500bCommit\u7269\u4ef6\u7684\u8eab\u5206\u8b49\u5b57\u865f,\u4e0d\u6703\u91cd\u8907</li> </ul>"},{"location":"version_control/git/#head","title":"<code>HEAD</code>\u662f\u4ec0\u9ebc?","text":"<ul> <li><code>HEAD</code> \u662f\u4e00\u500b\u6307\u6a19,\u6703\u6307\u5411\u67d0\u4e00\u500b\u5206\u652f,\u6211\u5011\u901a\u5e38\u53ef\u4ee5\u628a<code>HEAD</code>\u7576\u4f5c\"\u76ee\u524d\u5206\u652f\"\u4f86; \u4e5f\u53ef\u4ee5\u5728<code>.git/HEAD</code>\u9019\u500b\u6a94\u6848\u88e1\u770b\u5230\u8a18\u9304\u8457<code>HEAD</code>\u7684\u5167\u5bb9</li> <li>$ <code>cat .git/HEAD</code>: \u986f\u793a\u76ee\u524d<code>HEAD</code>\u6307\u5411\u7684\u5206\u652f <ul> <li></li> </ul> </li> <li>$ <code>cat .git/refs/&lt;\u5206\u652f\u540d\u7a31&gt;</code>: \u6aa2\u8996\u76ee\u524dHEAD\u6307\u5411\u7684\u5206\u652f\u7684commit\u7269\u4ef6<ul> <li></li> </ul> </li> <li>\u7576\u5207\u63db\u5206\u652f\u6642,HEAD\u6307\u5411\u7684\u5206\u652f\u4e5f\u6703\u8f49\u8b8a<ul> <li>$ <code>git branch</code>: \u6aa2\u8996\u76ee\u524d\u6240\u6709\u7684\u5206\u652f\u6709\u54ea\u4e9b</li> <li>$ <code>git branch bird</code>: \u5efa\u7acb\u4e00\u500b\u65b0\u7684\u5206\u652f\u540d\u7a31\u70ba<code>bird</code></li> <li>$ <code>git checkout bird</code>:\u5207\u63db\u5230<code>bird</code>\u5206\u652f</li> <li>$ <code>cat .git/HEAD</code> : \u6aa2\u8996\u76ee\u524dHEAD\u6307\u5411\u7684\u662f\u54ea\u500b\u5206\u652f\u540d\u7a31 // <p>ref: refs/heads/bird </p> </li> <li>\u7e3d\u7d50: <code>.git/HEAD</code>\u7684\u5167\u5bb9(<code>.git/refs/heads/&lt;\u76ee\u524d\u6240\u5728\u5206\u652f\u7684\u540d\u7a31&gt;</code>\u6703\u96a8\u8457$ <code>git checkout &lt;\u5206\u652f\u540d\u7a31&gt;</code> \u800c\u6539\u8b8a)</li> </ul> </li> <li>\u88dc\u5145: \u5728Git <code>v1.8.5</code> \u4e4b\u5f8c\u7684\u7248\u672c\u958b\u59cb\u652f\u63f4,\u53ef\u4ee5\u7528 <code>\uff20</code> \u9019\u500b\u7b26\u865f\u4f86\u4ee3\u8868<code>HEAD</code><ul> <li><code>\u60c5\u5883\u8aaa\u660e</code> </li> <li>$ <code>git reset HEAD~2</code> = $ <code>git reset @~2</code></li> <li>$ <code>git reset HEAD^^</code>= $ <code>git reset @^^</code></li> <li>\u4ee5\u4e0a\u56db\u7a2e\u6307\u4ee4\u90fd\u662f\u76f8\u540c\u7684\u610f\u601d,\u4ee3\u8868\u8981\u56de\u5230\u76ee\u524d\u7684<code>HEAD\u6307\u6a19</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u4ee5\u524d\u7684<code>2\u6b21``commit\u7d00\u9304</code>\u7684\u90a3\u6642\u5019</li> <li>\u53ef\u53c3\u8003\u5982\u679c\u60f3\u91cd\u65b0\u7de8\u8f2f\u525b\u624d\u7684commit</li> </ul> </li> </ul>"},{"location":"version_control/git/#orig_head","title":"<code>ORIG_HEAD</code>\u662f\u4ec0\u9ebc?","text":"<ul> <li><code>ORIG_HEAD</code> \u662fGit\u7279\u5225\u7684\u4e00\u500b\u7d00\u9304\u9ede,\u9019\u500b\u7d00\u9304\u9ede\u6703\u81ea\u52d5\u8a18\u9304\u5728\"Git\u7684\u5371\u96aa\u64cd\u4f5c\"\u4ee5\u524d,\u7576\u4e0b\u7684<code>HEAD</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6\u7684id</code></li> <li>Git\u7684\"\u5371\u96aa\u64cd\u4f5c\"\u6709: <code>merge</code>\u3001<code>rebase</code>\u3001<code>reset</code></li> <li>$ <code>cat .git/ORIG_HEAD</code><ul> <li></li> </ul> </li> <li>\u53ef\u4ee5\u6aa2\u8996\u76ee\u524d\u7684 <code>ORIG_HEAD</code> \u7d00\u9304\u9ede\u662f\u6307\u5411\u54ea\u500b<code>Commit\u7269\u4ef6</code></li> <li>$ cat <code>.git/ORIG_HEAD</code><ul> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#branch_1","title":"<code>\u5206\u652f(branch)</code>\u662f\u4ec0\u9ebc?","text":"<ul> <li>\u5728Git\u88e1\u9762,<code>\u5206\u652f(branch)</code>\u5c31\u50cf\u8cbc\u7d19\u4e00\u6a23,\u5b83\u6703\u8cbc\u5728\u67d0\u500b<code>Commit\u7269\u4ef6</code>\u4e0a,\u4e26\u4e14\u6703\u96a8\u8457\u6bcf\u6b21\u7684commit\u8ddf\u8457\u79fb\u52d5</li> <li>\u6240\u4ee5<code>HEAD</code>\u6703\u6307\u5411\u4e00\u500b<code>\u5206\u652f(branch)</code>,\u4e26\u4e14<code>\u5206\u652f</code>\u6703\u6307\u5411\u4e00\u500b<code>Commit\u7269\u4ef6</code><ul> <li>\u901a\u5e38\u4f86\u8aaa<code>HEAD</code>\u6240\u6307\u7684\u90a3\u500b<code>\u5206\u652f(branch)</code>,\u6703\u8ddf\u8457\u65b0\u7684<code>Commit\u7269\u4ef6</code>\u524d\u9032(\u800c<code>HEAD</code>\u4e5f\u6703\u8ddf\u8457\u4e00\u8d77\u524d\u9032) </li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell </li> </ul> </li> <li>\u7576 $ <code>git checkout &lt;\u5206\u652f\u540d\u7a31orCommit\u7269\u4ef6&gt;</code>\u6642,Git\u6703\u4f9d\u64da\u7576\u4e0b\u7684\u9019\u500b<code>Commit\u7269\u4ef6</code>\u4f86\u9084\u539f\u5de5\u4f5c\u76ee\u9304(<code>working directory</code>)\u7684\u5167\u5bb9,\u4e26\u53c3\u8003 <code>.git/objects/</code> \u76ee\u9304\u88e1\u7684\u5167\u5bb9\u50cf\u62ce\u8461\u8404\u4e00\u6a23\u6574\u4e32\u5f9e\u982d\u7684\u5730\u65b9\u62ce\u8d77\u4f86,\u53ea\u8981\u5f9e\u6e90\u982d\u7684<code>Commit\u7269\u4ef6</code>\u62ce\u8d77\u4f86,\u6574\u4e32\u5167\u5bb9\u90fd\u53ef\u4ee5\u88ab\u62ff\u51fa\u4f86<ul> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://git-scm.com/docs/git-checkout</li> <li>\u6ce8\u610f! \u9019\u6642\u5019\u6709\u53ef\u80fd\u6703\u767c\u751f<code>Detached HEAD</code>\u7684\u60c5\u6cc1!</li> <li>\u7576\u4f7f\u7528 $ <code>git checkout &lt;Commit\u7269\u4ef6\u7684id&gt;</code> \u5f8c,\u8a72<code>Commit\u7269\u4ef6</code>\u525b\u597d\u76ee\u524d\u6c92\u6709\u5206\u652f(branch)\u6307\u5411\u5b83 </li> </ul> </li> <li>$ <code>git branch</code>: \u6aa2\u8996\u76ee\u524d\u6240\u6709\u7684\u5206\u652f\u6709\u54ea\u4e9b<ul> <li> </li> </ul> </li> <li>$ <code>git branch bird</code>: \u5efa\u7acb\u4e00\u500b\u65b0\u7684\u5206\u652f\u540d\u7a31\u70ba<code>bird</code><ul> <li></li> </ul> </li> <li>$ <code>git checkout bird</code>: \u5207\u63db\u5230<code>bird</code>\u5206\u652f<ul> <li>\u7576Git\u5728\u5207\u63db\u5206\u652f ($ <code>git checkout &lt;branch name&gt;</code>) \u7684\u6642\u5019\u6703\u505a\u4ee5\u4e0b\u5169\u4ef6\u4e8b\u60c5</li> <li>\u7528\u8a72\u5206\u652f\u6307\u5411\u7684\u90a3\u500b<code>Commit\u7269\u4ef6</code>\u7684\u5167\u5bb9\u4f86\"\u66f4\u65b0\"\u66ab\u5b58\u5340(staging area)\u4ee5\u53ca\u5de5\u4f5c\u76ee\u9304(working directory),\u7576\u5207\u63db\u5206\u652f\"\u4e4b\u524d\"\u6240\u505a\u7684\u4fee\u6539\u5167\u5bb9\u4ecd\u6703\u7559\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u4e0d\u53d7\u5f71\u97ff</li> <li>\u540c\u6642<code>HEAD</code>\u4e5f\u6703\u8ddf\u8457\u4e00\u8d77\u524d\u9032,\u6307\u5411\u525b\u525b\u5207\u63db\u904e\u53bb\u7684\u90a3\u500b\u5206\u652f(branch)</li> </ul> </li> <li>$ <code>git branch -m bird fish</code>: \u5c07<code>bird\u5206\u652f</code>\u66f4\u540d\u70ba<code>fish\u5206\u652f</code><ul> <li><code>-m</code> (=&gt; <code>--move</code>): \u79fb\u52d5or\u66f4\u540d <code>\u5206\u652f</code>(branch)\u548c\u5176\u76f8\u5c0d\u61c9\u7684<code>reflog</code></li> <li></li> </ul> </li> <li>$ <code>git branch -d fish</code>: \u5c07<code>fish</code>\u5206\u652f\u522a\u9664<ul> <li><code>-d</code> (=&gt; <code>--delete</code>): \u522a\u9664\u8a72\u5206\u652f</li> <li>\u88dc\u5145: \u53ea\u6709\u76ee\u524d\u6240\u5728\u7684\u5206\u652f\u4e0d\u80fd\u522a\u9664,\u53ea\u8981\u5148$ <code>git checkout</code> \u5207\u63db\u5230\u5225\u7684\u5206\u652f\u5f8c\u4e5f\u53ef\u4ee5\u522a\u9664\u539f\u672c\u6240\u5728\u7684\u90a3\u500b\u5206\u652f(\u5118\u7ba1\u662fmaster\u5206\u652f)</li> <li></li> </ul> </li> <li>\u6216\u662f $ <code>git branch -D fish</code>:\u5f37\u5236\u5c07\u5c1a\u672a\u5408\u4f75(merged)\u7684\u5206\u652f\u522a\u9664<ul> <li><code>-D</code> = <code>-d</code> + <code>-f</code> (=&gt; <code>--delete --force</code> \u7684\u7e2e\u5beb): \u5f37\u5236\u522a\u9664\u8a72\u5206\u652f( \u4e0d\u7ba1\u8a72\u5206\u652f\u662f\u5426\u5df2\u7d93\u5408\u4f75(merged)\u5230\u5176\u4e0a\u6e38\u5206\u652f(upstream branch) )</li> </ul> </li> <li>\u5408\u4f75\u904e\u5f8c\u7684\u5206\u652f,\u60f3\u522a\u9664\u5c31\u53ef\u4ee5\u522a\u9664,\u56e0\u70ba\u5206\u652f\u53ea\u662f\u4e00\u500b<code>40</code>\u5b57\u5143\u7684\u6a94\u6848\u800c\u5df2,\u5b83\u6703\u6a19\u8a18\u51fa\u5b83\u76ee\u524d\u662f\u6307\u5411\u54ea\u4e00\u500b<code>Commit\u7269\u4ef6</code>; \u6240\u4ee5<code>\u522a\u9664\u5206\u652f</code>\u9019\u500b\u52d5\u4f5c\u5c31\u50cf\u662f\u628a\u4e00\u5f35\u8cbc\u7d19\u6495\u8d77\u4f86\u7684\u6982\u5ff5\u800c\u5df2,\u539f\u4f86\u88ab\u9019\u5f35\u8cbc\u7d19\u8cbc\u8457\u7684\u6771\u897f\u4e26\"\u4e0d\u6703\"\u56e0\u6b64\u800c\u4e0d\u898b</li> <li>\u5728Git\u958b\u5206\u652f\u5176\u5be6\u5f88\"\u4fbf\u5b9c\",\u56e0\u70ba<code>\u5206\u652f(branch)</code>\u5176\u5be6\u5c31\u53ea\u662f\u4e00\u5f35<code>40</code>\u5b57\u5143(<code>\u67d0\u500bCommit\u7269\u4ef6\u7684SHA-1\u503c</code>)\u7684<code>\u8cbc\u7d19</code>,\u800c\u9019\u500b\u8cbc\u7d19\u6703\u6307\u5411\u5b83\u5c0d\u61c9\u7684<code>Commit\u7269\u4ef6\u7684id</code></li> <li>\u53ef\u6aa2\u8996 <code>.git/refs/heads/&lt;\u5206\u652f\u540d\u7a31&gt;</code> \u9019\u500b\u6a94\u6848\u88e1\u7684\u5167\u5bb9\u5c31\u662f\u8a72<code>\u5206\u652f(branch)</code>\u6307\u5411\u5b83\u5c0d\u61c9\u7684<code>Commit\u7269\u4ef6\u7684id</code><ul> <li>$ <code>ls -al .git/refs/heads/</code></li> <li> </li> <li></li> </ul> </li> <li>\u5982\u679c\u628a <code>.git/refs/heads/</code> \u76ee\u9304\u88e1\u9762\u7684\u5176\u4e2d\u4e00\u500b\u5206\u652f\u522a\u6389\u7684\u8a71,\u5c31\u76f8\u7576\u65bc\u522a\u9664\u5206\u652f\u4e86<ul> <li>$ <code>rm .git/refs/heads/&lt;\u8981\u522a\u9664\u7684\u5206\u652f\u540d\u7a31&gt;</code> </li> <li> </li> </ul> </li> <li>\u5982\u679c\u628a <code>.git/refs/heads</code> \u76ee\u9304\u88e1\u9762\u7684\u5176\u4e2d\u4e00\u500b\u5206\u652f\u540d\u7a31\u6539\u6389\u7684\u8a71,\u5c31\u76f8\u7576\u65bc\u4fee\u6539\u5206\u652f\u540d\u7a31\u4e86<ul> <li>$ <code>mv .git/refs/heads/&lt;\u539f\u5206\u652f\u540d\u7a31&gt; .git/refs/heads/&lt;\u65b0\u5206\u652f\u540d\u7a31&gt;</code></li> <li></li> </ul> </li> <li>Git\u5982\u4f55\u77e5\u9053\u73fe\u5728\u662f\u5728\u54ea\u4e00\u500b\u5206\u652f(branch)?</li> <li>\u53ef\u4ee5\u900f\u904eGit\u6307\u4ee4 $ <code>git branch -l</code><ul> <li><code>-l</code> (=&gt; <code>--list</code>): \u986f\u793a\u76ee\u524d\u6709\u54ea\u4e9b\u5206\u652f(<code>branch</code>)</li> </ul> </li> <li>\u53ef\u4ee5\u900f\u904e\u6aa2\u8996 <code>.git/HEAD</code> \u9019\u500b\u6a94\u6848,\u4f86\u5f97\u77e5HEAD\u6307\u6a19\u76ee\u524d\u6307\u5411\u7684\u662f\u54ea\u4e00\u500b\u5206\u652f(branch)<ul> <li>$ <code>cat .git/HEAD</code></li> <li></li> <li>\u7576\u5207\u63db\u5206\u652f(brach)\u6642, .git/HEAD \u7684\u5167\u5bb9\u4e5f\u6703\u540c\u6642\u8b8a\u52d5</li> <li>\u5148 $ <code>git checkout &lt;\u53e6\u4e00\u500b\u5206\u652f\u540d\u7a31&gt;</code></li> <li>\u518d $ <code>cat .git/HEAD</code></li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#detached-head","title":"<code>Detached HEAD</code> (\u65b7\u982d) \u662f\u4ec0\u9ebc?","text":"<ul> <li><code>Detached HEAD</code> (\u65b7\u982d): \u6b63\u5e38\u60c5\u6cc1\u4e0b,HEAD\u6703\u6307\u5411\u67d0\u4e00\u500b\u5206\u652f,\u800c\u5206\u652f\u6703\u6307\u5411\u67d0\u4e00\u500bCommit\u7269\u4ef6\u3002\u4f46\u6709\u6642\u5019<code>HEAD</code>\u6703\u767c\u751f\"\u6c92\u6709\u8fa6\u6cd5\u6307\u5230\u67d0\u500b\u5206\u652f\"\u7684\u60c5\u6cc1,\u9019\u500b\u72c0\u614b\u7684<code>HEAD</code>\u5c31\u7a31\u70ba \"<code>detached HEAD(\u65b7\u982d)</code>\"</li> <li>\u4ee5\u4e0b\u662f3\u7a2e\u5e38\u898b\u7684\u539f\u56e0\u53ef\u80fd\u6703\u9020\u6210<code>Detached HEAD</code>\u7684\u72c0\u614b<ul> <li>\u4f7f\u7528 $ <code>git checkout &lt;Commit\u7269\u4ef6\u7684id&gt;</code> \u5f8c,\u8a72<code>Commit\u7269\u4ef6</code>\u525b\u597d\u76ee\u524d\u6c92\u6709\u5206\u652f(branch)\u6307\u5411\u5b83</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://git-scm.com/docs/git-checkout</li> <li>$ <code>git rebase</code> \u7684\u904e\u7a0b\u5176\u5be6\u4e5f\u662f\u4e0d\u65b7\u5730\u8655\u65bc<code>Detached HEAD</code>\u7684\u72c0\u614b</li> <li>\u5207\u63db\u5230\u67d0\u500b\u9060\u7aef\u5206\u652f(remote branch)\u7684\u6642\u5019</li> <li>\u4f8b\u5982: $ <code>git checkout -b test origin/test</code> </li> </ul> </li> <li>\u5728 <code>Detached HEAD</code> \u72c0\u614b\u4e0b\u5176\u5be6\u8ddf\u5e73\u5e38\u4e00\u6a23\u64cd\u4f5cGit,\u4e5f\u53ef\u4ee5\u9032\u884ccommit,\u53ea\u662fcommit\u5f8c,\u7576\u4e0b\u7684\u90a3\u500b<code>Commit\u7269\u4ef6</code>\u5c31\u53ea\u6703\u6709<code>HEAD</code>\u6307\u6a19\u6307\u5411\u5b83,\u9019\u6642\u5982\u679c\u5c07<code>HEAD</code>\u6307\u6a19\u5207\u63db\u5230\u5176\u4ed6\u5206\u652f\u7684\u8a71,\u9019\u500b<code>Commit\u7269\u4ef6</code>\u5c31\u5f88\u4e0d\u5bb9\u4ee5\u88ab\u627e\u56de\u4f86\u4e86(\u9664\u975e\u4f60\u6709\u8a18\u4e0b\u9019\u500b<code>Commit\u7269\u4ef6</code>\u7684id); \u5982\u679c\u4e00\u76f4\u6c92\u6709\u4eba\u4f86\u627e\u5b83\u7684\u8a71,\u5c31\u8981\u7b49\u5230Git\u81ea\u52d5\u89f8\u767c\u8cc7\u6e90\u56de\u6536\u6a5f\u5236\u4f86\u56de\u6536\u5b83\u4e86<ul> <li>\u9019\u60c5\u6cc1\u6703\u6709\u9ede\u985e\u4f3c\u65bc\u8981\u5f9e\u904e\u53bb\u7684<code>commit\u7d00\u9304</code>,\u518d\u9577\u4e00\u500b\u65b0\u7684\u5206\u652f\u51fa\u4f86\u7684\u60c5\u5883</li> <li>\u53ef\u53c3\u8003\u5982\u679c\u60f3\u5f9e\u904e\u53bb\u7684\u67d0\u6b21<code>commit\u7d00\u9304</code>\u518d\u9577\u4e00\u500b<code>\u65b0\u7684\u5206\u652f(branch)</code>\u51fa\u4f86,\u8a72\u5982\u4f55\u505a\u5462? </li> <li>\u9019\u6642\u5982\u679c\u60f3\u7559\u4e0b\u9019\u500b<code>Commit\u7269\u4ef6</code>\u7684\u8a71,\u53ef\u4ee5\u5728\u8a72Commit\u7269\u4ef6\u4e0a\u5efa\u7acb\u4e00\u500b<code>\u5206\u652f(branch)</code>\u8cbc\u7d19\u8cbc\u5728\u4e0a\u9762</li> <li>$ <code>git branch &lt;\u8981\u65b0\u589e\u7684\u5206\u652f\u540d\u7a31&gt; &lt;\u8a72Commit\u7269\u4ef6\u7684id&gt;</code></li> <li>\u4e5f\u53ef\u4ee5\u5efa\u7acb\u65b0\u7684\u5206\u652f\u5f8c,\u76f4\u63a5\u5207\u63db\u5230\u8a72\u5206\u652f\u4e0a\u9762</li> <li>$ <code>git checkout -b &lt;\u8981\u65b0\u589e\u7684\u5206\u652f\u540d\u7a31&gt; &lt;\u8a72Commit\u7269\u4ef6\u7684id&gt;</code></li> </ul> </li> <li>\u5176\u5be6\u56b4\u683c\u4f86\u8aaa,\u7576<code>HEAD</code>\u6307\u6a19\u6c92\u6709\u6307\u5230\u67d0\u500b\"\u672c\u5730\"\u5206\u652f\u7684\u8a71,\u5c31\u6703\u5448\u73fe<code>Detached HEAD</code>\u7684\u72c0\u614b<ul> <li>$ <code>git branch -r</code>: \u5217\u51fa\u76ee\u524d\u6240\u6709\u7684<code>\u9060\u7aef\u5206\u652f(remote branch)</code></li> <li><code>-r</code> (=&gt; <code>--remotes</code>): \u5217\u51fa\u76ee\u524d\u6240\u6709\u7684<code>\u9060\u7aef\u5206\u652f(remote branch)</code></li> <li></li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u5982\u679c\u8981\u5207\u63db\u5230\u9060\u7aef\u5206\u652f,\u800c\u4e0d\u5e0c\u671b\u5448\u73fe<code>Detached HEAD</code>\u72c0\u614b,\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4<ul> <li>$ <code>git checkout -t origin/&lt;\u9060\u7aef\u5206\u652f\u540d\u7a31&gt;</code></li> <li><code>-t</code> (=&gt; <code>--track</code>): Git\u6703\u5728\u672c\u6a5f\u5efa\u7acb\u4e00\u500b<code>\u8ffd\u8e64\u5206\u652f</code>(tracking branch)</li> </ul> </li> <li>\u5982\u679c\u60f3\u8981\u7c21\u55ae\u4e00\u9ede\u4e5f\u53ef\u4ee5\u628a\u524d\u9762\u7684\"origin\"\u62ff\u6389,\u4e26\u76f4\u63a5\u5207\u63db\u5230<code>\u9060\u7aef\u5206\u652f</code>(remote branch)\u53bb<ul> <li>$ <code>git checkout &lt;\u9060\u7aef\u5206\u652f\u540d\u7a31&gt;</code> </li> </ul> </li> </ul> </li> <li>\u5982\u4f55\u96e2\u958b<code>Detached HEAD</code>\u72c0\u614b\u5462?<ul> <li>\u65e2\u7136\u5df2\u7d93\u77e5\u9053\u6240\u8b02\u7684<code>Detached HEAD</code>\u72c0\u614b\u53ea\u662f<code>HEAD</code>\u6307\u6a19\u6c92\u6709\u6307\u5411\u4efb\u4f55\u5206\u652f\u6240\u9020\u6210\u7684,\u8981\u812b\u96e2\u9019\u500b\u72c0\u614b,\u53ea\u8981\u8b93<code>HEAD</code>\u80fd\u6307\u5411\u4efb\u4f55\u4e00\u500b<code>\u5206\u652f(branch)</code>\u5c31\u53ef\u4ee5\u4e86</li> <li>\u4f8b\u5982: $ <code>git checkout master</code></li> <li>\u5c07\u76ee\u524d\u7684<code>HEAD\u6307\u6a19</code>\u6307\u5411<code>master\u5206\u652f</code>\u5c31\u53ef\u4ee5\u89e3\u9664<code>Detached HEAD</code>\u7684\u72c0\u614b\u4e86</li> </ul> </li> </ul>"},{"location":"version_control/git/#tag","title":"<code>Tag</code> (\u6a19\u7c64) \u662f\u4ec0\u9ebc?","text":"<ul> <li><code>Tag</code> (\u6a19\u7c64): \u662f\u4e00\u500b\u6307\u5411\u67d0\u4e00\u500b<code>Commit\u7269\u4ef6</code>\u7684\"\u6307\u6a19\"</li> <li>\u53ef\u5148\u53c3\u8003Git \u7684\u56db\u5927\u7269\u4ef6(<code>Blob</code>,<code>Tree</code>,<code>Commit</code>,<code>Tag</code>)\u89c0\u5ff5\u4ecb\u7d39</li> <li><code>Tag</code> (\u6a19\u7c64)\u4f9d\u64da\u5b98\u65b9\u6587\u4ef6\u6709\u4ee5\u4e0b3\u7a2e\u9069\u5408\u4f5c\u70ba\u7684\u7528\u9014       &gt; Annotated tags are meant for release while lightweight tags are meant for private or temporary object labels. <ul> <li>\u8edf\u9ad4\u7248\u672c\u865f(<code>release version</code>)</li> <li>\u500b\u4eba\u4f7f\u7528(<code>private</code>)</li> <li>\u66ab\u6642\u6a19\u8a18\u7528\u9014(<code>temporary object labels</code>)</li> </ul> </li> <li><code>Tag</code> (\u6a19\u7c64)\u53ef\u5206\u70ba\u5169\u7a2e\u5f62\u5f0f<ul> <li><code>\u8f15\u91cf\u6a19\u7c64</code>(lightweight tag): \u4e3b\u8981\u7528\u4f86\u4f5c\u70ba\u8edf\u9ad4\u7248\u672c\u865f(<code>release version</code>)</li> <li><code>\u8f15\u91cf\u6a19\u7c64</code>(lightweight tag)\u6703\u6307\u5411\u4e00\u500b<code>Commit\u7269\u4ef6</code> </li> <li>$ <code>git tag &lt;\u8f15\u91cf\u6a19\u7c64\u7684\u540d\u7a31&gt; &lt;\u8981\u6a19\u8a18\u5728\u54ea\u500bCommit\u7269\u4ef6\u4e0a\u7684id&gt;</code></li> <li>\u4f8b\u5982: $ <code>git tag refresh_hyperlink 19468c5</code>: \u9019\u6a23Git\u5c31\u6703\u5728\"19468c5\"\u9019\u500b<code>Commit\u7269\u4ef6</code>\u4e0a,\u5efa\u7acb\u4e00\u500b<code>\u8f15\u91cf\u6a19\u7c64</code>(lightweight tag)\u53eb\u505a\"refresh_hyperlink\"</li> <li></li> <li><code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag): \u7528\u4f86\u4f5c\u70ba\u500b\u4eba\u4f7f\u7528(<code>private</code>)\u6216\u662f\u66ab\u6642\u6a19\u8a18\u7528\u9014(<code>temporary object labels</code>)</li> <li>\u6ce8\u610f: <code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u6703\u6307\u5411\u4e00\u500b<code>Tag\u7269\u4ef6</code>,\u800c\u9019\u500b<code>Tag\u7269\u4ef6</code>\u624d\u6703\u6307\u5411\u4e00\u500b<code>Commit\u7269\u4ef6</code></li> <li>$ <code>git tag &lt;\u8f15\u91cf\u6a19\u7c64\u7684\u540d\u7a31&gt; &lt;\u8981\u6a19\u8a18\u5728\u54ea\u500bCommit\u7269\u4ef6\u4e0a\u7684id&gt; -a -m \"refresh_form_width\"</code></li> <li>\u4f8b\u5982: $<code>git tag refresh_form_width 6894635 -a -m \"\u6709\u9644\u8a3b\u6a19\u7c64\u7684\u7df4\u7fd2\"</code>: \u9019\u6a23Git\u5c31\u6703\u5728\"6894635\"\u9019\u500b<code>Commit\u7269\u4ef6</code>\u4e0a,\u5efa\u7acb\u4e00\u500b<code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u53eb\u505a\"refresh_form_width\",\u4e26\u4e14\u65b0\u589e\u4e00\u500btag message\u53eb\u505a\"\u6709\u9644\u8a3b\u6a19\u7c64\u7684\u7df4\u7fd2\"<ul> <li><code>-a</code> (=&gt; <code>--annotate</code>): \u8acbGit\u5e6b\u5fd9\u5efa\u7acb\u4e00\u500b<code>\u6709\u9644\u8a3b\u6a19\u7c64</code></li> <li><code>-m</code> (=&gt; <code>--message</code>): \u5efa\u7acb\u4e00\u500b<code>\u6709\u9644\u8a3b\u6a19\u7c64</code>\u7684<code>\u8a0a\u606f</code>(tag message)</li> </ul> </li> <li></li> <li><code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u6703\u6709\u8a18\u9304\u66f4\u8a73\u7d30\u7684\u6a19\u7c64\u76f8\u95dc\u8cc7\u8a0a,\u901a\u5e38\u6703\u6709\u4ee5\u4e0b\u8cc7\u8a0a<ul> <li>\u8ab0\u8cbc\u7684\u6a19\u7c64?</li> <li>\u4ec0\u9ebc\u6642\u5019\u8cbc\u7684\u6a19\u7c64?</li> <li>\u70ba\u4ec0\u9ebc\u8981\u8cbc\u9019\u5f35\u6a19\u7c64? </li> </ul> </li> <li>\u65b0\u589e\u5b8c\u6a19\u7c64(<code>tag</code>)\u4ee5\u5f8c,\u53ef\u4ee5\u7528$ <code>git log --oneline</code>\u4f86\u6aa2\u8996\u76ee\u524d\u7684<code>commit\u7d00\u9304</code>\u7684\u60c5\u6cc1</li> <li><code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u7684\u8a0a\u606f\u91cf\u4e5f\u6703\u6bd4<code>\u8f15\u91cf\u6a19\u7c64</code>(lightweight tag)\u7684\u8a0a\u606f\u91cf\u591a</li> <li>$ <code>git show &lt;\u6a19\u7c64\u7684\u540d\u7a31&gt;</code>: \u53ef\u4ee5\u7528\u4f86\u6aa2\u8996\u5404\u7a2e\u7269\u4ef6\u7684\u578b\u614b<ul> <li>\u4f8b\u5982: $ <code>git show refresh_hyperlink</code> =&gt; \u6aa2\u8996<code>\u8f15\u91cf\u6a19\u7c64</code>(lightweight tag)\u7684\u578b\u614b</li> <li></li> <li>\u4f8b\u5982: $ <code>git show refresh_form_width</code> =&gt; \u6aa2\u8996<code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u7684\u578b\u614b</li> <li></li> </ul> </li> <li>\u4e5f\u53ef\u4ee5\u5230 <code>.git/refs/tags/</code> \u76ee\u9304\u88e1\u9762,\u6aa2\u8996\u6240\u6709\u7684\u6a19\u7c64</li> <li>$ <code>cat .git/refs/tags/&lt;\u6a19\u7c64\u7684\u540d\u7a31&gt;</code><ul> <li>\u5982\u679c\u662f<code>\u8f15\u91cf\u6a19\u7c64</code>,\u6703\u986f\u793a\u8a72\u6a19\u7c64(<code>tag</code>)\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u7684id</li> <li>\u5982\u679c\u662f<code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u6703\u986f\u793a\u5176\u6307\u5411\u7684<code>Tag\u7269\u4ef6</code>,\u800c\u9019\u500b<code>Tag\u7269\u4ef6</code>\u624d\u6703\u6307\u5411\u4e00\u500b<code>Commit\u7269\u4ef6</code>\u7684id</li> </ul> </li> <li>\u522a\u9664\u6a19\u7c64</li> <li>$ <code>git tag -d &lt;\u6a19\u7c64\u7684\u540d\u7a31&gt;</code>: \u5c07\u8a72<code>\u6a19\u7c64</code>\u522a\u9664<ul> <li>\u4f8b\u5982: $ <code>git tag -d refresh_hyperlink</code></li> <li><code>-d</code> (=&gt; <code>--delete</code>): \u522a\u9664\u5df2\u7d93\u5b58\u5728\u7684\u6a19\u7c64</li> </ul> </li> </ul> </li> </ul>"},{"location":"version_control/git/#git-git-gc","title":"Git\u7684\u8cc7\u6e90\u56de\u6536\u6a5f\u5236($ <code>git gc</code>)\u662f\u600e\u9ebc\u904b\u4f5c\u7684\u5462?","text":"<ul> <li>\u5728Git\u88e1,\u6bcf\u7576\u628a\u6a94\u6848\u52a0\u5165\u66ab\u5b58\u5340(staging area)\u6642,Git\u4fbf\u6703\u6839\u64da\"\u6a94\u6848\u5167\u5bb9\"\u88fd\u4f5c\u51fa<code>Blob\u7269\u4ef6</code>; \u6bcf\u7576\u5b8c\u6210<code>commit</code>,\u4fbf\u6703\u8ddf\u8457\u7522\u751f\u6240\u9700\u7684<code>Tree\u7269\u4ef6</code>\u4ee5\u53ca<code>Commit\u7269\u4ef6</code></li> <li>\u7576\u7269\u4ef6\u8d8a\u4f86\u8d8a\u591a,\u4e26\u9054\u5230\u89f8\u767cGit\u81ea\u52d5\u8cc7\u6e90\u56de\u6536\u7684\u6a5f\u5236(<code>Garbage Collection</code>)\u6642,Git\u6703\u5229\u7528\u9019\u500b\u6a5f\u5236\u4f86\u81ea\u52d5\u6574\u7406\u9019\u4e9b\u7269\u4ef6,\u540c\u6642\u4e5f\u6703\u628a<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6\u6e05\u6389 </li> <li>\u53ef\u4ee5\u5148\u53c3\u8003Git\u5176\u5be6\u4e0d\u662f\u5728\u505a\u5dee\u7570\u5099\u4efd,\u800c\u662f\u5728\u70ba\u7576\u6642\u7684\u5c08\u6848\u5efa\u7acb\u5feb\u7167(snapshot)\u7684$ <code>git gc</code>\u7ae0\u7bc0</li> <li>Git\u7684\u8cc7\u6e90\u56de\u6536\u6a5f\u5236($ <code>git gc</code>)\u6703\u81ea\u52d5\u56de\u6536\u6389<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6,\u4f46\u9700\u8981\u52a0\u4e0a <code>--prune=now</code> \u4f86\u642d\u914d\u4f7f\u7528,\u624d\u6703\u7576\u4e0b\u7acb\u5373\u5c31\u751f\u6548<ul> <li>\u53ef\u4ee5\u5148\u53c3\u8003\u5982\u4f55\u628a\u4e00\u500b\u6a94\u6848\u5f9eGit\u7248\u63a7\u4e2d\u771f\u6b63\u7684\u79fb\u9664\u6389\u5462?</li> </ul> </li> <li>$ <code>git gc</code>\u5176\u5be6\u6703\u9ed8\u9ed8\u5730\u547c\u53eb$ <code>git prune</code>\u6307\u4ee4\u4f86\u6e05\u9664<code>Unreachable\u7269\u4ef6</code>,\u4f46$ <code>git prune</code>\u6307\u4ee4\u4e5f\u662f\u8981\u7d66\u5b83\u8a2d\u5b9a\u5230\u671f\u65e5,\u6240\u4ee5\u525b\u624d\u7684\u6307\u4ee4\u5176\u5be6\u539f\u7406\u5982\u4e0b<ul> <li>$ <code>git gc --prune=now</code>  =  $ <code>git gc</code> + $ <code>git prune --expire=now</code></li> </ul> </li> <li>\u9084\u6709\u4ec0\u9ebc\u65b9\u5f0f\u6703\u7522\u751f\u51fa<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6?</li> <li>\u7576\u5df2\u7d93\u5c07\u6a94\u6848\u52a0\u5165\u66ab\u5b58\u5340(staging area)\u5f8c,\u537b\u53c8\u5c07\u8a72\u6a94\u6848\u5f9eGit\u7248\u63a7\u4e2d\u79fb\u9664,\u812b\u96e2Git\u7684\u63a7\u7ba1,\u8b8a\u70ba<code>Untracked File</code>\u72c0\u614b</li> <li>\u56e0\u70ba\u4e00\u65e6Git\u7269\u4ef6\u7522\u751f\u5f8c,\u9664\u975e\u624b\u52d5\u9032 <code>.git/objects/</code> \u76ee\u9304\u8655\u7406\u6389,\u4e0d\u7136\u8a72\u7269\u4ef6\u5c31\u6703\u4e00\u76f4\u7559\u5728\u90a3\u908a\u4e86</li> <li>\u53ef\u5148\u53c3\u8003Git\u5176\u5be6\u4e0d\u662f\u5728\u505a\u5dee\u7570\u5099\u4efd,\u800c\u662f\u5728\u70ba\u7576\u6642\u7684\u5c08\u6848\u5efa\u7acb\u5feb\u7167(snapshot)\u7684 $ <code>git ls-files -s</code> \u7ae0\u7bc0</li> <li>\u53ef\u5148\u53c3\u8003$ <code>git rm --cached</code> V.S. <code>.gitignore</code> \u6bd4\u8f03\u7684 $ <code>git rm --cached</code> \u90e8\u5206</li> <li><code>\u60c5\u5883\u8aaa\u660e</code><ul> <li>$ <code>echo \"\u624b\u52d5\u7522\u751f\u4e00\u500bUnreachable\u7269\u4ef6\" &gt; unreachable.html</code></li> <li>$ <code>git add unreachable.html</code></li> <li>$ <code>git ls-files -s</code></li> <li>\u628a\u6a94\u6848\u52a0\u5230\u66ab\u5b58\u5340(staging area)\u5f8c,\u6aa2\u8996\u4e00\u4e0b\u76ee\u524d\u7684Git\u7269\u4ef6\u5217\u8868(\u5305\u542b\u5de5\u4f5c\u76ee\u9304 &amp; \u66ab\u5b58\u5340 \u4e2d\u7684)</li> <li>$ <code>git rm --cached unreachable.html</code></li> <li>\u5c07<code>unreachable.html</code>\u9019\u500b\u6a94\u6848\u5f9eGit\u63a7\u7ba1\u4e2d\u79fb\u9664,\u812b\u96e2Git\u63a7\u7ba1,\u8b8a\u70ba<code>Untracked file</code>\u72c0\u614b</li> <li>$ <code>git fsck --unreachable</code></li> <li>\u6703\u986f\u793a\u76ee\u524d<code>unreachable.html</code>\u9019\u500b\u6a94\u6848\u6210\u70ba<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> <li></li> <li>$ <code>git cat-file -p &lt;\u8a72Unreachable\u72c0\u614b\u7684Blob\u7269\u4ef6\u7684id&gt;</code></li> <li></li> </ul> </li> <li>\u88ab\u522a\u9664\u7684<code>\u6a19\u7c64</code>(Tag)\u7269\u4ef6,\u4e5f\u6703\u6210\u70ba<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6<ul> <li>\u53ef\u5148\u53c3\u8003<code>Tag</code> (\u6a19\u7c64) \u662f\u4ec0\u9ebc? </li> <li>$ <code>git tag -a unreachable_object -m \"\u522a\u9664Tag\u7269\u4ef6\u5f8c,\u6703\u7522\u751fUnreachable\u72c0\u614b\u7684\u7269\u4ef6\"</code></li> <li>\u5efa\u7acb\u4e00\u500b<code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(Annotated Tag),\u56e0\u70ba<code>\u6a19\u7c64</code>(Tag)\u7269\u4ef6\u539f\u672c\u662f\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code>,\u4f46\u7576\u8a72\u6709\u9644\u8a3b\u6a19\u7c64\u88ab\u522a\u9664\u6642,\u9019\u500b\u88ab\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u5c31\u6703\u8b8a\u6210<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> <li>$ <code>git tag -d unreachable_object</code></li> <li>\u522a\u9664\u8a72<code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(Annotated Tag)</li> <li>$ <code>git fsck --unreachable</code></li> <li>\u6703\u986f\u793a\u9019\u500b\u88ab\u522a\u9664\u7684Tag\u7269\u4ef6(<code>unreachable_object</code>),\u8a72\u6a94\u6848\u6703\u8b8a\u6210\u70ba<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> <li>\u56e0\u70ba\u5b83\u4e0d\u50cf<code>Commit\u7269\u4ef6</code>,\u9084\u6703\u6709<code>Reflog</code>\u5c0d\u5b83\u5ff5\u5ff5\u4e0d\u5fd8,\u5df2\u7d93\u6c92\u6709\u5176\u4ed6\u7269\u4ef6\u6216\u6307\u6a19\u6307\u5411\u9019\u500b<code>Tag\u7269\u4ef6</code>,\u6240\u4ee5\u9019\u500b\u5df2\u88ab\u522a\u9664\u7684<code>Tag\u7269\u4ef6</code>\u5c31\u6703\u7acb\u523b\u8b8a\u6210<code>Unreachable\u72c0\u614b</code></li> </ul> </li> <li>\u5728\u505a<code>Rebase</code>\u7684\u6642\u5019,\u5176\u5be6\u4e5f\u6703\u7522\u751f\u51fa\u591a\u500b<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6<ul> <li>\u53ef\u5148\u53c3\u8003\u5206\u652f(branch)\u64cd\u4f5c\u7684$ <code>git rebase</code>\u539f\u7406\u7684\u90e8\u5206</li> <li>\u56e0\u70ba\u5728<code>Rebase</code>\u7684\u904e\u7a0b\u4e2d,Git\u6703\u628a\u539f\u672c\u7684<code>Commit\u7269\u4ef6</code>\u5011\u5206\u5225\u8907\u88fd\u4e00\u4efd\u5230\u65b0\u7684<code>base\u5206\u652f</code>\u4e0a\u4e26\u4e14\u91cd\u65b0\u8a08\u7b97\u4e00\u4efd\u65b0\u7684<code>SHA-1</code>\u503c\u7d66\u9019\u4e9b\u65b0\u7684<code>Commit\u7269\u4ef6</code>; \u540c\u6642,\u6700\u5f8c<code>\u5206\u652f</code>\u8207<code>HEAD</code>\u4e5f\u90fd\u6703\u9077\u79fb\u904e\u53bb\u65b0\u7684<code>Commit\u7269\u4ef6</code>\u4e0a,\u6240\u4ee5\u9019\u6642\u5019\u539f\u672c\u820a\u7684\u90a3\u4e9b<code>Commit\u7269\u4ef6</code>\u5011,\u5c31\u6703\u8b8a\u6210<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6\u5011</li> </ul> </li> <li>\u7e3d\u7d50: \u5728Git\u7684\u4e16\u754c\u4e2d<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6\u5176\u5be6\u662f\u9084\u883b\u5e38\u898b\u5230\u7684,\u4ee5\u4e0b\u60c5\u6cc1\u90fd\u6703\u7522\u751f\u51fa<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6<ul> <li>\u5229\u7528$ <code>git reset --hard</code>\u5207\u5230\u5225\u7684<code>Commit\u7269\u4ef6</code>\u4e0a\u5f8c,\u4e26\u4e14\u5c07<code>Reflog</code>\u8a2d\u5b9a\u70ba\u5df2\u5230\u671f\u5f8c; \u9019\u6642\u5019\u5728<code>Reset</code>\u4e4b\u524d,Git\u539f\u672c\u6307\u5411\u7684\u90a3\u4e9b<code>Commit\u7269\u4ef6</code>\u5c31\u6703\u8b8a\u6210<code>Unreachable\u72c0\u614b</code></li> <li>\u65b0\u589e\u4e00\u500b\u6a94\u6848,\u7528$ <code>git add</code>\u52a0\u5230\u66ab\u5b58\u5340\u5f8c,\u53c8\u7528\u4e86$ <code>git rm --cached</code>\u5c07\u8a72\u6a94\u6848\u5f9eGit\u63a7\u7ba1\u4e2d\u79fb\u9664,\u812b\u96e2Git\u63a7\u7ba1,\u8b8a\u70ba<code>Untracked file</code>\u72c0\u614b</li> <li>\u5982\u679c\u5728<code>commit</code>\u4e4b\u524d,\u6a94\u6848$ <code>git add</code>\u4e4b\u5f8c\u53c8\u518d\u4fee\u6539,\u7136\u5f8c\u518d\u57f7\u884c$ <code>git add</code>\u6307\u4ee4,\u4e5f\u6703\u7522\u751f\u51fa<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> <li>\u5373\u4fbf\u662f$ <code>git commit --amend</code>\u9019\u7a2e\u55ae\u7d14\u4fee\u6539<code>commit message</code>\u7684\u6307\u4ee4\u4e5f\u6703\u7522\u751f\u51fa<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> <li>\u88ab\u522a\u9664\u7684<code>\u6a19\u7c64</code>(Tag)\u7269\u4ef6,\u4e5f\u6703\u6210\u70ba<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> <li>\u5728\u505a<code>Rebase</code>\u7684\u6642\u5019,\u5176\u5be6\u4e5f\u6703\u7522\u751f\u51fa\u591a\u500b<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6</li> </ul> </li> </ul>"},{"location":"version_control/git/#_5","title":"\u89c0\u5ff5\u91d0\u6e05","text":"<p><code>git ls-files</code> - Show information about files in the index and the working tree <code>git verify-pack</code> - Validate packed Git archive files <code>Unreachable Object</code> - \u6c92\u6709\u4efb\u4f55\u7269\u4ef6\u6216\u6307\u6a19\u6307\u8457\u5b83,\u5982\u540c\u5b57\u9762\u4e0a\u8aaa\u7684\"\u7121\u6cd5\u5230\u9054\u7684\"; \u4f46\u5b83\u4ecd\u53ef\u4ee5\u6307\u5411\u5176\u4ed6\u7269\u4ef6 <code>Dangling Object</code> - \u8ddf<code>Unreachable\u7269\u4ef6</code>\u4e00\u6a23,\u6c92\u6709\u4efb\u4f55\u7269\u4ef6\u6216\u6307\u6a19\u6307\u8457\u5b83,\u5b83\u4e5f\u6c92\u6709\u6307\u8457\u5176\u4ed6\u7269\u4ef6,\u5982\u540c\u5b8c\u5168\"\u61f8\u5728\u5929\u908a\"\u7684\u4e00\u9846\u7269\u4ef6</p>"},{"location":"version_control/git/#git_10","title":"Git\u7121\u6cd5\u63a7\u7ba1 <code>\u7a7a\u76ee\u9304/</code>","text":"<ul> <li>Git\u5728\u7522\u751f\u7269\u4ef6\u6642,\u53ea\u5728\u4e4e\"\u6a94\u6848\u5167\u5bb9\",\u6240\u4ee5\u5982\u679c\u53ea\u662f\u65b0\u589e\u4e00\u500b\"\u7a7a\u7684\u76ee\u9304\",Git\u662f\u6c92\u6709\u8fa6\u6cd5\u8655\u7406\u8a72\u7a7a\u76ee\u9304\u7684</li> <li>\u539f\u56e0: Git\u6703\u5c0d\u6a94\u6848\u7684\"\u5167\u5bb9\"\u4f7f\u7528<code>SHA-1</code>\u6f14\u7b97\u6cd5\u8a08\u7b97\u7136\u5f8c\u518d<code>.git/objects/</code>\u76ee\u9304\u88e1,\u5efa\u7acb\u5c0d\u61c9\u7684\u76ee\u9304\u53ca\u6a94\u6848,\u5982\u679c\u662f\u4e00\u500b\u7a7a\u76ee\u9304\u7684\u8a71,\u5c31\u6c92\u6709\"\u5167\u5bb9\"\u53ef\u4ee5\u8a08\u7b97,\u6240\u4ee5Git\u9023\u611f\u61c9\u90fd\u611f\u61c9\u4e0d\u5230,\u56e0\u6b64<code>\u7a7a\u76ee\u9304</code>\u5c0dGit\u4f86\u8aaa\u9023<code>Untracked file</code>\u90fd\u7a31\u4e0d\u4e0a\u5594</li> <li>\u7a7a\u7684\u76ee\u9304\u4e5f\u4e0d\u6703\u88abcommit</li> <li></li> <li>\u5982\u679c\u9084\u662f\u60f3\u8b93\u7a7a\u76ee\u9304\u88abGit\u8ffd\u8e64,\u53ea\u8981\u5728\u7a7a\u76ee\u9304\u4e2d\u96a8\u4fbf\u653e\u4e00\u500b\u6a94\u6848\u5c31\u884c\u4e86,\u6163\u4f8b\u4e0a\u7fd2\u6163\u653e<code>.keep</code> \u6216\u662f <code>.gitkeep</code> \u7684\u7a7a\u6a94\u6848,\u8b93Git\u80fd\"\u611f\u61c9\"\u5230\u9019\u500b\u76ee\u9304\u7684\u5b58\u5728</li> <li></li> <li>\u5229\u7528$ <code>git status</code> \u5c31\u53ef\u4ee5\u770b\u5230Git\u611f\u61c9\u5230\u9019\u500b\u76ee\u9304(empty_dir)\u7684\u5b58\u5728\u4e86,\u5176\u5be6\u662f\u611f\u61c9\u5230\u88e1\u2faf\u90a3\u500b <code>.gitkeep</code> \u6a94\u6848\u7684\u5b58\u5728</li> </ul>"},{"location":"version_control/git/#git-rm-cached-vs-gitignore","title":"$ <code>git rm --cached</code> V.S. <code>.gitignore</code> \u6bd4\u8f03","text":"<ul> <li>$ <code>git rm --cached</code> V.S. <code>.gitignore</code> \u6bd4\u8f03</li> <li>$ <code>git rm xxx.html --cached</code>:\u4e26\u4e0d\u6703\u5c07\u6a94\u6848\u771f\u7684\u522a\u9664\u6389,\u50c5\u628a\u66ab\u5b58\u5340(staging area)\u8a72\u6a94\u6848\u5f9eGit\u63a7\u7ba1\u4e2d\u79fb\u9664,\u812b\u96e2Git\u63a7\u7ba1,\u8b8a\u70ba<code>Untracked file</code>\u72c0\u614b;\u82e5\u539f\u672c\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u4e2d\u7684\u6a94\u6848,\u4e0d\u7ba1\u662f\u5426\u6709\u505a\u904e\u4fee\u6539(modified)\u90fd\u5c07\u7559\u4e0b</li> <li>$ <code>.gitignore</code>:\u662f\u958b\u767c\u8005\u6307\u5b9a\u597d\u8981Git\u7248\u63a7\"\u5ffd\u7565\"\u6389\u7684\u6a94\u6848\u548c\u898f\u5247,\u8a2d\u5b9a\u597d\u5f8c,Git\u5c31\u4e0d\u6703\u63a7\u7ba1\u9019\u4e9b\u6a94\u6848\u4e86</li> </ul>"},{"location":"version_control/git/#git-git","title":"\u5728\u5c08\u6848\u4e2d\u7684\u6574\u500b<code>.git/</code> \u76ee\u9304\u662fGit\u7248\u63a7\u7684\u6838\u5fc3\u6a94\u6848","text":"<ul> <li>\u7576\u6a94\u6848\u88ab\u522a\u9664\u6642\u90fd\u9084\u80fd\u5c31\u56de\u4f86,\u56e0\u70ba\u6574\u500bGit\u7d00\u9304\u90fd\u662f\u653e\u5728\u8a72\u5c08\u6848\u7684\u6839\u76ee\u9304 <code>.git/</code> \u76ee\u9304\u88e1\u9762,\u6240\u4ee5\u5982\u679c\u771f\u7684\u4e0d\u5c0f\u5fc3\u628a <code>.git/</code> \u522a\u6389\u7684\u8a71,\u5c31\u8868\u793a\u6b77\u53f2\u7d00\u9304\u4e5f\u88ab\u522a\u6389\u4e86,\u5c31\u771f\u7684\u6c92\u6551\u4e86...</li> </ul>"},{"location":"version_control/git/#git-reset-commit","title":"$ <code>git reset</code> \u662f\u7528\u4f86\"\u524d\u5f80\"\u5230\u6307\u5b9a\u7684<code>Commit\u7269\u4ef6</code>\u4e0a\u7684","text":"<ul> <li>$ <code>git reset</code>\u7684Reset\u9019\u500b\u82f1\u6587\u55ae\u5b57\u5728\u4e2d\u6587\u7ffb\u8b6f\u662f\"\u91cd\u65b0\u8a2d\u5b9a\",\u4f46\u4e8b\u5be6\u4e0a$ <code>git reset</code>\u6307\u4ee4\u6bd4\u8f03\u50cf\u662f\"\u524d\u5f80\"\u6216\u662f\"\u8b8a\u6210\",\u4e5f\u5c31\u662f\"go to\"\u6216\u662f\"become\"\u7684\u6982\u5ff5</li> <li>\u4f8b\u5982: $ <code>git reset HEAD~2</code></li> <li>\u9019\u500b\u6307\u4ee4\u61c9\u8a72\u8981\u89e3\u8b80\u6210,\"\u6211\u8981\u524d\u5f80\u5169\u500bcommit\u4e4b\u524d\u7684\u72c0\u614b\" \u6216\u662f \"\u6211\u8981\u8b8a\u6210\u5169\u500bcommit\u4e4b\u524d\u7684\u72c0\u614b\",\u800c\u96a8\u8457\u4f7f\u7528\u4e0d\u540c\u7684\u53c3\u6578\u6a21\u5f0f(<code>mixed or soft or hard</code>),\u539f\u672c\u7684\u9019\u4e9b\u6a94\u6848\u5c31\u6703\u88ab\u4e1f\u5230\u4e0d\u540c\u7684\u5340\u57df</li> <li>\u5be6\u969b\u4e0a$ <code>git reset</code>\u6307\u4ee4\u4e5f\u4e0d\u662f\u771f\u7684\u522a\u9664\u6216\u662f\u91cd\u65b0\u8a2d\u5b9acommit,\u53ea\u662f\"\u524d\u5f80\"\u5230\u6307\u5b9a\u7684commit\u7269\u4ef6\u4e2d,\u90a3\u4e9b\u770b\u8d77\u4f86\u597d\u50cf\u4e0d\u898b\u7684\u6771\u897f\u53ea\u662f\u66ab\u6642\u770b\u4e0d\u5230,\u4f46\u5176\u5be6\u96a8\u6642\u90fd\u53ef\u4ee5\u518d\u64bf\u56de\u4f86</li> </ul>"},{"location":"version_control/git/#gitblobtreecommittag","title":"Git\u56db\u5927\u7269\u4ef6(<code>Blob</code>,<code>Tree</code>,<code>Commit</code>,<code>Tag</code>)\u5f7c\u6b64\u4e4b\u9593\u5176\u5be6\u662f\u5e73\u884c\u95dc\u4fc2","text":"<ul> <li>Git\u7684\u56db\u5927\u7269\u4ef6(<code>Blob</code>,<code>Tree</code>,<code>Commit</code>,<code>Tag</code>)\u5f7c\u6b64\u4e4b\u9593\u662f\"\u6c92\u6709\"\u968e\u5c64\u6216\u662f\u76ee\u9304,\u5b50\u76ee\u9304\u7684\u95dc\u4fc2,\u5927\u5bb6\u90fd\u662f\u5e73\u884c\u7684\u95dc\u4fc2,\u6b64\u95dc\u4fc2\u93c8\u7a31\u70baDAG(Directed Acyclic Graph),\u4e2d\u6587\u4e0a\u7a31\u70ba\"\u6709\u5411\u7121\u5faa\u74b0\u5716\"</li> </ul>"},{"location":"version_control/git/#gitsnapshot","title":"Git\u5176\u5be6\u4e0d\u662f\u5728\u505a\u5dee\u7570\u5099\u4efd,\u800c\u662f\u5728\u70ba\u7576\u6642\u7684\u5c08\u6848\u5efa\u7acb\u5feb\u7167(snapshot)","text":"<ul> <li>Git \u4e0d\u662f\u5728\u505a\u5dee\u7570\u5099\u4efd,\u800c\u662f<code>\u70ba\u7576\u6642\u7684\u5c08\u6848\u8cc7\u6599\u5efa\u7acb\u5feb\u7167(Snapshot)</code>,\u5982\u679c\u5c08\u6848\u5167\u6c92\u6709\u8b8a\u66f4\u7684\u6a94\u6848\u5c31\u4e0d\u6703\u591a\u5132\u5b58\u4e00\u4efd\u4f86\u4f54\u7528\u78c1\u789f\u7a7a\u9593,\u800c\u53ea\u662f\u589e\u52a0\u4e86\u4e00\u7b46\u9019\u500b\u6a94\u6848\u7684\u5c0d\u61c9\u9023\u7d50,\u958b\u767c\u8005\u958b\u555f\u65b0\u7248\u672c\u5b58\u53d6\u9019\u500b\u6a94\u6848\u6642,\u9084\u662f\u958b\u555f\u5148\u524d\u7684\u820a\u7248\u6a94\u6848,\u800c\u4e0d\u662f\u958b\u555f\u5167\u5bb9\u76f8\u540c\u7684\u65b0\u526f\u672c</li> <li>\u56e0\u6b64,\u53ea\u8981\u8a72\u6a94\u6848\u7684\u5167\u5bb9\u6539\u4e86\u4e00\u500b\u5b57,\u56e0\u70ba\u8a08\u7b97\u51fa\u4f86\u7684<code>SHA-1\u503c</code>\u4e0d\u540c,Git\u5c31\u6703\u70ba\u5b83\u505a\u51fa\u4e00\u9846\u5168\u65b0\u7684<code>Blob\u7269\u4ef6</code>,\u800c\"\u4e0d\u662f\u53ea\u8a18\u9304\u5dee\u7570\"</li> <li>Git\u5728\u88fd\u4f5c\u65b0\u7684<code>Blob\u7269\u4ef6</code>\u6642\u6703\u5148\u9032\u884c\u58d3\u7e2e,\u4f46\u70ba\u4e86\u56e0\u61c9\"\u5176\u5be6\u53ea\u4fee\u6539\u4e86\u4e00\u9ede\u9ede\u5c31\u8981\u6574\u500b\u6a94\u6848\u91cd\u65b0\u5099\u4efd\u4e00\u904d\"\u7684\u4f5c\u6cd5\u800c\u6709\u9ede\u6d6a\u8cbb\u786c\u789f\u7684\u5132\u5b58\u7a7a\u9593,<code>Git\u6709\u4e00\u5957\u81ea\u5df1\u7684\u8cc7\u6e90\u56de\u6536\u6a5f\u5236</code></li> <li>Git\u7684<code>\u8cc7\u6e90\u56de\u6536\u6a5f\u5236</code>,\u7576\u9019\u500b\u6a5f\u5236\"\u89f8\u767c\"\u7684\u6642\u5019( \u901a\u5e38\u6703\u5728Git\u89ba\u5f97\u8a72\u5c08\u6848\u7684\u7269\u4ef6(objects)\u592a\u591a\u6642 ),Git\u6703\u4ee5\u975e\u5e38\u6709\u6548\u7387\u7684\u65b9\u5f0f\u58d3\u7e2e\u7269\u4ef6\u4ee5\u53ca\u88fd\u4f5c\u7d22\u5f15 <ul> <li><code>\u60c5\u5883\u8aaa\u660e</code>:</li> <li>$ <code>git ls-files -s</code>: \u6aa2\u8996\u66ab\u5b58\u5340(staging area)\u548c\u5de5\u4f5c\u76ee\u9304(working directory)\u4e2d\u7684\u6a94\u6848\u60c5\u6cc1</li> <li><code>-s</code> (=&gt; <code>--stage</code>): \u986f\u793a\u66ab\u5b58\u5340(staging area)\u7684\u6a94\u6848\u8cc7\u8a0a</li> <li></li> <li>$ <code>git gc</code>: \u6e05\u9664\u975e\u5fc5\u8981(unnecessary)\u7684\u6a94\u6848\u548c\u512a\u5316\u672c\u5730\u7aef\u5132\u5b58\u5eab(local repository)\u7684\u7a7a\u9593 </li> <li></li> <li>\u9019\u500b\u6307\u4ee4\u6703\u628a\u539f\u672c\u653e\u5728 <code>.git/objects/</code> \u76ee\u9304\u4e0b\u7684\u90a3\u4e9b\u7269\u4ef6\u5168\u90e8\u6253\u5305\u5230 <code>.git/objects/pack/</code> \u76ee\u9304\u4e0b</li> <li></li> <li>$ <code>git verify-pack -v</code> &lt;<code>.git/objects/pack/pack-xxxxxx.idx</code>&gt;: \u78ba\u8a8dGit\u6253\u5305(packed)\u597d\u7684\u6a94\u6848\u60c5\u6cc1</li> <li><code>-v</code>(=&gt; <code>--verbose</code>): \u986f\u793a\u6253\u5305\u904e\u5f8c\u7684\u6a94\u6848\u8a73\u7d30\u8cc7\u8a0a </li> <li>\u7b2c\u4e00\u6b04: <code>SHA-1\u503c</code></li> <li>\u7b2c\u4e8c\u6b04: <code>\u7269\u4ef6\u7684\u578b\u614b</code></li> <li>\u7b2c\u4e09\u6b04: <code>\u6a94\u6848\u5927\u5c0f</code></li> </ul> </li> <li>\u7d71\u6574: Git\u4ec0\u9ebc\u6642\u5019\u6703\u81ea\u52d5\u89f8\u767c<code>\u8cc7\u6e90\u56de\u6536\u6a5f\u5236</code>\u5462?<ul> <li>\u7576\u5728 <code>.git/objects/</code> \u76ee\u9304\u4e0b\u7684\u7269\u4ef6\u6216\u662f\u6253\u5305\u904e\u7684packfile\u6578\u91cf\u904e\u591a\u7684\u6642\u5019,Git\u6703<code>\u81ea\u52d5\u89f8\u767c\u8cc7\u6e90\u56de\u6536\u6307\u4ee4</code></li> <li>\u7576\u57f7\u884c $ <code>git push</code> \u6307\u4ee4\u628a\u5167\u5bb9\u63a8\u81f3\u9060\u7aef\u4f3a\u670d\u5668\u6642</li> </ul> </li> </ul>"},{"location":"version_control/git/#catdogdogcat","title":"\u628a<code>cat\u5206\u652f</code>\u5408\u4f75\u5230<code>dog\u5206\u652f</code>&amp;\u628a<code>dog\u5206\u652f</code>\u5408\u4f75\u5230<code>cat\u5206\u652f</code>\u6709\u4ec0\u9ebc\u4e0d\u540c\u5462?","text":"<ul> <li>\u5728Git\u4e2d,\u5408\u4f75\u5206\u652f\u662f<code>\u54ea\u500b\u5206\u652f</code>\u5408\u4f75\u6389<code>\u54ea\u500b\u5206\u652f</code>\u5176\u5be6\u6c92\u6709\u592a\u5927\u5dee\u7570</li> <li><code>\u60c5\u5883\u8aaa\u660e</code><ul> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/</li> <li>\u7576<code>cat\u5206\u652f</code>\u548c<code>dog\u5206\u652f</code>\u90fd\u662f\u4f86\u81ea<code>master\u5206\u652f</code>\u6642</li> <li>\u5047\u8a2d\u9019\u6b21\u662f<code>cat\u5206\u652f</code>\u8981\u5408\u4f75\u6389<code>dog\u5206\u652f</code>,\u70ba\u4e86\u8981\u9032\u884c\u9019\u6b21\u7684\u5408\u4f75,Git\u6703\u505a\u51fa\u4e00\u500b\u65b0\u7684<code>Commit\u7269\u4ef6</code>,\u800c\u9019\u500b\u65b0\u7684<code>Commit\u7269\u4ef6</code>\u6703\u5206\u5225\u6307\u5411<code>cat\u5206\u652f</code>\u548c<code>dog\u5206\u652f</code>,\u800c<code>HEAD</code>\u6703\u7e7c\u7e8c\u96a8\u8457<code>cat\u5206\u652f</code>\u5f80\u524d,\u800c<code>dog\u5206\u652f</code>\u6703\u7559\u5728\u539f\u5730</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/</li> </ul> </li> <li>\u7d50\u8ad6: \u5176\u5be6\u4ee5\"\u7d50\u679c\"\u4f86\u770b,\u8ab0\u5408\u4f75\u8ab0\u5176\u5be6\u6c92\u5dee,\u56e0\u70ba\u5408\u4f75\u5f8c\u7522\u751f\u7684\u65b0\u7684<code>Commit\u7269\u4ef6</code>\u7684\u5167\u5bb9\u90fd\u5305\u542b\u4e86\u5169\u500b\u539f\u4f86\u7684\u5206\u652f(<code>cat</code> &amp; <code>dog</code>)<ul> <li>\u7d30\u7bc0\u63d0\u9192: \u9019\u5169\u500b\u5206\u652f\u90fd\u662f\u5e73\u7b49\u95dc\u4fc2,\u7d30\u5fae\u7684\u5dee\u7570\u662f<code>cat</code>\u5408\u4f75\u6389<code>dog</code>\u5206\u652f\u7684\u8a71,<code>cat\u5206\u652f</code>\u6703\u5f80\u524d\u79fb\u52d5</li> <li>\u7d30\u7bc0\u63d0\u9192: \u5408\u4f75\u5206\u652f\u5f8c\u800c\u7522\u751f\u7684\u65b0\u7684<code>Commit\u7269\u4ef6</code>\u5176\u5be6\u88e1\u9762\u6703\u7d00\u9304\u8ab0\u662f\u8ab0\u7684\u8001\u7238,\u7576<code>cat</code>\u5408\u4f75<code>dog\u5206\u652f</code>\u7684\u8a71,<code>cat\u5206\u652f</code>\u5c31\u6703\u5beb\u5728\u524d\u9762</li> <li>\u53ef\u4ee5\u7528$ <code>git cat-file -p &lt;\u7269\u4ef6id&gt;</code> \u4f86\u6aa2\u8996\u8a72<code>Commit\u7269\u4ef6</code>\u7684<code>Parent</code>(\u901a\u5e38\u6703\u6307\u5411\u524d\u4e00\u6b21\u7684<code>Commit\u7269\u4ef6</code>)\u662f\u6307\u5411\u54ea\u500b<code>Commit\u7269\u4ef6</code></li> <li>\u53ef\u53c3\u8003Git \u7684\u56db\u5927\u7269\u4ef6(<code>Blob</code>,<code>Tree</code>,<code>Commit</code>,<code>Tag</code>)\u89c0\u5ff5\u4ecb\u7d39</li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#_6","title":"\u5408\u4f75\u5206\u652f\u5176\u5be6\u4e0d\u662f\u771f\u7684\u5728\u5408\u4f75\u5206\u652f!","text":"<ul> <li>\u6240\u8b02\u7684\"\u5408\u4f75\u5206\u652f\"\u5176\u5be6\u662f\u5728\u5408\u4f75\u5169\u500b\u5206\u652f\u5206\u5225\u6307\u5411\u7684\u5169\u500b<code>Commit\u7269\u4ef6</code></li> <li>\u7562\u7adf\u5206\u652f\u53ea\u662f\u4e00\u5f35\u8cbc\u7d19\u800c\u5df2,\u5b83\u662f\u6c92\u8fa6\u6cd5\u88ab\"\u5408\u4f75\"\u7684,\u6211\u5011\u901a\u5e38\u7528\"\u5408\u4f75\u5206\u652f\"\u9019\u500b\u8aaa\u6cd5\u53ea\u662f\u6bd4\u8f03\u597d\u60f3\u50cf\u548c\u6e9d\u901a\u800c\u5df2</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging</li> </ul>"},{"location":"version_control/git/#resetrebaserevert","title":"<code>Reset</code>\u3001<code>Rebase</code>\u3001<code>Revert</code> \u4e09\u500b\u6307\u4ee4\u6709\u4ec0\u9ebc\u5dee\u5225?","text":"\u6307\u4ee4 \u6539\u8b8a\u6b77\u53f2\u7d00\u9304 \u8aaa\u660e \u9069\u5408\u4f7f\u7528\u60c5\u5883 Reset \u662f \u628a\u76ee\u524d\u7684\u72c0\u614b\u8a2d\u5b9a\u6210\u67d0\u500b\u6307\u5b9a\u7684 Commit \u7684\u72c0\u614b \u901a\u5e38\u9069\u7528\u65bc\u5c1a\u672a\u63a8\u51fa\u53bb\u7684 Commit Rebase \u662f \u4e0d\u7ba1\u662f\u65b0\u589e\u3001\u4fee\u6539\u3001\u522a\u9664 Commit \u90fd\u76f8\u7576\u65b9\u4fbf\uff0c\u7528\u4f86\u6574\u7406\u3001\u7de8\u8f2f\u9084\u6c92\u6709\u63a8\u51fa\u53bb\u7684 Commit \u76f8\u7576\u65b9\u4fbf \u901a\u5e38\u4e5f\u53ea\u9069\u7528\u65bc\u5c1a\u672a\u63a8\u51fa\u53bb\u7684 Commit Revert \u5426 \u65b0\u589e\u4e00\u500b Commit \u4f86\u53cd\u8f49\uff08\u6216\u8aaa\u53d6\u6d88\uff09\u53e6\u4e00\u500b Commit \u7684\u5167\u5bb9\uff0c\u539f\u672c\u7684 Commit \u4f9d\u820a\u9084\u662f\u6703\u4fdd\u7559\u5728\u6b77\u53f2\u7d00\u9304\u4e2d\u3002\u96d6\u7136\u6703\u56e0\u6b64\u800c\u589e\u52a0 Commit \u6578 \u4f46\u901a\u5e38\u6bd4\u8f03\u9069\u7528\u65bc\u5df2\u7d93\u63a8\u51fa\u53bb\u7684 Commit\uff0c\u6216\u662f\u4e0d\u5141\u8a31\u4f7f\u7528 Reset \u6216 Rebase \u4e4b\u4fee\u6539\u6b77\u53f2\u7d00\u9304\u7684\u6307\u4ee4\u7684\u5834\u5408 <ul> <li>\u53c3\u8003\u8868\u683c\u51fa\u8655: https://gitbook.tw/chapters/rewrite-history/reset-revert-and-rebase.html</li> </ul>"},{"location":"version_control/git/#tagbranch","title":"<code>\u6a19\u7c64(Tag)</code>\u8ddf<code>\u5206\u652f(branch)</code>\u6709\u4ec0\u9ebc\u4e0d\u540c\u5462?","text":"<ul> <li><code>\u6a19\u7c64(Tag)</code>\u8207<code>\u5206\u652f(branch)</code>\u90fd\u662f\u4e00\u7a2e\u6307\u6a19,\u90fd\u6703\u653e\u5728 .git/refs/ \u76ee\u9304\u88e1\u9762,\u4f46\u653e\u7684\u4f4d\u7f6e\u4e0d\u540c</li> <li><code>\u6a19\u7c64(Tag)</code> \u6703\u653e\u5728 <code>.git/refs/tags/</code> \u76ee\u9304\u88e1\u9762</li> <li><code>\u5206\u652f(branch)</code>\u6703\u653e\u5728 <code>.git/refs/heads/</code> \u76ee\u9304\u88e1\u9762</li> <li>\u53ef\u5148\u53c3\u8003<code>Tag</code> (\u6a19\u7c64) \u662f\u4ec0\u9ebc?</li> <li>\u53ef\u5148\u53c3\u8003<code>\u5206\u652f(branch)</code>\u662f\u4ec0\u9ebc?</li> <li><code>\u6a19\u7c64(Tag)</code>\u8207<code>\u5206\u652f(branch)</code>\u7684\u5167\u5bb9\u770b\u8d77\u4f86\u6703\u5f88\u50cf,\u90fd\u662f<code>40</code>\u500b\u5b57\u5143\u7684<code>SHA-1\u503c</code></li> <li><code>\u8f15\u91cf\u6a19\u7c64</code>(lightweight tag)\u6307\u5411\u7684\u662f\u4e00\u500bCommit\u7269\u4ef6<ul> <li>$ <code>cat .git/refs/tags/&lt;\u8f15\u91cf\u6a19\u7c64\u7684\u540d\u7a31&gt;</code></li> <li></li> </ul> </li> <li><code>\u6709\u9644\u8a3b\u6a19\u7c64</code>(annotated tag)\u6307\u5411\u7684\u662f\u4e00\u500b<code>Tag\u7269\u4ef6</code>,\u800c\u9019\u500b<code>Tag\u7269\u4ef6</code>\u624d\u6703\u6307\u5411\u4e00\u500b<code>Commit\u7269\u4ef6</code><ul> <li>$ <code>cat .git/refs/tags/&lt;\u6709\u9644\u8a3b\u6a19\u7c64\u7684\u540d\u7a31&gt;</code></li> <li></li> </ul> </li> <li>\u91cd\u8981: <code>\u6a19\u7c64(Tag)</code>\u8207<code>\u5206\u652f(branch)</code>\u6700\u5927\u7684\u5dee\u5225\u5728\u65bc</li> <li><code>\u5206\u652f(branch)</code> \"\u6703\u96a8\u8457\" <code>commit\u7d00\u9304</code>\u79fb\u52d5,\u4e5f\u5c31\u662f\u8aaa\u7576Git\u5f80\u524d\u63a8\u9032\u4e00\u500b<code>commit\u7d00\u9304</code>\u6642,\u5b83\u6240\u5728\u7684\u5206\u652f\u6703\u8ddf\u8457\u5f80\u524d\u79fb\u52d5</li> <li><code>\u6a19\u7c64(Tag)</code> \u4e0d\u6703\u96a8\u8457 <code>commit\u7d00\u9304</code>\u79fb\u52d5,\u4e5f\u5c31\u662f\u8aaa\u6a19\u7c64\u4e00\u65e6\u8cbc\u4e0a\u53bb\u5f8c,\u4e0d\u7ba1<code>commit\u7d00\u9304</code>\u600e\u9ebc\u524d\u9032,\u6a19\u7c64\u9084\u662f\u6703\u505c\u7559\u5728\u539f\u4f86\u8cbc\u7684\u90a3\u500b\u4f4d\u7f6e\u4e0a</li> <li>\u7d50\u8ad6: \u67d0\u65b9\u9762\u4f86\u8aaa,\u6211\u5011\u53ef\u4ee5\u628a<code>\u5206\u652f(branch)</code>\u8996\u70ba\u6703\u79fb\u52d5\u7684<code>\u6a19\u7c64(Tag)</code></li> </ul>"},{"location":"version_control/git/#unreachable-dangling","title":"<code>Unreachable\u7269\u4ef6</code> &amp; <code>Dangling\u7269\u4ef6</code> \u6709\u4ec0\u9ebc\u4e0d\u540c\u5462?","text":"<ul> <li><code>Unreachable Object</code> : \u6c92\u6709\u4efb\u4f55\u7269\u4ef6\u6216\u6307\u6a19\u6307\u8457\u5b83,\u5982\u540c\u5b57\u9762\u4e0a\u8aaa\u7684\"\u7121\u6cd5\u5230\u9054\u7684\"; \u4f46\u5b83\u4ecd\u53ef\u4ee5\u6307\u5411\u5176\u4ed6\u7269\u4ef6</li> <li><code>Dangling Object</code> : \u8ddf<code>Unreachable\u7269\u4ef6</code>\u4e00\u6a23,\u6c92\u6709\u4efb\u4f55\u7269\u4ef6\u6216\u6307\u6a19\u6307\u8457\u5b83,\u5b83\u4e5f\u6c92\u6709\u6307\u8457\u5176\u4ed6\u7269\u4ef6,\u5982\u540c\u5b8c\u5168\"\u61f8\u5728\u5929\u908a\"\u7684\u4e00\u9846\u7269\u4ef6</li> <li><code>Dangling\u7269\u4ef6</code>\u53ef\u4ee5\u7b97\u662f<code>Unreachable\u7269\u4ef6</code>\u7684\u5b50\u96c6\u5408,\u5b83\u4e5f\u662f\u4e00\u7a2e<code>Unreachable\u7269\u4ef6</code>,\u6240\u4ee5\u5728\u9032\u884c$ <code>git gc</code>\u6642,\u4e5f\u6703\u4e00\u8d77\u88ab\u56de\u6536\u8d70</li> <li>\u4ec0\u9ebc\u60c5\u6cc1\u4e0bGit\u6703\u7522\u751f\u51fa<code>Dangling\u7269\u4ef6</code>\u5462?</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>$ <code>echo \"test for dangling object\" &gt; dangling_object.html</code></li> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"\u65b0\u589edangling object \u5167\u5bb9\"</code></li> <li>\u4e0a\u8ff0\u4e09\u6b65\u9a5f\u518d\u91cd\u8907\u505a\u4e00\u904d,\u5df2\u65b0\u589e\u51fa\u6e2c\u8a66\u8981\u7528\u76842\u6b21commit\u7d00\u9304</li> <li>$ <code>git reset HEAD~2 --hard</code>: \u5207\u56de\u5230<code>HEAD\u6307\u6a19</code>\u6307\u5411\u7684\u524d2\u6b21<code>Commit\u7269\u4ef6</code></li> <li>$ <code>git fsck --unreachable --no-reflogs</code>: \u986f\u793a\u6240\u6709<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6\u548c <code>Dangling\u72c0\u614b</code>\u7684\u7269\u4ef6<ul> <li> </li> </ul> </li> <li>\u6ce8\u610f! \u6b64\u6642\u7684<code>3d3bce0</code>,<code>4cfc041</code>\u9019\u5169\u500b<code>Commit\u7269\u4ef6</code>\u90fd\u5df2\u7d93\u8b8a\u6210<code>Unreachable\u72c0\u614b</code>\u7684\u7269\u4ef6; </li> <li>$ git fsck --no-reflogs: \u53ea\u986f\u793a\u51fa<code>Dangling\u72c0\u614b</code>\u7684\u7269\u4ef6<ul> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#git-log-git-reflog","title":"$ <code>git log</code> &amp; <code>git reflog</code> \u6709\u4ec0\u9ebc\u4e0d\u540c\u5462?","text":"<ul> <li>$ <code>git log</code>: \u53ef\u4ee5\u986f\u793a\u6240\u6709<code>\u63d0\u4ea4</code>(commit)\u904e\u7684\u7248\u672c\u8cc7\u8a0a <p>$ git log - Show commit logs --- by \u5b98\u65b9\u6587\u4ef6</p> </li> <li></li> <li>$ <code>git reflog</code>: \u53ef\u4ee5\u6aa2\u8996\u6240\u6709\u5206\u652f\u7684\u6240\u6709\u64cd\u4f5c\u8a18\u9304(\u5305\u62ec<code>\u5df2\u7d93\u88ab\u522a\u9664\u7684commit\u8a18\u9304</code>\u548c<code>Reset\u64cd\u4f5c</code>) <p>$ <code>git reflog</code> - Manage reflog information --- by \u5b98\u65b9\u6587\u4ef6</p> </li> <li></li> </ul>"},{"location":"version_control/git/#_7","title":"\u5be6\u6230\u60c5\u5883\u984c","text":"<p><code>git stash</code> - Stash the changes in a dirty working directory away <code>git filter-branch</code> - Rewrite branches <code>git cherry-pick - Apply the changes introduced by some existing commits</code> <code>git fsck</code> - Verifies the connectivity and validity of the objects in the database</p>"},{"location":"version_control/git/#git-add","title":"\u5982\u679c\u5728git add\u4e4b\u5f8c\u53c8\u4fee\u6539\u4e86\u90a3\u500b\u6a94\u6848\u7684\u5167\u5bb9\u5462?","text":"<ul> <li>\u65b0\u589e\u4e86\u4e00\u500b\u6a94\u6848\u53eb\u505aabc.txt</li> <li>\u57f7\u884c $ <code>git add abc.txt</code> \u628a\u6a94\u6848\u52a0\u5230\u66ab\u5b58\u5340</li> <li>\u53c8\u518d\u7de8\u8f2f\u4e86\u4e00\u6b21\u8a72\u6a94\u6848</li> <li>\u6b63\u78ba\u505a\u6cd5:\u5fc5\u9808\u518d\u5c07\u8a72\u6a94\u6848 $ <code>git add abc.txt</code> \u5230\u66ab\u5b58\u5340\u4e00\u904d</li> <li></li> </ul>"},{"location":"version_control/git/#git-reset-hard","title":"\u5982\u679c\u4e0d\u5c0f\u5fc3\u4f7f\u7528$ <code>git reset --hard</code> \u6a21\u5f0f,\u80fd\u6551\u56de\u4f86\u55ce?","text":"<ul> <li>\u5047\u5982\u4e0d\u5c0f\u5fc3$ <code>git reset HEAD~2 --hard</code>,</li> <li>$ <code>git reflog</code> \u662f\u7576HEAD\u6709\u79fb\u52d5\u7684\u6642\u5019(\u4f8b\u5982\u5207\u63db\u5206\u652for $ <code>git reset</code> \u6642,Git\u90fd\u6703\u5728 <code>Reflog</code> \u4e0a\u9762\u505a\u8a18\u9304),\u5728 <code>Reflog</code> \u4e2d,\u8d8a\u65b0\u7684\u7d00\u9304\u5beb\u5728\u8d8a\u4e0a\u9762<ul> <li> <p>\u5b98\u65b9\u5b9a\u7fa9: Reference logs, or \"reflogs\", record when the tips of branches and other references were updated in the local repository. </p> </li> </ul> </li> <li>\u53ef\u4ee5\u5229\u7528$ <code>git reflog</code> \u4f86\u6aa2\u8996<code>HEAD</code>\u7684\u8b8a\u5316\u7d00\u9304<ul> <li>\u7576\u5207\u63db\u5206\u652f\u6642,HEAD\u6703\u8b8a\u52d5</li> <li>\u7576$ <code>git reset</code> \u6642,HEAD\u6703\u8b8a\u52d5</li> </ul> </li> <li>\u89e3\u6c7a\u65b9\u6cd5:\u76f4\u63a5\u56de\u5230\u6b63\u78ba(=&gt;reset\u932f\u8aa4\u524d\u7684\u90a3\u4e00\u6b21)\u7684commit\u7269\u4ef6\u4e0a<ul> <li>$ <code>git reset c015c1f --hard</code></li> <li>\u5c31\u53ef\u4ee5\u628a\u525b\u525b\u7684\u6771\u897f\u6551\u56de\u4f86\u4e86</li> <li></li> <li>\u88dc\u5145: $ <code>git reflog</code> = $ <code>git log -g</code> = $ <code>git log --walk-reflogs</code></li> </ul> </li> </ul>"},{"location":"version_control/git/#commit_4","title":"\u5982\u679c\u9019\u6b21\u53ea\u60f3commit\u4e00\u500b\u6a94\u6848\u4e2d\u7684\u90e8\u4efd\u5167\u5bb9\u7684\u8a71,\u8a72\u600e\u9ebc\u505a\u5462?","text":"<ul> <li><code>git add -p xxx.hmtl</code>: \u5728$ <code>git add</code>\u5c07\u6a94\u6848\u52a0\u5165\u66ab\u5b58\u5340(staging area)\u7684\u6642\u5019,\u52a0\u4e0a <code>-p</code> \u53c3\u6578,\u900f\u904e\u4e92\u52d5\u5f0f\u4ecb\u9762,\u9078\u64c7\u8981$ <code>git add</code>\u7684\u7bc4\u570d<ul> <li><code>-p</code> (=&gt; <code>--patch</code>): \u53ef\u4ee5\u4e92\u52d5\u5f0f\u5730\u9078\u64c7\u8a72\u6a94\u6848\u7684\u54ea\u4e9b\u90e8\u5206\u8981\u52a0\u5165\u66ab\u5b58\u5340(staging area),\u54ea\u4e9b\u4e0d\u7528(\u7559\u5728\u5de5\u4f5c\u76ee\u9304\u5c31\u597d)</li> <li><code>e</code> (=&gt; edit): \u7de8\u8f2f\u8a72\u6a94\u6848\u4e2d\u7684\u54ea\u4e9b\u90e8\u5206\u8981\u65b0\u589e\u5230\u66ab\u5b58\u5340(staging area)</li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#branch_2","title":"\u5982\u679c\u4fee\u6539\u5c08\u6848\u7684\u67d0\u4e9b\u6a94\u6848\u5230\u4e00\u534a,\u537b\u4e0d\u5c0f\u5fc3\u5148\u5207\u63db\u5230\u5225\u7684\u5206\u652f(branch),\u8a72\u600e\u9ebc\u8fa6?","text":"<ul> <li>$ <code>git checkout -b tiger</code>: \u5148\u5207\u63db\u5230tiger\u5206\u652f</li> <li>$ <code>echo tiger 123 &gt;  tiger_test.html</code>: \u65b0\u589e\u4e00\u500b\u6a94\u6848<code>tiger_test.html</code>,\u4e26\u5728\u88e1\u9762\u8f38\u5165\u4e00\u4e32\u6587\u5b57</li> <li>\u4e5f\u7de8\u8f2f<code>pizza.html</code>,\u65b0\u589e\u4e00\u884c\u6587\u5b57</li> <li>\u6b64\u6642,\u5207\u63db\u5230<code>master</code>\u5206\u652f,\u6703\u767c\u73fe\u525b\u525b\u65b0\u589e\u7684\u6a94\u6848(<code>tiger_test.html</code>)\u4ee5\u53ca\u4fee\u6539\u7684\u6a94\u6848(<code>pizza.html</code>)\u90fd\u9084\u662f\u6703\u7559\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u4e0d\u53d7\u5f71\u97ff</li> <li></li> <li>\u7e3d\u7d50: Git\u5207\u63db\u5206\u652f( <code>$ git checkout &lt;branch name&gt;</code> )\u6642,\u4e26\u4e0d\u6703\u5f71\u97ff\u5230\u5df2\u7d93\u5728\u5de5\u4f5c\u76ee\u9304(working directory)\u7684\u90a3\u4e9b\u4fee\u6539\u5594!</li> </ul>"},{"location":"version_control/git/#_8","title":"\u5982\u679c\u4e0d\u5c0f\u5fc3\u628a\u9084\u6c92\u5408\u4f75\u7684\u5206\u652f\u522a\u6389\u4e86,\u8a72\u600e\u9ebc\u633d\u6551?","text":"<ul> <li>\u53ef\u5148\u53c3\u8003 <code>\u5206\u652f(branch)</code>\u662f\u4ec0\u9ebc? \u7684\u522a\u9664\u5206\u652f\u7bc7</li> <li>$ <code>git branch -D &lt;\u5c1a\u672a\u5408\u4f75\u7684\u5206\u652f\u540d\u7a31&gt;</code>: \u5f37\u5236\u522a\u9664\u8a72\u5206\u652f( \u4e0d\u7ba1\u8a72\u5206\u652f\u662f\u5426\u5df2\u7d93\u5408\u4f75(merged)\u5230\u5176\u4e0a\u6e38\u5206\u652f(upstream branch) )<ul> <li>\u6b64\u6642\u6703\u986f\u793a\"\u88ab\u522a\u9664\u7684\u5206\u652f\"\u7576\u4e0b\u662f\u6307\u5411\u54ea\u500b<code>Commit\u7269\u4ef6</code>,\u53ef\u4ee5\u5148\u8a18\u4e0b\u4f86\u9019\u500b<code>Commit\u7269\u4ef6</code>\u7684id</li> <li></li> <li>\u88dc\u5145:<code>\u5206\u652f(branch)</code>\u53ea\u662f\u4e00\u500b\u6307\u5411\u67d0\u500b<code>Commit\u7269\u4ef6</code>\u7684\u8cbc\u7d19,\u522a\u9664\u9019\u500b\u8cbc\u7d19\"\u4e26\u4e0d\u6703\"\u9020\u6210\u90a3\u4e9b<code>Commit\u7269\u4ef6</code>\u6d88\u5931</li> <li>\u6240\u4ee5\u65e2\u7136\u522a\u6389\u5206\u652f\u5f8c,\u90a3\u4e9b<code>Commit\u7269\u4ef6</code>\u90fd\u9084\u5728\u7684\u8a71,\u53ea\u662f\u56e0\u70ba\u6211\u5011\u7576\u4e0b\u901a\u5e38\u6c92\u6709\u8a18\u4e0b\u90a3\u4e9b<code>Commit\u7269\u4ef6\u7684id</code>,\u6240\u4ee5\u6bd4\u8f03\u4e0d\u5bb9\u6613\u518d\u62ff\u56de\u4f86\u4f7f\u7528,\u9019\u6642\u6211\u5011\u53ef\u4ee5\u5275\u9020\u4e00\u500b<code>\u65b0\u7684\u5206\u652f(new branch)</code>\u4f86\u628a\u9019\u4e9b<code>Commit\u7269\u4ef6</code>\u90fd\u63a5\u56de\u4f86!</li> <li>$ <code>git branch &lt;\u65b0\u7684\u5206\u652f\u540d\u7a31&gt; &lt;\u525b\u525b\u88ab\u522a\u6389\u7684\u5206\u652f\u7576\u4e0b\u6307\u5411\u7684Commit\u7269\u4ef6\u7684id&gt;</code>: \u5efa\u7acb\u4e00\u500b<code>\u65b0\u7684\u5206\u652f(new branch)</code>\u4e26\u8b93\u8a72\u5206\u652f\u6307\u5411\u9019\u500b<code>Commit\u7269\u4ef6</code>,\u76f8\u7576\u65bc\u518d\u62ff\u4e00\u5f35\u65b0\u7684\u8cbc\u7d19\u8cbc\u56de\u53bb\u7684\u610f\u601d</li> <li>\u88dc\u5145: \u82e5\u7576\u4e0b\u522a\u9664\"\u5c1a\u672a\u5408\u4f75\u5206\u652f\"\u7684\u6642\u5019,\u6c92\u6709\u8a18\u4e0b\u8a72\u5206\u652f\u7576\u4e0b\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u7684id,\u53ef\u4ee5\u7528git reflog\u4f86\u627e\u627e\u770b,\u56e0\u70baGit\u7684Reflog\u6703\u9810\u8a2d\u4fdd\u7559<code>30</code>\u5929</li> <li>\u53ef\u53c3\u8003 \u5982\u679c\u4e0d\u5c0f\u5fc3\u4f7f\u7528$ <code>git reset --hard</code> \u6a21\u5f0f,\u80fd\u6551\u56de\u4f86\u55ce?</li> </ul> </li> </ul>"},{"location":"version_control/git/#commitbranch","title":"\u5982\u679c\u60f3\u5f9e\u904e\u53bb\u7684\u67d0\u6b21<code>commit\u7d00\u9304</code>\u518d\u9577\u4e00\u500b<code>\u65b0\u7684\u5206\u652f(branch)</code>\u51fa\u4f86,\u8a72\u5982\u4f55\u505a\u5462?","text":"<ul> <li>\u7b2c\u4e00\u6b65\u9a5f: \u5fc5\u9808\u5148\u56de\u5230\u904e\u53bb\u7684\u90a3\u500b<code>commit\u7d00\u9304</code>\u7684\u72c0\u614b<ul> <li>$ <code>git checkout &lt;\u8981\u56de\u5230\u7684\u904e\u53bb\u7684\u90a3\u500bCommit\u7269\u4ef6\u7684id&gt;</code> </li> </ul> </li> <li>\u7b2c\u4e8c\u6b65\u9a5f: \u65b0\u589e\u4e00\u500b<code>\u5206\u652f(branch)</code>\u5728\u904e\u53bb\u7684\u90a3\u500b<code>Commit\u7269\u4ef6</code>\u4e0a<ul> <li>$ <code>git checkout -b &lt;\u65b0\u7684\u5206\u652f\u540d\u7a31&gt;</code> </li> </ul> </li> <li>\u88dc\u5145: \u5728\u57f7\u884c\u7b2c\u4e00\u6b65\u9a5f\u6642<ul> <li>\u9019\u6642\u5019\u53ef\u80fd\u6703\u767c\u751f <code>detached HEAD</code> \u72c0\u614b (\u662f\u56e0\u70ba\u904e\u53bb\u7684\u90a3\u500b<code>Commit\u7269\u4ef6</code>\u76ee\u524d\u6c92\u6709\u5206\u652f\u6307\u5411\u5b83)</li> <li>\u9019\u6642\u5019\u53ef\u4ee5\u518d\u5207\u63db\u5230\u904e\u53bb\u7684\u90a3\u500b<code>commit\u7d00\u9304</code>\u6642,\u540c\u6642\u65b0\u589e\u4e00\u500b<code>\u5206\u652f(branch)</code>,\u4ee5\u9632\u8df3\u51fa <code>detached HEAD</code> \u72c0\u614b</li> </ul> </li> <li>\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e00\u884c\u6307\u4ee4\u5b8c\u6210,\u4ee5\u4e0b\u5169\u7a2e\u65b9\u5f0f\u90fd\u662f\u5728\u8868\u9054\"\u8acbGit\u5e6b\u6211\u5728<code>&lt;\u8981\u56de\u5230\u7684\u904e\u53bb\u7684\u90a3\u500bCommit\u7269\u4ef6&gt;</code>\u4e0a\u8cbc\u4e0a\u4e00\u5f35ocean\u7684<code>\u5206\u652f(branch)</code>\u8cbc\u7d19\"<ul> <li>$ <code>git branch &lt;\u65b0\u7684\u5206\u652f\u540d\u7a31&gt; &lt;\u8981\u56de\u5230\u7684\u904e\u53bb\u7684\u90a3\u500bCommit\u7269\u4ef6\u7684id&gt;</code></li> <li>\u4f8b\u5982: $ <code>git branch ocean</code> </li> <li>\u4e5f\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5730,\u5728\u56de\u5230\u904e\u53bb\u7684commit\u7d00\u9304\u6642,\u65b0\u589e\u4e00\u500b\u5206\u652f,\u4e26\u540c\u6642\u5207\u63db\u5230\u90a3\u500b\u5206\u652f</li> <li>$ <code>git checkout -b &lt;\u65b0\u7684\u5206\u652f\u540d\u7a31&gt; &lt;\u8981\u56de\u5230\u7684\u904e\u53bb\u7684\u90a3\u500bCommit\u7269\u4ef6\u7684id&gt;</code></li> <li> </li> </ul> </li> </ul>"},{"location":"version_control/git/#both-modified","title":"\u7576\u5169\u500b\u5206\u652f\u90fd\u7de8\u8f2f\u4e86\u540c\u4e00\u500b\u6a94\u6848(<code>both modified \u72c0\u614b</code>),\u9020\u6210<code>\u5408\u4f75\u5206\u652f\u6642\u767c\u751f\u885d\u7a81</code>\u4e86,\u8a72\u600e\u9ebc\u89e3\u6c7a\u5462?","text":"<ul> <li>\u5047\u8a2d\u6709\u5169\u500b\u5206\u652f\u90fd\u7de8\u8f2f\u904e\u540c\u4e00\u500b\u6a94\u6848,\u82e5\u6a94\u6848\u5167\u5bb9\u4e0d\u4e00\u81f4,\u6703\u9020\u6210<code>both modified \u72c0\u614b</code>,\u9020\u6210\u5408\u4f75\u5206\u652f\u6642\u6703\u767c\u751f\u885d\u7a81</li> <li><code>\u60c5\u5883\u8aaa\u660e1</code><ul> <li>\u7528<code>Merge\u65b9\u5f0f</code>\u5408\u4f75\u5206\u652f\u6642\u767c\u751f\u885d\u7a81</li> <li>\u5efa\u7acb\u4e00\u500b<code>merge_conflict.html</code>\u7684\u6e2c\u8a66<code>\u5408\u4f75\u5206\u652f\u885d\u7a81</code>\u7684\u6a94\u6848</li> <li>\u5f9e<code>master</code>,\u5efa\u7acb\u4e00\u500b<code>sun\u5206\u652f</code>(branch)</li> <li>\u5f9e<code>master</code>,\u5efa\u7acb\u4e00\u500b<code>moon\u5206\u652f</code>(branch)</li> <li>\u6b64\u6642\u5148\u5207\u63db\u5230<code>sun\u5206\u652f</code>,\u4e26\u65b0\u589e\"\u6211\u662fsun\u5206\u652f\"\u5230<code>merge_conflict.html</code>\u7684\u6e2c\u8a66<code>\u5408\u4f75\u5206\u652f\u885d\u7a81</code>\u7684\u6a94\u6848,\u52a0\u5230\u66ab\u5b58\u5340\u5f8c,\u518dcommit\u5230\u672c\u5730\u7aefrepo</li> <li>$ <code>git checkout sun</code></li> <li>\u65b0\u589e\"\u6211\u662fsun\u5206\u652f\"\u5230<code>merge_conflict.html</code>\u7684\u6e2c\u8a66<code>\u5408\u4f75\u5206\u652f\u885d\u7a81</code>\u7684\u6a94\u6848</li> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"sun\u5206\u652f\u7de8\u8f2fmerge_conflict.html\"</code></li> <li></li> <li>\u518d\u5207\u63db\u5230<code>moon\u5206\u652f</code>,\u4e26\u65b0\u589e\"\u6211\u662fmoon\u5206\u652f\"\u5230<code>merge_conflict.html</code>\u7684\u6e2c\u8a66<code>\u5408\u4f75\u5206\u652f\u885d\u7a81</code>\u7684\u6a94\u6848,\u52a0\u5230\u66ab\u5b58\u5340\u5f8c,\u518dcommit\u5230\u672c\u5730\u7aefrepo</li> <li>$ <code>git checkout moon</code></li> <li>\u65b0\u589e\"\u6211\u662fmoon\u5206\u652f\"\u5230<code>merge_conflict.html</code>\u7684\u6e2c\u8a66<code>\u5408\u4f75\u5206\u652f\u885d\u7a81</code>\u7684\u6a94\u6848</li> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"moon\u5206\u652f\u7de8\u8f2fmerge_conflict.html\"</code></li> <li></li> <li>$ <code>git merge sun</code>: \u5c07<code>moon\u5206\u652f</code>\u5408\u4f75\u5230<code>sun\u5206\u652f</code>\u7684\u4e0a\u9762</li> <li>\u6b64\u6642Git\u6709\u80fd\u529b\u5e6b\u5fd9\u6aa2\u67e5\u7c21\u55ae\u7684\u885d\u7a81</li> <li>\u53ef\u4ee5\u6c7a\u5b9a\u8981\u63a5\u53d7\u54ea\u500b\u5206\u652f\u7684\u4fee\u6539,\u4e5f\u53ef\u4ee5\u90fd\u63a5\u53d7\u96d9\u65b9\u7684\u4fee\u6539</li> <li>`</li> <li>\u6700\u5f8c\u7528Sourcetree\u4f86\u6aa2\u8996\u4e00\u4e0b\u6700\u5f8c\u7684<code>History</code></li> <li>\"!\" : \u4ee3\u8868\"\u6709\u885d\u7a81\"\u7684\u6a94\u6848</li> <li></li> <li>\u7d71\u6574\u5716\u89e3\u8aaa\u660e</li> <li></li> </ul> </li> <li><code>\u60c5\u5883\u8aaa\u660e2</code><ul> <li>\u7528<code>Rebase\u65b9\u5f0f</code>\u5408\u4f75\u5206\u652f\u6642\u767c\u751f\u885d\u7a81</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/branch/fix-conflict.html</li> <li>\u6b64\u6642<code>HEAD</code>\u4e26\"\u6c92\u6709\u6307\u5411\"\u4efb\u4f55\u4e00\u500b\u5206\u652f,\u5b83\u73fe\u5728\u6709\u9ede\u50cf\u662f\u5728\u4fee\u6539\u6b77\u53f2\u7684\u6642\u5019,\u5361\u5728\u67d0\u500b\u6642\u7a7a\u7e2b\u9699\u88e1\u7684\u72c0\u614b</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/branch/fix-conflict.html</li> <li>\u6aa2\u8996\u4e00\u4e0b\u76ee\u524dGit\u7684\u72c0\u614b</li> <li>$ <code>git status</code></li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/branch/fix-conflict.html</li> <li>\u9019\u6642\u5019\u7684Git\u72c0\u614b\u6e05\u695a\u5730\u986f\u793a\"rebase in progress\"(=&gt; \u6b63\u5728\u9032\u884c\u4e2d\u7684)</li> <li>\u540c\u6642,\u5169\u500b\u5206\u652f\u540c\u6642\u90fd\u7de8\u8f2f\u5230\u7684\u90a3\u500b\u6a94\u6848\u6703\u88ab\u6a19\u793a\u6210<code>both modified \u72c0\u614b</code></li> <li>\u6b64\u6642\u53ef\u4ee5\u76f4\u63a5\u6309\u7167\u5e73\u5e38\u7684\u6d41\u7a0b,\"\u5148\u5c07\u8a72\u885d\u7a81\u6a94\u6848\u4fee\u6b63\u5b8c\u6210\u5f8c\"</li> <li>\u518d\u5c07\"\u5df2\u4fee\u6b63\u7684\u6a94\u6848\" \u52a0\u5230 \"\u66ab\u5b58\u5340\"(staging area)<ul> <li>$ <code>git add &lt;\u5df2\u4fee\u6b63\u7684\u6a94\u6848&gt;</code></li> </ul> </li> <li>\u6700\u5f8c,\u63a5\u8457\u7e7c\u7e8c\u5b8c\u6210\u525b\u525b\u4e2d\u65b7\u7684Rebase\u5408\u4f75\u5206\u652f\u7684\u64cd\u4f5c<ul> <li>$ <code>git rebase --continue</code></li> <li><code>--continue</code>: \u7576\u5df2\u7d93\u4fee\u6539\u5b8c\u885d\u7a81\u6a94\u6848\u5f8c,\u7e7c\u7e8c \"\u91cd\u65b0\u555f\u52d5\" Rebase\u6a5f\u5236</li> </ul> </li> </ul> </li> <li><code>\u60c5\u5883\u8aaa\u660e3</code><ul> <li>\u7528<code>Merge\u65b9\u5f0f</code>\u5408\u4f75\u5206\u652f\u6642\u767c\u751f\u885d\u7a81(=&gt; \"\u7576\u5169\u500b\u5206\u652f\u90fd\u6709\u4e00\u500b\u540c\u540d\u7a31\u7684\u5716\u7247\u6a94\u6848\u6642\u7684\u60c5\u6cc1\")</li> <li>\u96d6\u7136Git\u6709\u80fd\u529b\u5e6b\u5fd9\u6aa2\u67e5\u7c21\u55ae\u7684\u885d\u7a81\u4e26\u6a19\u793a\u51fa\"\u885d\u7a81\u9ede\"\u5728\u8a72\u6a94\u6848\u54ea\u5e7e\u884c; \u4f46\u662f\u5982\u679c\u662f\u5716\u7247\u6a94\u4e4b\u985e\u7684\u4e8c\u9032\u4f4d\u6a94\u7684\u8a71,\u5c31\u5fc5\u9808\u7528\u5225\u7684\u65b9\u5f0f\u4f86\u89e3\u6c7a\u4e86</li> <li>\u5efa\u7acb\u4e00\u500b<code>cutest_animal.jpg</code>\u7684\u6e2c\u8a66<code>\u5408\u4f75\u5206\u652f\u885d\u7a81</code>\u7684\u540c\u540d\u5716\u7247\u6a94\u6848</li> <li>\u5f9e<code>master</code>,\u5efa\u7acb\u4e00\u500b<code>cat\u5206\u652f</code>(branch)</li> <li>\u5f9e<code>master</code>,\u5efa\u7acb\u4e00\u500b<code>dog\u5206\u652f</code>(branch)</li> <li>\u5148\u5207\u63db\u5230<code>cat\u5206\u652f</code>\u4e26\u65b0\u589e\u4e00\u500b\"\u540c\u540d\u7a31\u7684\u5716\u7247\u6a94\u6848\"(<code>cutest_animal.jpg</code>)</li> <li> </li> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"cat\u5206\u652f \u65b0\u589ecutest_animal.jpg\"</code></li> <li>\u518d\u5207\u63db\u5230<code>dog\u5206\u652f</code>\u4e26\u65b0\u589e\u4e00\u500b\"\u540c\u540d\u7a31\u7684\u5716\u7247\u6a94\u6848\"(<code>cutest_animal.jpg</code>)</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQ3Xm4P7nHI3rcMuRdM3KR3av1PqeqaPHW-nA&amp;usqp=CAU</li> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"dog\u5206\u652f \u65b0\u589ecutest_animal.jpg\"</code></li> <li>\u6b64\u6642\u5207\u63db\u5230<code>cat\u5206\u652f</code>,\u5229\u7528\u6307\u4ee4\u5408\u4f75\u5230<code>dog\u5206\u652f</code>\u4e0a\u9762</li> <li>$ <code>git merge dog</code><ul> <li>\u9019\u6642\u6703\u767c\u751f\u5408\u4f75\u5206\u652f\u7684\u885d\u7a81,\u4e26\u4e14\u986f\u793aGit\u7121\u6cd5\u81ea\u52d5\u89e3\u6c7a\u8a72\u885d\u7a81(<code>Merge conflict in /pics/gitcutest_animal.jpg</code> &amp; <code>Automatic merge failed</code>)`</li> <li></li> </ul> </li> <li>\u9019\u6642\u5019\u53ef\u4ee5\u6c7a\u5b9a\u8981\u63a1\u7528\u54ea\u500b\u5206\u652f\u7684\u540c\u540d\u7a31\u5716\u7247\u6a94\u6848(<code>cutest_animal.jpg</code>)<ul> <li>$ <code>git checkout --ours/--theirs &lt;\u8def\u5f91/\u6c7a\u5b9a\u8981\u7528\u7684\u540c\u540d\u7a31\u5716\u7247\u6a94\u6848\u7684\u6a94\u540d&gt;</code></li> <li>\u5047\u5982\u6c7a\u5b9a\u8981\u7528\"\u76ee\u524d\u6240\u5728\u5206\u652f\u7684\"\u5716\u7247\u6a94\u6848</li> <li>$ <code>git checkout --ours cutest_animal.jpg</code></li> <li><code>--ours</code>: \u6c7a\u5b9a\u8981\u7528\"\u76ee\u524d\u6240\u5728\u5206\u652f\u7684\"\u5716\u7247\u6a94\u6848</li> <li>\u5047\u5982`\u6c7a\u5b9a\u8981\u7528\"\u53e6\u4e00\u500b\u5206\u652f\u7684\"\u5716\u7247\u6a94\u6848</li> <li>$ <code>git checkout --theirs cutest_animal.jpg</code></li> <li><code>--theirs</code>: \u6c7a\u5b9a\u8981\u7528\"\u53e6\u4e00\u500b\u5206\u652f\u7684\"\u5716\u7247\u6a94\u6848</li> </ul> </li> <li>\u63a5\u8457\u8a18\u5f97\u7e7c\u7e8c\u6309\u7167\u5e73\u5e38\u7684\u6d41\u7a0b,\u5c07\"\u5df2\u4fee\u6b63\u7684\u6a94\u6848\" \u52a0\u5230 \"\u66ab\u5b58\u5340\"(staging area)</li> <li>$ <code>git add &lt;\u8def\u5f91/\u6c7a\u5b9a\u8981\u7528\u7684\u540c\u540d\u7a31\u5716\u7247\u6a94\u6848\u7684\u6a94\u540d&gt;</code></li> <li>$ <code>git commit -m \"git merge\u5716\u7247\u6a94\u6848\u767c\u751f\u885d\u7a81\u6642,\u53ef\u4ee5\u7528git checkout --ours/--theirs\u53c3\u6578 \u4f86\u8655\u7406\u5408\u4f75\u5206\u652f\u7684\u885d\u7a81\"</code></li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#_9","title":"\u76ee\u524d\u7684\u5de5\u4f5c\u505a\u5230\u4e00\u534a,\u5982\u679c\u8981\u81e8\u6642\u5207\u63db\u5230\u5225\u7684\u4efb\u52d9,\u8a72\u600e\u9ebc\u505a\u5462?","text":"<ul> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u5047\u8a2d\u73fe\u5728\u81e8\u6642\u6709\u500b\u91cd\u5927Bug\u8981\u4fee\u5fa9,\u4f46\u662f\u7576\u4e0b\u6b63\u5728<code>develop\u5206\u652f</code>\u958b\u767c\u65b0\u529f\u80fd,\u958b\u767c\u5230\u4e00\u534a; \u9019\u6642\u5019\u53ef\u4ee5\u7528\u4ee5\u4e0b2\u7a2e\u65b9\u5f0f\u4f86\u8655\u7406</li> <li>\u5148<code>commit</code>\u76ee\u524d\u7684\u9032\u5ea6<ul> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"\u5c1a\u672a\u5b8c\u6210\u7684\u65b0\u529f\u80fd\u958b\u767c\u5206\u652f\"</code></li> <li>\u63a5\u4e0b\u4f86\u5c31\u53ef\u4ee5\u5207\u63db\u5230\u91cd\u5927Bug\u6240\u5728\u7684\u5206\u652f(branch)\u5148\u9032\u884c\u4fee\u5fa9,\u5f85\u5b8c\u6210\u4e4b\u5f8c\u518d\u5207\u63db\u56de\u4f86\u539f\u4f86\u505a\u4e00\u534a\u7684<code>develop\u5206\u652f</code></li> <li>$ <code>git checkout develop</code></li> <li>\u518d\u5229\u7528<code>Reset</code>\u56de\u5230<code>HEAD</code>\u6307\u6a19\u76ee\u524d\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>(\"\u5c1a\u672a\u5b8c\u6210\u7684\u65b0\u529f\u80fd\u958b\u767c\u5206\u652f\")\u7684\u524d\u4e00\u6b21HEAD\u7d00\u9304,\u628a\u525b\u525b\u958b\u767c\u5230\u4e00\u534a\u7684\u6771\u897f\u62c6\u51fa\u4f86\u7e7c\u7e8c\u958b\u767c</li> <li>$ <code>git reset HEAD^</code></li> </ul> </li> <li>\u5229\u7528Git\u7684<code>Stash</code>\u529f\u80fd<ul> <li>$ <code>git stash</code>: \u5c07\"\u66ab\u5b58\u5340\"(staging area)\u7684\u6a94\u6848\u90fd\u52a0\u5230<code>Stash</code>\u4e2d</li> <li>$ <code>git stash</code> \u9810\u8a2d\u5c31\u662f\u76f8\u7576\u65bc $ <code>git stash push</code> </li> <li><code>-u</code> (=&gt; <code>--include-untracked</code>): \u53ef\u4ee5\u52a0\u4e0a\u9019\u500b\u53c3\u6578,\u8b93<code>\u5de5\u4f5c\u76ee\u9304</code>(working directory)\u4e2d\u7684<code>Untracked Files</code>\u4e5f\u4e00\u8d77\u52a0\u5165\u5230<code>Stash</code>\u4e2d</li> <li></li> <li>\u9019\u6642\u5019\u6aa2\u8996Git\u72c0\u614b,\u6703\u767c\u73fe\u7576\u4e0b\u7684\u72c0\u614b\u8ddf\u525b<code>commit</code>\u5b8c\u4e00\u6a23\u4e7e\u6de8</li> <li>$ <code>git stash list</code>: \u5217\u51fa\u6240\u6709\u76ee\u524d\u64c1\u6709\u7684<code>Stash</code>\u9805\u76ee</li> <li>\u6700\u524d\u9762\u7684<code>stash@{0}</code>\u5c31\u662f\u9019\u500b<code>Stash</code>\u7684\u4ee3\u540d\u8a5e</li> <li>\u5f8c\u9762\u7684<code>WIP on &lt;\u8a72\u5206\u652f\u7684\u540d\u7a31&gt;</code>\u7684<code>WIP</code>\u662f\"Work In Progress\",\u4e5f\u5c31\u662f\u5de5\u4f5c\u9032\u884c\u4e2d\u7684\u610f\u601d</li> <li><code>Stash</code>\u53ef\u4ee5\u5efa\u7acb\u597d\u591a\u500b</li> <li></li> <li>$ <code>git stash pop stash@{&lt;\u7de8\u865f&gt;}</code>: \u5c07\u67d0\u500bStash\u9805\u76ee\u62ff\u51fa\u4f86\u4e26\u5957\u7528\u5230\u76ee\u524d\u7684\u5206\u652f\u4e0a; \u7576\u5957\u7528\u6210\u529f\u5f8c,\u8a72<code>Stash</code>\u5c31\u6703\u88ab\u522a\u9664</li> <li>\u5982\u679c\u4f7f\u7528 $ <code>git stash pop</code>\u6307\u4ee4,\u537b\u6c92\u6709\u6307\u5b9a\u8981\u5957\u7528\u54ea\u500b<code>Stash</code>\u7684\u8a71,\u5c31\u6703\u5f9e\u6700\u5c0f\u7684\u958b\u59cb,\u76f8\u7576\u65bc\u5f9e<code>stash@{0}</code>\u958b\u59cb\u62ff(\u4e5f\u5c31\u662f\u6700\u5f8c\u758a\u4e0a\u53bb<code>Stash</code>\u7684\u90a3\u6b21)</li> <li></li> <li>$ <code>git stash apply stash@{&lt;\u7de8\u865f&gt;}</code>: \u5c07\u67d0\u500bStash\u9805\u76ee\u62ff\u51fa\u4f86\u4e26\u5957\u7528\u5230\u76ee\u524d\u7684\u5206\u652f\u4e0a; \u4f46\u662f\u7576\u5957\u7528\u6210\u529f\u5f8c,\u4f46\"\u4e0d\u8981\"\u5c07\u8a72<code>Stash</code>\u522a\u9664,\u9084\u662f\u6703\u7559\u5728<code>Stash List</code>\u4e0a</li> <li>$ <code>git stash drop stash@{&lt;\u7de8\u865f&gt;}</code>: \u5f9e<code>Stash List</code>\u4e2d\u522a\u9664\u8a72<code>Stash</code></li> <li>$ <code>git stash clear</code>: \u5f9e<code>Stash List</code>\u4e2d\u6e05\u9664\u6240\u6709\u7684<code>Stash</code></li> </ul> </li> </ul>"},{"location":"version_control/git/#exgit","title":"\u5982\u679c\u4e0d\u5c0f\u5fc3\u5c07\u6a5f\u654f\u8cc7\u6599(ex:\u5e33\u865f\u3001\u5bc6\u78bc)\u653e\u5728Git\u88e1,\u60f3\u628a\u5b83\u522a\u6389,\u8a72\u600e\u9ebc\u505a\u5462?","text":"<ul> <li>\u53ef\u5148\u53c3\u8003\u5982\u679c\u6709\u7279\u5b9a\u6a94\u6848\u4e0d\u60f3\u653e\u5728Git\u88e1\u9762\u4e00\u8d77\u5099\u4efd\u6216\u662f\u4e0a\u50b3\u5230Git Server\u7684\u8a71,\u4f8b\u5982:\u8cc7\u6599\u5eab\u5bc6\u78bc,\u96f2\u7aef\u4f3a\u670d\u5668\u7684\u91d1\u9470...\u53ef\u4ee5\u52a0\u5165 <code>.gitignore</code>\u4e2d</li> <li>\u9996\u5148,\u5982\u679c\u662f\u5df2\u7d93<code>\u63a8\u9001(Push)</code>\u4e0a\u53bb\u5230GitHub\u4e0a\u7684\u8a71,\u8acb\u5148\u4e0d\u8981\u60f3\u8981\u7528Git\u4f86\u89e3\u6c7a,\u5f37\u70c8\u5efa\u8b70\u76f4\u63a5\u5148\u6539\u5bc6\u78bc\u518d\u8aaa! \u6539\u5b8c\u5bc6\u78bc\u5f8c,\u518d\u63a5\u8457\u5229\u7528Git\u505a\u5f8c\u7e8c\u88dc\u6551\u63aa\u65bd</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u5047\u8a2d\u6211\u60f3\u8981\u628a<code>config/database.yml</code>\u9019\u500b\u6a94\u6848\u5f9e\u6bcf\u500b<code>Commit\u7269\u4ef6</code>\u88e1\u628a\u5b83\u62ff\u6389,\u6bd4\u8f03\u8f9b\u82e6\u7684\u505a\u6cd5\u662f\u4f7f\u7528 <code>Rebase</code>\u6307\u4ee4,\u7136\u5f8c\u4e00\u500b\u4e00\u500b\u9032\u53bb<code>Commit\u7269\u4ef6</code>\u53bb\u7de8\u8f2f</li> <li>\u90a3\u5982\u679c\u4e0d\u60f3\u4f7f\u7528<code>Rabse\u6307\u4ee4</code>\u7684\u65b9\u5f0f\u4f86\u8655\u7406\u7684\u8a71,\u6709\u4ee5\u4e0b3\u7a2e\u65b9\u6cd5\u53ef\u4ee5\u88dc\u6551<ul> <li>\u6574\u500b\u780d\u6389\u91cd\u7df4(=&gt;\u4e0d\u5efa\u8b70\u9019\u6a23\u505a)</li> <li>$ <code>rm -r .git/</code>: \u5c07\u6574\u500b<code>.git/</code>\u76ee\u9304\u522a\u6389</li> <li>\u628a\u6240\u6709\u542b\u6709\u6a5f\u654f\u8cc7\u6599\u7684\u76f8\u95dc\u6a94\u6848\"\u522a\u9664\"\u6216\u662f\"\u4fee\u6b63\"</li> <li>\u91cd\u65b0<code>commit</code>\u4e00\u6b21<ul> <li>$ <code>git add --all</code></li> <li>$ <code>git commit -m \"initial commit\"</code></li> </ul> </li> <li>\u5229\u7528 $ <code>git filter-branch</code>\u6307\u4ee4</li> <li>$ <code>git filter-branch --tree-filter &lt;command&gt;</code><ul> <li>$ <code>git filter-branch</code> \u9019\u500b\u6307\u4ee4\u53ef\u4ee5\u8b93\u4f60\u6839\u64da\u4e0d\u540c\u7684<code>filter\u689d\u4ef6</code>,\u4e00\u500b\u4e00\u500b\u61c9\u7528\u5230\u6bcf\u500b<code>Commit\u7269\u4ef6</code>\u4e0a\u4f86\u8655\u7406</li> <li><code>--tree-filter &lt;command&gt;</code>: \u6703\u5728\u63a5\u4e0b\u4f86$ <code>git checkout</code> \u7684\u6bcf\u500bCommit\u7269\u4ef6\u6642,\u90fd\u6703\u57f7\u884c\u5f8c\u9762\u6307\u5b9a\u7684<code>&lt;command&gt;</code>,\u5168\u90e8\u57f7\u884c\u5b8c\u5f8c\u6703\u518d\u81ea\u52d5\u91cd\u65b0\u518d<code>commit</code>\u4e00\u6b21</li> <li>\u5047\u8a2d\u662f\u522a\u9664\u4e86\u4e00\u500b\u6a5f\u654f\u8cc7\u6599\u7684\u6a94\u6848\u7684\u8a71,\u56e0\u70ba\u662f\"\u522a\u9664\"\u7684\u884c\u70ba,\u6240\u4ee5\u5c0dGit\u4f86\u8aaa\u5728\u90a3\u4e4b\u5f8c\u7684\u6240\u6709<code>Commit\u7269\u4ef6</code>\u90fd\u8981\u5168\u90e8\u91cd\u65b0\u8a08\u7b97,\u4e5f\u5c31\u662f\u76f8\u7576\u65bc\u7522\u751f\u4e00\u4efd\u65b0\u7684<code>commit\u7d00\u9304</code>\u4e86</li> <li>\u5099\u8a3b: \u6a94\u6848\u4e00\u65e6\u52a0\u5165Git\u7248\u63a7\u4e2d,\u8981\u5fb9\u5e95\u522a\u9664\u5c31\u6c92\u90a3\u9ebc\u597d\u522a\u9664\u4e86</li> <li>\u4f8b\u5982: $ <code>git filter-branch --tree-filter \"rm -f config/database.yml\"</code> =&gt; \u5c07<code>config/database.yml</code>\u9019\u500b\u6a94\u6848\u5f9e\u6bcf\u6b21\u7684Commit\u7269\u4ef6\u4e2d\u522a\u9664</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/faq/remove-sensitive-data.html</li> </ul> </li> <li>\u5982\u679c\u53c8\u5f8c\u6094\u4e86,\u60f3\u8981\u56de\u5fa9\u525b\u525b$ <code>git filter-branch</code>\u9020\u6210\u7684\u7d50\u679c\u4ee5\u524d\u7684\u72c0\u614b,\u8a72\u600e\u9ebc\u8fa6\u5462?<ul> <li>\u539f\u7406: \u7576\u57f7\u884c$ <code>git filter-branch</code>\u6307\u4ee4\u7684\u6642\u5019,Git\u6703\u5e6b\u4f60\u628a\u4e4b\u524d\u7684\u72c0\u614b\u5099\u4efd\u4e00\u4efd\u5728 <code>.git/refs/original/refs/heads/</code> \u9019\u500b\u76ee\u9304\u88e1\u9762</li> <li>\u5176\u5be6\u8207\u5176\u8aaa\u662f\u5099\u4efd,\u4e5f\u53ea\u662f\u5099\u4efd\u958b\u59cb\u9032\u884c<code>filter-branch</code>\u4e4b\u524d\u7684\u90a3\u500b<code>HEAD</code>\u6307\u5411\u7684<code>Commit\u7269\u4ef6</code>\u7684<code>SHA-1\u503c</code>\u800c\u5df2</li> <li>\u63a5\u8457\u5c31\u53ef\u4ee5\u5229\u7528<code>hard Reset\u6307\u4ee4</code>\u76f4\u63a5\u5207\u56de\u53bb\u539f\u4f86\u7684<code>Commit\u7269\u4ef6</code>,\u9019\u6a23\u5c31\u90fd\u56de\u4f86\u4e86</li> <li>$ <code>git reset .git/refs/original/refs/heads/master --hard</code> </li> <li>\u53ef\u53c3\u8003$ <code>git reset</code> \u662f\u7528\u4f86\"\u524d\u5f80\"\u5230\u6307\u5b9a\u7684<code>Commit\u7269\u4ef6</code>\u4e0a\u7684</li> <li>\u53ef\u53c3\u8003\u5982\u679c\u60f3\u91cd\u65b0\u7de8\u8f2f\u525b\u624d\u7684commit</li> </ul> </li> <li>\u5229\u7528 $ <code>git push -f</code>:\u91cd\u65b0\"\u5f37\u5236\"<code>\u63a8\u9001(Push)</code>\u4e00\u4efd\u4f60\u525b\u525b\u5df2\u7d93$ <code>git filter-branch</code>\u904e\u5f8c\u7684<code>commit</code>\u4e0a\u53bb\u4f86\u8986\u84cb\u6389\u5b83</li> <li>\u63d0\u9192: \u56e0\u70ba\u5176\u5be6\u5df2\u7d93<code>\u63a8\u9001(Push)</code>\u51fa\u53bb\u7684\u6771\u897f\u5c31\u8ddf\u6f51\u51fa\u53bb\u7684\u6c34\u4e00\u6a23,\u6536\u4e0d\u56de\u4f86\u7684 </li> </ul> </li> </ul>"},{"location":"version_control/git/#commit_5","title":"\u53ef\u4ee5\u53ea\u53d6\u7528\u67d0\u500b\u5206\u652f\u7684\u5176\u4e2d\u67d0\u5e7e\u500b<code>commit</code>\u55ce?","text":"<ul> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li><code>$ git cherry-pick &lt;\u8981\u53d6\u7528\u7684Commit\u7269\u4ef6\u7684id&gt;</code>: \u53ef\u4ee5\u53ea\u9078\u53d6\u6307\u5b9a\u7684<code>commit</code>\u4f86\u7528</li> <li>\u5047\u8a2d\u5728<code>red\u5206\u652f</code>\u65b0\u589e\u4e00\u500b<code>cherry-pick-test.html</code>\u6a94\u6848,\u4e26\u7528<code>cherry-pick\u6307\u4ee4</code>\u5c07\u9019\u500b<code>commit</code>\u62ff\u4f86\u4f7f\u7528,\u52a0\u5230\u76ee\u524d\u6240\u5728\u7684\u5206\u652f\u4e0a\u9762<ul> <li>$ <code>git checkout -b red</code>: \u65b0\u589e\u4e00\u500b<code>red\u5206\u652f</code>\u4e26\u5207\u63db\u5230\u8a72\u5206\u652f\u4e0a</li> <li>$ <code>echo \"test $ git cherry-pick\" &gt; cherry-pick-test.html</code>: \u65b0\u589e\u4e00\u6bb5\u6587\u5b57\u5230\u6e2c\u8a66\u6a94\u6848\u4e2d</li> <li>$ <code>git commit -a -m \"\u65b0\u589egit cherry-pick\u7b46\u8a18\"</code>: \u5c07\u6e2c\u8a66\u6a94\u6848\u52a0\u5230<code>\u66ab\u5b58\u5340</code>(staging area)\u4e26\u540c\u6642\u63d0\u4ea4\u5230<code>\u5132\u5b58\u5eab</code>(repo)</li> <li>$ <code>git checkout master</code>: \u5207\u63db\u56de<code>master\u5206\u652f</code>\u4e0a</li> <li>$ <code>git cherry-pick d685d6f</code>: \u9078\u53d6<code>red\u5206\u652f</code>\u4e0a\u525b\u525b\u63d0\u4ea4\u7684\u90a3\u500b<code>Commit\u7269\u4ef6</code>,\u4e26\u5c07\u5b83\u52a0\u5230\u76ee\u524d\u6240\u5728\u5206\u652f\u7684\u6700\u524d\u9762</li> <li></li> </ul> </li> <li><code>$ git cherry-pick &lt;\u8981\u53d6\u7528\u7684Commit\u7269\u4ef6\u7684id 1&gt; &lt;\u8981\u53d6\u7528\u7684Commit\u7269\u4ef6\u7684id 2&gt;</code>: \u53ef\u4ee5\u4e00\u6b21\u9078\u53d6\u591a\u500b\u6307\u5b9a\u7684<code>commit</code>\u4f86\u7528</li> <li>$ <code>git cherry-pick &lt;\u8981\u53d6\u7528\u7684Commit\u7269\u4ef6\u7684id&gt; --no-commit</code>: \u64bf\u904e\u4f86\u7684<code>commit</code>\u4e0d\u6703\u76f4\u63a5\u5408\u4f75,\u800c\u662f\u5148\u653e\u5230<code>\u66ab\u5b58\u5340</code>(staging area)<ul> <li><code>--no-commit</code>: \u64bf\u904e\u4f86\u7684<code>commit</code>\u4e0d\u6703\u76f4\u63a5\u5408\u4f75,\u800c\u662f\u6703\u5148\u653e\u5728<code>\u66ab\u5b58\u5340</code>(staging area)</li> </ul> </li> </ul>"},{"location":"version_control/git/#git_11","title":"\u5982\u4f55\u628a\u4e00\u500b\u6a94\u6848\u5f9eGit\u7248\u63a7\u4e2d\u771f\u6b63\u7684\u79fb\u9664\u6389\u5462?","text":"<ul> <li>\u56e0\u70baGit\u662f\u4e00\u500b\u5206\u6563\u5f0f\u7684\u7248\u672c\u63a7\u5236\u7cfb\u7d71,\u7576\u6a94\u6848\u88abGit\u7248\u63a7\u5f8c,\u5c31\u5f88\u96e3\u771f\u6b63\u7684\u79fb\u9664\u6389\u4e86</li> <li>\u60f3\u8981\u5c07\u5df2\u88abGit\u7248\u63a7\u7684\u6a94\u6848,\u5b8c\u5168\u5f9eGit\u79fb\u9664\u6389\u7684\u8a71,\u6709\u4ee5\u4e0b3\u7a2e\u65b9\u6cd5\u53ef\u4ee5\u505a\u5230</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/faq/remove-files-from-git.html<ul> <li>\u5c07\u6574\u500b <code>.git/</code> \u76ee\u9304\u5b8c\u5168\u79fb\u9664</li> <li>\u7528<code>Rebase\u65b9\u5f0f</code>\u9032\u884c\u7de8\u8f2f,\u91cd\u6574<code>commit\u7d00\u9304</code> (=&gt; \u9069\u7528\u65bc\u7576<code>commit\u7d00\u9304</code>\u7684\u6578\u91cf\u4e0d\u7b97\u591a\u7684\u6642\u5019)</li> <li>\u53ef\u53c3\u8003\u5206\u652f(branch)\u64cd\u4f5c\u7684 $ <code>git rebase -i</code> \u7ae0\u7bc0</li> <li>\u5229\u7528$ <code>git filter-branch --tree-filter &lt;command&gt;</code>,\u53ef\u4ee5\u5927\u7bc4\u570d\u7684\u5c0d\u6bcf\u500b<code>Commit\u7269\u4ef6</code>\u90fd\u57f7\u884c\u4e00\u6b21\u8a72\u6307\u5b9a\u7684\u547d\u4ee4(<code>&lt;command&gt;</code>),\u4e26\u65bc\u4fee\u6539\u5b8c\u6210\u5f8c\u518d\u81ea\u52d5\u91cd\u65b0<code>commit</code></li> <li>\u4f8b\u5982: <code>$ git filter-branch -f --tree-filter \"rm -f config/database.yml\"</code><ul> <li>\u6ce8\u610f! \u591a\u52a0\u4e86\u4e00\u500b \"<code>-f</code>\"\u53c3\u6578,\u662f\u56e0\u70ba\u8981\u5f37\u5236\u8986\u5beb<code>filter-branch</code>\u7684\u5099\u4efd\u9ede,\u9019\u908a\u4f7f\u7528<code>filter-branch</code>\u6307\u4ee4\u628a\u6a94\u6848\u5f9e<code>\u5de5\u4f5c\u76ee\u9304</code>(working directory)\u79fb\u9664\u6389,\u9019\u6642\u5019<code>database.yml</code>\u78ba\u5be6\u4e0d\u898b\u4e86,\u4f46\u9084\u6709\u597d\u5e7e\u500b\u8ddf\u8cc7\u6e90\u56de\u6536\u6709\u95dc\u7684\u4e8b\u60c5\u9700\u8981\u8655\u7406</li> <li><code>-f</code> (=&gt; <code>--force</code>): \u5f37\u5236\u8986\u5beb<code>filter-branch</code>\u7684\u5099\u4efd\u9ede <p><code>git filter-branch -f</code>: git filter-branch refuses to start with an existing temporary directory or when there are already refs starting with refs/original/, unless forced.</p> </li> </ul> </li> <li>\u53ef\u4ee5\u53c3\u8003\u5982\u679c\u4e0d\u5c0f\u5fc3\u5c07\u6a5f\u654f\u8cc7\u6599(ex:\u5e33\u865f\u3001\u5bc6\u78bc)\u653e\u5728Git\u88e1,\u60f3\u628a\u5b83\u522a\u6389,\u8a72\u600e\u9ebc\u505a\u5462?</li> <li>\u56e0\u70ba\u57f7\u884c$ <code>git filter-branch</code>\u6307\u4ee4,\u6240\u6709Git\u6703\u81ea\u52d5\u6709\u5099\u4efd\u9ede,\u96a8\u6642\u53ef\u4ee5\u900f\u904e\u5b83\u518d\u8df3\u56de\u53bb,\u6240\u4ee5\u8981\u5148\u65b7\u4e86\u9019\u689d\u7dda</li> <li>$ <code>rm .git/refs/original/refs/heads/master</code></li> <li>$ <code>git reflog expire --all --expire=now</code>: \u8981\u6c42<code>Reflog</code>\u73fe\u5728\u7acb\u523b\u904e\u671f(\u56e0\u70ba<code>Reflog</code>\u9810\u8a2d\u6703\u81ea\u52d5\u4fdd\u5b5830\u5929\u5167\u7684\u7d00\u9304)</li> <li>$ <code>git reflog expire</code>: <code>Reflog</code>\u7684\u5b50\u547d\u4ee4<code>expire</code>\u6703\u4fee\u526a\u6389\u904e\u53bb\"\u820a\u7684\" <code>Reflog\u7d00\u9304</code> <p>The \"expire\" subcommand prunes older reflog entries.</p> </li> <li><code>--all</code> (=&gt; <code>--force</code>): \u5c0d\u6240\u6709\u7684<code>Reflog\u7d00\u9304</code>\u505a\u8655\u7406</li> <li><code>--expire=&lt;time&gt;</code>: \u4fee\u526a\u6389\u6bd4<code>&lt;time&gt;</code>\u9019\u500b\u6642\u9593\u9084\"\u820a\"\u7684<code>Reflog\u7d00\u9304</code></li> <li>$ <code>git fsck --unreachable</code>: \u9a57\u8b49\u6240\u6709\u7684Git\u7269\u4ef6\u5728<code>.git/objects</code>\u4e2d,\u4e26\u53ea\u986f\u793a\u51fa\"\u4ecd\u7136\u5b58\u5728\"\u4f46\u662f\u70ba\"Unreachable\u72c0\u614b\"\u7684\u7269\u4ef6</li> <li><code>--unreachable</code>: \u50c5\u5217\u51fa\"\u4ecd\u7136\u5b58\u5728\"\u4f46\u662f\u70ba\"Unreachable\u72c0\u614b\"\u7684\u7269\u4ef6</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/faq/remove-files-from-git.html</li> <li>\u6700\u5f8c,\u555f\u52d5Git\u7684\u8cc7\u6e90\u56de\u6536\u6a5f\u5236,\u8acb\u5783\u573e\u8eca\"\u73fe\u5728\"\u4f86\u628a\u5b83\u5011\u8f09\u8d70</li> <li>$ <code>git gc --prune=now</code>: <ul> <li><code>--prune=&lt;date&gt;</code>: \u4fee\u526a\u6389\u6240\u6709\u6bd4<code>&lt;date&gt;</code>\u9019\u500b\u6642\u9593\u9084\"\u820a\"\u7684\u4e26\u4e14\"\u672a\u53d7\u63a7\u5236\"(loose)\u7684\u7269\u4ef6 </li> </ul> </li> <li>\u53ef\u53c3\u8003Git\u5176\u5be6\u4e0d\u662f\u5728\u505a\u5dee\u7570\u5099\u4efd,\u800c\u662f\u5728\u70ba\u7576\u6642\u7684\u5c08\u6848\u5efa\u7acb\u5feb\u7167(snapshot)\u7684$<code>git gc</code>\u7ae0\u7bc0</li> <li>\u53ef\u4ee5\u6aa2\u67e5\u770b\u770b\u662f\u5426\u771f\u7684\u5b8c\u5168\u522a\u9664\u4e86\u8a72\u6a94\u6848,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b2\u7a2e\u65b9\u6cd5</li> <li>$ <code>git fsck</code><ul> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/faq/remove-files-from-git.html</li> </ul> </li> <li>$ <code>git reset &lt;Commit\u7269\u4ef6\u7684id&gt; --hard</code><ul> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/faq/remove-files-from-git.html</li> <li>\u63d0\u9192: \u5982\u679c\u9019\u4e9b\u5167\u5bb9\u5df2\u7d93<code>\u63a8\u9001</code>(Push)\u51fa\u53bb\u7684\u8a71,\u8981\u8a18\u5f97\u7528$ <code>git push -f</code> \u4f86\u628a\u7dda\u4e0a\u7684\u7d00\u9304\u5f37\u5236\u84cb\u6389\u5594!</li> </ul> </li> </ul> </li> </ul>"},{"location":"version_control/git/#-github","title":"\u9060\u7aef\u5171\u540c\u5354\u4f5c\u7bc7---\u4ee5 GitHub \u70ba\u4f8b","text":"<p><code>GitHub \u5b98\u65b9\u6587\u4ef6</code>(Official Docs) - https://docs.github.com/en <code>GitHub \u5b98\u65b9\u7db2\u7ad9</code>(Official Website) - https://github.com/ <code>git remote</code> - Manage set of tracked repositories <code>git push</code> - Update remote refs along with associated objects <code>git pull</code> - Fetch from and integrate with another repository or a local branch <code>git fetch</code> - Download objects and refs from another repository <code>git clone</code> - Clone a repository into a new directory <code>Forking Projects</code> - \u5982\u679c\u6211\u5011\u60f3\u8981\u5c0d\u4e00\u500b\u5728GitHub\u4e0a\u5df2\u7d93\u5b58\u5728\u7684\u958b\u6e90\u5c08\u6848\u505a\u51fa\u8ca2\u737b(\u4fee\u6539),\u4f46\u662f\u6211\u5011\u6c92\u6709<code>\u63a8\u9001</code>(Push)\u5230\u9019\u500brepository\u7684\u6b0a\u9650\u7684\u8a71,\u6211\u5011\u53ef\u4ee5<code>Fork</code>\u4e00\u4efd\u9019\u500b\u5c08\u6848\u5230\u81ea\u5df1\u7684GitHub\u4e0a,\u6210\u70ba\u5c6c\u65bc\u5b58\u5728\u65bc\u6211\u5011\u81ea\u5df1\u7684GitHub namespace,\u9019\u6a23\u6211\u5011\u81ea\u5df1\u5c31\u6709\u6b0a\u9650\u53ef\u4ee5<code>\u63a8\u9001</code>(Push)\u5230\u9019\u500brepository\u4e0a\u9762\u53bb\u4e86 <code>Pull Request</code> - \u6703\u767c\u9001\u4e00\u500b\"\u901a\u77e5\"(<code>PR</code>)\u7d66\u539f\u4f5c\u8005,\u8acb\u6c42\u539f\u4f5c\u8005\u540c\u610f\u5c07\u6211\u5011\u4e4b\u524d<code>Fork</code>\u56de\u4f86\u4e26\u4fee\u6539\u5f8c\u7684\u5167\u5bb9<code>\u5408\u4f75</code>(Merge)\u5230\u539f\u4f5c\u8005\u7684\u5c08\u6848\u4e2d; \u540c\u6642\u539f\u4f5c\u8005\u4e5f\u53ef\u4ee5\u4e0d\u7528\u64d4\u5fc3\u9700\u8981\u958b\u653e\u7de8\u8f2f\u6b0a\u9650\u7d66\u6240\u6709\u958b\u767c\u8005\u5011\u800c\u96e3\u4ee5\u7ba1\u7406 <code>git format-patch</code> - Prepare patches for e-mail submission <code>git am</code> - Apply a series of patches from a mailbox</p>"},{"location":"version_control/git/#github","title":"GitHub \u57fa\u790e\u4f7f\u7528\u64cd\u4f5c\u8aaa\u660e","text":"<ul> <li>GitHub\u662f\u76ee\u524d\u5168\u7403\u6700\u5927\u7684Git Server,\u53ef\u4ee5\u5e6b\u5fd9\u8ca2\u737b\u5176\u4ed6\u4eba\u7684\u5c08\u6848,\u4e26\u4e14\u5176\u4ed6\u4eba\u4e5f\u53ef\u4ee5\u56de\u994b\u5230\u4f60\u7684\u5c08\u6848,\u5efa\u7acb\u826f\u6027\u5faa\u74b0</li> <li>Git\u662f\u4e00\u500b\u7528\u4f86\u505a\u7248\u672c\u63a7\u5236\u7684\u8edf\u9ad4,\u800cGitHub\u662f\u4e00\u500b\u7db2\u7ad9</li> <li>\u5176\u4e2dGitHub\u7684\u672c\u9ad4\u662f\u4e00\u500bGit Server,\u7db2\u7ad9\u5247\u662f\u7528Ruby on Rails\u958b\u767c\u7684</li> <li>GitHub\u65bc 2019/01 \u4ee5\u5f8c,\u958b\u59cb\u53ef\u4ee5\u514d\u8cbb\u5efa\u7acbprivate repository</li> </ul>"},{"location":"version_control/git/#github-repositoryrepositorygithub","title":"\u65b0\u5efa\u4e00\u500bGitHub repository,\u4e26\u63a8\u9001\u672c\u5730\u7aefrepository\u5230GitHub\u4e0a","text":"<ul> <li>\u5982\u4f55\u5efa\u7acb\u4e00\u500b\u65b0\u7684GitHub repository\u5462?</li> <li>\u5b98\u65b9\u5efa\u8b70\u6bcf\u7576\u65b0\u5efa\u4e00\u500brepository\u6642,\u9700\u5305\u542b\u4ee5\u4e0b3\u7a2e\u6a94\u6848<ul> <li><code>README.md</code>: \u8a72repository\u7684\u4f7f\u7528\u8aaa\u660e</li> <li><code>LICENSE.md</code>: \u8a72repository\u7684\u6388\u6b0a\u7bc4\u570d</li> <li><code>.gitignore</code>: \u8a72repository\u6307\u5b9a\"\u4e0d\u8981\"\u8ffd\u8e64\u7684\u6a94\u6848\u6709\u54ea\u4e9b?</li> </ul> </li> <li><code>\u6d41\u7a0b\u5982\u4ee5\u4e0b\u8aaa\u660e</code></li> <li>\u53ef\u4ee5\u9078\u64c7\u8981\u7528 <code>HTTPS</code> or <code>SSH</code> \u7684\u65b9\u5f0f\u4f86\u9023\u7dda\u5230\u9019\u500bGitHub repository<ul> <li><code>HTTPS</code>:\u5728\u4e0a\u50b3\u6642\u9700\u8981\u8f38\u5165\u5e33\u5bc6,\u5982\u679c\u4e0d\u9700\u8981\u5927\u591a\u662f\u5e33\u5bc6(Key Chain)\u5df2\u5b58\u5728\u96fb\u8166\u5167</li> <li><code>SSH</code>: \u9700\u8981\u5148\u5728\u96fb\u8166\u5167\u8a2d\u5b9a\u597d\u91d1\u9470(SSH key),\u4e26\u5132\u5b58\u9019\u500b\u91d1\u9470\u5230\u81ea\u5df1\u7684GitHub\u4e0a,\u4e0a\u50b3\u6642\u5c31\u4e0d\u9700\u8981\u8f38\u5165\u984d\u5916\u5e33\u5bc6</li> </ul> </li> <li>\u5982\u679c\u662f\u5168\u65b0\u958b\u59cb,\u53ef\u4ee5\u53c3\u8003\u5b98\u7db2\u4e0a\u7684\u63d0\u793a \"create a new repository on the command line\" \u7684\u6307\u793a\u9032\u884c<ul> <li>$ <code>echo \"# gitLearn\" &gt;&gt; README.md</code></li> <li>$ <code>git init</code> </li> <li>$ <code>git add README.md</code></li> <li>$ <code>git commit -m \"first commit\"</code></li> <li>$ <code>git remote add origin git@github.com:&lt;\u81ea\u5df1\u7684username&gt;/&lt;\u8981\u65b0\u5efa\u7684repository\u7684\u540d\u7a31&gt;.git</code></li> <li>$ <code>git remote add</code>: \u4ee3\u8868\u8981\u8a2d\u5b9a\u4e00\u500b\u9060\u7aef(remote)\u7684\u7bc0\u9ede</li> <li><code>origin</code>: \u662f\u4e00\u500b\u6163\u7528\u7684\u4ee3\u540d\u8a5e,\u4f5c\u70ba\u9060\u7aef\u7bc0\u9ede\u7684\u9810\u8a2d\u540d\u7a31,\u6307\u7684\u662f\u5f8c\u9762\u90a3\u4e32GitHub\u4f3a\u670d\u5668\u7684\u4f4d\u7f6e</li> <li>\u5982\u679c\u4e4b\u5f8c\u60f3\u66f4\u6539\u7684\u8a71,\u53ef\u4ee5\u76f4\u63a5\u5728\u8f38\u5165\u4e00\u6b21\u9019\u500b\u6307\u4ee4\u66f4\u6539<ul> <li>\u4f8b\u5982: $ <code>git remote add superman git@github.com:&lt;\u81ea\u5df1\u7684username&gt;/&lt;\u8981\u65b0\u5efa\u7684repository\u7684\u540d\u7a31&gt;.git</code> </li> </ul> </li> <li>$ <code>git push -u origin master</code></li> <li>\u8a2d\u5b9a\u597d\u9060\u7aef\u7bc0\u9ede\u5f8c,\u5c31\u8981\u5c07\u6771\u897f\u63a8\u9001(Push)\u4e0a\u53bb\u4e86</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u9019\u500b\u6307\u4ee4\u6703\u5c07<code>master\u5206\u652f</code>\u7684\u5167\u5bb9\u63a8\u9001\u5230\u9060\u7aef\u7684<code>origin\u7bc0\u9ede</code><ul> <li>\u5982\u679c<code>master\u5206\u652f</code>\u4e0d\u5b58\u5728\u7684\u8a71,\u5c31\u6703\u5efa\u7acb\u4e00\u500b\u53eb\u505amaster\u7684\u540c\u540d\u5206\u652f</li> <li>\u4f46\u5982\u679c\u672c\u4f86\u9060\u7aef\u7684<code>origin\u7bc0\u9ede</code>\u5c31\u5b58\u5728master\u5206\u652f\u7684\u8a71,\u4fbf\u6703\u79fb\u52d5\u9060\u7aef\u7684<code>origin\u7bc0\u9ede</code>\u4e0amaster\u5206\u652f\u7684\u4f4d\u7f6e,\u4f7f\u5b83\u5230\u76ee\u524d\u6700\u65b0\u7684\u9032\u5ea6\u4e0a</li> <li><code>-u</code> (=&gt; <code>--set-upstream</code>): \u8a2d\u5b9a<code>upstream</code>; \u6240\u8b02\"\u4e0a\u6e38(upstream)\"\u7684\u6982\u5ff5\u5176\u5be6\u5c31\u53ea\u662f\u53e6\u4e00\u500b\u5206\u652f\u7684\u540d\u5b57\u800c\u5df2\u3002\u5728Git\u88e1,\u6bcf\u500b\u5206\u652f\u53ef\u4ee5\u8a2d\u5b9a\u4e00\u500b<code>\u4e0a\u6e38(upstream)</code>,\u4f46\u6bcf\u500b\u5206\u652f\u6700\u591a\u53ea\u80fd\u8a2d\u5b9a\u4e00\u500b<code>\u4e0a\u6e38(upstream)</code>,\u5b83\u6703\u6307\u5411\u4e26\u8ffd\u8e64(track)\u67d0\u500b\u5206\u652f\u3002\u901a\u5e38<code>\u4e0a\u6e38(upstream)</code>\u6703\u662f\u9060\u7aefServer\u4e0a\u7684\u67d0\u500b\u5206\u652f,\u4f46\u5176\u5be6\u8981\u8a2d\u5b9a\u5728\u672c\u5730\u7aef\u7684\u5176\u4ed6\u5206\u652f\u4e5f\u53ef\u4ee5</li> <li>\u5982\u679c\u6709\u50cf\u9019\u500b\u6307\u4ee4\u8a2d\u5b9a\u597d\u5f8c,\u672a\u4f86\u5b83\u5c31\u6703\u88ab\u7576\u4f5c\u9810\u8a2d\u503c; \u4ee5\u9019\u500b\u6307\u4ee4\u4f86\u770b,\u5c31\u6703\u628a <code>origin/master</code> \u8a2d\u5b9a\u70ba\u672c\u5730master\u5206\u652f\u7684 <code>\u4e0a\u6e38(upstream)</code>,\u4e0b\u6b21$ <code>git push</code>\u6642,\u5c31\u53ef\u4ee5\u4e0d\u52a0\u4efb\u4f55\u53c3\u6578,Git\u5c31\u6703\u9810\u8a2d\u4f60\u662f\u8981\u63a8\u9001\u5230origin\u9019\u500b\u9060\u7aef\u7bc0\u9ede,\u4e26\u4e14\u628amaster\u9019\u500b\u5206\u652f\u7684\u5167\u5bb9\u63a8\u9001\u4e0a\u53bb</li> <li>\u4f8b\u5982: $ <code>git push</code></li> </ul> </li> <li>\u88dc\u51451: \u5982\u679c\u6c92\u6709\u8a2d\u5b9a\u597dupstream\u7684\u8a71,\u5c31\u5fc5\u9808\u5728\u6bcf\u6b21\u63a8\u9001\u51fa\u53bb\u6642,\u90fd\u8981\u8ddfGit\u8b1b\u6e05\u695a<ul> <li>\u4f8b\u5982: $ <code>git push origin master</code> = $ <code>git push origin master:master</code></li> </ul> </li> <li>\u88dc\u51452: \u5982\u679c\u63a8\u9001\u4e0a\u53bb\u9060\u7aeforigin\u7bc0\u9ede\u6642,\u4e0d\u60f3\u8981\u7528\u8ddf\u672c\u5730\u7aef\u5206\u652f\u7684\u540d\u7a31\u76f8\u540c\u7684\u8a71,\u53ef\u4ee5\u63a1\u53d6\u4ee5\u4e0b\u505a\u6cd5<ul> <li>\u4f8b\u5982: $ <code>git push origin master:dog</code></li> <li>\u9019\u6a23\u4ee3\u8868\u7576\u628a\u672c\u5730\u7aef\u7684master\u5206\u652f\u63a8\u9001\u4e0a\u53bb\u9060\u7aeforigin\u7bc0\u9ede\u6642,\u5c31\"\u4e0d\u6703\"\u5efa\u7acb\u4e00\u500borigin/master\u5206\u652f,\u800c\u662f\u5efa\u7acb(or \u66f4\u65b0\u9032\u5ea6)\u4e00\u500b\u53eb\u505aorigin/dog\u7684\u9060\u7aef\u5206\u652f</li> </ul> </li> </ul> </li> <li>\u5982\u679c\u662f\u8981\u4e0a\u5b58\u672c\u6a5f\u7aef(local)\u73fe\u5b58\u7684\u5c08\u6848,\u5247\u53ef\u4ee5\u53c3\u8003\u5b98\u7db2\u4e0a\u7684\u63d0\u793a \"push an existing repository from the command line\" \u7684\u6307\u793a\u9032\u884c<ul> <li>$ <code>git remote add origin git@github.com:&lt;\u81ea\u5df1\u7684username&gt;/&lt;\u8981\u65b0\u5efa\u7684repository\u7684\u540d\u7a31&gt;.git</code></li> <li>$ <code>git push -u origin master</code></li> </ul> </li> </ul>"},{"location":"version_control/git/#repositorypull","title":"\u5f9e\u9060\u7aefrepository\u5229\u7528Pull\u4e0b\u8f09\u4e26\u66f4\u65b0","text":"<ul> <li>\u53ef\u4ee5\u5229\u7528<code>Pull\u6307\u4ee4</code>\u5c07\u9060\u7aef\u5132\u5b58\u5eab(remote repository)\u4e0b\u8f09\u56de\u672c\u5730\u7aef\u5132\u5b58\u5eab(local repository)\u4e26\u66f4\u65b0</li> <li>\u7576\u57f7\u884c<code>Fetch\u6307\u4ee4</code>\u6642,Git\u6703\u6aa2\u67e5\u4e00\u4e0b\u9060\u7aefrepository\u7684\u7248\u672c\u5167\u5bb9\u5f8c,\u5c07\u76ee\u524d\u9060\u7aefrepository\u6709,\u4f46\u662f\u76ee\u524d\u672c\u5730\u7aefrepository\u6c92\u6709\u7684\u5167\u5bb9\u4e0b\u8f09\u4e00\u4efd\u56de\u4f86,\u540c\u6642\u79fb\u52d5origin\u76f8\u95dc\u7684\u5206\u652f </li> <li>\u5728\u539f\u7406\u4e0a, $ <code>git pull</code> = $ <code>git fetch</code> + $ <code>git merge FETCH_HEAD</code></li> <li><code>Fetch\u6307\u4ee4\u8aaa\u660e</code><ul> <li>\u9069\u7528\u60c5\u5883: \u53ea\u662f\u60f3\u78ba\u8a8d\u9060\u7aef\u6578\u64da\u5eab\u7684\u5167\u5bb9\u537b\u4e0d\u662f\u771f\u7684\u60f3\u5408\u4f75</li> <li>\u53ef\u4ee5\u53d6\u5f97\u9060\u7aef\u6578\u64da\u5eab\u7684\u6700\u65b0\u6b77\u53f2\u8a18\u9304; \u53d6\u5f97\u7684\u63d0\u4ea4\u6703\u5c0e\u5165\u5728\u81ea\u52d5\u5efa\u7acb\u7684\u5206\u652f\u4e2d,\u4e26\u53ef\u4ee5\u5207\u63db\u9019\u500b\u540d\u70ba<code>FETCH_HEAD</code>\u7684\u5206\u652f</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://backlog.com/git-tutorial/tw/stepup/stepup3_2.html</li> <li>$ <code>git fetch &lt;\u9060\u7aeforigin\u7bc0\u9ede&gt;</code>: \u5c07\u6574\u500b\u9060\u7aeforigin\u7bc0\u9ede\u7684\u5168\u90e8\u66f4\u65b0,\u5168\u90e8\u4e0b\u8f09\u56de\u4f86(\u9810\u8a2d\u60c5\u6cc1\u662f\u53d6\u56de\u6240\u6709\u5206\u652f\u7684\u66f4\u65b0)</li> <li>\u4f8b\u5982: $ <code>git fetch origin</code></li> <li>$ <code>git fetch &lt;\u9060\u7aeforigin\u7bc0\u9ede&gt; &lt;\u9060\u7aef\u5206\u652f\u7684\u540d\u7a31&gt;</code>: \u53ea\u5c07\u9060\u7aeforigin\u7bc0\u9ede\u7684\u7279\u5b9a\u5206\u652f(remote branch)\u7684\u66f4\u65b0\u4e0b\u8f09\u56de\u4f86</li> <li>\u4f8b\u5982: $ <code>git fetch origin master</code> </li> <li>$ <code>git fetch --all</code>: \u6703\u5f9e\u53e6\u4e00\u500brepository\u4e0b\u8f09<code>\u5206\u652f</code>(branch)\u548c<code>\u6a19\u7c64</code>(tag)</li> <li><code>--all</code>: \u4e0b\u8f09\u5168\u90e8\u9060\u7aef\u5206\u652f(remote branches)\u7684\u5167\u5bb9</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u56e0\u70ba\u73fe\u5728\u9019\u500b\u5c08\u6848\u4e4b\u524d\u6709\u63a8\u9001\u6771\u897f\u5230Server\u4e0a,\u6240\u4ee5\u9060\u7aef\u5206\u652f\u4e5f\u6703\u8a18\u9304\u4e00\u4efd\u5728\u672c\u6a5f\u4e0a,\u4e00\u6a23\u4e5f\u662f\u6709<code>HEAD</code>\u3001<code>master\u5206\u652f</code>,\u4f46\u6703\u5728\u524d\u9762\u52a0\u8a3b\u9060\u7aef\u7bc0\u9edeorigin,\u8b8a\u6210<code>origin/HEAD</code>\u3001<code>origin/master</code></li> <li>\u5176\u5be6\u4e4b\u524d\u5728<code>Push\u6307\u4ee4</code>\u6642\u6709\u52a0<code>-u</code> (=&gt; <code>--set-upstream</code>)\u53c3\u6578,\u5c31\u662f\u7528\u4f86\u8a2d\u5b9a<code>upstream</code>(\u4e0a\u6e38)\u7528\u7684,\u6240\u4ee5\u76ee\u524d\u9019\u500b<code>origin/master</code>\u9060\u7aef\u5206\u652f\u5176\u5be6\u5c31\u662f\u672c\u5730<code>master\u5206\u652f</code>\u7684upstream\u5594<ul> <li>\u53ef\u53c3\u8003\u65b0\u5efa\u4e00\u500bGitHub repository,\u4e26\u63a8\u9001\u672c\u5730\u7aefrepository\u5230GitHub\u4e0a</li> </ul> </li> <li>\u5229\u7528 $ <code>git fetch origin master</code> \u5c07<code>\u9060\u7aef\u5206\u652f</code>(origin/master)\u4e0b\u8f09\u4e00\u4efd\u56de\u5230\u672c\u5730\u7aef\u7684<code>master\u5206\u652f</code>\u4e0a\u9762 </li> <li>\u56e0\u70ba\u9019\u500b\u9060\u7aef\u5206\u652f(origin/master)\u662f\u5f9emaster\u5206\u652f\u5206\u51fa\u53bb\u7684,\u800c\u4e14\u9032\u5ea6\u9084\u6bd4master\u5206\u652f\u9084\u8981\u65b0,\u53ef\u4ee5\u5229\u7528<code>Merge\u6307\u4ee4</code>\u5408\u4f75\u5b83\u5011<ul> <li>$ <code>git merge origin/master</code>: \u5c07\u76ee\u524d\u6240\u5728\u7684\u5206\u652f\u5408\u4f75\u5230<code>\u9060\u7aef\u5206\u652f</code>(origin/master); \u5c31\u80fd\u8b93<code>\u672c\u5730\u7aef\u5206\u652f</code>(master)\u8ddf\u4e0a<code>\u9060\u7aef\u5206\u652f</code>(origin/master)\u7684\u9032\u5ea6\u4e86</li> <li>\u53ef\u53c3\u8003\u5206\u652f(branch)\u64cd\u4f5c\u7684$ <code>git merge</code>\u7bc7</li> </ul> </li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/pull-from-github.html</li> <li>\u88dc\u51451: \u5176\u5be6\u53ef\u4ee5\u628a<code>origin/master</code>\u9019\u7a2e\u9060\u7aef\u5206\u652f\u8996\u70ba\u4e00\u500b\u5f9e\u539f\u4f86\u672c\u5730\u7aef<code>master\u5206\u652f</code>\u5206\u51fa\u53bb\u7684\u4e00\u500b\u5206\u652f\u5c31\u597d\u4e86</li> <li>\u88dc\u51452: \u56e0\u70ba<code>\u9060\u7aef\u5206\u652f</code>(origin/master)\u8207<code>\u672c\u5730\u7aef\u5206\u652f</code>(master)\u662f\u4f86\u81ea\u540c\u4e00\u500b\u6e90\u982d,\u6240\u4ee5\u5728\u9019\u6b21\u7684Merge\u904e\u7a0b,Git\u6703\u9810\u8a2d\u4f7f\u7528<code>\u5feb\u8f49\u6a21\u5f0f</code>(fast-forward\u6a21\u5f0f)</li> </ul> </li> <li><code>Pull\u6307\u4ee4\u8aaa\u660e</code><ul> <li>$ <code>git pull</code>: \u5176\u5be6\u5c31\u662f\u53bb\u9060\u7aeforigin\u7bc0\u9ede\u6293\u6771\u897f\u56de\u4f86(<code>Fetch</code>),\u4e26\u4e14\u66f4\u65b0\u672c\u6a5f\u7684\u9032\u5ea6(<code>Merge</code>)\u800c\u5df2</li> <li>\u57f7\u884c<code>Pull\u6307\u4ee4</code>\u6642,\u5982\u679c\u5167\u5bb9\u6c92\u6709\u885d\u7a81,\u5c31\u6703\u81ea\u52d5\u5efa\u7acb\u5408\u4f75\u63d0\u4ea4\u3002\u5982\u679c\u767c\u751f\u885d\u7a81\u7684\u8a71,\u9700\u5148\u89e3\u6c7a\u885d\u7a81\u7136\u5f8c\u518d\u624b\u52d5\u63d0\u4ea4</li> <li>\u4e5f\u53ef\u4ee5\u53ea\u7528<code>Rebase\u65b9\u5f0f</code>\u4f86\u5408\u4f75\u5206\u652f</li> <li>\u53ef\u5148\u53c3\u8003\u5206\u652f(branch)\u64cd\u4f5c\u7684$ <code>git rebase</code>\u7bc7</li> <li>$ <code>git pull --rebase</code>: \u6307\u5b9a\u4f7f\u7528<code>Rebase\u65b9\u5f0f</code>\u4f86\u5408\u4f75(Merge)\u4e0b\u8f09\u56de\u4f86\u7684\u5167\u5bb9<ul> <li><code>-r</code> (=&gt; <code>--rebase</code>): \u7576\u5f9e\u9060\u7aefrepository<code>\u4e0b\u8f09(Fetch)</code>\u56de\u4f86\u5f8c,\u5c07\u76ee\u524d\u6240\u5728\u7684\u5206\u652f(current branch)\u7528<code>Rebase\u7684\u65b9\u5f0f</code>\u5408\u4f75\u5230\u5176<code>\u4e0a\u6e38\u5206\u652f</code>(upstream branch)\u7684\u4e0a\u9762</li> </ul> </li> <li>\u9069\u7528\u60c5\u5883: \u7576\u4e0d\u60f3\u56e0\u70ba\u5408\u4f75\u5206\u652f\u800c\u591a\u7522\u751f\u4e00\u6b21<code>commit\u7d00\u9304</code>\u7684\u8a71,\u53ef\u4ee5\u7528<code>Rebase\u65b9\u5f0f</code>\u4f86\u5408\u4f75\u5206\u652f</li> </ul> </li> </ul>"},{"location":"version_control/git/#pushrepository","title":"\u70ba\u4ec0\u9ebc\u6709\u6642\u5019\u6703\u63a8\u9001(Push)\u4e0d\u4e0a\u53bb\u9060\u7aefrepository\u5462?","text":"<ul> <li>\u7576<code>\u9060\u7aeforigin\u7bc0\u9ede</code>\u7684repository\u5167\u5bb9\u6bd4\u6211\u5011\u7684<code>\u672c\u5730\u7aef\u5206\u652f</code>\u7684\u9019\u4efd\u5167\u5bb9\u9084\u8981\"\u65b0\"\u7684\u8a71,Git\u5c31\u4e0d\u6703\u8b93\u6211\u5011<code>\u63a8\u9001</code>(Push)\u4e0a\u53bb</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/fail-to-push.html</li> <li>\u6709\u6642\u5019\u662f\u56e0\u70ba\u591a\u4eba\u5171\u540c\u5354\u4f5c\u6642,\u7576<code>\u9060\u7aeforigin\u7bc0\u9ede</code>\u7684\u5206\u652f\u5df2\u7d93\u5148\u88ab\u67d0\u4eba\u66f4\u65b0\u6642,\u9019\u6642\u5019\u5176\u4ed6\u4eba\u5c31\u6703\u767c\u751f<code>\u63a8\u9001</code>(Push)\u4e0d\u4e0a\u53bb\u7684\u60c5\u6cc1</li> <li>\u5982\u540c\u4ee5\u4e0b\u60c5\u6cc1 </li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/fail-to-push.html</li> <li>\u9019\u6642\u5019\u6703\u67092\u7a2e\u65b9\u5f0f\u53ef\u4ee5\u7121\u6cd5<code>\u63a8\u9001</code>(Push)\u7684\u554f\u984c</li> <li>\u65b9\u6cd5\u4e00: \u5148\u66f4\u65b0\u672c\u5730\u7aef\u5132\u5b58\u5eab(local repository)\u7684\u5167\u5bb9,\u518d\u63a8\u9001\u4e0a\u53bb\u9060\u7aef\u5132\u5b58\u5eab(remote repository)\u4e00\u6b21<ul> <li>$ <code>git pull --rebase</code>: \u5c07<code>\u9060\u7aeforigin\u7bc0\u9ede</code>\u7684repository\u4e0b\u8f09\u56de\u4f86\u5f8c,\u6307\u5b9a\u8981\u7528<code>Rebase\u65b9\u5f0f</code>\u4f86\u5408\u4f75</li> <li><code>--rebase</code>: \u5c07\u76ee\u524d\u6240\u5728\u7684\u5206\u652frebase\u5230<code>\u9060\u7aeforigin\u7bc0\u9ede</code>\u7684<code>\u4e0a\u6e38\u5206\u652f</code>(upstream branch)\u7684\"\u4e0a\u9762\"</li> <li>\u6b64\u6642\u5982\u679c\u5408\u4f75\u6c92\u6709\u767c\u751f\u885d\u7a81\u7684\u8a71,\u5c31\u53ef\u4ee5\u9806\u5229\u7684\u5f80\u4e0a<code>\u63a8\u9001</code>(Push)\u4e86</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/fail-to-push.html</li> </ul> </li> <li>\u65b9\u6cd5\u4e8c: \u7121\u8ad6\u898f\u5247,\u5f37\u5236<code>\u63a8\u9001</code>(Push)\u4e0a\u53bb<ul> <li>$ <code>git push -f</code>: \u5f37\u5236\u5c07\u76ee\u524d<code>\u672c\u5730\u7aefrepository</code>\u7684\u5167\u5bb9\u63a8\u9001\u5230<code>\u9060\u7aeforigin\u7bc0\u9ede</code>\u7684repository\u4e0a\u9762,\u540c\u6642\u6703\u5c07\u539f\u672c\u9060\u7aefrepository\u7684\u5167\u5bb9\"\u8986\u84cb\u6389\"</li> <li><code>-f</code> (=&gt; <code>--force</code>): \"\u5f37\u5236\"\u57f7\u884c<code>\u63a8\u9001</code>(Push)\u6307\u4ee4</li> <li>\u6ce8\u610f! \u6b64\u65b9\u6cd5\u8981\u614e\u7528,\u56e0\u70ba\u6703\u8986\u84cb\u6389\u539f\u672c\u9060\u7aefrepository\u7684\u5167\u5bb9</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/fail-to-push.html</li> </ul> </li> </ul>"},{"location":"version_control/git/#repository","title":"\u5f9e\u4f3a\u670d\u5668\u4e0a\u8907\u88fd\u9060\u7aefrepository\u4e0b\u4f86","text":"<ul> <li>\u53ef\u4ee5\u5229\u7528$ <code>git clone &lt;HTTPS or SSH&gt;</code> \u6307\u4ee4\u4f86\u5c07\u9060\u7aef\u7684repository\u8907\u88fd\u4e00\u4efd\u5230\u672c\u5730\u7aef\u4f86\u6aa2\u8996</li> <li>\u53ef\u5148\u53c3\u8003\u65b0\u5efa\u4e00\u500bGitHub repository,\u4e26\u63a8\u9001\u672c\u5730\u7aefrepository\u5230GitHub\u4e0a\u7684 HTTPS \u8207 SSH \u7684\u6bd4\u8f03</li> <li>\u65b9\u6cd5\u4e00: \u5229\u7528HTTPS\u7684\u65b9\u5f0f\u8907\u88fd<ul> <li>$ <code>git clone https://github.com/Hans-Tsai/gitLearn.git</code></li> <li>\u6b64\u65b9\u6cd5\u4f7f\u7528\u8005\u53ea\u8981\u7576\u4e0b\u8f38\u5165 <code>\u5e33\u865f</code> &amp; <code>\u5bc6\u78bc</code> \u5c31\u53ef\u4ee5\u8907\u88fd\u4e86</li> </ul> </li> <li>\u65b9\u6cd5\u4e8c: \u5229\u7528SSH\u7684\u65b9\u5f0f\u8907\u88fd<ul> <li>$ <code>git clone git@github.com:Hans-Tsai/gitLearn.git</code></li> <li>\u6b64\u65b9\u6cd5\u9700\u4e8b\u5148\u5728\u672c\u5730\u7aef\u7522\u751fSSH\u91d1\u9470\u5f8c,\u518d\u5230GitHub\u7684Settings\u505a\u8a2d\u5b9a; \u5b8c\u6210\u5f8c\u6703\u5982\u540c\u4ee5\u4e0b\u756b\u9762</li> <li></li> <li>\u8a2d\u5b9aGitHub SSH\u91d1\u9470\u8a8d\u8b49\u7684\u8a73\u7d30\u4f5c\u6cd5\u53ef\u4ee5\u53c3\u8003GitHub\u7684\u5b98\u65b9\u6587\u4ef6\u8aaa\u660e \u9023\u7d50: https://docs.github.com/en/enterprise-server@2.20/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account</li> </ul> </li> <li>\u6b64\u8655\u7684<code>Clone\u6307\u4ee4</code>\u7684\u7528\u9014,\u4e0d\u55ae\u7d14\u53ea\u6709\u8907\u88fd\u6240\u6709\u5be6\u9ad4\u6a94\u6848,\u540c\u6642\u4e5f\u5305\u542b\u8907\u88fd\u4e86\u6574\u500b\u5c08\u6848\u7684\u4ee5\u4e0b\u5167\u5bb9</li> <li>\u6b77\u53f2\u7d00\u9304(log &amp; Reflog)</li> <li>\u5206\u652f(Branch)</li> <li>\u6a19\u7c64(Tag)</li> <li>\u5982\u679c\u60f3\u8981\u8907\u88fd\u4e0b\u4f86\u5f8c,\u91cd\u65b0\u547d\u540d\u9019\u500brepository\u7684\u8a71,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>git clone git@github.com:Hans-Tsai/gitLearn.git &lt;\u65b0\u547d\u540d\u7684\u5206\u652f\u540d\u7a31&gt;</code></li> <li>\u5728Git Version 1.7.10\u4e4b\u5f8c,\u5982\u679c\u60f3\u8981\u53ea\u55ae\u7d14\u5730\u5f9e\u9060\u7aefrepository\u8907\u88fd\u7279\u5b9a\u7684\u5206\u652f\u4e0b\u4f86\u5230\u672c\u6a5f\u7aef\u7684\u8a71,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b\u6307\u4ee4</li> <li>$ <code>git clone -b &lt;\u6307\u5b9a\u8981\u8907\u88fd\u7684\u5206\u652f\u540d\u7a31&gt; --single-branch git@github.com:Hans-Tsai/gitLearn.git</code></li> <li><code>-b &lt;\u6307\u5b9a\u7684\u5206\u652f\u540d\u7a31&gt;</code> (=&gt; <code>--branch &lt;\u6307\u5b9a\u7684\u5206\u652f\u540d\u7a31&gt;</code>): Instead of pointing the newly created HEAD to the branch pointed to by the cloned repository\u2019s HEAD, point to  branch instead. In a non-bare repository, this is the branch that will be checked out. --branch can also take tags and detaches the HEAD at that commit in the resulting repository. <li><code>--single-branch</code>: \u53ea\u8907\u88fd\u8a72\u6307\u5b9a\u8981\u8907\u88fd\u7684\u5206\u652f\u7684\"\u6700\u65b0\"<code>\u6b77\u53f2commit\u7d00\u9304</code>,\u53ef\u4ee5\u642d\u914d<code>--branch</code>\u53c3\u6578\u4f86\u4f7f\u7528</li>"},{"location":"version_control/git/#clone-pull","title":"Clone(\u8907\u88fd) \u548c Pull(\u62c9\u4e0b\u4f86\u66f4\u65b0) \u6709\u4ec0\u9ebc\u4e0d\u540c\u5462?","text":"<ul> <li><code>Clone(\u8907\u88fd)</code></li> <li><code>\u4f7f\u7528\u60c5\u5883</code></li> <li>\u7576\u9019\u500b\u5c08\u6848\u662f\u7b2c\u4e00\u6b21\u770b\u5230,\u6211\u5011\u60f3\u8981\"\u8907\u88fd\"\u4e00\u4efd\u5230\u672c\u5730\u7aef\u4f86\u770b\u770b\u7684\u6642\u5019\u53ef\u4ee5\u7528<code>Clone(\u8907\u88fd)\u6307\u4ee4</code></li> <li>$ <code>git clone &lt;remote repo by HTTPS or SSH&gt;</code>: \u5f9e\u9060\u7aefrepository\u8907\u88fd\u4e00\u4efd\u9019\u500b\u5c08\u6848\u5230\u672c\u5730\u7aef\u7684\u96fb\u8166 </li> <li><code>Pull(\u62c9\u4e0b\u4f86\u66f4\u65b0)</code></li> <li><code>\u4f7f\u7528\u60c5\u5883</code></li> <li>\u7576\u9019\u500b\u5c08\u6848\u6211\u5df2\u7d93\u4e0b\u8f09\u56de\u4f86\u4e86(\u672c\u5730\u7aef\u5df2\u7d93\u6709\u4e00\u4efd\u9019\u500b\u5c08\u6848\u4e86)\u7684\u6642\u5019,\u53ea\u60f3\u8981\"\u66f4\u65b0\"\u5230\u8a72\u5c08\u6848\u6700\u65b0\u7248\u7684\u9060\u7aefrepository\u7684\u5167\u5bb9\u7684\u8a71,\u9019\u6642\u5019\u53ef\u4ee5\u4f7f\u7528<code>Pull(\u62c9\u4e0b\u4f86\u66f4\u65b0)\u6307\u4ee4</code></li> <li>$ <code>git pull &lt;\u9060\u7aef\u7bc0\u9ede\u540d\u7a31(ex: origin)&gt; &lt;\u8981\u5408\u4f75\u5230\u76ee\u524d\u6240\u5728\u5206\u652f\u4e0a\u9762\u7684\u9060\u7aef\u5206\u652f\u540d\u7a31&gt;</code>: \u5f9e\u9060\u7aefrepository<code>\u62c9\u4e0b\u4f86(Fetch)</code>\u4e00\u4efd\u5230\u672c\u5730\u7aef\u4e14<code>\u5408\u4f75(Merge)</code>\u5230\u76ee\u524d\u6240\u5728\u7684\u5206\u652f\u4e0a\u9762</li> </ul>"},{"location":"version_control/git/#pull-request","title":"\u5229\u7528Pull Request\u4f86\u8ddf\u5176\u5b83\u958b\u767c\u8005\u7684\u958b\u6e90\u5c08\u6848\u505a\u4e92\u52d5","text":"<ul> <li>\u56e0\u70ba\u6211\u5011\u6c92\u6709\u6b0a\u9650\u4f86<code>\u63a8\u9001</code>(Push)\u66f4\u65b0\u5230GitHub\u4e0a\u9762\u5225\u4eba\u7684\u5c08\u6848\u4e0a,<code>Fork</code>\u53ef\u4ee5\u7528\u4f86\u5c07GitHub\u4e0a\u5225\u7684\u958b\u767c\u8005\u5beb\u7684\u958b\u6e90\u5c08\u6848,\"\u8907\u88fd\"\u4e00\u4efd\u5230\u6211\u5011\u81ea\u5df1\u7684GitHub namespace\u4e0a,\u9019\u6a23\u6211\u5011\u5c31\u6709\u6b0a\u9650\u53ef\u4ee5<code>\u63a8\u9001</code>(Push)\u66f4\u65b0\u5230\u9019\u500b\u5c08\u6848\u4e0a\u4e86</li> <li><code>Fork</code>\u7684\u6d41\u7a0b\u4ecb\u7d39</li> <li>\u5148\u8907\u88fd(Fork)\u4e00\u4efd\u539f\u4f5c\u7684\u5c08\u6848\u5230\u4f60\u81ea\u5df1\u7684GitHub\u5e33\u865f\u5e95\u4e0b<ul> <li></li> </ul> </li> <li>\u56e0\u70ba\u9019\u500b\u8907\u88fd\u56de\u4f86\u7684\u5c08\u6848\u5df2\u7d93\u5728\u4f60\u81ea\u5df1\u7684GitHub\u5e33\u865f\u4e0b,\u6240\u4ee5\u4f60\u5c31\u6709\u5b8c\u6574\u7684\u6b0a\u9650,\u60f3\u600e\u9ebc\u6539\u5c31\u600e\u9ebc\u6539<ul> <li>$ <code>git clone &lt;\u81ea\u5df1GitHub\u4e0a\u525b\u525bFork\u56de\u4f86\u7684\u90a3\u500brepository&gt;</code></li> </ul> </li> <li>\u6539\u5b8c\u5f8c,\u5148\u63a8\u56de(Push)\"\u4f60\u81ea\u5df1\u5e33\u865f\"\u7684\u5c08\u6848<ul> <li>$ <code>git push</code></li> </ul> </li> <li>\u7136\u5f8c\u767c\u500b\"\u901a\u77e5\"(Pull Request),\u8b93\u539f\u4f5c\u8005\u77e5\u9053\u4f60\u6709\u5e6b\u5fd9\u505a\u4e86\u4e00\u4e9b\u4e8b\u60c5,\u8acb\u4ed6\u770b\u4e00\u4e0b<ul> <li>\u9019\u5c31\u662f<code>Pull Request</code>,<code>Pull Requset</code>\u5176\u5be6\u5c31\u662f\u767c\u4e00\u500b\u8acb\u6c42\u8acb\u539f\u4f5c\u8005\u62c9\u56de\u53bb(<code>Pull</code>)\u7684\u8acb\u6c42(<code>Request</code>),\u53ef\u4ee5\u7c21\u7a31\u70ba\"PR\"</li> <li></li> <li>\u56de\u5230\u81ea\u5df1\u7684\u5c08\u6848\u9801\u9762,\u9ede\u9078\"New pull request\"\u7684\u6309\u9215,\u518d\u9ede\u9078\"Create pull request\"\u7684\u6309\u9215\u5f8c,\u53ef\u4ee5\u9078\u64c7\u8981<code>PR</code>\u5230\u539f\u4f5c\u7684\u54ea\u500b\u5206\u652f</li> <li></li> </ul> </li> <li>\u539f\u4f5c\u8005\u770b\u5b8c\u5f8c\u8aaa\"\u6211\u89ba\u5f97\u53ef\u4ee5\",\u7136\u5f8c\u5c31\u6c7a\u5b9a\u628a\u4f60\u505a\u7684\u9019\u4e9b\u4fee\u6539\u5408\u4f75(<code>Merge</code>)\u5230\u4ed6\u7684\u5c08\u6848\u88e1<ul> <li>\u7576\u539f\u4f5c\u8005\u89ba\u5f97\u9019\u6b21\u7684\u4fee\u6539\u6c92\u554f\u984c\u7684\u8a71,\u5c31\u53ef\u4ee5\u6536\u4e0b\u9019\u6b21\u7684<code>PR</code>,\u9ede\u9078\"Merge pull request\"\u7684\u6309\u9215\u5f8c,\u5c31\u6703\u5408\u4f75(<code>Merge</code>)\u9019\u6b21\u7684commit\u4e86</li> </ul> </li> <li>\u53ef\u53c3\u8003\u5b98\u65b9\u6587\u4ef6\u63d0\u4f9b\u7684<code>Fork</code>\u6d41\u7a0b https://docs.github.com/en/free-pro-team@latest/github/getting-started-with-github/fork-a-repo</li> <li>\u53ef\u53c3\u8003\u5b98\u65b9\u6587\u4ef6\u63d0\u4f9b\u7684<code>Pull Request</code>\u6d41\u7a0b https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/about-pull-requests</li> <li>\u5728\u591a\u4eba\u5171\u540c\u5354\u4f5c\u7684\u5be6\u6230\u60c5\u5883\u4e2d,\u901a\u5e38\u6703\u5148\u6311\u9078\u56fa\u5b9a\u4e00\u500b\u5206\u652f\u4f5c\u70ba\u53ef\u4ee5\u4e0a\u7dda\u7684\u6b63\u5f0f\u7248\u672c\u5206\u652f,\u6163\u4f8b\u4e0a\u5e38\u6703\u6311\u9078<code>master</code>\u5206\u652f\u6216\u662f<code>production</code>\u5206\u652f\u4f5c\u70ba\u6b63\u5f0f\u5206\u652f; \u6bcf\u4f4d\u958b\u767c\u8005\u90fd\u6703\u5148\u5f9e\u516c\u53f8\u7684\u5c08\u6848<code>Fork</code>\u4e00\u4efd\u5230\u81ea\u5df1\u7684GitHub\u5e33\u865f\u88e1\u9762,\u518d\u4e0b\u8f09\u5230\u672c\u6a5f\u7aef\u9032\u884c\u958b\u767c,\u5f85\u958b\u767c\u7684\u529f\u80fd\u5b8c\u6210\u5f8c\u518d\u767c<code>PR</code>\u56de\u516c\u53f8\u7684\u5c08\u6848,\u6b64\u6642\u8ca0\u8cac\u7ba1\u7406\u9019\u500b\u5c08\u6848\u7684\u4eba\u6536\u5230<code>PR</code>\u5f8c,\u53ef\u4ee5\u958b\u59cb\u9032\u884c<code>Code Review</code>,\u4e26\u78ba\u8a8d\u7121\u8aa4\u5f8c\u4fbf\u53ef\u9032\u884c\u5408\u4f75,\u9019\u6a23\u505a\u7684\u512a\u9ede\u662f\u53ef\u4ee5\u4fdd\u6301\u8b93\u9019\u500b\u7522\u54c1\u7684\u5206\u652f\u8655\u65bc\u96a8\u6642\u90fd\u53ef\u4ee5\u4e0a\u7dda\u7684\u72c0\u614b</li> </ul>"},{"location":"version_control/git/#fork","title":"\u5982\u4f55\u8ddf\u4e0a\u7576\u521dFork\u7684\u5c08\u6848\u7684\u9032\u5ea6\u5462?","text":"<ul> <li>\u7576\u539f\u4f5c\u8005\u5148\u6536\u4e0b\u5225\u4eba\u7684<code>Pull Request</code>\u6642,\u8a72\u5c08\u6848\u7684\u9032\u5ea6\u5c31\u6703\u6bd4\u5728\u6211\u5011\u81ea\u5df1\u5e33\u865f\u5e95\u4e0b\u7684\u9032\u5ea6\u9084\u8981\u524d\u9762\u4e86; \u9019\u6642\u5982\u679c\u60f3\u8981\u8b93\u81ea\u5df1\u5e33\u865f\u5e95\u4e0b<code>Fork</code>\u904e\u4f86\u7684\u9019\u500b\u5c08\u6848\"\u8ddf\u4e0a\"\u539f\u4f5c\u5c08\u6848\u7684\u76ee\u524d\u7684\u9032\u5ea6\u7684\u8a71,\u53ef\u4ee5\u5229\u7528\u4ee5\u4e0b2\u7a2e\u65b9\u6cd5</li> <li>\u4e5f\u53ef\u4ee5\u5148\u53c3\u8003\u70ba\u4ec0\u9ebc\u6709\u6642\u5019\u6703\u63a8\u9001(Push)\u4e0d\u4e0a\u53bb\u9060\u7aefrepository\u5462?</li> <li>\u65b9\u6cd5\u4e00: \u780d\u6389\u91cd\u65b0<code>Fork</code>\u4e00\u904d<ul> <li>\u53ef\u53c3\u8003\u5229\u7528Pull Request\u4f86\u8ddf\u5176\u5b83\u958b\u767c\u8005\u7684\u958b\u6e90\u5c08\u6848\u505a\u4e92\u52d5\u7684<code>Fork\u6d41\u7a0b\u4ecb\u7d39</code>\u7bc7</li> </ul> </li> <li>\u65b9\u6cd5\u4e8c: \u8ddf\u4e0a\u6e38\u540c\u6b65<ul> <li>\u5148\u8a2d\u5b9a\u539f\u4f5c\u7684\u9060\u7aef\u7bc0\u9ede</li> <li>$ <code>git remote -v</code>: \u53ef\u4ee5\u5217\u51fa\u9060\u7aef\u7bc0\u9ede\u7684url</li> <li><code>-v</code> (=&gt; <code>--verbose</code>): \u8a73\u7d30\u5217\u51fa\u9060\u7aef\u7bc0\u9ede\u7684\u540d\u7a31\u8207url</li> <li></li> <li>$ <code>git remote add &lt;\u9060\u7aef\u7bc0\u9ede\u7684\u540d\u7a31&gt; &lt;\u9060\u7aef\u7bc0\u9ederepository\u7684url&gt;</code>: \u65b0\u589e\u53e6\u4e00\u500b\u9060\u7aef\u7bc0\u9ede\u540d\u7a31\u8207url,\u800c\u9019\u500b\u9060\u7aef\u7bc0\u9ede\u6307\u7684\u4f4d\u7f6e\u5c31\u662f\"\u539f\u4f5c\u7684\u5c08\u6848\"</li> <li>\u53ef\u53c3\u8003\u65b0\u5efa\u4e00\u500bGitHub repository,\u4e26\u63a8\u9001\u672c\u5730\u7aefrepository\u5230GitHub\u4e0a\u7684$ <code>git remote add</code>\u7bc7</li> <li>\u6293\u53d6\u539f\u4f5c\u5c08\u6848\u7684\u5167\u5bb9</li> <li>$ <code>git fetch &lt;\u525b\u525b\u8a2d\u5b9a\u597d\u7684\u65b0\u7684\u6307\u5411\u539f\u4f5c\u5c08\u6848\u7684\u9060\u7aef\u7bc0\u9ede\u7684\u540d\u7a31&gt;</code>: \u5229\u7528<code>Fetch</code>\u6307\u4ee4\u4f86\u53d6\u5f97\u539f\u4f5c\u5c08\u6848\u6700\u65b0\u7248\u7684\u5167\u5bb9</li> <li>$ <code>git merge &lt;\u8981\u5408\u4f75\u5230\u7684\u5206\u652f\u540d\u7a31&gt;</code>: \u5229\u7528<code>Merge</code>\u6307\u4ee4\u5408\u4f75\u5230<code>\u9060\u7aef\u7bc0\u9ede</code>(\u539f\u4f5c\u5c08\u6848)\u7684\u9060\u7aef\u5206\u652f\u4e0a\u9762</li> <li>\u4f8b\u5982: $ <code>git merge test_origin/master</code></li> <li>\u9019\u6a23\u4e00\u4f86\u6211\u5011\u672c\u6a5f\u7684\u9032\u5ea6\u5c31\u8ddf\u539f\u4f5c\u7684\u662f\u4e00\u6a23\u4e86</li> <li>\u5982\u679c\u60f3\u8981\u81ea\u5df1\u5728GitHub\u4e0a\u90a3\u500b<code>Fork</code>\u904e\u4f86\u7684\u5c08\u6848\u9032\u5ea6\u4e5f\u66f4\u65b0\u5230\u6700\u65b0\u7248\u7684\u8a71,\u53ea\u8981\u5c07\u73fe\u5728\u672c\u6a5f\u7aef\u7684\u5c08\u6848<code>\u63a8\u9001</code>(Push)\u4e0a\u53bb\u5c31\u597d\u4e86</li> <li>$ <code>git push origin master</code></li> <li>\u9019\u6a23\u4e00\u4f86,\u5728\u6211\u5011\u96fb\u8166\u88e1\u7684\u5c08\u6848,\u4ee5\u53ca\u5728GitHub\u4e0a\u5f9e\u539f\u4f5c\u90a3\u908a<code>Fork</code>\u904e\u4f86\u7684\u5c08\u6848\u90fd\u6703\u662f\u6700\u65b0\u7684\u9032\u5ea6\u4e86</li> </ul> </li> </ul>"},{"location":"version_control/git/#_10","title":"\u5982\u4f55\u522a\u9664\u9060\u7aef\u5206\u652f\u5462?","text":"<ul> <li>\u5176\u5be6\u8981\u522a\u9664\u9060\u7aef\u5206\u652f\u53ef\u4ee5\u900f\u904eGitHub\u4e0a\u5404\u500bRepository\u6700\u4e0a\u9762\u7684branches\u5716\u6848\u9ede\u9032\u53bb\u5f8c,\u5c31\u53ef\u4ee5\u522a\u9664\u9060\u7aef\u5206\u652f\u4e86(\u5783\u573e\u6876\u5716\u6848)</li> <li></li> <li>\u4e5f\u53ef\u4ee5\u900f\u904eGit\u6307\u4ee4\u4f86\u522a\u9664\u9060\u7aef\u5206\u652f</li> <li>$ <code>git push &lt;\u9060\u7aef\u7bc0\u9ede\u7684\u540d\u7a31&gt; &lt;\u8981\u8a18\u5f97\u5728\u9019\u908a\u7a7a\u4e00\u683c&gt;:&lt;\u8981\u522a\u9664\u7684\u9060\u7aef\u5206\u652f\u7684\u540d\u7a31&gt;</code>: \u5176\u5be6\u53ef\u4ee5\u900f\u904e<code>\u63a8\u9001</code>(Push)\u6642\u91cd\u65b0\u547d\u540d\u9060\u7aef\u5206\u652f\u7684\u540d\u7a31\u6642,\u4f86\u9054\u5230\u522a\u9664\u9060\u7aef\u5206\u652f\u7684\u6548\u679c</li> <li>\u53ef\u53c3\u8003\u65b0\u5efa\u4e00\u500bGitHub repository,\u4e26\u63a8\u9001\u672c\u5730\u7aefrepository\u5230GitHub\u4e0a \u7684\u88dc\u51452(\u5982\u4f55\u5728\u63a8\u9001\u6642\u91cd\u65b0\u547d\u540d\u4e00\u500b\u9060\u7aef\u5206\u652f\u7684\u540d\u7a31\u5462?) \u7bc7</li> </ul>"},{"location":"version_control/git/#git-push-f-pushrepository","title":"\u4ec0\u9ebc\u6642\u6a5f\u9069\u5408\u7528$ <code>git push -f</code> \u4f86\u5f37\u5236\u63a8\u9001(Push)\u4e0a\u53bb\u5230\u9060\u7aefrepository\u5462?","text":"<ul> <li>\u7576\u60f3\u8981\u6574\u7406Git\u6b77\u53f2\u7d00\u9304or\u53ea\u6703\u5f71\u97ff\u5230\u81ea\u5df1\u4e00\u4eba\u6642,\u53ef\u4ee5\u4f7f\u7528\u5f37\u5236\u63a8\u9001( <code>$ git push -f</code> )\u7684\u6307\u4ee4</li> <li>\u6574\u7406\u6b77\u53f2\u7d00\u9304\u6642,\u6709\u6642\u5019\u6703\u9047\u5230\u8a72\u5c08\u6848\u7684<code>commit\u7d00\u9304</code>\u975e\u5e38\u6df7\u4e82,\u65bc\u662f\u6211\u5011\u4f7f\u7528\u4e86<code>Rebase\u7684\u65b9\u5f0f</code>\u4f86\u4fee\u6539<code>commit\u7684\u6b77\u53f2\u7d00\u9304</code>,\u4f46\u662f\u56e0\u70ba<code>Rebase</code>\u76f8\u7576\u65bc\u4fee\u6539\u5df2\u7d93\u767c\u751f\u7684\u4e8b\u5be6,\u6240\u4ee5\u6b63\u5e38\u4f86\u8aaa\u6703<code>\u63a8\u9001</code>(Push)\u4e0d\u4e0a\u53bb,\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528\u5f37\u5236\u63a8\u9001( <code>$ git push -f</code> )\u7684\u6307\u4ee4</li> <li>\u7576\u81ea\u5df1\u8981\u958b\u767c\u4e00\u500b\u65b0\u529f\u80fd\u4e26\u5f9e\u9060\u7aef\u7684repository \"\u958b\u4e86\u4e00\u500b\u65b0\u7684\u5206\u652f\" \u51fa\u4f86\u958b\u767c,\u4f46\u662f\u958b\u767c\u5b8c\u5f8c\u540c\u6a23\u767c\u73fecommit\u7d00\u9304\u592a\u904e\u7463\u788e\u4e86,\u60f3\u5229\u7528<code>Rebase\u7684\u65b9\u5f0f</code>\u4f86\u4fee\u6539<code>commit\u7684\u6b77\u53f2\u7d00\u9304</code>,\u4f46\u662f\u56e0\u70ba<code>Rebase</code>\u76f8\u7576\u65bc\u4fee\u6539\u5df2\u7d93\u767c\u751f\u7684\u4e8b\u5be6,\u6240\u4ee5\u6b63\u5e38\u4f86\u8aaa\u6703<code>\u63a8\u9001</code>(Push)\u4e0d\u4e0a\u53bb,\"\u4f46\u56e0\u70ba\u9019\u500b\u6b77\u53f2\u7d00\u9304\u5f71\u97ff\u7684\u7bc4\u570d\u53ea\u6709\u6211\u4e00\u500b\u4eba,\u6240\u4ee5\u4e26\u4e0d\u5f71\u97ff\u5176\u4ed6\u4eba\u6b63\u5e38\u4f7f\u7528\",\u6240\u4ee5\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528\u5f37\u5236\u63a8\u9001( <code>$ git push -f</code> )\u7684\u6307\u4ee4<ul> <li>\u4f8b\u5982: $ <code>git push -f origin features/my_branch</code></li> <li>\u9019\u6a23\u53ea\u6703\u5f37\u5236\u66f4\u65b0<code>features/my_branch</code>\u9019\u500b\u5206\u652f\u7684\u5167\u5bb9,\u4e26\u4e0d\u6703\u5f71\u97ff\u5176\u5b83\u5206\u652f\u3002</li> </ul> </li> <li>\u4e5f\u53ef\u4ee5\u4f7f\u7528GitHub\u63d0\u4f9b\u7684\u4fdd\u8b77\u6a5f\u5236,\u53ef\u4ee5\u907f\u514d\u67d0\u500b\u5206\u652f\u88ab<code>\u5f37\u5236\u63a8\u9001</code>(Force Push)\u4f86\u66f4\u65b0</li> <li>\u53ef\u4ee5\u5230\u8a72\u5c08\u6848\u7684<code>Settings</code>\u9801\u7c64,\u5de6\u908a\u9078\u64c7<code>Branches</code>,\u63a5\u8457\u53ef\u4ee5\u9078\u64c7\u60f3\u8981\u4fdd\u8b77\u7684\u5206\u652f,\u4e26\u8a2d\u5b9a\u8981\u4fdd\u8b77\u7684\u898f\u5247</li> <li>\u5982\u4ee5\u4e0b\u5716\u4f8b\u8aaa\u660e</li> <li></li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/using-force-push.html</li> <li>\u842c\u4e00\u5229\u7528$ <code>git push -f</code> \u4f86\u5f37\u5236\u63a8\u9001(Push)\u4e0a\u53bb\u5230\u9060\u7aefrepository\u5f8c\u53c8\u5f8c\u6094\u4e86\u7684\u8a71,\u53ef\u4ee5\u63db\u4f60\u6216\u662f\u5176\u5b83\u6709\u4e4b\u524d\u9032\u5ea6\u7684\u968a\u53cb,\u518d\u6b21\u9032\u884c$ <code>git push -f</code> \u6307\u4ee4\u4e00\u6b21,\u628a\u6b63\u78ba\u7684\u5167\u5bb9\u5f37\u8feb\u63a8\u4e0a\u53bb,\u84cb\u6389\u524d\u4e00\u6b21\u7684$ <code>git push -f</code> \u6307\u4ee4\u6240\u9020\u6210\u7684\u707d\u96e3</li> <li>\u53ef\u53c3\u8003\u70ba\u4ec0\u9ebc\u6709\u6642\u5019\u6703\u63a8\u9001(Push)\u4e0d\u4e0a\u53bb\u9060\u7aefrepository\u5462?\u7684 \u65b9\u6cd5\u4e8c: \u7121\u8ad6\u898f\u5247,\u5f37\u5236<code>\u63a8\u9001</code>(Push)\u4e0a\u53bb \u7bc7</li> </ul>"},{"location":"version_control/git/#patchrepository","title":"\u5982\u4f55\u900f\u904e<code>\u66f4\u65b0\u6a94</code>(Patch)\u4f86\u66f4\u65b0\u672c\u6a5f\u7aef\u7684repository\u7684\u5167\u5bb9\u5462?","text":"<ul> <li>\u5728Git\u548c\u8a31\u591a\u7248\u672c\u63a7\u5236\u7684\u8edf\u9ad4\u9084\u6c92\u6709\u8a95\u751f\u4ee5\u524d,\u958b\u767c\u8005\u5011\u5fc5\u9808\u900f\u904eEmail\u4f86\u5bc4\u9001\u66f4\u65b0\u6a94\u6848</li> <li>\u4f46\u662f\u6709\u4e86Git\u4e4b\u5f8c,\u4e5f\u53ef\u4ee5\u5229\u7528$ <code>git format-patch</code> \u6307\u4ee4\u4f86\u7522\u751f<code>\u66f4\u65b0\u6a94</code>(Patch)</li> <li>$ <code>git format-patch &lt;\u67d0\u500bCommit\u7269\u4ef6\u7684id&gt; &lt;\u67d0\u500bCommit\u7269\u4ef6\u7684id&gt;</code>: \u7522\u751f\u4e00\u4efd\u66f4\u65b0\u6a94,\u7bc4\u570d\u662f\u5f9e\u524d\u8005\u7684<code>Commit\u7269\u4ef6</code>\u5230\u5f8c\u8005\u7684<code>Commit\u7269\u4ef6</code>\u70ba\u6b62,\u4f46\"\u4e0d\u5305\u542b\"\u524d\u8005\u7684<code>Commit\u7269\u4ef6</code>\u672c\u8eab<ul> <li>\u5982\u540c\u4ee5\u4e0b\u5716\u7247\u793a\u7bc4</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/patch.html</li> </ul> </li> <li>\u4e5f\u53ef\u4ee5\u6307\u5b9a\u76f8\u5c0d\u7684$ <code>git log</code> \u7684<code>commit\u7d00\u9304</code>\u7684\u7bc4\u570d<ul> <li>$ <code>git format-patch -2</code>: \u9019\u6a23Git\u6703\u5e6b\u5fd9\u7522\u751f\u6700\u65b0\u76843\u6b21<code>commit\u7d00\u9304</code>\u7684<code>\u66f4\u65b0\u6a94</code>(Patch)</li> </ul> </li> <li>\u4e5f\u53ef\u4ee5\u6307\u5b9a\u7522\u751f\u7684<code>\u66f4\u65b0\u6a94</code>(Patch)\u7684\u4f4d\u7f6e<ul> <li>$ <code>git format-patch -2 -o &lt;\u66f4\u65b0\u6a94\u8981\u5b58\u653e\u7684\u6a94\u6848\u4f4d\u7f6e&gt;</code>: \u9019\u6a23Git\u6703\u5e6b\u5fd9\u7522\u751f\u6700\u65b0\u76843\u6b21<code>commit\u7d00\u9304</code>\u7684<code>\u66f4\u65b0\u6a94</code>(Patch),\u4e26\u6307\u5b9a\u5c07<code>\u66f4\u65b0\u6a94</code>(Patch)\u5b58\u653e\u5728\u6307\u5b9a\u7684\u4f4d\u7f6e</li> <li>\u5982\u540c\u4ee5\u4e0b\u5716\u7247\u793a\u7bc4</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/github/patch.html</li> </ul> </li> <li>\u53ef\u4ee5\u5229\u7528$ <code>git am</code> \u6307\u4ee4\u4f86<code>\u61c9\u7528</code>(Apply)<code>\u66f4\u65b0\u6a94</code>(Patch)</li> <li>$ <code>git am &lt; \u66f4\u65b0\u6a94\u5b58\u653e\u7684\u6a94\u6848\u4f4d\u7f6e\u8def\u5f91/* &gt;</code>: \u8868\u793a\u8981\u5c07\u8a72\u8def\u5f91\u4e0b\u7684<code>\u6240\u6709\u66f4\u65b0\u6a94</code>(Patches)\u90fd\u61c9\u7528\u5230\u73fe\u5728\u7684\u5c08\u6848\u4e0a</li> <li>\u53ef\u4ee5\u4e00\u6b21<code>\u61c9\u7528</code>(Apply)\u4e00\u500b\u66f4\u65b0\u6a94,\u4e5f\u53ef\u4ee5\u4e00\u6b21<code>\u61c9\u7528</code>(Apply)\u6240\u6709\u66f4\u65b0\u6a94</li> <li>Git\u6703\u4f9d\u64da\u6a94\u6848\u7684\u540d\u5b57\"\u4f9d\u5e8f\"\u4e00\u500b\u4e00\u500b\u5957\u7528\u5728\u73fe\u6709\u7684\u5c08\u6848\u4e0a\u9762</li> </ul>"},{"location":"version_control/git/#git_12","title":"Git \u5e38\u898b\u7684\u5718\u968a\u5de5\u4f5c\u6d41\u7a0b &amp; \u898f\u7bc4","text":"<p><code>GitHub Guides</code>(Official Guides) - https://guides.github.com/</p>"},{"location":"version_control/git/#git-flow","title":"Git Flow\u4ecb\u7d39","text":"<ul> <li><code>Git Flow</code>\u6700\u65e9\u662f\u5728\u897f\u51432010\u5e74\u88ab\u63d0\u51fa\u7684,<code>Git Flow</code>\u662f\u4e00\u5957\u5718\u968a\u5171\u540c\u5354\u4f5c\u7684\u5de5\u4f5c\u6d41\u7a0b,\u4ee5\u8b93\u5718\u968a\u5167\u7684\u6210\u54e1\u53ef\u4ee5\u6709\u4e00\u500b\u80fd\u5171\u540c\u9075\u5faa\u7684 \"\u958b\u767c\" &amp; \"\u7dad\u904b\" \u6d41\u7a0b</li> <li>\u7279\u8272: <code>Git Flow</code>\u6d41\u7a0b\u6703\u6709<code>master</code>\u3001<code>develop</code>\u3001<code>hotfix</code>\u3001<code>release</code>\u3001<code>feature</code>\u9019\u4e94\u7a2e\u5206\u652f,\u5404\u7a2e\u5206\u652f\u8ca0\u8cac\u4e0d\u540c\u7684\u529f\u80fd,\u5176\u4e2d<code>master</code>\u3001<code>develop</code>\u9019\u5169\u500b\u5206\u652f\u53c8\u88ab\u7a31\u4f5c\u9577\u671f\u5206\u652f,\u56e0\u70ba\u4ed6\u5011\u6703\u4e00\u76f4\u5b58\u6d3b\u5728\u6574\u500b<code>Git Flow</code>\u88e1,\u800c\u5176\u5b83\u7684\u5206\u652f\u5927\u591a\u6703\u56e0\u4efb\u52d9\u7d50\u675f\u800c\u88ab\u522a\u9664</li> <li>\u4ee5\u4e0b\u662f<code>Git Flow</code>\u6d41\u7a0b\u5716</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/chapters/gitflow/why-need-git-flow.html</li> <li>\u4ee5\u4e0b\u4ecb\u7d39<code>Git Flow</code>\u6d41\u7a0b\u4e2d\u6703\u78b0\u5230\u7684\u4e94\u5927\u5206\u652f</li> <li><code>\u9577\u671f\u5206\u652f</code> <ul> <li><code>Master</code> \u5206\u652f(= \u4e3b\u5206\u652f): \u4e3b\u8981\u662f\u7528\u4f86\u653e\u7a69\u5b9a\u3001\u96a8\u6642\u53ef\u4e0a\u7dda\u7684\u7248\u672c\u3002\u9019\u500b\u5206\u652f\u7684\u4f86\u6e90\u53ea\u80fd\u5f9e\u5225\u7684\u5206\u652f\u5408\u4f75\u904e\u4f86,\u958b\u767c\u8005\u4e0d\u6703\u76f4\u63a5commit \u5230\u9019\u500b\u5206\u652f\u3002\u56e0\u70ba\u662f\u7a69\u5b9a\u7248\u672c,\u6240\u4ee5\u901a\u5e38\u4e5f\u6703\u5728\u9019\u500b\u5206\u652f\u4e0a\u7684commit\u4e0a\u6253\u4e0a\u7248\u672c\u865f\u6a19\u7c64</li> <li><code>Develop</code> \u5206\u652f(= \u958b\u767c\u5206\u652f): \u4e3b\u8981\u662f\u6240\u6709\u958b\u767c\u7684\u57fa\u790e\u5206\u652f\u3002\u7576\u6709\u65b0\u7684\u529f\u80fd\u9700\u8981\u958b\u767c\u7684\u6642\u5019,\u6240\u6709\u7684Feature\u5206\u652f\u90fd\u662f\u5f9e\u9019\u908a\u5207\u51fa\u53bb\u3002\u800c\u7576<code>Feature\u5206\u652f</code>\u7684\u65b0\u529f\u80fd\u5b8c\u6210\u5f8c,\u4e5f\u90fd\u6703\u5408\u4f75\u56de\u4f86\u9019\u500b\u5206\u652f</li> </ul> </li> <li><code>\u77ed\u671f\u5206\u652f</code><ul> <li><code>Hotfix</code> \u5206\u652f(= \u4fee\u5fa9\u5206\u652f): \u7576\u7dda\u4e0a\u7522\u54c1\u767c\u751f\u7dca\u6025\u554f\u984c\u7684\u6642\u5019,\u6703**\u5f9eMaster\u5206\u652f\u958b\u4e00\u500bHotfix\u5206\u652f\u51fa\u4f86**\u9032\u884c\u4fee\u5fa9,\u7576<code>Hotfix\u5206\u652f</code>\u4fee\u5fa9\u5b8c\u6210\u4e4b\u5f8c,\u6703\u5408\u4f75\u56deMaster\u5206\u652f,\u4e5f\u540c\u6642\u6703\u5408\u4f75\u4e00\u4efd\u5230Develop\u5206\u652f</li> <li>\u8aaa\u660e1: \u4e4b\u6240\u4ee5\u8981\u5f9e<code>Master\u5206\u652f</code>\u5207\u51fa\u4f86\u4fee\u5fa9\u662f\u56e0\u70ba<code>Develop\u5206\u652f</code>\u53ef\u80fd\u5c1a\u5728\u958b\u767c\u4e2d,\u9019\u6642\u5019\u5982\u679c\u5f9e<code>Develop\u5206\u652f</code>\u5207\u51fa\u53bb\u518d\u4fee\u5fa9\u7684\u8a71,\u8981\u4f75\u56de<code>Master\u5206\u652f</code>\u6642,\u5f88\u53ef\u80fd\u6703\u9047\u5230\u5408\u4f75\u885d\u7a81\u7684\u554f\u984c</li> <li>\u8aaa\u660e2: \u4e4b\u6240\u4ee5\u8981\u7576\u4fee\u5fa9\u5b8c\u6642,\u8981\u5408\u4f75\u56de<code>Develop\u5206\u652f</code>\u662f\u56e0\u70ba\u5047\u8a2d\u4e4b\u5f8c<code>Develop\u5206\u652f</code>\u7684\u65b0\u529f\u80fd\u958b\u767c\u5b8c\u6210\u5f8c,\u4e26\u4e14\u4e5f\u5408\u4f75\u56de\u5230<code>Master\u5206\u652f</code>\u7684\u6642\u5019,\u9019\u6642\u5019<code>Hotfix</code>\u9047\u5230\u7684\u554f\u984c\u53c8\u6703\u518d\u5ea6\u6d6e\u73fe </li> <li><code>Release</code> \u5206\u652f(= \u9810\u767c\u5206\u652f): \u7576\u8a8d\u70ba<code>Develop\u5206\u652f</code>\u5920\u6210\u719f\u4e86,\u5c31\u53ef\u4ee5**\u628a<code>Develop\u5206\u652f</code>\u5408\u4f75\u5230<code>Release\u5206\u652f</code>,\u5728\u9019\u908a\u9032\u884c\u7b97\u662f\u4e0a\u7dda\u524d\u7684\u6700\u5f8c\u6e2c\u8a66**\u3002\u6e2c\u8a66\u5b8c\u6210\u5f8c,<code>Release\u5206\u652f</code>\u5c07\u6703\u540c\u6642\u5408\u4f75\u5230<code>Master</code>\u4ee5\u53ca<code>Develop</code>\u9019\u5169\u500b\u5206\u652f\u4e0a</li> <li>\u8aaa\u660e1: \u56e0\u70ba<code>Master\u5206\u652f</code>\u662f\u4e0a\u7dda\u7248\u672c,\u6240\u4ee5\u8981\u5408\u4f75\u5230<code>Master\u5206\u652f</code></li> <li>\u8aaa\u660e2: \u800c\u5408\u4f75\u56de<code>Develop\u5206\u652f</code>\u7684\u76ee\u7684,\u662f\u56e0\u70ba\u53ef\u80fd\u5728<code>Release\u5206\u652f</code>\u4e0a\u9084\u6703\u6e2c\u5230\u4e26\u4fee\u6b63\u4e00\u4e9b\u554f\u984c,\u6240\u4ee5\u9700\u8981\u8ddf<code>Develop\u5206\u652f</code>\u540c\u6b65,\u514d\u5f97\u4e4b\u5f8c\u7684\u7248\u672c\u53c8\u518d\u5ea6\u51fa\u73fe\u540c\u6a23\u7684\u554f\u984c</li> <li><code>Feature</code> \u5206\u652f(= \u529f\u80fd\u5206\u652f): \u7576\u8981\u958b\u59cb**\u65b0\u589e\u529f\u80fd\u7684\u6642\u5019,\u5c31\u662f\u4f7f\u7528<code>Feature\u5206\u652f</code>\u7684\u6642\u5019\u4e86**\u3002<code>Feature\u5206\u652f</code>\u90fd\u662f\u5f9e<code>Develop\u5206\u652f</code>\u4f86\u7684,\u5b8c\u6210\u4e4b\u5f8c\u6703\u518d\u4f75\u56de<code>Develop\u5206\u652f</code></li> </ul> </li> <li>\u95dc\u65bcGit Flow \u6d41\u7a0b\u7684\u4ecb\u7d39\u53ef\u4ee5\u53c3\u8003\u4ee5\u4e0b\u7684\u6587\u7ae0</li> <li><code>Git Flow</code>\u5c08\u6848on GitHub</li> <li>A successful Git branching model</li> </ul>"},{"location":"version_control/git/#github-flow","title":"GitHub Flow\u4ecb\u7d39","text":"<ul> <li><code>Github Flow</code>\u662f\u4e00\u500b\u9069\u540815\u201320\u4eba\u5de6\u53f3\u5718\u968a\uff0c\u5728\u90e8\u7f72\u4e0a\u81ea\u52d5\u5316\u4e14\u4e00\u5929\u4e4b\u5167\u6703\u9700\u8981\u591a\u6b21\u90e8\u7f72\u7684\u958b\u767c(\u6301\u7e8c\u767c\u5e03)</li> <li>\u7279\u8272: <code>GitHub Flow</code>\u662f\u4e00\u500b\u8f15\u91cf\u578b\u3001\u4ee5\u5206\u652f\u70ba\u57fa\u790e\u7684\u5de5\u4f5c\u6d41\u7a0b,\u53ef\u4ee5\u8b93\u6211\u5011\u7684\u5718\u968a\u8207\u5c08\u6848\u66f4\u6709\u898f\u5f8b\u5730\u90e8\u7f72 <p>GitHub flow is a lightweight, branch-based workflow that supports teams and projects where deployments are made regularly. --- by \u5b98\u65b9\u6587\u4ef6</p> </li> </ul> <p>There's only one rule: anything in the main branch is always deployable. --- --- by \u5b98\u65b9\u6587\u4ef6 - <code>GitHub Flow</code>\u5b98\u65b9\u6587\u4ef6\u4ecb\u7d39   + <code>\u524d\u7f6e\u6d41\u7a0b</code>:      * \u8981\u5148\u5c07\u9060\u7aef\u7684repository\u5229\u7528<code>Fork</code>\u7684\u65b9\u5f0f\u8907\u88fd\u5230\u81ea\u5df1\u7684GitHub repository     * \u5c07\u8a72<code>Fork</code>\u904e\u4f86\u7684\u5c08\u6848<code>Clone</code>(\u8907\u88fd)\u5230\u81ea\u5df1\u672c\u6a5f\u7aef(local)\u7684\u96fb\u8166\u4e0a   + <code>CREATE A BRANCH</code>: \u5728\u81ea\u5df1\u672c\u6a5f\u7aef(local)\u7684<code>Fork</code>\u904e\u4f86\u7684\u5c08\u6848\u4e0a,\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u5206\u652f,\u4ee5\u8b93\u6211\u5011\u5b89\u5168\u7684\u505a\u958b\u767c\u548c\u8abf\u6574     * \u5305\u542b$ <code>git add</code>     * \u5305\u542b$ <code>git commit -m</code>   + <code>OPEN A PULL REQUEST</code>: \u5229\u7528<code>Pull Request</code>\u6a5f\u5236\u4f86 \u767c\u51fa/\u6536\u5230 \u5168\u4e16\u754c\u7684\u5176\u4ed6\u958b\u767c\u8005\u7684\u56de\u994b(feedback)     * \u5305\u542b <code>Conversation</code>     * \u5305\u542b <code>Code Review</code>   + <code>MERGE AND DEPLOY</code>: <code>\u5408\u4f75</code>(Merge)\u9019\u6b21<code>Pull Request</code>\u7684\u4fee\u6539\u5167\u5bb9\u5230\u539f\u4f5c\u8005\u7684\u9060\u7aefrepository\u4e0a,\u4e26\u4e14<code>\u90e8\u7f72</code>(Deploy)\u9019\u6b21\u7684\u4fee\u6539\u8b8a\u5316\u5230\u539f\u4f5c\u8005\u7684\u9060\u7aefrepository\u4e0a   + \u4ee5\u4e0b\u662f<code>GitHub Flow</code>\u5b98\u65b9\u7684\u6d41\u7a0b\u5716\u8aaa\u660e     *        \u53c3\u8003\u5716\u7247\u51fa\u8655https://guides.github.com/pdfs/githubflow-online.pdf   + \u95dc\u65bcGitHub Flow \u6d41\u7a0b\u7684\u4ecb\u7d39\u53ef\u4ee5\u53c3\u8003\u4ee5\u4e0b\u7684\u6587\u7ae0     * <code>GitHub Flow</code> \u5b98\u65b9\u5716\u89e3\u8aaa\u660e  - <code>GitHub Flow</code>\u6c11\u9593\u4ecb\u7d39   + GitHub \u6bd4 Git \u6709\u591a\u5169\u500b\u670d\u52d9,\u4e00\u500b\u662f<code>Fork</code>,\u53e6\u4e00\u500b\u662f<code>Pull Request</code>(\u7c21\u7a31PR),\u9084\u65b0\u589e<code>issue tracking</code>\u7528\u6cd5     * <code>issue tracking</code>: \u958b\u767c\u6642,\u53ef\u4ee5\u7d66\u5c08\u6848\u6a19\u8a18<code>issue</code>,\u9084\u6709\u5176\u4ed6\u4e0d\u540c\u6a19\u7c64,\u9084\u512a\u5316\u5c08\u6848\u3002\u7576\u63d0\u4ea4\u7684\u6642\u5019,\u5982\u679c\u63d0\u4ea4\u8a0a\u606f\u4e2d\u6709 fix #1 \u7b49,\u53ef\u4ee5\u81ea\u52d5\u5c0d\u61c9\u5230\u76f8\u95dc\u7de8\u865f\u7684<code>issue</code>     * \u95dc\u65bc<code>issue tracking</code>\u7684\u7528\u6cd5\u8aaa\u660e,\u53ef\u53c3\u8003 https://guides.github.com/features/issues/ or  https://github.com/g0v/dev/wiki/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-Issue-Tracker-%E5%9B%9E%E5%A0%B1%E5%95%8F%E9%A1%8C%E3%80%81%E6%8F%90%E4%BA%A4%E5%BB%BA%E8%AD%B0   + <code>GitHub Flow</code>\u7684\u6d41\u7a0b\u8aaa\u660e     * \u5148\u6709\u4e00\u500b\u5171\u6709\u7684\u9060\u7aef\u5009\u5eab(remote repository)     * \u7136\u5f8c\u5404\u81ea\u7528<code>Fork</code>\u628a\u9060\u7aef\u5009\u5eab<code>Fork</code>\u56de\u5230\u81ea\u5df1\u7684\u5009\u5eab(repository)     * \u5f9e<code>master\u5206\u652f</code>\u62c9\u51fa\u65b0\u5206\u652f,<code>\u4fee\u6539</code>\u4e14<code>\u63d0\u4ea4</code>(Commits)     * \u958b\u767c\u597d\u5f8c,\u518d\u5229\u7528<code>Pull Request</code>\u6a5f\u5236\u4f86\u767c\u4e00\u500b\u901a\u77e5\u56de\u53bb\u5171\u6709\u7684\u9060\u7aef\u5009\u5eab(remote repository)\u7684\u539f\u4f5c\u8005     * \u5f85\u5be9\u6838\u904e\u5f8c\u518d<code>\u5408\u4f75</code>(Merge)\u9032\u539f\u4f5c\u8005\u7684\u9060\u7aef\u5009\u5eab\u7684<code>master\u5206\u652f</code>     * \u5408\u4f75\u5f8c,<code>Pull Request</code>\u4fdd\u5b58\u4e86\u7576\u6642\u7684\u4fee\u6539\u6b77\u53f2\u8a18\u9304\u4ee5\u53ca\u56de\u994b,\u53ef\u4ee5\u8b93\u4efb\u958b\u767c\u4eba\u56de\u982d\u6aa2\u8996\u7576\u521d\u60c5\u6cc1    + \u4ee5\u4e0b\u662f<code>GitHub Flow</code>\u6c11\u9593\u7684\u6d41\u7a0b\u5716\u8aaa\u660e     *        \u53c3\u8003\u5716\u7247\u51fa\u8655https://medium.com/@lf2lf2111/%E4%B8%89%E7%A8%AE%E7%89%88%E6%8E%A7%E6%B5%81%E7%A8%8B-29c82f5d4469</p>"},{"location":"version_control/git/#gitlab-flow","title":"GitLab Flow\u4ecb\u7d39","text":"<ul> <li><code>GitLab flow</code>\u5206\u6210\u5169\u7a2e\u60c5\u6cc1\u4f86\u61c9\u4ed8\u4e0d\u540c\u7684\u958b\u767c\u6d41\u7a0b</li> <li>\u6301\u7e8c\u767c\u5e03(<code>Environment Branches</code> &amp; <code>Upstream First</code>)</li> <li>\u7248\u672c\u767c\u5e03(<code>Release Branches</code> &amp; <code>Upstream First</code>)</li> <li>\u7279\u8272: <code>GitLab Flow</code>\u6709\u4e00\u500b\u6700\u4e3b\u8981\u7684\u539f\u5247\u5c31\u662f\"\u4e0a\u6e38\u512a\u5148\"(<code>upstream first</code>),\u6240\u8b02**\u4e0a\u6e38\u512a\u5148**\u539f\u5247\u7684\u610f\u601d\u662f**\u53ea\u5b58\u5728\u4e00\u500b\u4e3b\u5206\u652fmaster,\u6b64\u5206\u652f\u70ba\u6240\u6709\u5176\u5b83\u7684\u5206\u652f\u7684\u4e0a\u6e38,\u4e5f\u5c31\u662f\u8aaa\u6240\u6709\u7684\u5206\u652f\u90fd\u662f\u7531\u4e3b\u5206\u652f(master\u5206\u652f)\u5efa\u7acb**; \u6240\u4ee5\u5206\u652f\u5408\u4f75\u7684\u9806\u5e8f\u5f88\u91cd\u8981,\u8981\u4e00\u6b21\u548c\u4e26\u4e14\u78ba\u4fdd\"\u901a\u904e\u6e2c\u8a66\"\u624d\u53ef\u4ee5\u5f80\u4e0b\u6e38\u5408\u4f75,\u9664\u975e\u662f\u7dca\u6025\u60c5\u6cc1,\u624d\u53ef\u4ee5\u5141\u8a31\u8df3\u904e\u4e0a\u6e38\u76f4\u63a5\u5728\u4e0b\u6e38\u64cd\u4f5c\u5408\u4f75</li> <li>\u5982\u4ee5\u4e0b\u7684\u5b98\u65b9\u5716\u89e3\u8aaa\u660e </li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://docs.gitlab.com/ee/topics/gitlab_flow.html#git-flow-and-its-problems</li> <li>\u63a5\u4e0b\u4f86\u8981\u4ecb\u7d39<code>GitLab Flow</code>\u7684\u5169\u7a2e\u60c5\u5883\u7684\u5de5\u4f5c\u6d41\u7a0b(<code>workflow</code>)</li> <li>\u6301\u7e8c\u767c\u5e03(<code>Environment Branches</code> &amp; <code>Upstream First</code>)<ul> <li>\u6301\u7e8c\u767c\u5e03\u7684\u5c08\u6848,\u6703\u5efa\u8b70\u518d\u591a\u51fa\u4e00\u500b\u5206\u652f,\u70ba<code>\u9810\u767c\u5206\u652f</code>(pre-production)</li> <li>\u6bcf\u500b\u74b0\u5883(\u5982\u958b\u767c\u74b0\u5883\u3001\u9810\u767c\u74b0\u5883\u3001\u6e2c\u8a66\u74b0\u5883\u2026\u7b49)\u90fd\u6703\u6709\u5c0d\u61c9\u7684\u5206\u652f\u3002\u5982\u4e0b\u5716,\u958b\u767c\u74b0\u5883\u70bamaster\u5206\u652f,\u9810\u767c\u74b0\u5883\u70ba<code>pre-production\u5206\u652f</code>,\u751f\u7522\u74b0\u5883\u70ba<code>production\u5206\u652f</code></li> <li>\u7531\u4e0b\u5716\u4f86\u8209\u4f8b,\u5982\u679c<code>\u751f\u7522\u74b0\u5883</code>(production)\u767c\u751f\u932f\u8aa4,\u5247\u8981\u5efa\u4e00\u500b\u65b0\u5206\u652f\u4fee\u6539\u5b8c\u5f8c\u5408\u4f75\u5230\u6700\u4e0a\u6e38\u7684<code>\u958b\u767c\u5206\u652f</code>(master),\u4e14**\u7d93\u904e\u6e2c\u8a66**,\u518d\u7e7c\u7e8c\u5f80<code>\u9810\u767c\u5206\u652f</code>\u5408\u4f75(pre-production),\u90fd\u8981\u7d93\u904e\u6e2c\u8a66\u6c92\u554f\u984c\u5f8c\u624d\u80fd\u5920\u518d\u5f80\u4e0b<code>\u5408\u4f75</code>(Merge)\u5230<code>\u751f\u7522\u74b0\u5883</code>\u3002</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://docs.gitlab.com/ee/topics/gitlab_flow.html#git-flow-and-its-problems</li> </ul> </li> <li>\u7248\u672c\u767c\u5e03(<code>Release Branches</code> &amp; <code>Upstream First</code>)<ul> <li>\u5728<code>GitLab Flow</code>\u4e2d,\u5c0d\u65bc**\u7248\u672c\u767c\u5e03**\u7684\u9805\u76ee,\u5efa\u8b70\u6bcf\u4e00\u500b\u7a69\u5b9a\u7684\u7248\u672c\u90fd\u8981\u5f9e<code>master\u5206\u652f</code>\u62c9\u51fa\u4f86\u5275\u5efa\u4e00\u500b\u65b0\u5206\u652f,\u6bd4\u5982\u4e0b\u5716\u7684<code>2\u20133-stable</code>\u3001<code>2\u20134-stable</code>(release\u5206\u652f)</li> <li>\u6839\u64da\u5c0d\u61c9\u7684<code>release\u5206\u652f</code>\u518d\u5275\u5efa\u4e00\u500b<code>\u4fee\u5fa9\u5206\u652f</code>,\u4fee\u88dcbug\u5f8c,\u4e00\u6a23\u8981\u7167\u8457\u4e0a\u6e38\u512a\u5148\u898f\u5247,\u5148<code>\u5408\u4f75</code>(Merge)\u5230<code>master\u5206\u652f</code>,\u78ba\u8a8d\u6c92\u554f\u984c\u904e\u5f8c,\u624d\u80fd\u5920\u5408\u4f75(Merge)\u5230release\u5206\u652f,\u4e26\u4e14\u8981\u66f4\u65b0\u7248\u672c\u865f</li> <li><code>Semantic Versioning</code>(\u8a9e\u6613\u5316\u7248\u672c\u898f\u7bc4)<ul> <li>\u7e3d\u5171\u6703\u662f\u4e09\u4f4d\u6578\u642d\u914d\u5169\u500b\u5c0f\u6578\u9ede\u7684\u7248\u672c\u8868\u793a\u65b9\u5f0f, \u4f8b\u5982: <code>2.0.0</code></li> <li>\u4e09\u500b\u4f4d\u6578\u4ee3\u8868\u7684\u5206\u5225\u662f: <code>MAJOR</code>.<code>MINOR</code>.<code>PATCH</code></li> <li><code>MAJOR version</code>: \u7576\u6211\u5011\u767c\u5e03\u8207\u4e4b\u524d\u7248\u672c**\u4e0d\u76f8\u5bb9(Incompatibal)** \u7684API\u8abf\u6574</li> <li><code>MINOR version</code>: \u7576\u6211\u5011\u65b0\u589e\u4e00\u500b\u53ef\u4ee5**\u5411\u5f8c\u517c\u5bb9\u898f\u7bc4(backwards compatible manner)** \u7684\u529f\u80fd</li> <li><code>PATCH version</code>: \u7576\u6211\u5011\u8655\u7406\u4e86\u53ef\u4ee5**\u5411\u5f8c\u517c\u5bb9(backwards compatible)** \u7684\u6545\u969c\u8655\u7406(bug fixes)</li> </ul> </li> <li>\u53ef\u53c3\u8003(Semantic Versioning)\u8a9e\u6613\u5316\u7248\u672c\u898f\u7bc4</li> <li>\u7576\u5982\u679c\u6709\u591a\u500b<code>release version</code>\u7684\u8a71\uff0c\u6703\u5efa\u7acb\u4e0d\u540c\u7248\u865f\u7684<code>release branch</code>\uff0c\u7576\u5982\u679c\u6709\u9700\u8981\u7248\u672c\u7684<code>\u66f4\u65b0\u6a94</code>(patch),\u6703\u85c9\u7531$ <code>git cherry-pick</code>\u6311\u9078\u9700\u8981\u7684<code>Commit\u7269\u4ef6</code>\u5230\u5c0d\u61c9\u7684\u7248\u672c\u5206\u652f(<code>release branch</code>)\u4e0a\u3002 </li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://docs.gitlab.com/ee/topics/gitlab_flow.html#git-flow-and-its-problems</li> </ul> </li> <li>GitLab Flow \u7684 <code>Merge Request</code>(MR)\u4ecb\u7d39</li> <li>\u5728GitLab Flow\u4e2d,\u7576\u9700\u8981\u5c07\u5169\u500b\u5206\u652f<code>\u5408\u4f75</code>(Merge)\u7684\u6642\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528<code>Merge Request</code></li> <li><code>Merge Request</code>\u53ef\u4ee5\u88ab\u7576\u4f5c<code>code review</code>\u7684\u5de5\u5177,\u800c\u4e14\u4e0d\u7528\u53e6\u5916\u5b89\u88dd\u984d\u5916\u7684\u8edf\u9ad4\u6216\u662f\u5957\u4ef6<ul> <li>\u7576\u6211\u5011\u65b0\u5efa\u4e00\u500b<code>Merge Request</code>\u5f8c,\u53ef\u4ee5\u7528 \"/cc @mark\" \u7684\u65b9\u5f0f\u4f86\u6a19\u8a18\u5176\u4ed6\u7684\u5718\u968a\u6210\u54e1,\u6b64\u6642\u4ee3\u8868\u8a72<code>MR</code>\u5c1a\u672a\u5b8c\u6210,\u4f46\u6b61\u8fce\u5927\u5bb6\u5c0d\u9019\u6b21\u7684<code>MR</code>\u505a\u51fa\u56de\u994b(<code>feedback</code>)</li> <li>\u9019\u6642\u6240\u6709\u7684\u5718\u968a\u6210\u54e1\u90fd\u53ef\u4ee5\u91dd\u5c0d\u9019\u6b21\u7684<code>MR</code>\u6240\u505a\u7684\u4fee\u6539\u505a\u51fa\u5168\u90e8(<code>general</code>)\u6216\u662f\u5c40\u90e8\u5c0d\u67d0\u5e7e\u884c(<code>specific line</code>)\u7684\u8a55\u8ad6(<code>line comments</code>)</li> <li>\u7576\u88ab\u6307\u6d3e\u6536\u5230<code>MR</code>\u7684\u6210\u54e1(\u901a\u5e38\u662f\u6700\u4e86\u89e3\u9019\u500b\u5c08\u6848\u7a0b\u5f0f\u78bc\u7684\u4eba or \u8a72\u5c08\u6848\u7684\u7ba1\u7406\u8005),\u89ba\u5f97\u6b64\u6b21\u7684<code>MR</code>\u662f\u53ef\u4ee5\u88ab\u63a5\u53d7\u7684,\u5c31\u6703\u63a5\u53d7\u6b64\u6b21\u7684<code>MR</code>,\u4e26<code>\u5408\u4f75</code>(Merge)\u5230\u4e3b\u5206\u652f(<code>master\u5206\u652f</code>)</li> <li>\u4f46\u5982\u679c\u88ab\u6307\u6d3e\u6536\u5230<code>MR</code>\u7684\u6210\u54e1(\u901a\u5e38\u662f\u6700\u4e86\u89e3\u9019\u500b\u5c08\u6848\u7a0b\u5f0f\u78bc\u7684\u4eba or \u8a72\u5c08\u6848\u7684\u7ba1\u7406\u8005),\u89ba\u5f97\u6b64\u6b21\u7684<code>MR</code>\u662f**\u4e0d\u80fd\u88ab\u63a5\u53d7\u7684**,\u4e5f\u53ef\u4ee5**\u62d2\u7d55\u63a5\u53d7\u6b64\u6b21\u7684MR**,\u4e26\u4e14**\u4e0d\u5408\u4f75**(Merge)\u5230\u4e3b\u5206\u652f(<code>master\u5206\u652f</code>)</li> <li>   \u53c3\u8003\u5716\u7247\u51fa\u8655https://docs.gitlab.com/ee/topics/gitlab_flow.html#git-flow-and-its-problems</li> </ul> </li> <li>\u5728GitLab Flow\u4e2d,\u6163\u4f8b\u4e0a\u90fd\u6703\u5c07<code>\u4e3b\u5206\u652f(master)</code>\u8a2d\u5b9a\u70ba<code>\u88ab\u4fdd\u8b77\u7684\u5206\u652f</code>(protected branch)</li> <li>\u6240\u4ee5\u5982\u679c\u6211\u5011\u60f3\u8981\u5c07\u9019\u6b21\u7684\u4fee\u6539<code>\u5408\u4f75</code>(Merge)\u5230<code>\u4e3b\u5206\u652f(master)</code>\u7684\u8a71,\u5c31\u8981\u5c07<code>MR</code>\u8acb\u6c42\u6307\u6d3e(<code>assign</code>)\u7d66\u64c1\u6709\u7dad\u8b77\u8005\u6b0a\u9650\u7684\u4eba(<code>maintainer permissions</code>)</li> <li>\u95dc\u65bcGitLab \u7684\u6b0a\u9650\u8a2d\u5b9a\u53ef\u4ee5\u53c3\u8003GitLab Permissions</li> </ul>"},{"location":"version_control/git/#git-flow-github-flow-gitlab-flow","title":"Git Flow &amp; GitHub Flow &amp; GitLab Flow \u4e09\u8005\u7684\u6bd4\u8f03","text":"<ul> <li><code>Git Flow</code></li> <li>\u512a\u9ede <ul> <li>\u662f\u4e00\u5957\u5b8c\u6574\u660e\u78ba\u4e14\u6e05\u6670\u7684\u5718\u968a\u5171\u540c\u5354\u4f5c\u6d41\u7a0b</li> <li>\u77ed\u671f\u5206\u652f(<code>hotfix</code> &amp; <code>release</code> &amp; <code>feature\u5206\u652f</code>)\u662f\u4f9d\u64da\"\u4efb\u52d9\"\u5efa\u7acb\u7684,\u7576\u4efb\u52d9\u7d50\u675f\u6642,\u5c31\u6703\u5408\u4f75\u5230\u9577\u671f\u5206\u652f(<code>master</code> &amp; <code>develop\u5206\u652f</code>)</li> </ul> </li> <li>\u7f3a\u9ede<ul> <li>\u76f8\u5c0d\u53e6\u5916\u5169\u7a2e\u5de5\u4f5c\u6d41\u7a0b(<code>workflow</code>)\u4f86\u8aaa\u6703\u6bd4\u8f03\u8907\u96dc</li> <li>\u9700\u983b\u7e41\u5207\u63db\u5206\u652f</li> <li>\u5728\u73fe\u4eca\u7248\u672c\u5feb\u901f\u66f4\u8fed\u7684\u6642\u4ee3,<code>Hotfix</code> &amp; <code>Release\u5206\u652f</code>\u662f\u5e7e\u4e4e\u7528\u4e0d\u5230\u7684\u3002\u56e0\u70ba\u5408\u4f75\u5230<code>master\u5206\u652f</code>\u5f8c\u5982\u679c\u6709<code>bug</code>\u5c31\u76f4\u63a5\u4fee\u5fa9\u4e14\u767c\u5e03\u4e0b\u500b\u7248\u672c\u4e86,\u5982\u679c\u9084\u4f7f\u7528\u9019\u5169\u500b\u5206\u652f,\u9700\u8981**\u5408\u4f75\u56dedevelop\u548cmaster\u5206\u652f**,\u4f46\u5be6\u969b\u4e0a**\u958b\u767c\u8005\u5f88\u5e38\u5fd8\u8a18\u5408\u4f75\u56de\u9019\u5169\u500b\u4e3b\u5206\u652f**</li> </ul> </li> <li>\u53ef\u53c3\u8003Git Flow\u4ecb\u7d39 </li> <li><code>GitHub Flow</code></li> <li>\u512a\u9ede<ul> <li>\u9069\u5408\u5c6c\u65bc\u9700\u8981**\u6301\u7e8c\u767c\u5e03**\u7684\u5c08\u6848</li> <li>\u65b9\u4fbf\u7d50\u5408CI/CD (<code>Continuous integration</code>/<code>Continuous Delivery</code> &amp; <code>Continuous Deployment</code>)</li> <li>\u76f8\u5c0d<code>Git Flow</code>\u7c21\u55ae\u8a31\u591a</li> </ul> </li> <li>\u7f3a\u9ede<ul> <li><code>master\u5206\u652f</code>\u6703\u8b8a\u5f97\u4e0d\u7a69\u5b9a</li> <li><code>\u60c5\u5883\u8aaa\u660e</code></li> <li>\u7576\u9047\u5230iOS\u5b98\u65b9\u7248\u672c\u66f4\u65b0,\u800c\u5982\u679c\u5be9\u6838\u671f\u9593\u53c8\u6709\u65b0\u7248\u672c\u8981\u767c\u5e03\u7684\u8a71,\u9019\u500b\u6642\u5019\u53ea\u6709\u4e00\u500b<code>master\u4e3b\u5206\u652f</code>\u5c31\u6703\u4e0d\u5920\u7528,\u6240\u4ee5\u9084\u5f97\u53e6\u5916\u518d\u5efa\u4e00\u500b\u65b0\u5206\u652f\u4f86\u7dad\u8b77</li> <li>\u7576<code>master\u5206\u652f</code>\u5408\u4f75\u5f8c\u5982\u679c\u4e0d\u767c\u5e03,\u6703\u9020\u6210<code>\u7dda\u4e0a</code>(production)\u548c<code>master\u5206\u652f\u7684\u5167\u5bb9</code>\u4e0d\u4e00\u81f4</li> </ul> </li> <li>\u53ef\u53c3\u8003GitHub Flow\u4ecb\u7d39</li> <li><code>GitLab Flow</code></li> <li>\u512a\u9ede<ul> <li><code>GitLab Flow</code> \u7d50\u5408\u4e86 <code>Git Flow</code> &amp; <code>GitHub Flow</code>\u5169\u8005\u7684\u512a\u9ede</li> <li>\u6709\u958b\u767c\u74b0\u5883\u4e0a\u7684\u5f48\u6027\u53c8\u6709\u55ae\u4e00\u4e3b\u5206\u652f\u7684\u65b9\u4fbf</li> <li><code>master\u5206\u652f</code>\u7684\u5206\u652f\u4e0d\u5920,\u65bc\u662f\u589e\u52a0\u4e86\u4e00\u500b<code>production\u5206\u652f</code>,\u5c08\u9580\u7528\u4f86\u767c\u5e03\u7248\u672c(<code>release</code>)</li> <li>\u65b9\u4fbf\u7d50\u5408CI/CD (<code>Continuous integration</code>/<code>Continuous Delivery</code> &amp; <code>Continuous Deployment</code>)  </li> </ul> </li> <li>\u7f3a\u9ede<ul> <li>\u76f8\u8f03\u65bc<code>GitHub Flow</code>\u4f86\u8aaa\u6703\u6bd4\u8f03\u8907\u96dc</li> <li>\u7576<code>prodcution\u7248\u672c</code>\u9700\u8981\u591a\u500b\u7248\u672c(<code>pre-production\u5206\u652f</code>)\u4f86\u7dad\u8b77\u6642,\u53ef\u80fd\u6703\u8b8a\u5f97\u5982\u540c<code>Git Flow</code>\u4e00\u6a23\u8907\u96dc</li> </ul> </li> <li>\u53ef\u53c3\u8003GitLab Flow\u4ecb\u7d39</li> <li>\u4e09\u7a2e\u5718\u968a\u5171\u540c\u5354\u4f5c\u7684\u5de5\u4f5c\u6d41\u7a0b(workflow)\u7684\u5171\u540c\u9ede</li> <li>\u90fd\u662f**\u529f\u80fd\u9a45\u52d5\u5f0f\u958b\u767c**(<code>Feature-driven development</code>)---\u4ee5\u9700\u6c42\u70ba\u958b\u767c\u7684\u8d77\u9ede,\u5148\u6709\u9700\u6c42\u624d\u6709\u4ee5\u4e0a\u90a3\u4e9b\u5206\u652f,\u4e14\u958b\u767c\u5b8c\u5f8c\u8a72\u5206\u652f\u5c31\u6703\u88ab\u5408\u4f75\u5230\u4e3b\u5206\u652f,\u7136\u5f8c\u522a\u9664</li> <li><code>Git Flow</code> &amp; <code>GitHub Flow</code> &amp; <code>GitLab Flow</code> \u4e09\u7a2e\u5de5\u4f5c\u6d41\u7a0b\u7684\u6bd4\u8f03\u53ef\u53c3\u80034 branching workflows for Git</li> </ul>"},{"location":"version_control/git/#_11","title":"\u89c0\u5ff5\u88dc\u5145","text":"<p><code>git hash-object</code> - Compute object ID and optionally creates a blob from a file</p>"},{"location":"version_control/git/#terminal","title":"\u7d42\u7aef\u6a5f(Terminal)\u662f\u4ec0\u9ebc?","text":"<ul> <li>\u7d42\u7aef\u6a5f\u672c\u8eab\u901a\u5e38\u4e0d\u662f\u4e00\u90e8\u96fb\u8166,\u5b83\u672c\u8eab\u6c92\u6709\u904b\u7b97\u80fd\u529b,\u50c5\u7528\u4f86\u986f\u793a\u8cc7\u6599\u53ca\u8f38\u5165\u8cc7\u6599,\u6240\u6709\u7684\u8a08\u7b97\u90fd\u662f\u5728\u4e3b\u6a5f\u4e0a\u8655\u7406\u7684</li> <li>\u5176\u5be6\u7d42\u7aef\u6a5f\u5c31\u662f\u53ef\u4ee5\u8b93\u4f7f\u7528\u8005\u8f38\u5165\u6307\u4ee4,\u4f86\u8ddf\u96fb\u8166\u9032\u884c\u4e92\u52d5</li> </ul>"},{"location":"version_control/git/#vim-gitvim","title":"Vim \u662fGit\u7684\u9810\u8a2d\u7de8\u8f2f\u5668,Vim\u4e3b\u8981\u5e38\u7528\u7684\u5169\u7a2e\u6a21\u5f0f","text":"<ul> <li>Normal\u6a21\u5f0f:\u7121\u6cd5\u8f38\u5165\u6587\u5b57,\u50c5\u80fd\u8907\u88fd,\u8cbc\u4e0a,\u5b58\u6a94,\u96e2\u958b \u52d5\u4f5c</li> <li>Insert\u6a21\u5f0f:\u9700\u8981\u5148\u6309\u4e0b <code>I or A or O</code> ,\u624d\u80fd\u958b\u59cb\u8f38\u5165\u6587\u5b57</li> <li>\u5728Insert\u6a21\u5f0f\u4e0b,\u6309<code>esc</code>\u53ef\u9000\u56de\u5230Normal\u6a21\u5f0f</li> <li>\u5728Normal\u6a21\u5f0f\u4e0b,\u6309\u4e0b<code>:wq!</code> ,\u4ee3\u8868\u5f37\u5236\u5b58\u6a94\u5b8c\u6210\u5f8c\u76f4\u63a5\u95dc\u9589\u9019\u500b\u6a94\u6848</li> <li>     \u53c3\u8003\u5716\u7247\u51fa\u8655https://gitbook.tw/</li> </ul>"},{"location":"version_control/git/#sha-1","title":"SHA-1(\u5b89\u5168\u6563\u5217\u6f14\u7b97\u6cd5) \u4ecb\u7d39","text":"<ul> <li><code>SHA-1</code> (Secure Hash Algorithm 1)\u662f\u4e00\u7a2e\u96dc\u6e4a\u6f14\u7b97\u6cd5,\u8a08\u7b97\u4e4b\u5f8c\u7684\u7d50\u679c\u901a\u5e38\u6703\u4ee5<code>40</code>\u500b<code>16\u9032\u4f4d</code>\u7684\u6578\u5b57\u65b9\u5f0f\u4f86\u5448\u73fe</li> <li><code>SHA-1</code>: \u8a72\u6f14\u7b97\u6cd5\u7684\u7279\u6027\u4e4b\u4e00\u5c31\u662f,\u7576\u8f38\u5165\u7684\u503c\u76f8\u540c,\u5c31\u6703\u6709\u76f8\u540c\u7684\u8f38\u51fa\u503c</li> <li>\u5728Git\u4e2d,\u6240\u6709\u7269\u4ef6\u7684\"\u7de8\u865f\"\u7684\u8a08\u7b97,\u4e3b\u8981\u90fd\u662f\u900f\u904e\u9019\u500b\u6f14\u7b97\u6cd5\u7b97\u51fa\u4f86\u7684</li> <li>\u78b0\u649e(collision): \u4ee3\u8868\u8f38\u5165\u5169\u500b\u4e0d\u540c\u7684\u503c(\u4e0d\u540c\u7684\u6a94\u6848),\u537b\u5f97\u5230\u76f8\u540c\u7684\u7d50\u679c(\u76f8\u540c\u7684SHA-1\u503c),\u9019\u7a2e\u60c5\u6cc1\u7a31\u70ba\u78b0\u649e(collision)</li> <li>\u5728Git\u88e1,\u4e0d\u540c\u7a2e\u985e\u7684Git\u7269\u4ef6,<code>SHA-1</code>\u503c\u7684\u8a08\u7b97\u65b9\u5f0f\u6703\u6709\u4e9b\u4e0d\u540c</li> <li>\u53ef\u4ee5\u5229\u7528Git\u5167\u5efa\u7684$ <code>git hash-object</code> \u6307\u4ee4\u4f86\u5e6b\u5fd9\u7b97<code>SHA-1\u503c</code>,\u4e5f\u53ef\u4ee5\u5f97\u5230\u76f8\u540c\u7684\u7d50\u679c<ul> <li>$ <code>git hash-object</code>: \u8a08\u7b97\u51fa\u7269\u4ef6\u7684ID(<code>SHA-1\u503c</code>),\u4e26\u9078\u64c7\u6027\u5730\u5f9e\u4e00\u500b\u6307\u5b9a\u7684\u6a94\u6848,\u4f86\u5efa\u7acb\u4e00\u500bBlob\u7269\u4ef6<ul> <li><code>--stdin</code>: \u8b80\u53d6\u7269\u4ef6\u4f86\u81ea\u6a19\u6e96\u8f38\u5165,\u800c\u4e0d\u662f\u4f86\u81ea\u4e00\u500b\u6a94\u6848</li> </ul> </li> <li>\u4f8b\u5982: <code>Blob</code>\u7269\u4ef6\u7684<code>SHA-1</code>\u503c\u8a08\u7b97\u516c\u5f0f\u70ba</li> <li><code>blob\u5b57\u6a23</code> (\u82e5\u70ba<code>commit\u7269\u4ef6</code>,\u5247\u70ba<code>commit</code>\u5b57\u6a23;\u82e5\u70ba<code>Tree\u7269\u4ef6</code>,\u5247\u6539\u70ba<code>Tree</code>\u5b57\u6a23)</li> <li><code>\u4e00\u500b\u7a7a\u767d\u5b57\u5143</code></li> <li><code>\u8f38\u5165\u5167\u5bb9\u7684\u9577\u5ea6</code></li> <li><code>Null\u7d50\u675f\u7b26\u865f</code></li> <li><code>\u8f38\u5165\u5167\u5bb9</code></li> <li>\u5f9e\u4e0a\u5217\u516c\u5f0f\u53ef\u4ee5\u770b\u51fa,\u7b2c1~5\u9805\u90fd\u6c92\u6709\u8ddf<code>\u6642\u9593</code>\u6216\u662f<code>\u4e82\u78bc</code>\u6709\u95dc\u7684\u5167\u5bb9,\u53ea\u8ddf<code>\u8981\u8a08\u7b97\u7684\u5167\u5bb9</code>\u6709\u95dc</li> <li>\u4f46\u662f<code>Commit\u7269\u4ef6</code>\u548c<code>Tag\u7269\u4ef6</code>\u5247\u9664\u5916,\u56e0\u70ba\u9019\u5169\u500b\u7269\u4ef6\u672c\u8eab\u5c31<code>\u6709\u5305\u62ec\u6642\u9593</code></li> <li>\u6240\u4ee5,\u4ee5<code>Blob\u7269\u4ef6</code>\u4f86\u8aaa,\u4e0d\u7ba1\u662f\u5728\u4ec0\u9ebc\u6642\u9593\u6216\u4e0d\u540c\u7684\u96fb\u8166\u4e0a,\u4e00\u6a23\u7684\u8f38\u5165\u503c,\u5c31\u6703\u6709\u4e00\u6a23\u7684\u5167\u5bb9</li> <li>\u4f8b\u5982: $ <code>printf \"Hello, Hans Tsai\" | git hash-object --stdin</code> </li> <li></li> </ul> </li> </ul>"},{"location":"version_control/git/#_12","title":"\u53c3\u8003\u8cc7\u6599\u4f86\u6e90","text":""},{"location":"version_control/git/#_13","title":"\u66f8\u7c4d","text":"<ul> <li>\u70ba\u4f60\u81ea\u5df1\u5b78Git</li> <li>Pro Git</li> </ul>"},{"location":"version_control/git/#medium","title":"Medium","text":"<ul> <li>\u4e09\u7a2e\u5de5\u4f5c\u6d41\u7a0b: Git Flow &amp; GitHub Flow &amp; GitLab Flow \u7684\u4ecb\u7d39</li> <li>4 branching workflows for Git</li> </ul>"},{"location":"version_control/git/#it","title":"iT\u90a6\u5e6b\u5fd9","text":"<ul> <li>\u7528\u6a02\u9ad8\u73a9\u8f49 GIT \u7248\u672c\u63a7\u5236</li> <li>30\u5929\u7cbe\u901aGit\u7248\u672c\u63a7\u7ba1---by \u9ec3\u4fdd\u7fd5(Will \u4fdd\u54e5)</li> </ul>"},{"location":"version_control/git/#_14","title":"\u7df4\u7fd2\u5834","text":"<ul> <li>Git \u7df4\u7fd2\u5834</li> <li>Visualizing Git Concepts with D3---\u53ef\u7df4\u7fd2\u57fa\u790eGit\u6307\u4ee4</li> </ul>"},{"location":"version_control/git/#_15","title":"\u514d\u8cbb\u7dda\u4e0a\u5b78\u7fd2\u8cc7\u6e90","text":"<ul> <li>GitHub Cheat Sheets --- referenced to Git Official Docs</li> <li>Visual Git Cheat Sheets --- reference to Git Official Docs</li> <li>Resources to learn Git</li> </ul>"}]}